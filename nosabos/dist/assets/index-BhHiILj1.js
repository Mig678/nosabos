function _mergeNamespaces(n,e){for(var s=0;s<e.length;s++){const o=e[s];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in n)){const c=Object.getOwnPropertyDescriptor(o,a);c&&Object.defineProperty(n,a,c.get?c:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&o(f)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();var commonjsGlobal$2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var jsxRuntime={exports:{}},reactJsxRuntime_production={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactJsxRuntime_production;function requireReactJsxRuntime_production(){if(hasRequiredReactJsxRuntime_production)return reactJsxRuntime_production;hasRequiredReactJsxRuntime_production=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function s(o,a,c){var f=null;if(c!==void 0&&(f=""+c),a.key!==void 0&&(f=""+a.key),"key"in a){c={};for(var h in a)h!=="key"&&(c[h]=a[h])}else c=a;return a=c.ref,{$$typeof:n,type:o,key:f,ref:a!==void 0?a:null,props:c}}return reactJsxRuntime_production.Fragment=e,reactJsxRuntime_production.jsx=s,reactJsxRuntime_production.jsxs=s,reactJsxRuntime_production}var hasRequiredJsxRuntime;function requireJsxRuntime(){return hasRequiredJsxRuntime||(hasRequiredJsxRuntime=1,jsxRuntime.exports=requireReactJsxRuntime_production()),jsxRuntime.exports}var jsxRuntimeExports=requireJsxRuntime(),react={exports:{}},react_production={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReact_production;function requireReact_production(){if(hasRequiredReact_production)return react_production;hasRequiredReact_production=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),f=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function T(he){return he===null||typeof he!="object"?null:(he=E&&he[E]||he["@@iterator"],typeof he=="function"?he:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},A=Object.assign,R={};function V(he,be,Se){this.props=he,this.context=be,this.refs=R,this.updater=Se||w}V.prototype.isReactComponent={},V.prototype.setState=function(he,be){if(typeof he!="object"&&typeof he!="function"&&he!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,he,be,"setState")},V.prototype.forceUpdate=function(he){this.updater.enqueueForceUpdate(this,he,"forceUpdate")};function te(){}te.prototype=V.prototype;function se(he,be,Se){this.props=he,this.context=be,this.refs=R,this.updater=Se||w}var re=se.prototype=new te;re.constructor=se,A(re,V.prototype),re.isPureReactComponent=!0;var ye=Array.isArray,D={H:null,A:null,T:null,S:null,V:null},ae=Object.prototype.hasOwnProperty;function z(he,be,Se,Ae,Be,Ue){return Se=Ue.ref,{$$typeof:n,type:he,key:be,ref:Se!==void 0?Se:null,props:Ue}}function H(he,be){return z(he.type,be,void 0,void 0,void 0,he.props)}function X(he){return typeof he=="object"&&he!==null&&he.$$typeof===n}function le(he){var be={"=":"=0",":":"=2"};return"$"+he.replace(/[=:]/g,function(Se){return be[Se]})}var Z=/\/+/g;function ne(he,be){return typeof he=="object"&&he!==null&&he.key!=null?le(""+he.key):be.toString(36)}function W(){}function xe(he){switch(he.status){case"fulfilled":return he.value;case"rejected":throw he.reason;default:switch(typeof he.status=="string"?he.then(W,W):(he.status="pending",he.then(function(be){he.status==="pending"&&(he.status="fulfilled",he.value=be)},function(be){he.status==="pending"&&(he.status="rejected",he.reason=be)})),he.status){case"fulfilled":return he.value;case"rejected":throw he.reason}}throw he}function de(he,be,Se,Ae,Be){var Ue=typeof he;(Ue==="undefined"||Ue==="boolean")&&(he=null);var qe=!1;if(he===null)qe=!0;else switch(Ue){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(he.$$typeof){case n:case e:qe=!0;break;case _:return qe=he._init,de(qe(he._payload),be,Se,Ae,Be)}}if(qe)return Be=Be(he),qe=Ae===""?"."+ne(he,0):Ae,ye(Be)?(Se="",qe!=null&&(Se=qe.replace(Z,"$&/")+"/"),de(Be,be,Se,"",function(Ze){return Ze})):Be!=null&&(X(Be)&&(Be=H(Be,Se+(Be.key==null||he&&he.key===Be.key?"":(""+Be.key).replace(Z,"$&/")+"/")+qe)),be.push(Be)),1;qe=0;var Xe=Ae===""?".":Ae+":";if(ye(he))for(var Ke=0;Ke<he.length;Ke++)Ae=he[Ke],Ue=Xe+ne(Ae,Ke),qe+=de(Ae,be,Se,Ue,Be);else if(Ke=T(he),typeof Ke=="function")for(he=Ke.call(he),Ke=0;!(Ae=he.next()).done;)Ae=Ae.value,Ue=Xe+ne(Ae,Ke++),qe+=de(Ae,be,Se,Ue,Be);else if(Ue==="object"){if(typeof he.then=="function")return de(xe(he),be,Se,Ae,Be);throw be=String(he),Error("Objects are not valid as a React child (found: "+(be==="[object Object]"?"object with keys {"+Object.keys(he).join(", ")+"}":be)+"). If you meant to render a collection of children, use an array instead.")}return qe}function oe(he,be,Se){if(he==null)return he;var Ae=[],Be=0;return de(he,Ae,"","",function(Ue){return be.call(Se,Ue,Be++)}),Ae}function _e(he){if(he._status===-1){var be=he._result;be=be(),be.then(function(Se){(he._status===0||he._status===-1)&&(he._status=1,he._result=Se)},function(Se){(he._status===0||he._status===-1)&&(he._status=2,he._result=Se)}),he._status===-1&&(he._status=0,he._result=be)}if(he._status===1)return he._result.default;throw he._result}var Re=typeof reportError=="function"?reportError:function(he){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var be=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof he=="object"&&he!==null&&typeof he.message=="string"?String(he.message):String(he),error:he});if(!window.dispatchEvent(be))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",he);return}console.error(he)};function Ie(){}return react_production.Children={map:oe,forEach:function(he,be,Se){oe(he,function(){be.apply(this,arguments)},Se)},count:function(he){var be=0;return oe(he,function(){be++}),be},toArray:function(he){return oe(he,function(be){return be})||[]},only:function(he){if(!X(he))throw Error("React.Children.only expected to receive a single React element child.");return he}},react_production.Component=V,react_production.Fragment=s,react_production.Profiler=a,react_production.PureComponent=se,react_production.StrictMode=o,react_production.Suspense=m,react_production.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,react_production.__COMPILER_RUNTIME={__proto__:null,c:function(he){return D.H.useMemoCache(he)}},react_production.cache=function(he){return function(){return he.apply(null,arguments)}},react_production.cloneElement=function(he,be,Se){if(he==null)throw Error("The argument must be a React element, but you passed "+he+".");var Ae=A({},he.props),Be=he.key,Ue=void 0;if(be!=null)for(qe in be.ref!==void 0&&(Ue=void 0),be.key!==void 0&&(Be=""+be.key),be)!ae.call(be,qe)||qe==="key"||qe==="__self"||qe==="__source"||qe==="ref"&&be.ref===void 0||(Ae[qe]=be[qe]);var qe=arguments.length-2;if(qe===1)Ae.children=Se;else if(1<qe){for(var Xe=Array(qe),Ke=0;Ke<qe;Ke++)Xe[Ke]=arguments[Ke+2];Ae.children=Xe}return z(he.type,Be,void 0,void 0,Ue,Ae)},react_production.createContext=function(he){return he={$$typeof:f,_currentValue:he,_currentValue2:he,_threadCount:0,Provider:null,Consumer:null},he.Provider=he,he.Consumer={$$typeof:c,_context:he},he},react_production.createElement=function(he,be,Se){var Ae,Be={},Ue=null;if(be!=null)for(Ae in be.key!==void 0&&(Ue=""+be.key),be)ae.call(be,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(Be[Ae]=be[Ae]);var qe=arguments.length-2;if(qe===1)Be.children=Se;else if(1<qe){for(var Xe=Array(qe),Ke=0;Ke<qe;Ke++)Xe[Ke]=arguments[Ke+2];Be.children=Xe}if(he&&he.defaultProps)for(Ae in qe=he.defaultProps,qe)Be[Ae]===void 0&&(Be[Ae]=qe[Ae]);return z(he,Ue,void 0,void 0,null,Be)},react_production.createRef=function(){return{current:null}},react_production.forwardRef=function(he){return{$$typeof:h,render:he}},react_production.isValidElement=X,react_production.lazy=function(he){return{$$typeof:_,_payload:{_status:-1,_result:he},_init:_e}},react_production.memo=function(he,be){return{$$typeof:g,type:he,compare:be===void 0?null:be}},react_production.startTransition=function(he){var be=D.T,Se={};D.T=Se;try{var Ae=he(),Be=D.S;Be!==null&&Be(Se,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(Ie,Re)}catch(Ue){Re(Ue)}finally{D.T=be}},react_production.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},react_production.use=function(he){return D.H.use(he)},react_production.useActionState=function(he,be,Se){return D.H.useActionState(he,be,Se)},react_production.useCallback=function(he,be){return D.H.useCallback(he,be)},react_production.useContext=function(he){return D.H.useContext(he)},react_production.useDebugValue=function(){},react_production.useDeferredValue=function(he,be){return D.H.useDeferredValue(he,be)},react_production.useEffect=function(he,be,Se){var Ae=D.H;if(typeof Se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Ae.useEffect(he,be)},react_production.useId=function(){return D.H.useId()},react_production.useImperativeHandle=function(he,be,Se){return D.H.useImperativeHandle(he,be,Se)},react_production.useInsertionEffect=function(he,be){return D.H.useInsertionEffect(he,be)},react_production.useLayoutEffect=function(he,be){return D.H.useLayoutEffect(he,be)},react_production.useMemo=function(he,be){return D.H.useMemo(he,be)},react_production.useOptimistic=function(he,be){return D.H.useOptimistic(he,be)},react_production.useReducer=function(he,be,Se){return D.H.useReducer(he,be,Se)},react_production.useRef=function(he){return D.H.useRef(he)},react_production.useState=function(he){return D.H.useState(he)},react_production.useSyncExternalStore=function(he,be,Se){return D.H.useSyncExternalStore(he,be,Se)},react_production.useTransition=function(){return D.H.useTransition()},react_production.version="19.1.1",react_production}var hasRequiredReact;function requireReact(){return hasRequiredReact||(hasRequiredReact=1,react.exports=requireReact_production()),react.exports}var reactExports=requireReact();const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);var client={exports:{}},reactDomClient_production={},scheduler={exports:{}},scheduler_production={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredScheduler_production;function requireScheduler_production(){return hasRequiredScheduler_production||(hasRequiredScheduler_production=1,(function(n){function e(oe,_e){var Re=oe.length;oe.push(_e);e:for(;0<Re;){var Ie=Re-1>>>1,he=oe[Ie];if(0<a(he,_e))oe[Ie]=_e,oe[Re]=he,Re=Ie;else break e}}function s(oe){return oe.length===0?null:oe[0]}function o(oe){if(oe.length===0)return null;var _e=oe[0],Re=oe.pop();if(Re!==_e){oe[0]=Re;e:for(var Ie=0,he=oe.length,be=he>>>1;Ie<be;){var Se=2*(Ie+1)-1,Ae=oe[Se],Be=Se+1,Ue=oe[Be];if(0>a(Ae,Re))Be<he&&0>a(Ue,Ae)?(oe[Ie]=Ue,oe[Be]=Re,Ie=Be):(oe[Ie]=Ae,oe[Se]=Re,Ie=Se);else if(Be<he&&0>a(Ue,Re))oe[Ie]=Ue,oe[Be]=Re,Ie=Be;else break e}}return _e}function a(oe,_e){var Re=oe.sortIndex-_e.sortIndex;return Re!==0?Re:oe.id-_e.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var f=Date,h=f.now();n.unstable_now=function(){return f.now()-h}}var m=[],g=[],_=1,E=null,T=3,w=!1,A=!1,R=!1,V=!1,te=typeof setTimeout=="function"?setTimeout:null,se=typeof clearTimeout=="function"?clearTimeout:null,re=typeof setImmediate<"u"?setImmediate:null;function ye(oe){for(var _e=s(g);_e!==null;){if(_e.callback===null)o(g);else if(_e.startTime<=oe)o(g),_e.sortIndex=_e.expirationTime,e(m,_e);else break;_e=s(g)}}function D(oe){if(R=!1,ye(oe),!A)if(s(m)!==null)A=!0,ae||(ae=!0,ne());else{var _e=s(g);_e!==null&&de(D,_e.startTime-oe)}}var ae=!1,z=-1,H=5,X=-1;function le(){return V?!0:!(n.unstable_now()-X<H)}function Z(){if(V=!1,ae){var oe=n.unstable_now();X=oe;var _e=!0;try{e:{A=!1,R&&(R=!1,se(z),z=-1),w=!0;var Re=T;try{t:{for(ye(oe),E=s(m);E!==null&&!(E.expirationTime>oe&&le());){var Ie=E.callback;if(typeof Ie=="function"){E.callback=null,T=E.priorityLevel;var he=Ie(E.expirationTime<=oe);if(oe=n.unstable_now(),typeof he=="function"){E.callback=he,ye(oe),_e=!0;break t}E===s(m)&&o(m),ye(oe)}else o(m);E=s(m)}if(E!==null)_e=!0;else{var be=s(g);be!==null&&de(D,be.startTime-oe),_e=!1}}break e}finally{E=null,T=Re,w=!1}_e=void 0}}finally{_e?ne():ae=!1}}}var ne;if(typeof re=="function")ne=function(){re(Z)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,xe=W.port2;W.port1.onmessage=Z,ne=function(){xe.postMessage(null)}}else ne=function(){te(Z,0)};function de(oe,_e){z=te(function(){oe(n.unstable_now())},_e)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(oe){switch(T){case 1:case 2:case 3:var _e=3;break;default:_e=T}var Re=T;T=_e;try{return oe()}finally{T=Re}},n.unstable_requestPaint=function(){V=!0},n.unstable_runWithPriority=function(oe,_e){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var Re=T;T=oe;try{return _e()}finally{T=Re}},n.unstable_scheduleCallback=function(oe,_e,Re){var Ie=n.unstable_now();switch(typeof Re=="object"&&Re!==null?(Re=Re.delay,Re=typeof Re=="number"&&0<Re?Ie+Re:Ie):Re=Ie,oe){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=Re+he,oe={id:_++,callback:_e,priorityLevel:oe,startTime:Re,expirationTime:he,sortIndex:-1},Re>Ie?(oe.sortIndex=Re,e(g,oe),s(m)===null&&oe===s(g)&&(R?(se(z),z=-1):R=!0,de(D,Re-Ie))):(oe.sortIndex=he,e(m,oe),A||w||(A=!0,ae||(ae=!0,ne()))),oe},n.unstable_shouldYield=le,n.unstable_wrapCallback=function(oe){var _e=T;return function(){var Re=T;T=_e;try{return oe.apply(this,arguments)}finally{T=Re}}}})(scheduler_production)),scheduler_production}var hasRequiredScheduler;function requireScheduler(){return hasRequiredScheduler||(hasRequiredScheduler=1,scheduler.exports=requireScheduler_production()),scheduler.exports}var reactDom={exports:{}},reactDom_production={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDom_production;function requireReactDom_production(){if(hasRequiredReactDom_production)return reactDom_production;hasRequiredReactDom_production=1;var n=requireReact();function e(m){var g="https://react.dev/errors/"+m;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+m+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var o={d:{f:s,r:function(){throw Error(e(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},a=Symbol.for("react.portal");function c(m,g,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:a,key:E==null?null:""+E,children:m,containerInfo:g,implementation:_}}var f=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(m,g){if(m==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return reactDom_production.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=o,reactDom_production.createPortal=function(m,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(m,g,null,_)},reactDom_production.flushSync=function(m){var g=f.T,_=o.p;try{if(f.T=null,o.p=2,m)return m()}finally{f.T=g,o.p=_,o.d.f()}},reactDom_production.preconnect=function(m,g){typeof m=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,o.d.C(m,g))},reactDom_production.prefetchDNS=function(m){typeof m=="string"&&o.d.D(m)},reactDom_production.preinit=function(m,g){if(typeof m=="string"&&g&&typeof g.as=="string"){var _=g.as,E=h(_,g.crossOrigin),T=typeof g.integrity=="string"?g.integrity:void 0,w=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?o.d.S(m,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:E,integrity:T,fetchPriority:w}):_==="script"&&o.d.X(m,{crossOrigin:E,integrity:T,fetchPriority:w,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},reactDom_production.preinitModule=function(m,g){if(typeof m=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=h(g.as,g.crossOrigin);o.d.M(m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&o.d.M(m)},reactDom_production.preload=function(m,g){if(typeof m=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,E=h(_,g.crossOrigin);o.d.L(m,_,{crossOrigin:E,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},reactDom_production.preloadModule=function(m,g){if(typeof m=="string")if(g){var _=h(g.as,g.crossOrigin);o.d.m(m,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else o.d.m(m)},reactDom_production.requestFormReset=function(m){o.d.r(m)},reactDom_production.unstable_batchedUpdates=function(m,g){return m(g)},reactDom_production.useFormState=function(m,g,_){return f.H.useFormState(m,g,_)},reactDom_production.useFormStatus=function(){return f.H.useHostTransitionStatus()},reactDom_production.version="19.1.1",reactDom_production}var hasRequiredReactDom;function requireReactDom(){if(hasRequiredReactDom)return reactDom.exports;hasRequiredReactDom=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),reactDom.exports=requireReactDom_production(),reactDom.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactDomClient_production;function requireReactDomClient_production(){if(hasRequiredReactDomClient_production)return reactDomClient_production;hasRequiredReactDomClient_production=1;var n=requireScheduler(),e=requireReact(),s=requireReactDom();function o(l){var u="https://react.dev/errors/"+l;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+l+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(l){return!(!l||l.nodeType!==1&&l.nodeType!==9&&l.nodeType!==11)}function c(l){var u=l,p=l;if(l.alternate)for(;u.return;)u=u.return;else{l=u;do u=l,(u.flags&4098)!==0&&(p=u.return),l=u.return;while(l)}return u.tag===3?p:null}function f(l){if(l.tag===13){var u=l.memoizedState;if(u===null&&(l=l.alternate,l!==null&&(u=l.memoizedState)),u!==null)return u.dehydrated}return null}function h(l){if(c(l)!==l)throw Error(o(188))}function m(l){var u=l.alternate;if(!u){if(u=c(l),u===null)throw Error(o(188));return u!==l?null:l}for(var p=l,y=u;;){var v=p.return;if(v===null)break;var S=v.alternate;if(S===null){if(y=v.return,y!==null){p=y;continue}break}if(v.child===S.child){for(S=v.child;S;){if(S===p)return h(v),l;if(S===y)return h(v),u;S=S.sibling}throw Error(o(188))}if(p.return!==y.return)p=v,y=S;else{for(var Y=!1,ce=v.child;ce;){if(ce===p){Y=!0,p=v,y=S;break}if(ce===y){Y=!0,y=v,p=S;break}ce=ce.sibling}if(!Y){for(ce=S.child;ce;){if(ce===p){Y=!0,p=S,y=v;break}if(ce===y){Y=!0,y=S,p=v;break}ce=ce.sibling}if(!Y)throw Error(o(189))}}if(p.alternate!==y)throw Error(o(190))}if(p.tag!==3)throw Error(o(188));return p.stateNode.current===p?l:u}function g(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l;for(l=l.child;l!==null;){if(u=g(l),u!==null)return u;l=l.sibling}return null}var _=Object.assign,E=Symbol.for("react.element"),T=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),te=Symbol.for("react.provider"),se=Symbol.for("react.consumer"),re=Symbol.for("react.context"),ye=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),ae=Symbol.for("react.suspense_list"),z=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),X=Symbol.for("react.activity"),le=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function ne(l){return l===null||typeof l!="object"?null:(l=Z&&l[Z]||l["@@iterator"],typeof l=="function"?l:null)}var W=Symbol.for("react.client.reference");function xe(l){if(l==null)return null;if(typeof l=="function")return l.$$typeof===W?null:l.displayName||l.name||null;if(typeof l=="string")return l;switch(l){case A:return"Fragment";case V:return"Profiler";case R:return"StrictMode";case D:return"Suspense";case ae:return"SuspenseList";case X:return"Activity"}if(typeof l=="object")switch(l.$$typeof){case w:return"Portal";case re:return(l.displayName||"Context")+".Provider";case se:return(l._context.displayName||"Context")+".Consumer";case ye:var u=l.render;return l=l.displayName,l||(l=u.displayName||u.name||"",l=l!==""?"ForwardRef("+l+")":"ForwardRef"),l;case z:return u=l.displayName||null,u!==null?u:xe(l.type)||"Memo";case H:u=l._payload,l=l._init;try{return xe(l(u))}catch{}}return null}var de=Array.isArray,oe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,_e=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Re={pending:!1,data:null,method:null,action:null},Ie=[],he=-1;function be(l){return{current:l}}function Se(l){0>he||(l.current=Ie[he],Ie[he]=null,he--)}function Ae(l,u){he++,Ie[he]=l.current,l.current=u}var Be=be(null),Ue=be(null),qe=be(null),Xe=be(null);function Ke(l,u){switch(Ae(qe,u),Ae(Ue,l),Ae(Be,null),u.nodeType){case 9:case 11:l=(l=u.documentElement)&&(l=l.namespaceURI)?Ph(l):0;break;default:if(l=u.tagName,u=u.namespaceURI)u=Ph(u),l=kh(u,l);else switch(l){case"svg":l=1;break;case"math":l=2;break;default:l=0}}Se(Be),Ae(Be,l)}function Ze(){Se(Be),Se(Ue),Se(qe)}function it(l){l.memoizedState!==null&&Ae(Xe,l);var u=Be.current,p=kh(u,l.type);u!==p&&(Ae(Ue,l),Ae(Be,p))}function wn(l){Ue.current===l&&(Se(Be),Se(Ue)),Xe.current===l&&(Se(Xe),$a._currentValue=Re)}var yn=Object.prototype.hasOwnProperty,Mt=n.unstable_scheduleCallback,Ge=n.unstable_cancelCallback,ln=n.unstable_shouldYield,kt=n.unstable_requestPaint,Ft=n.unstable_now,lr=n.unstable_getCurrentPriorityLevel,Fn=n.unstable_ImmediatePriority,Hn=n.unstable_UserBlockingPriority,Qn=n.unstable_NormalPriority,Nn=n.unstable_LowPriority,Gn=n.unstable_IdlePriority,Vr=n.log,ir=n.unstable_setDisableYieldValue,Vn=null,ie=null;function C(l){if(typeof Vr=="function"&&ir(l),ie&&typeof ie.setStrictMode=="function")try{ie.setStrictMode(Vn,l)}catch{}}var P=Math.clz32?Math.clz32:ke,ue=Math.log,Ee=Math.LN2;function ke(l){return l>>>=0,l===0?32:31-(ue(l)/Ee|0)|0}var Le=256,tt=4194304;function st(l){var u=l&42;if(u!==0)return u;switch(l&-l){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return l&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return l}}function At(l,u,p){var y=l.pendingLanes;if(y===0)return 0;var v=0,S=l.suspendedLanes,Y=l.pingedLanes;l=l.warmLanes;var ce=y&134217727;return ce!==0?(y=ce&~S,y!==0?v=st(y):(Y&=ce,Y!==0?v=st(Y):p||(p=ce&~l,p!==0&&(v=st(p))))):(ce=y&~S,ce!==0?v=st(ce):Y!==0?v=st(Y):p||(p=y&~l,p!==0&&(v=st(p)))),v===0?0:u!==0&&u!==v&&(u&S)===0&&(S=v&-v,p=u&-u,S>=p||S===32&&(p&4194048)!==0)?u:v}function Wt(l,u){return(l.pendingLanes&~(l.suspendedLanes&~l.pingedLanes)&u)===0}function Fe(l,u){switch(l){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dt(){var l=Le;return Le<<=1,(Le&4194048)===0&&(Le=256),l}function wt(){var l=tt;return tt<<=1,(tt&62914560)===0&&(tt=4194304),l}function dn(l){for(var u=[],p=0;31>p;p++)u.push(l);return u}function jt(l,u){l.pendingLanes|=u,u!==268435456&&(l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0)}function Je(l,u,p,y,v,S){var Y=l.pendingLanes;l.pendingLanes=p,l.suspendedLanes=0,l.pingedLanes=0,l.warmLanes=0,l.expiredLanes&=p,l.entangledLanes&=p,l.errorRecoveryDisabledLanes&=p,l.shellSuspendCounter=0;var ce=l.entanglements,ve=l.expirationTimes,$e=l.hiddenUpdates;for(p=Y&~p;0<p;){var je=31-P(p),He=1<<je;ce[je]=0,ve[je]=-1;var De=$e[je];if(De!==null)for($e[je]=null,je=0;je<De.length;je++){var Me=De[je];Me!==null&&(Me.lane&=-536870913)}p&=~He}y!==0&&bn(l,y,0),S!==0&&v===0&&l.tag!==0&&(l.suspendedLanes|=S&~(Y&~u))}function bn(l,u,p){l.pendingLanes|=u,l.suspendedLanes&=~u;var y=31-P(u);l.entangledLanes|=u,l.entanglements[y]=l.entanglements[y]|1073741824|p&4194090}function Gt(l,u){var p=l.entangledLanes|=u;for(l=l.entanglements;p;){var y=31-P(p),v=1<<y;v&u|l[y]&u&&(l[y]|=u),p&=~v}}function Lt(l){switch(l){case 2:l=1;break;case 8:l=4;break;case 32:l=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:l=128;break;case 268435456:l=134217728;break;default:l=0}return l}function cr(l){return l&=-l,2<l?8<l?(l&134217727)!==0?32:268435456:8:2}function jn(){var l=_e.p;return l!==0?l:(l=window.event,l===void 0?32:Xh(l.type))}function Un(l,u){var p=_e.p;try{return _e.p=l,u()}finally{_e.p=p}}var fn=Math.random().toString(36).slice(2),Rn="__reactFiber$"+fn,En="__reactProps$"+fn,pn="__reactContainer$"+fn,Wn="__reactEvents$"+fn,gr="__reactListeners$"+fn,sr="__reactHandles$"+fn,$r="__reactResources$"+fn,gi="__reactMarker$"+fn;function ii(l){delete l[Rn],delete l[En],delete l[Wn],delete l[gr],delete l[sr]}function yi(l){var u=l[Rn];if(u)return u;for(var p=l.parentNode;p;){if(u=p[pn]||p[Rn]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(l=Mh(l);l!==null;){if(p=l[Rn])return p;l=Mh(l)}return u}l=p,p=l.parentNode}return null}function Tr(l){if(l=l[Rn]||l[pn]){var u=l.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return l}return null}function si(l){var u=l.tag;if(u===5||u===26||u===27||u===6)return l.stateNode;throw Error(o(33))}function Sr(l){var u=l[$r];return u||(u=l[$r]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Zn(l){l[gi]=!0}var Ns=new Set,ss={};function Ur(l,u){zr(l,u),zr(l+"Capture",u)}function zr(l,u){for(ss[l]=u,l=0;l<u.length;l++)Ns.add(u[l])}var lo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Mi={},_i={};function co(l){return yn.call(_i,l)?!0:yn.call(Mi,l)?!1:lo.test(l)?_i[l]=!0:(Mi[l]=!0,!1)}function Hr(l,u,p){if(co(u))if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":l.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){l.removeAttribute(u);return}}l.setAttribute(u,""+p)}}function qr(l,u,p){if(p===null)l.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(u);return}l.setAttribute(u,""+p)}}function ur(l,u,p,y){if(y===null)l.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":l.removeAttribute(p);return}l.setAttributeNS(u,p,""+y)}}var Ni,uo;function oi(l){if(Ni===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);Ni=u&&u[1]||"",uo=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ni+l+uo}var os=!1;function as(l,u){if(!l||os)return"";os=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var He=function(){throw Error()};if(Object.defineProperty(He.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(He,[])}catch(Me){var De=Me}Reflect.construct(l,[],He)}else{try{He.call()}catch(Me){De=Me}l.call(He.prototype)}}else{try{throw Error()}catch(Me){De=Me}(He=l())&&typeof He.catch=="function"&&He.catch(function(){})}}catch(Me){if(Me&&De&&typeof Me.stack=="string")return[Me.stack,De.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var S=y.DetermineComponentFrameRoot(),Y=S[0],ce=S[1];if(Y&&ce){var ve=Y.split(`
`),$e=ce.split(`
`);for(v=y=0;y<ve.length&&!ve[y].includes("DetermineComponentFrameRoot");)y++;for(;v<$e.length&&!$e[v].includes("DetermineComponentFrameRoot");)v++;if(y===ve.length||v===$e.length)for(y=ve.length-1,v=$e.length-1;1<=y&&0<=v&&ve[y]!==$e[v];)v--;for(;1<=y&&0<=v;y--,v--)if(ve[y]!==$e[v]){if(y!==1||v!==1)do if(y--,v--,0>v||ve[y]!==$e[v]){var je=`
`+ve[y].replace(" at new "," at ");return l.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",l.displayName)),je}while(1<=y&&0<=v);break}}}finally{os=!1,Error.prepareStackTrace=p}return(p=l?l.displayName||l.name:"")?oi(p):""}function Os(l){switch(l.tag){case 26:case 27:case 5:return oi(l.type);case 16:return oi("Lazy");case 13:return oi("Suspense");case 19:return oi("SuspenseList");case 0:case 15:return as(l.type,!1);case 11:return as(l.type.render,!1);case 1:return as(l.type,!0);case 31:return oi("Activity");default:return""}}function ls(l){try{var u="";do u+=Os(l),l=l.return;while(l);return u}catch(p){return`
Error generating stack: `+p.message+`
`+p.stack}}function wr(l){switch(typeof l){case"bigint":case"boolean":case"number":case"string":case"undefined":return l;case"object":return l;default:return""}}function Bs(l){var u=l.type;return(l=l.nodeName)&&l.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function qo(l){var u=Bs(l)?"checked":"value",p=Object.getOwnPropertyDescriptor(l.constructor.prototype,u),y=""+l[u];if(!l.hasOwnProperty(u)&&typeof p<"u"&&typeof p.get=="function"&&typeof p.set=="function"){var v=p.get,S=p.set;return Object.defineProperty(l,u,{configurable:!0,get:function(){return v.call(this)},set:function(Y){y=""+Y,S.call(this,Y)}}),Object.defineProperty(l,u,{enumerable:p.enumerable}),{getValue:function(){return y},setValue:function(Y){y=""+Y},stopTracking:function(){l._valueTracker=null,delete l[u]}}}}function cs(l){l._valueTracker||(l._valueTracker=qo(l))}function Ls(l){if(!l)return!1;var u=l._valueTracker;if(!u)return!0;var p=u.getValue(),y="";return l&&(y=Bs(l)?l.checked?"true":"false":l.value),l=y,l!==p?(u.setValue(l),!0):!1}function Oi(l){if(l=l||(typeof document<"u"?document:void 0),typeof l>"u")return null;try{return l.activeElement||l.body}catch{return l.body}}var us=/[\n"\\]/g;function Kn(l){return l.replace(us,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Dr(l,u,p,y,v,S,Y,ce){l.name="",Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?l.type=Y:l.removeAttribute("type"),u!=null?Y==="number"?(u===0&&l.value===""||l.value!=u)&&(l.value=""+wr(u)):l.value!==""+wr(u)&&(l.value=""+wr(u)):Y!=="submit"&&Y!=="reset"||l.removeAttribute("value"),u!=null?bi(l,Y,wr(u)):p!=null?bi(l,Y,wr(p)):y!=null&&l.removeAttribute("value"),v==null&&S!=null&&(l.defaultChecked=!!S),v!=null&&(l.checked=v&&typeof v!="function"&&typeof v!="symbol"),ce!=null&&typeof ce!="function"&&typeof ce!="symbol"&&typeof ce!="boolean"?l.name=""+wr(ce):l.removeAttribute("name")}function Bi(l,u,p,y,v,S,Y,ce){if(S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(l.type=S),u!=null||p!=null){if(!(S!=="submit"&&S!=="reset"||u!=null))return;p=p!=null?""+wr(p):"",u=u!=null?""+wr(u):p,ce||u===l.value||(l.value=u),l.defaultValue=u}y=y??v,y=typeof y!="function"&&typeof y!="symbol"&&!!y,l.checked=ce?l.checked:!!y,l.defaultChecked=!!y,Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"&&(l.name=Y)}function bi(l,u,p){u==="number"&&Oi(l.ownerDocument)===l||l.defaultValue===""+p||(l.defaultValue=""+p)}function Ei(l,u,p,y){if(l=l.options,u){u={};for(var v=0;v<p.length;v++)u["$"+p[v]]=!0;for(p=0;p<l.length;p++)v=u.hasOwnProperty("$"+l[p].value),l[p].selected!==v&&(l[p].selected=v),v&&y&&(l[p].defaultSelected=!0)}else{for(p=""+wr(p),u=null,v=0;v<l.length;v++){if(l[v].value===p){l[v].selected=!0,y&&(l[v].defaultSelected=!0);return}u!==null||l[v].disabled||(u=l[v])}u!==null&&(u.selected=!0)}}function $n(l,u,p){if(u!=null&&(u=""+wr(u),u!==l.value&&(l.value=u),p==null)){l.defaultValue!==u&&(l.defaultValue=u);return}l.defaultValue=p!=null?""+wr(p):""}function Li(l,u,p,y){if(u==null){if(y!=null){if(p!=null)throw Error(o(92));if(de(y)){if(1<y.length)throw Error(o(93));y=y[0]}p=y}p==null&&(p=""),u=p}p=wr(u),l.defaultValue=p,y=l.textContent,y===p&&y!==""&&y!==null&&(l.value=y)}function Mr(l,u){if(u){var p=l.firstChild;if(p&&p===l.lastChild&&p.nodeType===3){p.nodeValue=u;return}}l.textContent=u}var Fi=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function fo(l,u,p){var y=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?l.setProperty(u,""):u==="float"?l.cssFloat="":l[u]="":y?l.setProperty(u,p):typeof p!="number"||p===0||Fi.has(u)?u==="float"?l.cssFloat=p:l[u]=(""+p).trim():l[u]=p+"px"}function Fs(l,u,p){if(u!=null&&typeof u!="object")throw Error(o(62));if(l=l.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?l.setProperty(y,""):y==="float"?l.cssFloat="":l[y]="");for(var v in u)y=u[v],u.hasOwnProperty(v)&&p[v]!==y&&fo(l,v,y)}else for(var S in u)u.hasOwnProperty(S)&&fo(l,S,u[S])}function ji(l){if(l.indexOf("-")===-1)return!1;switch(l){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Go=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ds(l){return Go.test(""+l)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":l}var Br=null;function Pr(l){return l=l.target||l.srcElement||window,l.correspondingUseElement&&(l=l.correspondingUseElement),l.nodeType===3?l.parentNode:l}var Wr=null,Gr=null;function js(l){var u=Tr(l);if(u&&(l=u.stateNode)){var p=l[En]||null;e:switch(l=u.stateNode,u.type){case"input":if(Dr(l,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=l;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Kn(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var y=p[u];if(y!==l&&y.form===l.form){var v=y[En]||null;if(!v)throw Error(o(90));Dr(y,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(u=0;u<p.length;u++)y=p[u],y.form===l.form&&Ls(y)}break e;case"textarea":$n(l,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&Ei(l,!!p.multiple,u,!1)}}}var Kr=!1;function fs(l,u,p){if(Kr)return l(u,p);Kr=!0;try{var y=l(u);return y}finally{if(Kr=!1,(Wr!==null||Gr!==null)&&(Il(),Wr&&(u=Wr,l=Gr,Gr=Wr=null,js(u),l)))for(u=0;u<l.length;u++)js(l[u])}}function wi(l,u){var p=l.stateNode;if(p===null)return null;var y=p[En]||null;if(y===null)return null;p=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(l=l.type,y=!(l==="button"||l==="input"||l==="select"||l==="textarea")),l=!y;break e;default:l=!1}if(l)return null;if(p&&typeof p!="function")throw Error(o(231,u,typeof p));return p}var dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),yr=!1;if(dr)try{var Ui={};Object.defineProperty(Ui,"passive",{get:function(){yr=!0}}),window.addEventListener("test",Ui,Ui),window.removeEventListener("test",Ui,Ui)}catch{yr=!1}var Yr=null,Ri=null,ai=null;function Us(){if(ai)return ai;var l,u=Ri,p=u.length,y,v="value"in Yr?Yr.value:Yr.textContent,S=v.length;for(l=0;l<p&&u[l]===v[l];l++);var Y=p-l;for(y=1;y<=Y&&u[p-y]===v[S-y];y++);return ai=v.slice(l,1<y?1-y:void 0)}function li(l){var u=l.keyCode;return"charCode"in l?(l=l.charCode,l===0&&u===13&&(l=13)):l=u,l===10&&(l=13),32<=l||l===13?l:0}function Xr(){return!0}function zs(){return!1}function me(l){function u(p,y,v,S,Y){this._reactName=p,this._targetInst=v,this.type=y,this.nativeEvent=S,this.target=Y,this.currentTarget=null;for(var ce in l)l.hasOwnProperty(ce)&&(p=l[ce],this[ce]=p?p(S):S[ce]);return this.isDefaultPrevented=(S.defaultPrevented!=null?S.defaultPrevented:S.returnValue===!1)?Xr:zs,this.isPropagationStopped=zs,this}return _(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=Xr)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=Xr)},persist:function(){},isPersistent:Xr}),u}var Te={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(l){return l.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ne=me(Te),Ye=_({},Te,{view:0,detail:0}),zt=me(Ye),vn,Cn,$t,An=_({},Ye,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qs,button:0,buttons:0,relatedTarget:function(l){return l.relatedTarget===void 0?l.fromElement===l.srcElement?l.toElement:l.fromElement:l.relatedTarget},movementX:function(l){return"movementX"in l?l.movementX:(l!==$t&&($t&&l.type==="mousemove"?(vn=l.screenX-$t.screenX,Cn=l.screenY-$t.screenY):Cn=vn=0,$t=l),vn)},movementY:function(l){return"movementY"in l?l.movementY:Cn}}),Yn=me(An),_r=_({},An,{dataTransfer:0}),zi=me(_r),vi=_({},Ye,{relatedTarget:0}),Ai=me(vi),hs=_({},Te,{animationName:0,elapsedTime:0,pseudoElement:0}),ho=me(hs),Ba=_({},Te,{clipboardData:function(l){return"clipboardData"in l?l.clipboardData:window.clipboardData}}),po=me(Ba),Xl=_({},Te,{data:0}),Ko=me(Xl),Hs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},La={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Yo(l){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(l):(l=Fa[l])?!!u[l]:!1}function qs(){return Yo}var ja=_({},Ye,{key:function(l){if(l.key){var u=Hs[l.key]||l.key;if(u!=="Unidentified")return u}return l.type==="keypress"?(l=li(l),l===13?"Enter":String.fromCharCode(l)):l.type==="keydown"||l.type==="keyup"?La[l.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qs,charCode:function(l){return l.type==="keypress"?li(l):0},keyCode:function(l){return l.type==="keydown"||l.type==="keyup"?l.keyCode:0},which:function(l){return l.type==="keypress"?li(l):l.type==="keydown"||l.type==="keyup"?l.keyCode:0}}),mo=me(ja),Ua=_({},An,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xo=me(Ua),Hi=_({},Ye,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qs}),za=me(Hi),Ha=_({},Te,{propertyName:0,elapsedTime:0,pseudoElement:0}),qa=me(Ha),Wa=_({},An,{deltaX:function(l){return"deltaX"in l?l.deltaX:"wheelDeltaX"in l?-l.wheelDeltaX:0},deltaY:function(l){return"deltaY"in l?l.deltaY:"wheelDeltaY"in l?-l.wheelDeltaY:"wheelDelta"in l?-l.wheelDelta:0},deltaZ:0,deltaMode:0}),go=me(Wa),Nr=_({},Te,{newState:0,oldState:0}),Ga=me(Nr),Ka=[9,13,27,32],Ii=dr&&"CompositionEvent"in window,b=null;dr&&"documentMode"in document&&(b=document.documentMode);var I=dr&&"TextEvent"in window&&!b,G=dr&&(!Ii||b&&8<b&&11>=b),pe=" ",Pe=!1;function Oe(l,u){switch(l){case"keyup":return Ka.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function We(l){return l=l.detail,typeof l=="object"&&"data"in l?l.data:null}var xn=!1;function fr(l,u){switch(l){case"compositionend":return We(u);case"keypress":return u.which!==32?null:(Pe=!0,pe);case"textInput":return l=u.data,l===pe&&Pe?null:l;default:return null}}function Tn(l,u){if(xn)return l==="compositionend"||!Ii&&Oe(l,u)?(l=Us(),ai=Ri=Yr=null,xn=!1,l):null;switch(l){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return G&&u.locale!=="ko"?null:u.data;default:return null}}var br={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function hr(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u==="input"?!!br[l.type]:u==="textarea"}function qi(l,u,p,y){Wr?Gr?Gr.push(y):Gr=[y]:Wr=y,u=Dl(u,"onChange"),0<u.length&&(p=new Ne("onChange","change",null,p,y),l.push({event:p,listeners:u}))}var Rr=null,Ci=null;function Qo(l){wh(l,0)}function Ya(l){var u=si(l);if(Ls(u))return l}function zu(l,u){if(l==="change")return u}var Hu=!1;if(dr){var Ql;if(dr){var Zl="oninput"in document;if(!Zl){var qu=document.createElement("div");qu.setAttribute("oninput","return;"),Zl=typeof qu.oninput=="function"}Ql=Zl}else Ql=!1;Hu=Ql&&(!document.documentMode||9<document.documentMode)}function Wu(){Rr&&(Rr.detachEvent("onpropertychange",Gu),Ci=Rr=null)}function Gu(l){if(l.propertyName==="value"&&Ya(Ci)){var u=[];qi(u,Ci,l,Pr(l)),fs(Qo,u)}}function vp(l,u,p){l==="focusin"?(Wu(),Rr=u,Ci=p,Rr.attachEvent("onpropertychange",Gu)):l==="focusout"&&Wu()}function xp(l){if(l==="selectionchange"||l==="keyup"||l==="keydown")return Ya(Ci)}function Tp(l,u){if(l==="click")return Ya(u)}function Sp(l,u){if(l==="input"||l==="change")return Ya(u)}function wp(l,u){return l===u&&(l!==0||1/l===1/u)||l!==l&&u!==u}var Qr=typeof Object.is=="function"?Object.is:wp;function Zo(l,u){if(Qr(l,u))return!0;if(typeof l!="object"||l===null||typeof u!="object"||u===null)return!1;var p=Object.keys(l),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var v=p[y];if(!yn.call(u,v)||!Qr(l[v],u[v]))return!1}return!0}function Ku(l){for(;l&&l.firstChild;)l=l.firstChild;return l}function Yu(l,u){var p=Ku(l);l=0;for(var y;p;){if(p.nodeType===3){if(y=l+p.textContent.length,l<=u&&y>=u)return{node:p,offset:u-l};l=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=Ku(p)}}function Xu(l,u){return l&&u?l===u?!0:l&&l.nodeType===3?!1:u&&u.nodeType===3?Xu(l,u.parentNode):"contains"in l?l.contains(u):l.compareDocumentPosition?!!(l.compareDocumentPosition(u)&16):!1:!1}function Qu(l){l=l!=null&&l.ownerDocument!=null&&l.ownerDocument.defaultView!=null?l.ownerDocument.defaultView:window;for(var u=Oi(l.document);u instanceof l.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)l=u.contentWindow;else break;u=Oi(l.document)}return u}function Jl(l){var u=l&&l.nodeName&&l.nodeName.toLowerCase();return u&&(u==="input"&&(l.type==="text"||l.type==="search"||l.type==="tel"||l.type==="url"||l.type==="password")||u==="textarea"||l.contentEditable==="true")}var Rp=dr&&"documentMode"in document&&11>=document.documentMode,yo=null,ec=null,Jo=null,tc=!1;function Zu(l,u,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;tc||yo==null||yo!==Oi(y)||(y=yo,"selectionStart"in y&&Jl(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Jo&&Zo(Jo,y)||(Jo=y,y=Dl(ec,"onSelect"),0<y.length&&(u=new Ne("onSelect","select",null,u,p),l.push({event:u,listeners:y}),u.target=yo)))}function Ws(l,u){var p={};return p[l.toLowerCase()]=u.toLowerCase(),p["Webkit"+l]="webkit"+u,p["Moz"+l]="moz"+u,p}var _o={animationend:Ws("Animation","AnimationEnd"),animationiteration:Ws("Animation","AnimationIteration"),animationstart:Ws("Animation","AnimationStart"),transitionrun:Ws("Transition","TransitionRun"),transitionstart:Ws("Transition","TransitionStart"),transitioncancel:Ws("Transition","TransitionCancel"),transitionend:Ws("Transition","TransitionEnd")},nc={},Ju={};dr&&(Ju=document.createElement("div").style,"AnimationEvent"in window||(delete _o.animationend.animation,delete _o.animationiteration.animation,delete _o.animationstart.animation),"TransitionEvent"in window||delete _o.transitionend.transition);function Gs(l){if(nc[l])return nc[l];if(!_o[l])return l;var u=_o[l],p;for(p in u)if(u.hasOwnProperty(p)&&p in Ju)return nc[l]=u[p];return l}var ed=Gs("animationend"),td=Gs("animationiteration"),nd=Gs("animationstart"),Ap=Gs("transitionrun"),Ip=Gs("transitionstart"),Cp=Gs("transitioncancel"),rd=Gs("transitionend"),sd=new Map,rc="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rc.push("scrollEnd");function xi(l,u){sd.set(l,u),Ur(u,[l])}var od=new WeakMap;function ci(l,u){if(typeof l=="object"&&l!==null){var p=od.get(l);return p!==void 0?p:(u={value:l,source:u,stack:ls(u)},od.set(l,u),u)}return{value:l,source:u,stack:ls(u)}}var ui=[],bo=0,ic=0;function Xa(){for(var l=bo,u=ic=bo=0;u<l;){var p=ui[u];ui[u++]=null;var y=ui[u];ui[u++]=null;var v=ui[u];ui[u++]=null;var S=ui[u];if(ui[u++]=null,y!==null&&v!==null){var Y=y.pending;Y===null?v.next=v:(v.next=Y.next,Y.next=v),y.pending=v}S!==0&&ad(p,v,S)}}function Qa(l,u,p,y){ui[bo++]=l,ui[bo++]=u,ui[bo++]=p,ui[bo++]=y,ic|=y,l.lanes|=y,l=l.alternate,l!==null&&(l.lanes|=y)}function sc(l,u,p,y){return Qa(l,u,p,y),Za(l)}function Eo(l,u){return Qa(l,null,null,u),Za(l)}function ad(l,u,p){l.lanes|=p;var y=l.alternate;y!==null&&(y.lanes|=p);for(var v=!1,S=l.return;S!==null;)S.childLanes|=p,y=S.alternate,y!==null&&(y.childLanes|=p),S.tag===22&&(l=S.stateNode,l===null||l._visibility&1||(v=!0)),l=S,S=S.return;return l.tag===3?(S=l.stateNode,v&&u!==null&&(v=31-P(p),l=S.hiddenUpdates,y=l[v],y===null?l[v]=[u]:y.push(u),u.lane=p|536870912),S):null}function Za(l){if(50<wa)throw wa=0,du=null,Error(o(185));for(var u=l.return;u!==null;)l=u,u=l.return;return l.tag===3?l.stateNode:null}var vo={};function Pp(l,u,p,y){this.tag=l,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Zr(l,u,p,y){return new Pp(l,u,p,y)}function oc(l){return l=l.prototype,!(!l||!l.isReactComponent)}function Wi(l,u){var p=l.alternate;return p===null?(p=Zr(l.tag,u,l.key,l.mode),p.elementType=l.elementType,p.type=l.type,p.stateNode=l.stateNode,p.alternate=l,l.alternate=p):(p.pendingProps=u,p.type=l.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=l.flags&65011712,p.childLanes=l.childLanes,p.lanes=l.lanes,p.child=l.child,p.memoizedProps=l.memoizedProps,p.memoizedState=l.memoizedState,p.updateQueue=l.updateQueue,u=l.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=l.sibling,p.index=l.index,p.ref=l.ref,p.refCleanup=l.refCleanup,p}function ld(l,u){l.flags&=65011714;var p=l.alternate;return p===null?(l.childLanes=0,l.lanes=u,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=p.childLanes,l.lanes=p.lanes,l.child=p.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=p.memoizedProps,l.memoizedState=p.memoizedState,l.updateQueue=p.updateQueue,l.type=p.type,u=p.dependencies,l.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),l}function Ja(l,u,p,y,v,S){var Y=0;if(y=l,typeof l=="function")oc(l)&&(Y=1);else if(typeof l=="string")Y=$m(l,p,Be.current)?26:l==="html"||l==="head"||l==="body"?27:5;else e:switch(l){case X:return l=Zr(31,p,u,v),l.elementType=X,l.lanes=S,l;case A:return Ks(p.children,v,S,u);case R:Y=8,v|=24;break;case V:return l=Zr(12,p,u,v|2),l.elementType=V,l.lanes=S,l;case D:return l=Zr(13,p,u,v),l.elementType=D,l.lanes=S,l;case ae:return l=Zr(19,p,u,v),l.elementType=ae,l.lanes=S,l;default:if(typeof l=="object"&&l!==null)switch(l.$$typeof){case te:case re:Y=10;break e;case se:Y=9;break e;case ye:Y=11;break e;case z:Y=14;break e;case H:Y=16,y=null;break e}Y=29,p=Error(o(130,l===null?"null":typeof l,"")),y=null}return u=Zr(Y,p,u,v),u.elementType=l,u.type=y,u.lanes=S,u}function Ks(l,u,p,y){return l=Zr(7,l,y,u),l.lanes=p,l}function ac(l,u,p){return l=Zr(6,l,null,u),l.lanes=p,l}function lc(l,u,p){return u=Zr(4,l.children!==null?l.children:[],l.key,u),u.lanes=p,u.stateNode={containerInfo:l.containerInfo,pendingChildren:null,implementation:l.implementation},u}var xo=[],To=0,el=null,tl=0,di=[],fi=0,Ys=null,Gi=1,Ki="";function Xs(l,u){xo[To++]=tl,xo[To++]=el,el=l,tl=u}function cd(l,u,p){di[fi++]=Gi,di[fi++]=Ki,di[fi++]=Ys,Ys=l;var y=Gi;l=Ki;var v=32-P(y)-1;y&=~(1<<v),p+=1;var S=32-P(u)+v;if(30<S){var Y=v-v%5;S=(y&(1<<Y)-1).toString(32),y>>=Y,v-=Y,Gi=1<<32-P(u)+v|p<<v|y,Ki=S+l}else Gi=1<<S|p<<v|y,Ki=l}function cc(l){l.return!==null&&(Xs(l,1),cd(l,1,0))}function uc(l){for(;l===el;)el=xo[--To],xo[To]=null,tl=xo[--To],xo[To]=null;for(;l===Ys;)Ys=di[--fi],di[fi]=null,Ki=di[--fi],di[fi]=null,Gi=di[--fi],di[fi]=null}var Or=null,er=null,kn=!1,Qs=null,Pi=!1,dc=Error(o(519));function Zs(l){var u=Error(o(418,""));throw na(ci(u,l)),dc}function ud(l){var u=l.stateNode,p=l.type,y=l.memoizedProps;switch(u[Rn]=l,u[En]=y,p){case"dialog":gn("cancel",u),gn("close",u);break;case"iframe":case"object":case"embed":gn("load",u);break;case"video":case"audio":for(p=0;p<Aa.length;p++)gn(Aa[p],u);break;case"source":gn("error",u);break;case"img":case"image":case"link":gn("error",u),gn("load",u);break;case"details":gn("toggle",u);break;case"input":gn("invalid",u),Bi(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),cs(u);break;case"select":gn("invalid",u);break;case"textarea":gn("invalid",u),Li(u,y.value,y.defaultValue,y.children),cs(u)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||y.suppressHydrationWarning===!0||Ch(u.textContent,p)?(y.popover!=null&&(gn("beforetoggle",u),gn("toggle",u)),y.onScroll!=null&&gn("scroll",u),y.onScrollEnd!=null&&gn("scrollend",u),y.onClick!=null&&(u.onclick=Ml),u=!0):u=!1,u||Zs(l)}function dd(l){for(Or=l.return;Or;)switch(Or.tag){case 5:case 13:Pi=!1;return;case 27:case 3:Pi=!0;return;default:Or=Or.return}}function ea(l){if(l!==Or)return!1;if(!kn)return dd(l),kn=!0,!1;var u=l.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=l.type,p=!(p!=="form"&&p!=="button")||Au(l.type,l.memoizedProps)),p=!p),p&&er&&Zs(l),dd(l),u===13){if(l=l.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(o(317));e:{for(l=l.nextSibling,u=0;l;){if(l.nodeType===8)if(p=l.data,p==="/$"){if(u===0){er=Si(l.nextSibling);break e}u--}else p!=="$"&&p!=="$!"&&p!=="$?"||u++;l=l.nextSibling}er=null}}else u===27?(u=er,Ps(l.type)?(l=ku,ku=null,er=l):er=u):er=Or?Si(l.stateNode.nextSibling):null;return!0}function ta(){er=Or=null,kn=!1}function fd(){var l=Qs;return l!==null&&(jr===null?jr=l:jr.push.apply(jr,l),Qs=null),l}function na(l){Qs===null?Qs=[l]:Qs.push(l)}var fc=be(null),Js=null,Yi=null;function ps(l,u,p){Ae(fc,u._currentValue),u._currentValue=p}function Xi(l){l._currentValue=fc.current,Se(fc)}function hc(l,u,p){for(;l!==null;){var y=l.alternate;if((l.childLanes&u)!==u?(l.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),l===p)break;l=l.return}}function pc(l,u,p,y){var v=l.child;for(v!==null&&(v.return=l);v!==null;){var S=v.dependencies;if(S!==null){var Y=v.child;S=S.firstContext;e:for(;S!==null;){var ce=S;S=v;for(var ve=0;ve<u.length;ve++)if(ce.context===u[ve]){S.lanes|=p,ce=S.alternate,ce!==null&&(ce.lanes|=p),hc(S.return,p,l),y||(Y=null);break e}S=ce.next}}else if(v.tag===18){if(Y=v.return,Y===null)throw Error(o(341));Y.lanes|=p,S=Y.alternate,S!==null&&(S.lanes|=p),hc(Y,p,l),Y=null}else Y=v.child;if(Y!==null)Y.return=v;else for(Y=v;Y!==null;){if(Y===l){Y=null;break}if(v=Y.sibling,v!==null){v.return=Y.return,Y=v;break}Y=Y.return}v=Y}}function ra(l,u,p,y){l=null;for(var v=u,S=!1;v!==null;){if(!S){if((v.flags&524288)!==0)S=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var Y=v.alternate;if(Y===null)throw Error(o(387));if(Y=Y.memoizedProps,Y!==null){var ce=v.type;Qr(v.pendingProps.value,Y.value)||(l!==null?l.push(ce):l=[ce])}}else if(v===Xe.current){if(Y=v.alternate,Y===null)throw Error(o(387));Y.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(l!==null?l.push($a):l=[$a])}v=v.return}l!==null&&pc(u,l,p,y),u.flags|=262144}function nl(l){for(l=l.firstContext;l!==null;){if(!Qr(l.context._currentValue,l.memoizedValue))return!0;l=l.next}return!1}function eo(l){Js=l,Yi=null,l=l.dependencies,l!==null&&(l.firstContext=null)}function kr(l){return hd(Js,l)}function rl(l,u){return Js===null&&eo(l),hd(l,u)}function hd(l,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},Yi===null){if(l===null)throw Error(o(308));Yi=u,l.dependencies={lanes:0,firstContext:u},l.flags|=524288}else Yi=Yi.next=u;return p}var kp=typeof AbortController<"u"?AbortController:function(){var l=[],u=this.signal={aborted:!1,addEventListener:function(p,y){l.push(y)}};this.abort=function(){u.aborted=!0,l.forEach(function(p){return p()})}},Vp=n.unstable_scheduleCallback,$p=n.unstable_NormalPriority,pr={$$typeof:re,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mc(){return{controller:new kp,data:new Map,refCount:0}}function ia(l){l.refCount--,l.refCount===0&&Vp($p,function(){l.controller.abort()})}var sa=null,gc=0,So=0,wo=null;function Dp(l,u){if(sa===null){var p=sa=[];gc=0,So=_u(),wo={status:"pending",value:void 0,then:function(y){p.push(y)}}}return gc++,u.then(pd,pd),u}function pd(){if(--gc===0&&sa!==null){wo!==null&&(wo.status="fulfilled");var l=sa;sa=null,So=0,wo=null;for(var u=0;u<l.length;u++)(0,l[u])()}}function Mp(l,u){var p=[],y={status:"pending",value:null,reason:null,then:function(v){p.push(v)}};return l.then(function(){y.status="fulfilled",y.value=u;for(var v=0;v<p.length;v++)(0,p[v])(u)},function(v){for(y.status="rejected",y.reason=v,v=0;v<p.length;v++)(0,p[v])(void 0)}),y}var md=oe.S;oe.S=function(l,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&Dp(l,u),md!==null&&md(l,u)};var to=be(null);function yc(){var l=to.current;return l!==null?l:qn.pooledCache}function il(l,u){u===null?Ae(to,to.current):Ae(to,u.pool)}function gd(){var l=yc();return l===null?null:{parent:pr._currentValue,pool:l}}var oa=Error(o(460)),yd=Error(o(474)),sl=Error(o(542)),_c={then:function(){}};function _d(l){return l=l.status,l==="fulfilled"||l==="rejected"}function ol(){}function bd(l,u,p){switch(p=l[p],p===void 0?l.push(u):p!==u&&(u.then(ol,ol),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,vd(l),l;default:if(typeof u.status=="string")u.then(ol,ol);else{if(l=qn,l!==null&&100<l.shellSuspendCounter)throw Error(o(482));l=u,l.status="pending",l.then(function(y){if(u.status==="pending"){var v=u;v.status="fulfilled",v.value=y}},function(y){if(u.status==="pending"){var v=u;v.status="rejected",v.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw l=u.reason,vd(l),l}throw aa=u,oa}}var aa=null;function Ed(){if(aa===null)throw Error(o(459));var l=aa;return aa=null,l}function vd(l){if(l===oa||l===sl)throw Error(o(483))}var gs=!1;function bc(l){l.updateQueue={baseState:l.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ec(l,u){l=l.updateQueue,u.updateQueue===l&&(u.updateQueue={baseState:l.baseState,firstBaseUpdate:l.firstBaseUpdate,lastBaseUpdate:l.lastBaseUpdate,shared:l.shared,callbacks:null})}function ys(l){return{lane:l,tag:0,payload:null,callback:null,next:null}}function _s(l,u,p){var y=l.updateQueue;if(y===null)return null;if(y=y.shared,(Dn&2)!==0){var v=y.pending;return v===null?u.next=u:(u.next=v.next,v.next=u),y.pending=u,u=Za(l),ad(l,null,p),u}return Qa(l,y,u,p),Za(l)}function la(l,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,Gt(l,p)}}function vc(l,u){var p=l.updateQueue,y=l.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var v=null,S=null;if(p=p.firstBaseUpdate,p!==null){do{var Y={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};S===null?v=S=Y:S=S.next=Y,p=p.next}while(p!==null);S===null?v=S=u:S=S.next=u}else v=S=u;p={baseState:y.baseState,firstBaseUpdate:v,lastBaseUpdate:S,shared:y.shared,callbacks:y.callbacks},l.updateQueue=p;return}l=p.lastBaseUpdate,l===null?p.firstBaseUpdate=u:l.next=u,p.lastBaseUpdate=u}var xc=!1;function ca(){if(xc){var l=wo;if(l!==null)throw l}}function ua(l,u,p,y){xc=!1;var v=l.updateQueue;gs=!1;var S=v.firstBaseUpdate,Y=v.lastBaseUpdate,ce=v.shared.pending;if(ce!==null){v.shared.pending=null;var ve=ce,$e=ve.next;ve.next=null,Y===null?S=$e:Y.next=$e,Y=ve;var je=l.alternate;je!==null&&(je=je.updateQueue,ce=je.lastBaseUpdate,ce!==Y&&(ce===null?je.firstBaseUpdate=$e:ce.next=$e,je.lastBaseUpdate=ve))}if(S!==null){var He=v.baseState;Y=0,je=$e=ve=null,ce=S;do{var De=ce.lane&-536870913,Me=De!==ce.lane;if(Me?(Sn&De)===De:(y&De)===De){De!==0&&De===So&&(xc=!0),je!==null&&(je=je.next={lane:0,tag:ce.tag,payload:ce.payload,callback:null,next:null});e:{var vt=l,nt=ce;De=u;var Ln=p;switch(nt.tag){case 1:if(vt=nt.payload,typeof vt=="function"){He=vt.call(Ln,He,De);break e}He=vt;break e;case 3:vt.flags=vt.flags&-65537|128;case 0:if(vt=nt.payload,De=typeof vt=="function"?vt.call(Ln,He,De):vt,De==null)break e;He=_({},He,De);break e;case 2:gs=!0}}De=ce.callback,De!==null&&(l.flags|=64,Me&&(l.flags|=8192),Me=v.callbacks,Me===null?v.callbacks=[De]:Me.push(De))}else Me={lane:De,tag:ce.tag,payload:ce.payload,callback:ce.callback,next:null},je===null?($e=je=Me,ve=He):je=je.next=Me,Y|=De;if(ce=ce.next,ce===null){if(ce=v.shared.pending,ce===null)break;Me=ce,ce=Me.next,Me.next=null,v.lastBaseUpdate=Me,v.shared.pending=null}}while(!0);je===null&&(ve=He),v.baseState=ve,v.firstBaseUpdate=$e,v.lastBaseUpdate=je,S===null&&(v.shared.lanes=0),Rs|=Y,l.lanes=Y,l.memoizedState=He}}function xd(l,u){if(typeof l!="function")throw Error(o(191,l));l.call(u)}function Td(l,u){var p=l.callbacks;if(p!==null)for(l.callbacks=null,l=0;l<p.length;l++)xd(p[l],u)}var Ro=be(null),al=be(0);function Sd(l,u){l=rs,Ae(al,l),Ae(Ro,u),rs=l|u.baseLanes}function Tc(){Ae(al,rs),Ae(Ro,Ro.current)}function Sc(){rs=al.current,Se(Ro),Se(al)}var bs=0,qt=null,On=null,or=null,ll=!1,Ao=!1,no=!1,cl=0,da=0,Io=null,Np=0;function nr(){throw Error(o(321))}function wc(l,u){if(u===null)return!1;for(var p=0;p<u.length&&p<l.length;p++)if(!Qr(l[p],u[p]))return!1;return!0}function Rc(l,u,p,y,v,S){return bs=S,qt=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,oe.H=l===null||l.memoizedState===null?lf:cf,no=!1,S=p(y,v),no=!1,Ao&&(S=Rd(u,p,y,v)),wd(l),S}function wd(l){oe.H=ml;var u=On!==null&&On.next!==null;if(bs=0,or=On=qt=null,ll=!1,da=0,Io=null,u)throw Error(o(300));l===null||Er||(l=l.dependencies,l!==null&&nl(l)&&(Er=!0))}function Rd(l,u,p,y){qt=l;var v=0;do{if(Ao&&(Io=null),da=0,Ao=!1,25<=v)throw Error(o(301));if(v+=1,or=On=null,l.updateQueue!=null){var S=l.updateQueue;S.lastEffect=null,S.events=null,S.stores=null,S.memoCache!=null&&(S.memoCache.index=0)}oe.H=Hp,S=u(p,y)}while(Ao);return S}function Op(){var l=oe.H,u=l.useState()[0];return u=typeof u.then=="function"?fa(u):u,l=l.useState()[0],(On!==null?On.memoizedState:null)!==l&&(qt.flags|=1024),u}function Ac(){var l=cl!==0;return cl=0,l}function Ic(l,u,p){u.updateQueue=l.updateQueue,u.flags&=-2053,l.lanes&=~p}function Cc(l){if(ll){for(l=l.memoizedState;l!==null;){var u=l.queue;u!==null&&(u.pending=null),l=l.next}ll=!1}bs=0,or=On=qt=null,Ao=!1,da=cl=0,Io=null}function Lr(){var l={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return or===null?qt.memoizedState=or=l:or=or.next=l,or}function ar(){if(On===null){var l=qt.alternate;l=l!==null?l.memoizedState:null}else l=On.next;var u=or===null?qt.memoizedState:or.next;if(u!==null)or=u,On=l;else{if(l===null)throw qt.alternate===null?Error(o(467)):Error(o(310));On=l,l={memoizedState:On.memoizedState,baseState:On.baseState,baseQueue:On.baseQueue,queue:On.queue,next:null},or===null?qt.memoizedState=or=l:or=or.next=l}return or}function Pc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function fa(l){var u=da;return da+=1,Io===null&&(Io=[]),l=bd(Io,l,u),u=qt,(or===null?u.memoizedState:or.next)===null&&(u=u.alternate,oe.H=u===null||u.memoizedState===null?lf:cf),l}function ul(l){if(l!==null&&typeof l=="object"){if(typeof l.then=="function")return fa(l);if(l.$$typeof===re)return kr(l)}throw Error(o(438,String(l)))}function kc(l){var u=null,p=qt.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=qt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(v){return v.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=Pc(),qt.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(l),y=0;y<l;y++)p[y]=le;return u.index++,p}function Qi(l,u){return typeof u=="function"?u(l):u}function dl(l){var u=ar();return Vc(u,On,l)}function Vc(l,u,p){var y=l.queue;if(y===null)throw Error(o(311));y.lastRenderedReducer=p;var v=l.baseQueue,S=y.pending;if(S!==null){if(v!==null){var Y=v.next;v.next=S.next,S.next=Y}u.baseQueue=v=S,y.pending=null}if(S=l.baseState,v===null)l.memoizedState=S;else{u=v.next;var ce=Y=null,ve=null,$e=u,je=!1;do{var He=$e.lane&-536870913;if(He!==$e.lane?(Sn&He)===He:(bs&He)===He){var De=$e.revertLane;if(De===0)ve!==null&&(ve=ve.next={lane:0,revertLane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),He===So&&(je=!0);else if((bs&De)===De){$e=$e.next,De===So&&(je=!0);continue}else He={lane:0,revertLane:$e.revertLane,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null},ve===null?(ce=ve=He,Y=S):ve=ve.next=He,qt.lanes|=De,Rs|=De;He=$e.action,no&&p(S,He),S=$e.hasEagerState?$e.eagerState:p(S,He)}else De={lane:He,revertLane:$e.revertLane,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null},ve===null?(ce=ve=De,Y=S):ve=ve.next=De,qt.lanes|=He,Rs|=He;$e=$e.next}while($e!==null&&$e!==u);if(ve===null?Y=S:ve.next=ce,!Qr(S,l.memoizedState)&&(Er=!0,je&&(p=wo,p!==null)))throw p;l.memoizedState=S,l.baseState=Y,l.baseQueue=ve,y.lastRenderedState=S}return v===null&&(y.lanes=0),[l.memoizedState,y.dispatch]}function $c(l){var u=ar(),p=u.queue;if(p===null)throw Error(o(311));p.lastRenderedReducer=l;var y=p.dispatch,v=p.pending,S=u.memoizedState;if(v!==null){p.pending=null;var Y=v=v.next;do S=l(S,Y.action),Y=Y.next;while(Y!==v);Qr(S,u.memoizedState)||(Er=!0),u.memoizedState=S,u.baseQueue===null&&(u.baseState=S),p.lastRenderedState=S}return[S,y]}function Ad(l,u,p){var y=qt,v=ar(),S=kn;if(S){if(p===void 0)throw Error(o(407));p=p()}else p=u();var Y=!Qr((On||v).memoizedState,p);Y&&(v.memoizedState=p,Er=!0),v=v.queue;var ce=Pd.bind(null,y,v,l);if(ha(2048,8,ce,[l]),v.getSnapshot!==u||Y||or!==null&&or.memoizedState.tag&1){if(y.flags|=2048,Co(9,fl(),Cd.bind(null,y,v,p,u),null),qn===null)throw Error(o(349));S||(bs&124)!==0||Id(y,u,p)}return p}function Id(l,u,p){l.flags|=16384,l={getSnapshot:u,value:p},u=qt.updateQueue,u===null?(u=Pc(),qt.updateQueue=u,u.stores=[l]):(p=u.stores,p===null?u.stores=[l]:p.push(l))}function Cd(l,u,p,y){u.value=p,u.getSnapshot=y,kd(u)&&Vd(l)}function Pd(l,u,p){return p(function(){kd(u)&&Vd(l)})}function kd(l){var u=l.getSnapshot;l=l.value;try{var p=u();return!Qr(l,p)}catch{return!0}}function Vd(l){var u=Eo(l,2);u!==null&&ri(u,l,2)}function Dc(l){var u=Lr();if(typeof l=="function"){var p=l;if(l=p(),no){C(!0);try{p()}finally{C(!1)}}}return u.memoizedState=u.baseState=l,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:l},u}function $d(l,u,p,y){return l.baseState=p,Vc(l,On,typeof y=="function"?y:Qi)}function Bp(l,u,p,y,v){if(pl(l))throw Error(o(485));if(l=u.action,l!==null){var S={payload:v,action:l,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(Y){S.listeners.push(Y)}};oe.T!==null?p(!0):S.isTransition=!1,y(S),p=u.pending,p===null?(S.next=u.pending=S,Dd(u,S)):(S.next=p.next,u.pending=p.next=S)}}function Dd(l,u){var p=u.action,y=u.payload,v=l.state;if(u.isTransition){var S=oe.T,Y={};oe.T=Y;try{var ce=p(v,y),ve=oe.S;ve!==null&&ve(Y,ce),Md(l,u,ce)}catch($e){Mc(l,u,$e)}finally{oe.T=S}}else try{S=p(v,y),Md(l,u,S)}catch($e){Mc(l,u,$e)}}function Md(l,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){Nd(l,u,y)},function(y){return Mc(l,u,y)}):Nd(l,u,p)}function Nd(l,u,p){u.status="fulfilled",u.value=p,Od(u),l.state=p,u=l.pending,u!==null&&(p=u.next,p===u?l.pending=null:(p=p.next,u.next=p,Dd(l,p)))}function Mc(l,u,p){var y=l.pending;if(l.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,Od(u),u=u.next;while(u!==y)}l.action=null}function Od(l){l=l.listeners;for(var u=0;u<l.length;u++)(0,l[u])()}function Bd(l,u){return u}function Ld(l,u){if(kn){var p=qn.formState;if(p!==null){e:{var y=qt;if(kn){if(er){t:{for(var v=er,S=Pi;v.nodeType!==8;){if(!S){v=null;break t}if(v=Si(v.nextSibling),v===null){v=null;break t}}S=v.data,v=S==="F!"||S==="F"?v:null}if(v){er=Si(v.nextSibling),y=v.data==="F!";break e}}Zs(y)}y=!1}y&&(u=p[0])}}return p=Lr(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Bd,lastRenderedState:u},p.queue=y,p=sf.bind(null,qt,y),y.dispatch=p,y=Dc(!1),S=Fc.bind(null,qt,!1,y.queue),y=Lr(),v={state:u,dispatch:null,action:l,pending:null},y.queue=v,p=Bp.bind(null,qt,v,S,p),v.dispatch=p,y.memoizedState=l,[u,p,!1]}function Fd(l){var u=ar();return jd(u,On,l)}function jd(l,u,p){if(u=Vc(l,u,Bd)[0],l=dl(Qi)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=fa(u)}catch(Y){throw Y===oa?sl:Y}else y=u;u=ar();var v=u.queue,S=v.dispatch;return p!==u.memoizedState&&(qt.flags|=2048,Co(9,fl(),Lp.bind(null,v,p),null)),[y,S,l]}function Lp(l,u){l.action=u}function Ud(l){var u=ar(),p=On;if(p!==null)return jd(u,p,l);ar(),u=u.memoizedState,p=ar();var y=p.queue.dispatch;return p.memoizedState=l,[u,y,!1]}function Co(l,u,p,y){return l={tag:l,create:p,deps:y,inst:u,next:null},u=qt.updateQueue,u===null&&(u=Pc(),qt.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=l.next=l:(y=p.next,p.next=l,l.next=y,u.lastEffect=l),l}function fl(){return{destroy:void 0,resource:void 0}}function zd(){return ar().memoizedState}function hl(l,u,p,y){var v=Lr();y=y===void 0?null:y,qt.flags|=l,v.memoizedState=Co(1|u,fl(),p,y)}function ha(l,u,p,y){var v=ar();y=y===void 0?null:y;var S=v.memoizedState.inst;On!==null&&y!==null&&wc(y,On.memoizedState.deps)?v.memoizedState=Co(u,S,p,y):(qt.flags|=l,v.memoizedState=Co(1|u,S,p,y))}function Hd(l,u){hl(8390656,8,l,u)}function qd(l,u){ha(2048,8,l,u)}function Wd(l,u){return ha(4,2,l,u)}function Gd(l,u){return ha(4,4,l,u)}function Kd(l,u){if(typeof u=="function"){l=l();var p=u(l);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return l=l(),u.current=l,function(){u.current=null}}function Yd(l,u,p){p=p!=null?p.concat([l]):null,ha(4,4,Kd.bind(null,u,l),p)}function Nc(){}function Xd(l,u){var p=ar();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&wc(u,y[1])?y[0]:(p.memoizedState=[l,u],l)}function Qd(l,u){var p=ar();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&wc(u,y[1]))return y[0];if(y=l(),no){C(!0);try{l()}finally{C(!1)}}return p.memoizedState=[y,u],y}function Oc(l,u,p){return p===void 0||(bs&1073741824)!==0?l.memoizedState=u:(l.memoizedState=p,l=th(),qt.lanes|=l,Rs|=l,p)}function Zd(l,u,p,y){return Qr(p,u)?p:Ro.current!==null?(l=Oc(l,p,y),Qr(l,u)||(Er=!0),l):(bs&42)===0?(Er=!0,l.memoizedState=p):(l=th(),qt.lanes|=l,Rs|=l,u)}function Jd(l,u,p,y,v){var S=_e.p;_e.p=S!==0&&8>S?S:8;var Y=oe.T,ce={};oe.T=ce,Fc(l,!1,u,p);try{var ve=v(),$e=oe.S;if($e!==null&&$e(ce,ve),ve!==null&&typeof ve=="object"&&typeof ve.then=="function"){var je=Mp(ve,y);pa(l,u,je,ni(l))}else pa(l,u,y,ni(l))}catch(He){pa(l,u,{then:function(){},status:"rejected",reason:He},ni())}finally{_e.p=S,oe.T=Y}}function jp(){}function Bc(l,u,p,y){if(l.tag!==5)throw Error(o(476));var v=ef(l).queue;Jd(l,v,u,Re,p===null?jp:function(){return tf(l),p(y)})}function ef(l){var u=l.memoizedState;if(u!==null)return u;u={memoizedState:Re,baseState:Re,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:Re},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Qi,lastRenderedState:p},next:null},l.memoizedState=u,l=l.alternate,l!==null&&(l.memoizedState=u),u}function tf(l){var u=ef(l).next.queue;pa(l,u,{},ni())}function Lc(){return kr($a)}function nf(){return ar().memoizedState}function rf(){return ar().memoizedState}function Up(l){for(var u=l.return;u!==null;){switch(u.tag){case 24:case 3:var p=ni();l=ys(p);var y=_s(u,l,p);y!==null&&(ri(y,u,p),la(y,u,p)),u={cache:mc()},l.payload=u;return}u=u.return}}function zp(l,u,p){var y=ni();p={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null},pl(l)?of(u,p):(p=sc(l,u,p,y),p!==null&&(ri(p,l,y),af(p,u,y)))}function sf(l,u,p){var y=ni();pa(l,u,p,y)}function pa(l,u,p,y){var v={lane:y,revertLane:0,action:p,hasEagerState:!1,eagerState:null,next:null};if(pl(l))of(u,v);else{var S=l.alternate;if(l.lanes===0&&(S===null||S.lanes===0)&&(S=u.lastRenderedReducer,S!==null))try{var Y=u.lastRenderedState,ce=S(Y,p);if(v.hasEagerState=!0,v.eagerState=ce,Qr(ce,Y))return Qa(l,u,v,0),qn===null&&Xa(),!1}catch{}finally{}if(p=sc(l,u,v,y),p!==null)return ri(p,l,y),af(p,u,y),!0}return!1}function Fc(l,u,p,y){if(y={lane:2,revertLane:_u(),action:y,hasEagerState:!1,eagerState:null,next:null},pl(l)){if(u)throw Error(o(479))}else u=sc(l,p,y,2),u!==null&&ri(u,l,2)}function pl(l){var u=l.alternate;return l===qt||u!==null&&u===qt}function of(l,u){Ao=ll=!0;var p=l.pending;p===null?u.next=u:(u.next=p.next,p.next=u),l.pending=u}function af(l,u,p){if((p&4194048)!==0){var y=u.lanes;y&=l.pendingLanes,p|=y,u.lanes=p,Gt(l,p)}}var ml={readContext:kr,use:ul,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useLayoutEffect:nr,useInsertionEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useSyncExternalStore:nr,useId:nr,useHostTransitionStatus:nr,useFormState:nr,useActionState:nr,useOptimistic:nr,useMemoCache:nr,useCacheRefresh:nr},lf={readContext:kr,use:ul,useCallback:function(l,u){return Lr().memoizedState=[l,u===void 0?null:u],l},useContext:kr,useEffect:Hd,useImperativeHandle:function(l,u,p){p=p!=null?p.concat([l]):null,hl(4194308,4,Kd.bind(null,u,l),p)},useLayoutEffect:function(l,u){return hl(4194308,4,l,u)},useInsertionEffect:function(l,u){hl(4,2,l,u)},useMemo:function(l,u){var p=Lr();u=u===void 0?null:u;var y=l();if(no){C(!0);try{l()}finally{C(!1)}}return p.memoizedState=[y,u],y},useReducer:function(l,u,p){var y=Lr();if(p!==void 0){var v=p(u);if(no){C(!0);try{p(u)}finally{C(!1)}}}else v=u;return y.memoizedState=y.baseState=v,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:l,lastRenderedState:v},y.queue=l,l=l.dispatch=zp.bind(null,qt,l),[y.memoizedState,l]},useRef:function(l){var u=Lr();return l={current:l},u.memoizedState=l},useState:function(l){l=Dc(l);var u=l.queue,p=sf.bind(null,qt,u);return u.dispatch=p,[l.memoizedState,p]},useDebugValue:Nc,useDeferredValue:function(l,u){var p=Lr();return Oc(p,l,u)},useTransition:function(){var l=Dc(!1);return l=Jd.bind(null,qt,l.queue,!0,!1),Lr().memoizedState=l,[!1,l]},useSyncExternalStore:function(l,u,p){var y=qt,v=Lr();if(kn){if(p===void 0)throw Error(o(407));p=p()}else{if(p=u(),qn===null)throw Error(o(349));(Sn&124)!==0||Id(y,u,p)}v.memoizedState=p;var S={value:p,getSnapshot:u};return v.queue=S,Hd(Pd.bind(null,y,S,l),[l]),y.flags|=2048,Co(9,fl(),Cd.bind(null,y,S,p,u),null),p},useId:function(){var l=Lr(),u=qn.identifierPrefix;if(kn){var p=Ki,y=Gi;p=(y&~(1<<32-P(y)-1)).toString(32)+p,u="«"+u+"R"+p,p=cl++,0<p&&(u+="H"+p.toString(32)),u+="»"}else p=Np++,u="«"+u+"r"+p.toString(32)+"»";return l.memoizedState=u},useHostTransitionStatus:Lc,useFormState:Ld,useActionState:Ld,useOptimistic:function(l){var u=Lr();u.memoizedState=u.baseState=l;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=Fc.bind(null,qt,!0,p),p.dispatch=u,[l,u]},useMemoCache:kc,useCacheRefresh:function(){return Lr().memoizedState=Up.bind(null,qt)}},cf={readContext:kr,use:ul,useCallback:Xd,useContext:kr,useEffect:qd,useImperativeHandle:Yd,useInsertionEffect:Wd,useLayoutEffect:Gd,useMemo:Qd,useReducer:dl,useRef:zd,useState:function(){return dl(Qi)},useDebugValue:Nc,useDeferredValue:function(l,u){var p=ar();return Zd(p,On.memoizedState,l,u)},useTransition:function(){var l=dl(Qi)[0],u=ar().memoizedState;return[typeof l=="boolean"?l:fa(l),u]},useSyncExternalStore:Ad,useId:nf,useHostTransitionStatus:Lc,useFormState:Fd,useActionState:Fd,useOptimistic:function(l,u){var p=ar();return $d(p,On,l,u)},useMemoCache:kc,useCacheRefresh:rf},Hp={readContext:kr,use:ul,useCallback:Xd,useContext:kr,useEffect:qd,useImperativeHandle:Yd,useInsertionEffect:Wd,useLayoutEffect:Gd,useMemo:Qd,useReducer:$c,useRef:zd,useState:function(){return $c(Qi)},useDebugValue:Nc,useDeferredValue:function(l,u){var p=ar();return On===null?Oc(p,l,u):Zd(p,On.memoizedState,l,u)},useTransition:function(){var l=$c(Qi)[0],u=ar().memoizedState;return[typeof l=="boolean"?l:fa(l),u]},useSyncExternalStore:Ad,useId:nf,useHostTransitionStatus:Lc,useFormState:Ud,useActionState:Ud,useOptimistic:function(l,u){var p=ar();return On!==null?$d(p,On,l,u):(p.baseState=l,[l,p.queue.dispatch])},useMemoCache:kc,useCacheRefresh:rf},Po=null,ma=0;function gl(l){var u=ma;return ma+=1,Po===null&&(Po=[]),bd(Po,l,u)}function ga(l,u){u=u.props.ref,l.ref=u!==void 0?u:null}function yl(l,u){throw u.$$typeof===E?Error(o(525)):(l=Object.prototype.toString.call(u),Error(o(31,l==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":l)))}function uf(l){var u=l._init;return u(l._payload)}function df(l){function u(Ce,we){if(l){var Ve=Ce.deletions;Ve===null?(Ce.deletions=[we],Ce.flags|=16):Ve.push(we)}}function p(Ce,we){if(!l)return null;for(;we!==null;)u(Ce,we),we=we.sibling;return null}function y(Ce){for(var we=new Map;Ce!==null;)Ce.key!==null?we.set(Ce.key,Ce):we.set(Ce.index,Ce),Ce=Ce.sibling;return we}function v(Ce,we){return Ce=Wi(Ce,we),Ce.index=0,Ce.sibling=null,Ce}function S(Ce,we,Ve){return Ce.index=Ve,l?(Ve=Ce.alternate,Ve!==null?(Ve=Ve.index,Ve<we?(Ce.flags|=67108866,we):Ve):(Ce.flags|=67108866,we)):(Ce.flags|=1048576,we)}function Y(Ce){return l&&Ce.alternate===null&&(Ce.flags|=67108866),Ce}function ce(Ce,we,Ve,ze){return we===null||we.tag!==6?(we=ac(Ve,Ce.mode,ze),we.return=Ce,we):(we=v(we,Ve),we.return=Ce,we)}function ve(Ce,we,Ve,ze){var Qe=Ve.type;return Qe===A?je(Ce,we,Ve.props.children,ze,Ve.key):we!==null&&(we.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===H&&uf(Qe)===we.type)?(we=v(we,Ve.props),ga(we,Ve),we.return=Ce,we):(we=Ja(Ve.type,Ve.key,Ve.props,null,Ce.mode,ze),ga(we,Ve),we.return=Ce,we)}function $e(Ce,we,Ve,ze){return we===null||we.tag!==4||we.stateNode.containerInfo!==Ve.containerInfo||we.stateNode.implementation!==Ve.implementation?(we=lc(Ve,Ce.mode,ze),we.return=Ce,we):(we=v(we,Ve.children||[]),we.return=Ce,we)}function je(Ce,we,Ve,ze,Qe){return we===null||we.tag!==7?(we=Ks(Ve,Ce.mode,ze,Qe),we.return=Ce,we):(we=v(we,Ve),we.return=Ce,we)}function He(Ce,we,Ve){if(typeof we=="string"&&we!==""||typeof we=="number"||typeof we=="bigint")return we=ac(""+we,Ce.mode,Ve),we.return=Ce,we;if(typeof we=="object"&&we!==null){switch(we.$$typeof){case T:return Ve=Ja(we.type,we.key,we.props,null,Ce.mode,Ve),ga(Ve,we),Ve.return=Ce,Ve;case w:return we=lc(we,Ce.mode,Ve),we.return=Ce,we;case H:var ze=we._init;return we=ze(we._payload),He(Ce,we,Ve)}if(de(we)||ne(we))return we=Ks(we,Ce.mode,Ve,null),we.return=Ce,we;if(typeof we.then=="function")return He(Ce,gl(we),Ve);if(we.$$typeof===re)return He(Ce,rl(Ce,we),Ve);yl(Ce,we)}return null}function De(Ce,we,Ve,ze){var Qe=we!==null?we.key:null;if(typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint")return Qe!==null?null:ce(Ce,we,""+Ve,ze);if(typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case T:return Ve.key===Qe?ve(Ce,we,Ve,ze):null;case w:return Ve.key===Qe?$e(Ce,we,Ve,ze):null;case H:return Qe=Ve._init,Ve=Qe(Ve._payload),De(Ce,we,Ve,ze)}if(de(Ve)||ne(Ve))return Qe!==null?null:je(Ce,we,Ve,ze,null);if(typeof Ve.then=="function")return De(Ce,we,gl(Ve),ze);if(Ve.$$typeof===re)return De(Ce,we,rl(Ce,Ve),ze);yl(Ce,Ve)}return null}function Me(Ce,we,Ve,ze,Qe){if(typeof ze=="string"&&ze!==""||typeof ze=="number"||typeof ze=="bigint")return Ce=Ce.get(Ve)||null,ce(we,Ce,""+ze,Qe);if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case T:return Ce=Ce.get(ze.key===null?Ve:ze.key)||null,ve(we,Ce,ze,Qe);case w:return Ce=Ce.get(ze.key===null?Ve:ze.key)||null,$e(we,Ce,ze,Qe);case H:var Qt=ze._init;return ze=Qt(ze._payload),Me(Ce,we,Ve,ze,Qe)}if(de(ze)||ne(ze))return Ce=Ce.get(Ve)||null,je(we,Ce,ze,Qe,null);if(typeof ze.then=="function")return Me(Ce,we,Ve,gl(ze),Qe);if(ze.$$typeof===re)return Me(Ce,we,Ve,rl(we,ze),Qe);yl(we,ze)}return null}function vt(Ce,we,Ve,ze){for(var Qe=null,Qt=null,et=we,rt=we=0,xr=null;et!==null&&rt<Ve.length;rt++){et.index>rt?(xr=et,et=null):xr=et.sibling;var In=De(Ce,et,Ve[rt],ze);if(In===null){et===null&&(et=xr);break}l&&et&&In.alternate===null&&u(Ce,et),we=S(In,we,rt),Qt===null?Qe=In:Qt.sibling=In,Qt=In,et=xr}if(rt===Ve.length)return p(Ce,et),kn&&Xs(Ce,rt),Qe;if(et===null){for(;rt<Ve.length;rt++)et=He(Ce,Ve[rt],ze),et!==null&&(we=S(et,we,rt),Qt===null?Qe=et:Qt.sibling=et,Qt=et);return kn&&Xs(Ce,rt),Qe}for(et=y(et);rt<Ve.length;rt++)xr=Me(et,Ce,rt,Ve[rt],ze),xr!==null&&(l&&xr.alternate!==null&&et.delete(xr.key===null?rt:xr.key),we=S(xr,we,rt),Qt===null?Qe=xr:Qt.sibling=xr,Qt=xr);return l&&et.forEach(function(Ms){return u(Ce,Ms)}),kn&&Xs(Ce,rt),Qe}function nt(Ce,we,Ve,ze){if(Ve==null)throw Error(o(151));for(var Qe=null,Qt=null,et=we,rt=we=0,xr=null,In=Ve.next();et!==null&&!In.done;rt++,In=Ve.next()){et.index>rt?(xr=et,et=null):xr=et.sibling;var Ms=De(Ce,et,In.value,ze);if(Ms===null){et===null&&(et=xr);break}l&&et&&Ms.alternate===null&&u(Ce,et),we=S(Ms,we,rt),Qt===null?Qe=Ms:Qt.sibling=Ms,Qt=Ms,et=xr}if(In.done)return p(Ce,et),kn&&Xs(Ce,rt),Qe;if(et===null){for(;!In.done;rt++,In=Ve.next())In=He(Ce,In.value,ze),In!==null&&(we=S(In,we,rt),Qt===null?Qe=In:Qt.sibling=In,Qt=In);return kn&&Xs(Ce,rt),Qe}for(et=y(et);!In.done;rt++,In=Ve.next())In=Me(et,Ce,rt,In.value,ze),In!==null&&(l&&In.alternate!==null&&et.delete(In.key===null?rt:In.key),we=S(In,we,rt),Qt===null?Qe=In:Qt.sibling=In,Qt=In);return l&&et.forEach(function(qm){return u(Ce,qm)}),kn&&Xs(Ce,rt),Qe}function Ln(Ce,we,Ve,ze){if(typeof Ve=="object"&&Ve!==null&&Ve.type===A&&Ve.key===null&&(Ve=Ve.props.children),typeof Ve=="object"&&Ve!==null){switch(Ve.$$typeof){case T:e:{for(var Qe=Ve.key;we!==null;){if(we.key===Qe){if(Qe=Ve.type,Qe===A){if(we.tag===7){p(Ce,we.sibling),ze=v(we,Ve.props.children),ze.return=Ce,Ce=ze;break e}}else if(we.elementType===Qe||typeof Qe=="object"&&Qe!==null&&Qe.$$typeof===H&&uf(Qe)===we.type){p(Ce,we.sibling),ze=v(we,Ve.props),ga(ze,Ve),ze.return=Ce,Ce=ze;break e}p(Ce,we);break}else u(Ce,we);we=we.sibling}Ve.type===A?(ze=Ks(Ve.props.children,Ce.mode,ze,Ve.key),ze.return=Ce,Ce=ze):(ze=Ja(Ve.type,Ve.key,Ve.props,null,Ce.mode,ze),ga(ze,Ve),ze.return=Ce,Ce=ze)}return Y(Ce);case w:e:{for(Qe=Ve.key;we!==null;){if(we.key===Qe)if(we.tag===4&&we.stateNode.containerInfo===Ve.containerInfo&&we.stateNode.implementation===Ve.implementation){p(Ce,we.sibling),ze=v(we,Ve.children||[]),ze.return=Ce,Ce=ze;break e}else{p(Ce,we);break}else u(Ce,we);we=we.sibling}ze=lc(Ve,Ce.mode,ze),ze.return=Ce,Ce=ze}return Y(Ce);case H:return Qe=Ve._init,Ve=Qe(Ve._payload),Ln(Ce,we,Ve,ze)}if(de(Ve))return vt(Ce,we,Ve,ze);if(ne(Ve)){if(Qe=ne(Ve),typeof Qe!="function")throw Error(o(150));return Ve=Qe.call(Ve),nt(Ce,we,Ve,ze)}if(typeof Ve.then=="function")return Ln(Ce,we,gl(Ve),ze);if(Ve.$$typeof===re)return Ln(Ce,we,rl(Ce,Ve),ze);yl(Ce,Ve)}return typeof Ve=="string"&&Ve!==""||typeof Ve=="number"||typeof Ve=="bigint"?(Ve=""+Ve,we!==null&&we.tag===6?(p(Ce,we.sibling),ze=v(we,Ve),ze.return=Ce,Ce=ze):(p(Ce,we),ze=ac(Ve,Ce.mode,ze),ze.return=Ce,Ce=ze),Y(Ce)):p(Ce,we)}return function(Ce,we,Ve,ze){try{ma=0;var Qe=Ln(Ce,we,Ve,ze);return Po=null,Qe}catch(et){if(et===oa||et===sl)throw et;var Qt=Zr(29,et,null,Ce.mode);return Qt.lanes=ze,Qt.return=Ce,Qt}finally{}}}var ko=df(!0),ff=df(!1),hi=be(null),ki=null;function Es(l){var u=l.alternate;Ae(mr,mr.current&1),Ae(hi,l),ki===null&&(u===null||Ro.current!==null||u.memoizedState!==null)&&(ki=l)}function hf(l){if(l.tag===22){if(Ae(mr,mr.current),Ae(hi,l),ki===null){var u=l.alternate;u!==null&&u.memoizedState!==null&&(ki=l)}}else vs()}function vs(){Ae(mr,mr.current),Ae(hi,hi.current)}function Zi(l){Se(hi),ki===l&&(ki=null),Se(mr)}var mr=be(0);function _l(l){for(var u=l;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||p.data==="$?"||Pu(p)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function jc(l,u,p,y){u=l.memoizedState,p=p(y,u),p=p==null?u:_({},u,p),l.memoizedState=p,l.lanes===0&&(l.updateQueue.baseState=p)}var Uc={enqueueSetState:function(l,u,p){l=l._reactInternals;var y=ni(),v=ys(y);v.payload=u,p!=null&&(v.callback=p),u=_s(l,v,y),u!==null&&(ri(u,l,y),la(u,l,y))},enqueueReplaceState:function(l,u,p){l=l._reactInternals;var y=ni(),v=ys(y);v.tag=1,v.payload=u,p!=null&&(v.callback=p),u=_s(l,v,y),u!==null&&(ri(u,l,y),la(u,l,y))},enqueueForceUpdate:function(l,u){l=l._reactInternals;var p=ni(),y=ys(p);y.tag=2,u!=null&&(y.callback=u),u=_s(l,y,p),u!==null&&(ri(u,l,p),la(u,l,p))}};function pf(l,u,p,y,v,S,Y){return l=l.stateNode,typeof l.shouldComponentUpdate=="function"?l.shouldComponentUpdate(y,S,Y):u.prototype&&u.prototype.isPureReactComponent?!Zo(p,y)||!Zo(v,S):!0}function mf(l,u,p,y){l=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==l&&Uc.enqueueReplaceState(u,u.state,null)}function ro(l,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(l=l.defaultProps){p===u&&(p=_({},p));for(var v in l)p[v]===void 0&&(p[v]=l[v])}return p}var bl=typeof reportError=="function"?reportError:function(l){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof l=="object"&&l!==null&&typeof l.message=="string"?String(l.message):String(l),error:l});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",l);return}console.error(l)};function gf(l){bl(l)}function yf(l){console.error(l)}function _f(l){bl(l)}function El(l,u){try{var p=l.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function bf(l,u,p){try{var y=l.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function zc(l,u,p){return p=ys(p),p.tag=3,p.payload={element:null},p.callback=function(){El(l,u)},p}function Ef(l){return l=ys(l),l.tag=3,l}function vf(l,u,p,y){var v=p.type.getDerivedStateFromError;if(typeof v=="function"){var S=y.value;l.payload=function(){return v(S)},l.callback=function(){bf(u,p,y)}}var Y=p.stateNode;Y!==null&&typeof Y.componentDidCatch=="function"&&(l.callback=function(){bf(u,p,y),typeof v!="function"&&(As===null?As=new Set([this]):As.add(this));var ce=y.stack;this.componentDidCatch(y.value,{componentStack:ce!==null?ce:""})})}function qp(l,u,p,y,v){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&ra(u,p,v,!0),p=hi.current,p!==null){switch(p.tag){case 13:return ki===null?hu():p.alternate===null&&tr===0&&(tr=3),p.flags&=-257,p.flags|=65536,p.lanes=v,y===_c?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),mu(l,y,v)),!1;case 22:return p.flags|=65536,y===_c?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),mu(l,y,v)),!1}throw Error(o(435,p.tag))}return mu(l,y,v),hu(),!1}if(kn)return u=hi.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=v,y!==dc&&(l=Error(o(422),{cause:y}),na(ci(l,p)))):(y!==dc&&(u=Error(o(423),{cause:y}),na(ci(u,p))),l=l.current.alternate,l.flags|=65536,v&=-v,l.lanes|=v,y=ci(y,p),v=zc(l.stateNode,y,v),vc(l,v),tr!==4&&(tr=2)),!1;var S=Error(o(520),{cause:y});if(S=ci(S,p),Sa===null?Sa=[S]:Sa.push(S),tr!==4&&(tr=2),u===null)return!0;y=ci(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,l=v&-v,p.lanes|=l,l=zc(p.stateNode,y,l),vc(p,l),!1;case 1:if(u=p.type,S=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(As===null||!As.has(S))))return p.flags|=65536,v&=-v,p.lanes|=v,v=Ef(v),vf(v,l,p,y),vc(p,v),!1}p=p.return}while(p!==null);return!1}var xf=Error(o(461)),Er=!1;function Ar(l,u,p,y){u.child=l===null?ff(u,null,p,y):ko(u,l.child,p,y)}function Tf(l,u,p,y,v){p=p.render;var S=u.ref;if("ref"in y){var Y={};for(var ce in y)ce!=="ref"&&(Y[ce]=y[ce])}else Y=y;return eo(u),y=Rc(l,u,p,Y,S,v),ce=Ac(),l!==null&&!Er?(Ic(l,u,v),Ji(l,u,v)):(kn&&ce&&cc(u),u.flags|=1,Ar(l,u,y,v),u.child)}function Sf(l,u,p,y,v){if(l===null){var S=p.type;return typeof S=="function"&&!oc(S)&&S.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=S,wf(l,u,S,y,v)):(l=Ja(p.type,null,y,u,u.mode,v),l.ref=u.ref,l.return=u,u.child=l)}if(S=l.child,!Qc(l,v)){var Y=S.memoizedProps;if(p=p.compare,p=p!==null?p:Zo,p(Y,y)&&l.ref===u.ref)return Ji(l,u,v)}return u.flags|=1,l=Wi(S,y),l.ref=u.ref,l.return=u,u.child=l}function wf(l,u,p,y,v){if(l!==null){var S=l.memoizedProps;if(Zo(S,y)&&l.ref===u.ref)if(Er=!1,u.pendingProps=y=S,Qc(l,v))(l.flags&131072)!==0&&(Er=!0);else return u.lanes=l.lanes,Ji(l,u,v)}return Hc(l,u,p,y,v)}function Rf(l,u,p){var y=u.pendingProps,v=y.children,S=l!==null?l.memoizedState:null;if(y.mode==="hidden"){if((u.flags&128)!==0){if(y=S!==null?S.baseLanes|p:p,l!==null){for(v=u.child=l.child,S=0;v!==null;)S=S|v.lanes|v.childLanes,v=v.sibling;u.childLanes=S&~y}else u.childLanes=0,u.child=null;return Af(l,u,y,p)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},l!==null&&il(u,S!==null?S.cachePool:null),S!==null?Sd(u,S):Tc(),hf(u);else return u.lanes=u.childLanes=536870912,Af(l,u,S!==null?S.baseLanes|p:p,p)}else S!==null?(il(u,S.cachePool),Sd(u,S),vs(),u.memoizedState=null):(l!==null&&il(u,null),Tc(),vs());return Ar(l,u,v,p),u.child}function Af(l,u,p,y){var v=yc();return v=v===null?null:{parent:pr._currentValue,pool:v},u.memoizedState={baseLanes:p,cachePool:v},l!==null&&il(u,null),Tc(),hf(u),l!==null&&ra(l,u,y,!0),null}function vl(l,u){var p=u.ref;if(p===null)l!==null&&l.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(o(284));(l===null||l.ref!==p)&&(u.flags|=4194816)}}function Hc(l,u,p,y,v){return eo(u),p=Rc(l,u,p,y,void 0,v),y=Ac(),l!==null&&!Er?(Ic(l,u,v),Ji(l,u,v)):(kn&&y&&cc(u),u.flags|=1,Ar(l,u,p,v),u.child)}function If(l,u,p,y,v,S){return eo(u),u.updateQueue=null,p=Rd(u,y,p,v),wd(l),y=Ac(),l!==null&&!Er?(Ic(l,u,S),Ji(l,u,S)):(kn&&y&&cc(u),u.flags|=1,Ar(l,u,p,S),u.child)}function Cf(l,u,p,y,v){if(eo(u),u.stateNode===null){var S=vo,Y=p.contextType;typeof Y=="object"&&Y!==null&&(S=kr(Y)),S=new p(y,S),u.memoizedState=S.state!==null&&S.state!==void 0?S.state:null,S.updater=Uc,u.stateNode=S,S._reactInternals=u,S=u.stateNode,S.props=y,S.state=u.memoizedState,S.refs={},bc(u),Y=p.contextType,S.context=typeof Y=="object"&&Y!==null?kr(Y):vo,S.state=u.memoizedState,Y=p.getDerivedStateFromProps,typeof Y=="function"&&(jc(u,p,Y,y),S.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof S.getSnapshotBeforeUpdate=="function"||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(Y=S.state,typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount(),Y!==S.state&&Uc.enqueueReplaceState(S,S.state,null),ua(u,y,S,v),ca(),S.state=u.memoizedState),typeof S.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(l===null){S=u.stateNode;var ce=u.memoizedProps,ve=ro(p,ce);S.props=ve;var $e=S.context,je=p.contextType;Y=vo,typeof je=="object"&&je!==null&&(Y=kr(je));var He=p.getDerivedStateFromProps;je=typeof He=="function"||typeof S.getSnapshotBeforeUpdate=="function",ce=u.pendingProps!==ce,je||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(ce||$e!==Y)&&mf(u,S,y,Y),gs=!1;var De=u.memoizedState;S.state=De,ua(u,y,S,v),ca(),$e=u.memoizedState,ce||De!==$e||gs?(typeof He=="function"&&(jc(u,p,He,y),$e=u.memoizedState),(ve=gs||pf(u,p,ve,y,De,$e,Y))?(je||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(u.flags|=4194308)):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=$e),S.props=y,S.state=$e,S.context=Y,y=ve):(typeof S.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{S=u.stateNode,Ec(l,u),Y=u.memoizedProps,je=ro(p,Y),S.props=je,He=u.pendingProps,De=S.context,$e=p.contextType,ve=vo,typeof $e=="object"&&$e!==null&&(ve=kr($e)),ce=p.getDerivedStateFromProps,($e=typeof ce=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(Y!==He||De!==ve)&&mf(u,S,y,ve),gs=!1,De=u.memoizedState,S.state=De,ua(u,y,S,v),ca();var Me=u.memoizedState;Y!==He||De!==Me||gs||l!==null&&l.dependencies!==null&&nl(l.dependencies)?(typeof ce=="function"&&(jc(u,p,ce,y),Me=u.memoizedState),(je=gs||pf(u,p,je,y,De,Me,ve)||l!==null&&l.dependencies!==null&&nl(l.dependencies))?($e||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(y,Me,ve),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(y,Me,ve)),typeof S.componentDidUpdate=="function"&&(u.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof S.componentDidUpdate!="function"||Y===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=Me),S.props=y,S.state=Me,S.context=ve,y=je):(typeof S.componentDidUpdate!="function"||Y===l.memoizedProps&&De===l.memoizedState||(u.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||Y===l.memoizedProps&&De===l.memoizedState||(u.flags|=1024),y=!1)}return S=y,vl(l,u),y=(u.flags&128)!==0,S||y?(S=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:S.render(),u.flags|=1,l!==null&&y?(u.child=ko(u,l.child,null,v),u.child=ko(u,null,p,v)):Ar(l,u,p,v),u.memoizedState=S.state,l=u.child):l=Ji(l,u,v),l}function Pf(l,u,p,y){return ta(),u.flags|=256,Ar(l,u,p,y),u.child}var qc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Wc(l){return{baseLanes:l,cachePool:gd()}}function Gc(l,u,p){return l=l!==null?l.childLanes&~p:0,u&&(l|=pi),l}function kf(l,u,p){var y=u.pendingProps,v=!1,S=(u.flags&128)!==0,Y;if((Y=S)||(Y=l!==null&&l.memoizedState===null?!1:(mr.current&2)!==0),Y&&(v=!0,u.flags&=-129),Y=(u.flags&32)!==0,u.flags&=-33,l===null){if(kn){if(v?Es(u):vs(),kn){var ce=er,ve;if(ve=ce){e:{for(ve=ce,ce=Pi;ve.nodeType!==8;){if(!ce){ce=null;break e}if(ve=Si(ve.nextSibling),ve===null){ce=null;break e}}ce=ve}ce!==null?(u.memoizedState={dehydrated:ce,treeContext:Ys!==null?{id:Gi,overflow:Ki}:null,retryLane:536870912,hydrationErrors:null},ve=Zr(18,null,null,0),ve.stateNode=ce,ve.return=u,u.child=ve,Or=u,er=null,ve=!0):ve=!1}ve||Zs(u)}if(ce=u.memoizedState,ce!==null&&(ce=ce.dehydrated,ce!==null))return Pu(ce)?u.lanes=32:u.lanes=536870912,null;Zi(u)}return ce=y.children,y=y.fallback,v?(vs(),v=u.mode,ce=xl({mode:"hidden",children:ce},v),y=Ks(y,v,p,null),ce.return=u,y.return=u,ce.sibling=y,u.child=ce,v=u.child,v.memoizedState=Wc(p),v.childLanes=Gc(l,Y,p),u.memoizedState=qc,y):(Es(u),Kc(u,ce))}if(ve=l.memoizedState,ve!==null&&(ce=ve.dehydrated,ce!==null)){if(S)u.flags&256?(Es(u),u.flags&=-257,u=Yc(l,u,p)):u.memoizedState!==null?(vs(),u.child=l.child,u.flags|=128,u=null):(vs(),v=y.fallback,ce=u.mode,y=xl({mode:"visible",children:y.children},ce),v=Ks(v,ce,p,null),v.flags|=2,y.return=u,v.return=u,y.sibling=v,u.child=y,ko(u,l.child,null,p),y=u.child,y.memoizedState=Wc(p),y.childLanes=Gc(l,Y,p),u.memoizedState=qc,u=v);else if(Es(u),Pu(ce)){if(Y=ce.nextSibling&&ce.nextSibling.dataset,Y)var $e=Y.dgst;Y=$e,y=Error(o(419)),y.stack="",y.digest=Y,na({value:y,source:null,stack:null}),u=Yc(l,u,p)}else if(Er||ra(l,u,p,!1),Y=(p&l.childLanes)!==0,Er||Y){if(Y=qn,Y!==null&&(y=p&-p,y=(y&42)!==0?1:Lt(y),y=(y&(Y.suspendedLanes|p))!==0?0:y,y!==0&&y!==ve.retryLane))throw ve.retryLane=y,Eo(l,y),ri(Y,l,y),xf;ce.data==="$?"||hu(),u=Yc(l,u,p)}else ce.data==="$?"?(u.flags|=192,u.child=l.child,u=null):(l=ve.treeContext,er=Si(ce.nextSibling),Or=u,kn=!0,Qs=null,Pi=!1,l!==null&&(di[fi++]=Gi,di[fi++]=Ki,di[fi++]=Ys,Gi=l.id,Ki=l.overflow,Ys=u),u=Kc(u,y.children),u.flags|=4096);return u}return v?(vs(),v=y.fallback,ce=u.mode,ve=l.child,$e=ve.sibling,y=Wi(ve,{mode:"hidden",children:y.children}),y.subtreeFlags=ve.subtreeFlags&65011712,$e!==null?v=Wi($e,v):(v=Ks(v,ce,p,null),v.flags|=2),v.return=u,y.return=u,y.sibling=v,u.child=y,y=v,v=u.child,ce=l.child.memoizedState,ce===null?ce=Wc(p):(ve=ce.cachePool,ve!==null?($e=pr._currentValue,ve=ve.parent!==$e?{parent:$e,pool:$e}:ve):ve=gd(),ce={baseLanes:ce.baseLanes|p,cachePool:ve}),v.memoizedState=ce,v.childLanes=Gc(l,Y,p),u.memoizedState=qc,y):(Es(u),p=l.child,l=p.sibling,p=Wi(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,l!==null&&(Y=u.deletions,Y===null?(u.deletions=[l],u.flags|=16):Y.push(l)),u.child=p,u.memoizedState=null,p)}function Kc(l,u){return u=xl({mode:"visible",children:u},l.mode),u.return=l,l.child=u}function xl(l,u){return l=Zr(22,l,null,u),l.lanes=0,l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},l}function Yc(l,u,p){return ko(u,l.child,null,p),l=Kc(u,u.pendingProps.children),l.flags|=2,u.memoizedState=null,l}function Vf(l,u,p){l.lanes|=u;var y=l.alternate;y!==null&&(y.lanes|=u),hc(l.return,u,p)}function Xc(l,u,p,y,v){var S=l.memoizedState;S===null?l.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:v}:(S.isBackwards=u,S.rendering=null,S.renderingStartTime=0,S.last=y,S.tail=p,S.tailMode=v)}function $f(l,u,p){var y=u.pendingProps,v=y.revealOrder,S=y.tail;if(Ar(l,u,y.children,p),y=mr.current,(y&2)!==0)y=y&1|2,u.flags|=128;else{if(l!==null&&(l.flags&128)!==0)e:for(l=u.child;l!==null;){if(l.tag===13)l.memoizedState!==null&&Vf(l,p,u);else if(l.tag===19)Vf(l,p,u);else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===u)break e;for(;l.sibling===null;){if(l.return===null||l.return===u)break e;l=l.return}l.sibling.return=l.return,l=l.sibling}y&=1}switch(Ae(mr,y),v){case"forwards":for(p=u.child,v=null;p!==null;)l=p.alternate,l!==null&&_l(l)===null&&(v=p),p=p.sibling;p=v,p===null?(v=u.child,u.child=null):(v=p.sibling,p.sibling=null),Xc(u,!1,v,p,S);break;case"backwards":for(p=null,v=u.child,u.child=null;v!==null;){if(l=v.alternate,l!==null&&_l(l)===null){u.child=v;break}l=v.sibling,v.sibling=p,p=v,v=l}Xc(u,!0,p,null,S);break;case"together":Xc(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Ji(l,u,p){if(l!==null&&(u.dependencies=l.dependencies),Rs|=u.lanes,(p&u.childLanes)===0)if(l!==null){if(ra(l,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(l!==null&&u.child!==l.child)throw Error(o(153));if(u.child!==null){for(l=u.child,p=Wi(l,l.pendingProps),u.child=p,p.return=u;l.sibling!==null;)l=l.sibling,p=p.sibling=Wi(l,l.pendingProps),p.return=u;p.sibling=null}return u.child}function Qc(l,u){return(l.lanes&u)!==0?!0:(l=l.dependencies,!!(l!==null&&nl(l)))}function Wp(l,u,p){switch(u.tag){case 3:Ke(u,u.stateNode.containerInfo),ps(u,pr,l.memoizedState.cache),ta();break;case 27:case 5:it(u);break;case 4:Ke(u,u.stateNode.containerInfo);break;case 10:ps(u,u.type,u.memoizedProps.value);break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Es(u),u.flags|=128,null):(p&u.child.childLanes)!==0?kf(l,u,p):(Es(u),l=Ji(l,u,p),l!==null?l.sibling:null);Es(u);break;case 19:var v=(l.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(ra(l,u,p,!1),y=(p&u.childLanes)!==0),v){if(y)return $f(l,u,p);u.flags|=128}if(v=u.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),Ae(mr,mr.current),y)break;return null;case 22:case 23:return u.lanes=0,Rf(l,u,p);case 24:ps(u,pr,l.memoizedState.cache)}return Ji(l,u,p)}function Df(l,u,p){if(l!==null)if(l.memoizedProps!==u.pendingProps)Er=!0;else{if(!Qc(l,p)&&(u.flags&128)===0)return Er=!1,Wp(l,u,p);Er=(l.flags&131072)!==0}else Er=!1,kn&&(u.flags&1048576)!==0&&cd(u,tl,u.index);switch(u.lanes=0,u.tag){case 16:e:{l=u.pendingProps;var y=u.elementType,v=y._init;if(y=v(y._payload),u.type=y,typeof y=="function")oc(y)?(l=ro(y,l),u.tag=1,u=Cf(null,u,y,l,p)):(u.tag=0,u=Hc(null,u,y,l,p));else{if(y!=null){if(v=y.$$typeof,v===ye){u.tag=11,u=Tf(null,u,y,l,p);break e}else if(v===z){u.tag=14,u=Sf(null,u,y,l,p);break e}}throw u=xe(y)||y,Error(o(306,u,""))}}return u;case 0:return Hc(l,u,u.type,u.pendingProps,p);case 1:return y=u.type,v=ro(y,u.pendingProps),Cf(l,u,y,v,p);case 3:e:{if(Ke(u,u.stateNode.containerInfo),l===null)throw Error(o(387));y=u.pendingProps;var S=u.memoizedState;v=S.element,Ec(l,u),ua(u,y,null,p);var Y=u.memoizedState;if(y=Y.cache,ps(u,pr,y),y!==S.cache&&pc(u,[pr],p,!0),ca(),y=Y.element,S.isDehydrated)if(S={element:y,isDehydrated:!1,cache:Y.cache},u.updateQueue.baseState=S,u.memoizedState=S,u.flags&256){u=Pf(l,u,y,p);break e}else if(y!==v){v=ci(Error(o(424)),u),na(v),u=Pf(l,u,y,p);break e}else{switch(l=u.stateNode.containerInfo,l.nodeType){case 9:l=l.body;break;default:l=l.nodeName==="HTML"?l.ownerDocument.body:l}for(er=Si(l.firstChild),Or=u,kn=!0,Qs=null,Pi=!0,p=ff(u,null,y,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(ta(),y===v){u=Ji(l,u,p);break e}Ar(l,u,y,p)}u=u.child}return u;case 26:return vl(l,u),l===null?(p=Lh(u.type,null,u.pendingProps,null))?u.memoizedState=p:kn||(p=u.type,l=u.pendingProps,y=Nl(qe.current).createElement(p),y[Rn]=u,y[En]=l,Cr(y,p,l),Zn(y),u.stateNode=y):u.memoizedState=Lh(u.type,l.memoizedProps,u.pendingProps,l.memoizedState),null;case 27:return it(u),l===null&&kn&&(y=u.stateNode=Nh(u.type,u.pendingProps,qe.current),Or=u,Pi=!0,v=er,Ps(u.type)?(ku=v,er=Si(y.firstChild)):er=v),Ar(l,u,u.pendingProps.children,p),vl(l,u),l===null&&(u.flags|=4194304),u.child;case 5:return l===null&&kn&&((v=y=er)&&(y=Em(y,u.type,u.pendingProps,Pi),y!==null?(u.stateNode=y,Or=u,er=Si(y.firstChild),Pi=!1,v=!0):v=!1),v||Zs(u)),it(u),v=u.type,S=u.pendingProps,Y=l!==null?l.memoizedProps:null,y=S.children,Au(v,S)?y=null:Y!==null&&Au(v,Y)&&(u.flags|=32),u.memoizedState!==null&&(v=Rc(l,u,Op,null,null,p),$a._currentValue=v),vl(l,u),Ar(l,u,y,p),u.child;case 6:return l===null&&kn&&((l=p=er)&&(p=vm(p,u.pendingProps,Pi),p!==null?(u.stateNode=p,Or=u,er=null,l=!0):l=!1),l||Zs(u)),null;case 13:return kf(l,u,p);case 4:return Ke(u,u.stateNode.containerInfo),y=u.pendingProps,l===null?u.child=ko(u,null,y,p):Ar(l,u,y,p),u.child;case 11:return Tf(l,u,u.type,u.pendingProps,p);case 7:return Ar(l,u,u.pendingProps,p),u.child;case 8:return Ar(l,u,u.pendingProps.children,p),u.child;case 12:return Ar(l,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,ps(u,u.type,y.value),Ar(l,u,y.children,p),u.child;case 9:return v=u.type._context,y=u.pendingProps.children,eo(u),v=kr(v),y=y(v),u.flags|=1,Ar(l,u,y,p),u.child;case 14:return Sf(l,u,u.type,u.pendingProps,p);case 15:return wf(l,u,u.type,u.pendingProps,p);case 19:return $f(l,u,p);case 31:return y=u.pendingProps,p=u.mode,y={mode:y.mode,children:y.children},l===null?(p=xl(y,p),p.ref=u.ref,u.child=p,p.return=u,u=p):(p=Wi(l.child,y),p.ref=u.ref,u.child=p,p.return=u,u=p),u;case 22:return Rf(l,u,p);case 24:return eo(u),y=kr(pr),l===null?(v=yc(),v===null&&(v=qn,S=mc(),v.pooledCache=S,S.refCount++,S!==null&&(v.pooledCacheLanes|=p),v=S),u.memoizedState={parent:y,cache:v},bc(u),ps(u,pr,v)):((l.lanes&p)!==0&&(Ec(l,u),ua(u,null,null,p),ca()),v=l.memoizedState,S=u.memoizedState,v.parent!==y?(v={parent:y,cache:y},u.memoizedState=v,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=v),ps(u,pr,y)):(y=S.cache,ps(u,pr,y),y!==v.cache&&pc(u,[pr],p,!0))),Ar(l,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(o(156,u.tag))}function es(l){l.flags|=4}function Mf(l,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)l.flags&=-16777217;else if(l.flags|=16777216,!Hh(u)){if(u=hi.current,u!==null&&((Sn&4194048)===Sn?ki!==null:(Sn&62914560)!==Sn&&(Sn&536870912)===0||u!==ki))throw aa=_c,yd;l.flags|=8192}}function Tl(l,u){u!==null&&(l.flags|=4),l.flags&16384&&(u=l.tag!==22?wt():536870912,l.lanes|=u,Mo|=u)}function ya(l,u){if(!kn)switch(l.tailMode){case"hidden":u=l.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?l.tail=null:p.sibling=null;break;case"collapsed":p=l.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||l.tail===null?l.tail=null:l.tail.sibling=null:y.sibling=null}}function Jn(l){var u=l.alternate!==null&&l.alternate.child===l.child,p=0,y=0;if(u)for(var v=l.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags&65011712,y|=v.flags&65011712,v.return=l,v=v.sibling;else for(v=l.child;v!==null;)p|=v.lanes|v.childLanes,y|=v.subtreeFlags,y|=v.flags,v.return=l,v=v.sibling;return l.subtreeFlags|=y,l.childLanes=p,u}function Gp(l,u,p){var y=u.pendingProps;switch(uc(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jn(u),null;case 1:return Jn(u),null;case 3:return p=u.stateNode,y=null,l!==null&&(y=l.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Xi(pr),Ze(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(l===null||l.child===null)&&(ea(u)?es(u):l===null||l.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,fd())),Jn(u),null;case 26:return p=u.memoizedState,l===null?(es(u),p!==null?(Jn(u),Mf(u,p)):(Jn(u),u.flags&=-16777217)):p?p!==l.memoizedState?(es(u),Jn(u),Mf(u,p)):(Jn(u),u.flags&=-16777217):(l.memoizedProps!==y&&es(u),Jn(u),u.flags&=-16777217),null;case 27:wn(u),p=qe.current;var v=u.type;if(l!==null&&u.stateNode!=null)l.memoizedProps!==y&&es(u);else{if(!y){if(u.stateNode===null)throw Error(o(166));return Jn(u),null}l=Be.current,ea(u)?ud(u):(l=Nh(v,y,p),u.stateNode=l,es(u))}return Jn(u),null;case 5:if(wn(u),p=u.type,l!==null&&u.stateNode!=null)l.memoizedProps!==y&&es(u);else{if(!y){if(u.stateNode===null)throw Error(o(166));return Jn(u),null}if(l=Be.current,ea(u))ud(u);else{switch(v=Nl(qe.current),l){case 1:l=v.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:l=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":l=v.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":l=v.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":l=v.createElement("div"),l.innerHTML="<script><\/script>",l=l.removeChild(l.firstChild);break;case"select":l=typeof y.is=="string"?v.createElement("select",{is:y.is}):v.createElement("select"),y.multiple?l.multiple=!0:y.size&&(l.size=y.size);break;default:l=typeof y.is=="string"?v.createElement(p,{is:y.is}):v.createElement(p)}}l[Rn]=u,l[En]=y;e:for(v=u.child;v!==null;){if(v.tag===5||v.tag===6)l.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break e;for(;v.sibling===null;){if(v.return===null||v.return===u)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}u.stateNode=l;e:switch(Cr(l,p,y),p){case"button":case"input":case"select":case"textarea":l=!!y.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&es(u)}}return Jn(u),u.flags&=-16777217,null;case 6:if(l&&u.stateNode!=null)l.memoizedProps!==y&&es(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(o(166));if(l=qe.current,ea(u)){if(l=u.stateNode,p=u.memoizedProps,y=null,v=Or,v!==null)switch(v.tag){case 27:case 5:y=v.memoizedProps}l[Rn]=u,l=!!(l.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||Ch(l.nodeValue,p)),l||Zs(u)}else l=Nl(l).createTextNode(y),l[Rn]=u,u.stateNode=l}return Jn(u),null;case 13:if(y=u.memoizedState,l===null||l.memoizedState!==null&&l.memoizedState.dehydrated!==null){if(v=ea(u),y!==null&&y.dehydrated!==null){if(l===null){if(!v)throw Error(o(318));if(v=u.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(o(317));v[Rn]=u}else ta(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Jn(u),v=!1}else v=fd(),l!==null&&l.memoizedState!==null&&(l.memoizedState.hydrationErrors=v),v=!0;if(!v)return u.flags&256?(Zi(u),u):(Zi(u),null)}if(Zi(u),(u.flags&128)!==0)return u.lanes=p,u;if(p=y!==null,l=l!==null&&l.memoizedState!==null,p){y=u.child,v=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(v=y.alternate.memoizedState.cachePool.pool);var S=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(S=y.memoizedState.cachePool.pool),S!==v&&(y.flags|=2048)}return p!==l&&p&&(u.child.flags|=8192),Tl(u,u.updateQueue),Jn(u),null;case 4:return Ze(),l===null&&xu(u.stateNode.containerInfo),Jn(u),null;case 10:return Xi(u.type),Jn(u),null;case 19:if(Se(mr),v=u.memoizedState,v===null)return Jn(u),null;if(y=(u.flags&128)!==0,S=v.rendering,S===null)if(y)ya(v,!1);else{if(tr!==0||l!==null&&(l.flags&128)!==0)for(l=u.child;l!==null;){if(S=_l(l),S!==null){for(u.flags|=128,ya(v,!1),l=S.updateQueue,u.updateQueue=l,Tl(u,l),u.subtreeFlags=0,l=p,p=u.child;p!==null;)ld(p,l),p=p.sibling;return Ae(mr,mr.current&1|2),u.child}l=l.sibling}v.tail!==null&&Ft()>Rl&&(u.flags|=128,y=!0,ya(v,!1),u.lanes=4194304)}else{if(!y)if(l=_l(S),l!==null){if(u.flags|=128,y=!0,l=l.updateQueue,u.updateQueue=l,Tl(u,l),ya(v,!0),v.tail===null&&v.tailMode==="hidden"&&!S.alternate&&!kn)return Jn(u),null}else 2*Ft()-v.renderingStartTime>Rl&&p!==536870912&&(u.flags|=128,y=!0,ya(v,!1),u.lanes=4194304);v.isBackwards?(S.sibling=u.child,u.child=S):(l=v.last,l!==null?l.sibling=S:u.child=S,v.last=S)}return v.tail!==null?(u=v.tail,v.rendering=u,v.tail=u.sibling,v.renderingStartTime=Ft(),u.sibling=null,l=mr.current,Ae(mr,y?l&1|2:l&1),u):(Jn(u),null);case 22:case 23:return Zi(u),Sc(),y=u.memoizedState!==null,l!==null?l.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(Jn(u),u.subtreeFlags&6&&(u.flags|=8192)):Jn(u),p=u.updateQueue,p!==null&&Tl(u,p.retryQueue),p=null,l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),l!==null&&Se(to),null;case 24:return p=null,l!==null&&(p=l.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Xi(pr),Jn(u),null;case 25:return null;case 30:return null}throw Error(o(156,u.tag))}function Kp(l,u){switch(uc(u),u.tag){case 1:return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 3:return Xi(pr),Ze(),l=u.flags,(l&65536)!==0&&(l&128)===0?(u.flags=l&-65537|128,u):null;case 26:case 27:case 5:return wn(u),null;case 13:if(Zi(u),l=u.memoizedState,l!==null&&l.dehydrated!==null){if(u.alternate===null)throw Error(o(340));ta()}return l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 19:return Se(mr),null;case 4:return Ze(),null;case 10:return Xi(u.type),null;case 22:case 23:return Zi(u),Sc(),l!==null&&Se(to),l=u.flags,l&65536?(u.flags=l&-65537|128,u):null;case 24:return Xi(pr),null;case 25:return null;default:return null}}function Nf(l,u){switch(uc(u),u.tag){case 3:Xi(pr),Ze();break;case 26:case 27:case 5:wn(u);break;case 4:Ze();break;case 13:Zi(u);break;case 19:Se(mr);break;case 10:Xi(u.type);break;case 22:case 23:Zi(u),Sc(),l!==null&&Se(to);break;case 24:Xi(pr)}}function ba(l,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var v=y.next;p=v;do{if((p.tag&l)===l){y=void 0;var S=p.create,Y=p.inst;y=S(),Y.destroy=y}p=p.next}while(p!==v)}}catch(ce){zn(u,u.return,ce)}}function xs(l,u,p){try{var y=u.updateQueue,v=y!==null?y.lastEffect:null;if(v!==null){var S=v.next;y=S;do{if((y.tag&l)===l){var Y=y.inst,ce=Y.destroy;if(ce!==void 0){Y.destroy=void 0,v=u;var ve=p,$e=ce;try{$e()}catch(je){zn(v,ve,je)}}}y=y.next}while(y!==S)}}catch(je){zn(u,u.return,je)}}function Of(l){var u=l.updateQueue;if(u!==null){var p=l.stateNode;try{Td(u,p)}catch(y){zn(l,l.return,y)}}}function Bf(l,u,p){p.props=ro(l.type,l.memoizedProps),p.state=l.memoizedState;try{p.componentWillUnmount()}catch(y){zn(l,u,y)}}function Ea(l,u){try{var p=l.ref;if(p!==null){switch(l.tag){case 26:case 27:case 5:var y=l.stateNode;break;case 30:y=l.stateNode;break;default:y=l.stateNode}typeof p=="function"?l.refCleanup=p(y):p.current=y}}catch(v){zn(l,u,v)}}function Vi(l,u){var p=l.ref,y=l.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(v){zn(l,u,v)}finally{l.refCleanup=null,l=l.alternate,l!=null&&(l.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(v){zn(l,u,v)}else p.current=null}function Lf(l){var u=l.type,p=l.memoizedProps,y=l.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(v){zn(l,l.return,v)}}function Zc(l,u,p){try{var y=l.stateNode;mm(y,l.type,p,u),y[En]=u}catch(v){zn(l,l.return,v)}}function Ff(l){return l.tag===5||l.tag===3||l.tag===26||l.tag===27&&Ps(l.type)||l.tag===4}function Jc(l){e:for(;;){for(;l.sibling===null;){if(l.return===null||Ff(l.return))return null;l=l.return}for(l.sibling.return=l.return,l=l.sibling;l.tag!==5&&l.tag!==6&&l.tag!==18;){if(l.tag===27&&Ps(l.type)||l.flags&2||l.child===null||l.tag===4)continue e;l.child.return=l,l=l.child}if(!(l.flags&2))return l.stateNode}}function eu(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(l,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(l),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=Ml));else if(y!==4&&(y===27&&Ps(l.type)&&(p=l.stateNode,u=null),l=l.child,l!==null))for(eu(l,u,p),l=l.sibling;l!==null;)eu(l,u,p),l=l.sibling}function Sl(l,u,p){var y=l.tag;if(y===5||y===6)l=l.stateNode,u?p.insertBefore(l,u):p.appendChild(l);else if(y!==4&&(y===27&&Ps(l.type)&&(p=l.stateNode),l=l.child,l!==null))for(Sl(l,u,p),l=l.sibling;l!==null;)Sl(l,u,p),l=l.sibling}function jf(l){var u=l.stateNode,p=l.memoizedProps;try{for(var y=l.type,v=u.attributes;v.length;)u.removeAttributeNode(v[0]);Cr(u,y,p),u[Rn]=l,u[En]=p}catch(S){zn(l,l.return,S)}}var ts=!1,rr=!1,tu=!1,Uf=typeof WeakSet=="function"?WeakSet:Set,vr=null;function Yp(l,u){if(l=l.containerInfo,wu=Ul,l=Qu(l),Jl(l)){if("selectionStart"in l)var p={start:l.selectionStart,end:l.selectionEnd};else e:{p=(p=l.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var v=y.anchorOffset,S=y.focusNode;y=y.focusOffset;try{p.nodeType,S.nodeType}catch{p=null;break e}var Y=0,ce=-1,ve=-1,$e=0,je=0,He=l,De=null;t:for(;;){for(var Me;He!==p||v!==0&&He.nodeType!==3||(ce=Y+v),He!==S||y!==0&&He.nodeType!==3||(ve=Y+y),He.nodeType===3&&(Y+=He.nodeValue.length),(Me=He.firstChild)!==null;)De=He,He=Me;for(;;){if(He===l)break t;if(De===p&&++$e===v&&(ce=Y),De===S&&++je===y&&(ve=Y),(Me=He.nextSibling)!==null)break;He=De,De=He.parentNode}He=Me}p=ce===-1||ve===-1?null:{start:ce,end:ve}}else p=null}p=p||{start:0,end:0}}else p=null;for(Ru={focusedElem:l,selectionRange:p},Ul=!1,vr=u;vr!==null;)if(u=vr,l=u.child,(u.subtreeFlags&1024)!==0&&l!==null)l.return=u,vr=l;else for(;vr!==null;){switch(u=vr,S=u.alternate,l=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((l&1024)!==0&&S!==null){l=void 0,p=u,v=S.memoizedProps,S=S.memoizedState,y=p.stateNode;try{var vt=ro(p.type,v,p.elementType===p.type);l=y.getSnapshotBeforeUpdate(vt,S),y.__reactInternalSnapshotBeforeUpdate=l}catch(nt){zn(p,p.return,nt)}}break;case 3:if((l&1024)!==0){if(l=u.stateNode.containerInfo,p=l.nodeType,p===9)Cu(l);else if(p===1)switch(l.nodeName){case"HEAD":case"HTML":case"BODY":Cu(l);break;default:l.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((l&1024)!==0)throw Error(o(163))}if(l=u.sibling,l!==null){l.return=u.return,vr=l;break}vr=u.return}}function zf(l,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:Ts(l,p),y&4&&ba(5,p);break;case 1:if(Ts(l,p),y&4)if(l=p.stateNode,u===null)try{l.componentDidMount()}catch(Y){zn(p,p.return,Y)}else{var v=ro(p.type,u.memoizedProps);u=u.memoizedState;try{l.componentDidUpdate(v,u,l.__reactInternalSnapshotBeforeUpdate)}catch(Y){zn(p,p.return,Y)}}y&64&&Of(p),y&512&&Ea(p,p.return);break;case 3:if(Ts(l,p),y&64&&(l=p.updateQueue,l!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{Td(l,u)}catch(Y){zn(p,p.return,Y)}}break;case 27:u===null&&y&4&&jf(p);case 26:case 5:Ts(l,p),u===null&&y&4&&Lf(p),y&512&&Ea(p,p.return);break;case 12:Ts(l,p);break;case 13:Ts(l,p),y&4&&Wf(l,p),y&64&&(l=p.memoizedState,l!==null&&(l=l.dehydrated,l!==null&&(p=im.bind(null,p),xm(l,p))));break;case 22:if(y=p.memoizedState!==null||ts,!y){u=u!==null&&u.memoizedState!==null||rr,v=ts;var S=rr;ts=y,(rr=u)&&!S?Ss(l,p,(p.subtreeFlags&8772)!==0):Ts(l,p),ts=v,rr=S}break;case 30:break;default:Ts(l,p)}}function Hf(l){var u=l.alternate;u!==null&&(l.alternate=null,Hf(u)),l.child=null,l.deletions=null,l.sibling=null,l.tag===5&&(u=l.stateNode,u!==null&&ii(u)),l.stateNode=null,l.return=null,l.dependencies=null,l.memoizedProps=null,l.memoizedState=null,l.pendingProps=null,l.stateNode=null,l.updateQueue=null}var Xn=null,Fr=!1;function ns(l,u,p){for(p=p.child;p!==null;)qf(l,u,p),p=p.sibling}function qf(l,u,p){if(ie&&typeof ie.onCommitFiberUnmount=="function")try{ie.onCommitFiberUnmount(Vn,p)}catch{}switch(p.tag){case 26:rr||Vi(p,u),ns(l,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:rr||Vi(p,u);var y=Xn,v=Fr;Ps(p.type)&&(Xn=p.stateNode,Fr=!1),ns(l,u,p),Ca(p.stateNode),Xn=y,Fr=v;break;case 5:rr||Vi(p,u);case 6:if(y=Xn,v=Fr,Xn=null,ns(l,u,p),Xn=y,Fr=v,Xn!==null)if(Fr)try{(Xn.nodeType===9?Xn.body:Xn.nodeName==="HTML"?Xn.ownerDocument.body:Xn).removeChild(p.stateNode)}catch(S){zn(p,u,S)}else try{Xn.removeChild(p.stateNode)}catch(S){zn(p,u,S)}break;case 18:Xn!==null&&(Fr?(l=Xn,Dh(l.nodeType===9?l.body:l.nodeName==="HTML"?l.ownerDocument.body:l,p.stateNode),Oa(l)):Dh(Xn,p.stateNode));break;case 4:y=Xn,v=Fr,Xn=p.stateNode.containerInfo,Fr=!0,ns(l,u,p),Xn=y,Fr=v;break;case 0:case 11:case 14:case 15:rr||xs(2,p,u),rr||xs(4,p,u),ns(l,u,p);break;case 1:rr||(Vi(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&Bf(p,u,y)),ns(l,u,p);break;case 21:ns(l,u,p);break;case 22:rr=(y=rr)||p.memoizedState!==null,ns(l,u,p),rr=y;break;default:ns(l,u,p)}}function Wf(l,u){if(u.memoizedState===null&&(l=u.alternate,l!==null&&(l=l.memoizedState,l!==null&&(l=l.dehydrated,l!==null))))try{Oa(l)}catch(p){zn(u,u.return,p)}}function Xp(l){switch(l.tag){case 13:case 19:var u=l.stateNode;return u===null&&(u=l.stateNode=new Uf),u;case 22:return l=l.stateNode,u=l._retryCache,u===null&&(u=l._retryCache=new Uf),u;default:throw Error(o(435,l.tag))}}function nu(l,u){var p=Xp(l);u.forEach(function(y){var v=sm.bind(null,l,y);p.has(y)||(p.add(y),y.then(v,v))})}function Jr(l,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var v=p[y],S=l,Y=u,ce=Y;e:for(;ce!==null;){switch(ce.tag){case 27:if(Ps(ce.type)){Xn=ce.stateNode,Fr=!1;break e}break;case 5:Xn=ce.stateNode,Fr=!1;break e;case 3:case 4:Xn=ce.stateNode.containerInfo,Fr=!0;break e}ce=ce.return}if(Xn===null)throw Error(o(160));qf(S,Y,v),Xn=null,Fr=!1,S=v.alternate,S!==null&&(S.return=null),v.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)Gf(u,l),u=u.sibling}var Ti=null;function Gf(l,u){var p=l.alternate,y=l.flags;switch(l.tag){case 0:case 11:case 14:case 15:Jr(u,l),ei(l),y&4&&(xs(3,l,l.return),ba(3,l),xs(5,l,l.return));break;case 1:Jr(u,l),ei(l),y&512&&(rr||p===null||Vi(p,p.return)),y&64&&ts&&(l=l.updateQueue,l!==null&&(y=l.callbacks,y!==null&&(p=l.shared.hiddenCallbacks,l.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var v=Ti;if(Jr(u,l),ei(l),y&512&&(rr||p===null||Vi(p,p.return)),y&4){var S=p!==null?p.memoizedState:null;if(y=l.memoizedState,p===null)if(y===null)if(l.stateNode===null){e:{y=l.type,p=l.memoizedProps,v=v.ownerDocument||v;t:switch(y){case"title":S=v.getElementsByTagName("title")[0],(!S||S[gi]||S[Rn]||S.namespaceURI==="http://www.w3.org/2000/svg"||S.hasAttribute("itemprop"))&&(S=v.createElement(y),v.head.insertBefore(S,v.querySelector("head > title"))),Cr(S,y,p),S[Rn]=l,Zn(S),y=S;break e;case"link":var Y=Uh("link","href",v).get(y+(p.href||""));if(Y){for(var ce=0;ce<Y.length;ce++)if(S=Y[ce],S.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&S.getAttribute("rel")===(p.rel==null?null:p.rel)&&S.getAttribute("title")===(p.title==null?null:p.title)&&S.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){Y.splice(ce,1);break t}}S=v.createElement(y),Cr(S,y,p),v.head.appendChild(S);break;case"meta":if(Y=Uh("meta","content",v).get(y+(p.content||""))){for(ce=0;ce<Y.length;ce++)if(S=Y[ce],S.getAttribute("content")===(p.content==null?null:""+p.content)&&S.getAttribute("name")===(p.name==null?null:p.name)&&S.getAttribute("property")===(p.property==null?null:p.property)&&S.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&S.getAttribute("charset")===(p.charSet==null?null:p.charSet)){Y.splice(ce,1);break t}}S=v.createElement(y),Cr(S,y,p),v.head.appendChild(S);break;default:throw Error(o(468,y))}S[Rn]=l,Zn(S),y=S}l.stateNode=y}else zh(v,l.type,l.stateNode);else l.stateNode=jh(v,y,l.memoizedProps);else S!==y?(S===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):S.count--,y===null?zh(v,l.type,l.stateNode):jh(v,y,l.memoizedProps)):y===null&&l.stateNode!==null&&Zc(l,l.memoizedProps,p.memoizedProps)}break;case 27:Jr(u,l),ei(l),y&512&&(rr||p===null||Vi(p,p.return)),p!==null&&y&4&&Zc(l,l.memoizedProps,p.memoizedProps);break;case 5:if(Jr(u,l),ei(l),y&512&&(rr||p===null||Vi(p,p.return)),l.flags&32){v=l.stateNode;try{Mr(v,"")}catch(Me){zn(l,l.return,Me)}}y&4&&l.stateNode!=null&&(v=l.memoizedProps,Zc(l,v,p!==null?p.memoizedProps:v)),y&1024&&(tu=!0);break;case 6:if(Jr(u,l),ei(l),y&4){if(l.stateNode===null)throw Error(o(162));y=l.memoizedProps,p=l.stateNode;try{p.nodeValue=y}catch(Me){zn(l,l.return,Me)}}break;case 3:if(Ll=null,v=Ti,Ti=Ol(u.containerInfo),Jr(u,l),Ti=v,ei(l),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Oa(u.containerInfo)}catch(Me){zn(l,l.return,Me)}tu&&(tu=!1,Kf(l));break;case 4:y=Ti,Ti=Ol(l.stateNode.containerInfo),Jr(u,l),ei(l),Ti=y;break;case 12:Jr(u,l),ei(l);break;case 13:Jr(u,l),ei(l),l.child.flags&8192&&l.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(lu=Ft()),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,nu(l,y)));break;case 22:v=l.memoizedState!==null;var ve=p!==null&&p.memoizedState!==null,$e=ts,je=rr;if(ts=$e||v,rr=je||ve,Jr(u,l),rr=je,ts=$e,ei(l),y&8192)e:for(u=l.stateNode,u._visibility=v?u._visibility&-2:u._visibility|1,v&&(p===null||ve||ts||rr||io(l)),p=null,u=l;;){if(u.tag===5||u.tag===26){if(p===null){ve=p=u;try{if(S=ve.stateNode,v)Y=S.style,typeof Y.setProperty=="function"?Y.setProperty("display","none","important"):Y.display="none";else{ce=ve.stateNode;var He=ve.memoizedProps.style,De=He!=null&&He.hasOwnProperty("display")?He.display:null;ce.style.display=De==null||typeof De=="boolean"?"":(""+De).trim()}}catch(Me){zn(ve,ve.return,Me)}}}else if(u.tag===6){if(p===null){ve=u;try{ve.stateNode.nodeValue=v?"":ve.memoizedProps}catch(Me){zn(ve,ve.return,Me)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===l)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===l)break e;for(;u.sibling===null;){if(u.return===null||u.return===l)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=l.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,nu(l,p))));break;case 19:Jr(u,l),ei(l),y&4&&(y=l.updateQueue,y!==null&&(l.updateQueue=null,nu(l,y)));break;case 30:break;case 21:break;default:Jr(u,l),ei(l)}}function ei(l){var u=l.flags;if(u&2){try{for(var p,y=l.return;y!==null;){if(Ff(y)){p=y;break}y=y.return}if(p==null)throw Error(o(160));switch(p.tag){case 27:var v=p.stateNode,S=Jc(l);Sl(l,S,v);break;case 5:var Y=p.stateNode;p.flags&32&&(Mr(Y,""),p.flags&=-33);var ce=Jc(l);Sl(l,ce,Y);break;case 3:case 4:var ve=p.stateNode.containerInfo,$e=Jc(l);eu(l,$e,ve);break;default:throw Error(o(161))}}catch(je){zn(l,l.return,je)}l.flags&=-3}u&4096&&(l.flags&=-4097)}function Kf(l){if(l.subtreeFlags&1024)for(l=l.child;l!==null;){var u=l;Kf(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),l=l.sibling}}function Ts(l,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)zf(l,u.alternate,u),u=u.sibling}function io(l){for(l=l.child;l!==null;){var u=l;switch(u.tag){case 0:case 11:case 14:case 15:xs(4,u,u.return),io(u);break;case 1:Vi(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&Bf(u,u.return,p),io(u);break;case 27:Ca(u.stateNode);case 26:case 5:Vi(u,u.return),io(u);break;case 22:u.memoizedState===null&&io(u);break;case 30:io(u);break;default:io(u)}l=l.sibling}}function Ss(l,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,v=l,S=u,Y=S.flags;switch(S.tag){case 0:case 11:case 15:Ss(v,S,p),ba(4,S);break;case 1:if(Ss(v,S,p),y=S,v=y.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch($e){zn(y,y.return,$e)}if(y=S,v=y.updateQueue,v!==null){var ce=y.stateNode;try{var ve=v.shared.hiddenCallbacks;if(ve!==null)for(v.shared.hiddenCallbacks=null,v=0;v<ve.length;v++)xd(ve[v],ce)}catch($e){zn(y,y.return,$e)}}p&&Y&64&&Of(S),Ea(S,S.return);break;case 27:jf(S);case 26:case 5:Ss(v,S,p),p&&y===null&&Y&4&&Lf(S),Ea(S,S.return);break;case 12:Ss(v,S,p);break;case 13:Ss(v,S,p),p&&Y&4&&Wf(v,S);break;case 22:S.memoizedState===null&&Ss(v,S,p),Ea(S,S.return);break;case 30:break;default:Ss(v,S,p)}u=u.sibling}}function ru(l,u){var p=null;l!==null&&l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(p=l.memoizedState.cachePool.pool),l=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(l=u.memoizedState.cachePool.pool),l!==p&&(l!=null&&l.refCount++,p!=null&&ia(p))}function iu(l,u){l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&ia(l))}function $i(l,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)Yf(l,u,p,y),u=u.sibling}function Yf(l,u,p,y){var v=u.flags;switch(u.tag){case 0:case 11:case 15:$i(l,u,p,y),v&2048&&ba(9,u);break;case 1:$i(l,u,p,y);break;case 3:$i(l,u,p,y),v&2048&&(l=null,u.alternate!==null&&(l=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==l&&(u.refCount++,l!=null&&ia(l)));break;case 12:if(v&2048){$i(l,u,p,y),l=u.stateNode;try{var S=u.memoizedProps,Y=S.id,ce=S.onPostCommit;typeof ce=="function"&&ce(Y,u.alternate===null?"mount":"update",l.passiveEffectDuration,-0)}catch(ve){zn(u,u.return,ve)}}else $i(l,u,p,y);break;case 13:$i(l,u,p,y);break;case 23:break;case 22:S=u.stateNode,Y=u.alternate,u.memoizedState!==null?S._visibility&2?$i(l,u,p,y):va(l,u):S._visibility&2?$i(l,u,p,y):(S._visibility|=2,Vo(l,u,p,y,(u.subtreeFlags&10256)!==0)),v&2048&&ru(Y,u);break;case 24:$i(l,u,p,y),v&2048&&iu(u.alternate,u);break;default:$i(l,u,p,y)}}function Vo(l,u,p,y,v){for(v=v&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var S=l,Y=u,ce=p,ve=y,$e=Y.flags;switch(Y.tag){case 0:case 11:case 15:Vo(S,Y,ce,ve,v),ba(8,Y);break;case 23:break;case 22:var je=Y.stateNode;Y.memoizedState!==null?je._visibility&2?Vo(S,Y,ce,ve,v):va(S,Y):(je._visibility|=2,Vo(S,Y,ce,ve,v)),v&&$e&2048&&ru(Y.alternate,Y);break;case 24:Vo(S,Y,ce,ve,v),v&&$e&2048&&iu(Y.alternate,Y);break;default:Vo(S,Y,ce,ve,v)}u=u.sibling}}function va(l,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=l,y=u,v=y.flags;switch(y.tag){case 22:va(p,y),v&2048&&ru(y.alternate,y);break;case 24:va(p,y),v&2048&&iu(y.alternate,y);break;default:va(p,y)}u=u.sibling}}var xa=8192;function $o(l){if(l.subtreeFlags&xa)for(l=l.child;l!==null;)Xf(l),l=l.sibling}function Xf(l){switch(l.tag){case 26:$o(l),l.flags&xa&&l.memoizedState!==null&&Mm(Ti,l.memoizedState,l.memoizedProps);break;case 5:$o(l);break;case 3:case 4:var u=Ti;Ti=Ol(l.stateNode.containerInfo),$o(l),Ti=u;break;case 22:l.memoizedState===null&&(u=l.alternate,u!==null&&u.memoizedState!==null?(u=xa,xa=16777216,$o(l),xa=u):$o(l));break;default:$o(l)}}function Qf(l){var u=l.alternate;if(u!==null&&(l=u.child,l!==null)){u.child=null;do u=l.sibling,l.sibling=null,l=u;while(l!==null)}}function Ta(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];vr=y,Jf(y,l)}Qf(l)}if(l.subtreeFlags&10256)for(l=l.child;l!==null;)Zf(l),l=l.sibling}function Zf(l){switch(l.tag){case 0:case 11:case 15:Ta(l),l.flags&2048&&xs(9,l,l.return);break;case 3:Ta(l);break;case 12:Ta(l);break;case 22:var u=l.stateNode;l.memoizedState!==null&&u._visibility&2&&(l.return===null||l.return.tag!==13)?(u._visibility&=-3,wl(l)):Ta(l);break;default:Ta(l)}}function wl(l){var u=l.deletions;if((l.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];vr=y,Jf(y,l)}Qf(l)}for(l=l.child;l!==null;){switch(u=l,u.tag){case 0:case 11:case 15:xs(8,u,u.return),wl(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,wl(u));break;default:wl(u)}l=l.sibling}}function Jf(l,u){for(;vr!==null;){var p=vr;switch(p.tag){case 0:case 11:case 15:xs(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:ia(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,vr=y;else e:for(p=l;vr!==null;){y=vr;var v=y.sibling,S=y.return;if(Hf(y),y===p){vr=null;break e}if(v!==null){v.return=S,vr=v;break e}vr=S}}}var Qp={getCacheForType:function(l){var u=kr(pr),p=u.data.get(l);return p===void 0&&(p=l(),u.data.set(l,p)),p}},Zp=typeof WeakMap=="function"?WeakMap:Map,Dn=0,qn=null,mn=null,Sn=0,Mn=0,ti=null,ws=!1,Do=!1,su=!1,rs=0,tr=0,Rs=0,so=0,ou=0,pi=0,Mo=0,Sa=null,jr=null,au=!1,lu=0,Rl=1/0,Al=null,As=null,Ir=0,Is=null,No=null,Oo=0,cu=0,uu=null,eh=null,wa=0,du=null;function ni(){if((Dn&2)!==0&&Sn!==0)return Sn&-Sn;if(oe.T!==null){var l=So;return l!==0?l:_u()}return jn()}function th(){pi===0&&(pi=(Sn&536870912)===0||kn?dt():536870912);var l=hi.current;return l!==null&&(l.flags|=32),pi}function ri(l,u,p){(l===qn&&(Mn===2||Mn===9)||l.cancelPendingCommit!==null)&&(Bo(l,0),Cs(l,Sn,pi,!1)),jt(l,p),((Dn&2)===0||l!==qn)&&(l===qn&&((Dn&2)===0&&(so|=p),tr===4&&Cs(l,Sn,pi,!1)),Di(l))}function nh(l,u,p){if((Dn&6)!==0)throw Error(o(327));var y=!p&&(u&124)===0&&(u&l.expiredLanes)===0||Wt(l,u),v=y?tm(l,u):pu(l,u,!0),S=y;do{if(v===0){Do&&!y&&Cs(l,u,0,!1);break}else{if(p=l.current.alternate,S&&!Jp(p)){v=pu(l,u,!1),S=!1;continue}if(v===2){if(S=u,l.errorRecoveryDisabledLanes&S)var Y=0;else Y=l.pendingLanes&-536870913,Y=Y!==0?Y:Y&536870912?536870912:0;if(Y!==0){u=Y;e:{var ce=l;v=Sa;var ve=ce.current.memoizedState.isDehydrated;if(ve&&(Bo(ce,Y).flags|=256),Y=pu(ce,Y,!1),Y!==2){if(su&&!ve){ce.errorRecoveryDisabledLanes|=S,so|=S,v=4;break e}S=jr,jr=v,S!==null&&(jr===null?jr=S:jr.push.apply(jr,S))}v=Y}if(S=!1,v!==2)continue}}if(v===1){Bo(l,0),Cs(l,u,0,!0);break}e:{switch(y=l,S=v,S){case 0:case 1:throw Error(o(345));case 4:if((u&4194048)!==u)break;case 6:Cs(y,u,pi,!ws);break e;case 2:jr=null;break;case 3:case 5:break;default:throw Error(o(329))}if((u&62914560)===u&&(v=lu+300-Ft(),10<v)){if(Cs(y,u,pi,!ws),At(y,0,!0)!==0)break e;y.timeoutHandle=Vh(rh.bind(null,y,p,jr,Al,au,u,pi,so,Mo,ws,S,2,-0,0),v);break e}rh(y,p,jr,Al,au,u,pi,so,Mo,ws,S,0,-0,0)}}break}while(!0);Di(l)}function rh(l,u,p,y,v,S,Y,ce,ve,$e,je,He,De,Me){if(l.timeoutHandle=-1,He=u.subtreeFlags,(He&8192||(He&16785408)===16785408)&&(Va={stylesheets:null,count:0,unsuspend:Dm},Xf(u),He=Nm(),He!==null)){l.cancelPendingCommit=He(uh.bind(null,l,u,S,p,y,v,Y,ce,ve,je,1,De,Me)),Cs(l,S,Y,!$e);return}uh(l,u,S,p,y,v,Y,ce,ve)}function Jp(l){for(var u=l;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var v=p[y],S=v.getSnapshot;v=v.value;try{if(!Qr(S(),v))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===l)break;for(;u.sibling===null;){if(u.return===null||u.return===l)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function Cs(l,u,p,y){u&=~ou,u&=~so,l.suspendedLanes|=u,l.pingedLanes&=~u,y&&(l.warmLanes|=u),y=l.expirationTimes;for(var v=u;0<v;){var S=31-P(v),Y=1<<S;y[S]=-1,v&=~Y}p!==0&&bn(l,p,u)}function Il(){return(Dn&6)===0?(Ra(0),!1):!0}function fu(){if(mn!==null){if(Mn===0)var l=mn.return;else l=mn,Yi=Js=null,Cc(l),Po=null,ma=0,l=mn;for(;l!==null;)Nf(l.alternate,l),l=l.return;mn=null}}function Bo(l,u){var p=l.timeoutHandle;p!==-1&&(l.timeoutHandle=-1,ym(p)),p=l.cancelPendingCommit,p!==null&&(l.cancelPendingCommit=null,p()),fu(),qn=l,mn=p=Wi(l.current,null),Sn=u,Mn=0,ti=null,ws=!1,Do=Wt(l,u),su=!1,Mo=pi=ou=so=Rs=tr=0,jr=Sa=null,au=!1,(u&8)!==0&&(u|=u&32);var y=l.entangledLanes;if(y!==0)for(l=l.entanglements,y&=u;0<y;){var v=31-P(y),S=1<<v;u|=l[v],y&=~S}return rs=u,Xa(),p}function ih(l,u){qt=null,oe.H=ml,u===oa||u===sl?(u=Ed(),Mn=3):u===yd?(u=Ed(),Mn=4):Mn=u===xf?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,ti=u,mn===null&&(tr=1,El(l,ci(u,l.current)))}function sh(){var l=oe.H;return oe.H=ml,l===null?ml:l}function oh(){var l=oe.A;return oe.A=Qp,l}function hu(){tr=4,ws||(Sn&4194048)!==Sn&&hi.current!==null||(Do=!0),(Rs&134217727)===0&&(so&134217727)===0||qn===null||Cs(qn,Sn,pi,!1)}function pu(l,u,p){var y=Dn;Dn|=2;var v=sh(),S=oh();(qn!==l||Sn!==u)&&(Al=null,Bo(l,u)),u=!1;var Y=tr;e:do try{if(Mn!==0&&mn!==null){var ce=mn,ve=ti;switch(Mn){case 8:fu(),Y=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(u=!0);var $e=Mn;if(Mn=0,ti=null,Lo(l,ce,ve,$e),p&&Do){Y=0;break e}break;default:$e=Mn,Mn=0,ti=null,Lo(l,ce,ve,$e)}}em(),Y=tr;break}catch(je){ih(l,je)}while(!0);return u&&l.shellSuspendCounter++,Yi=Js=null,Dn=y,oe.H=v,oe.A=S,mn===null&&(qn=null,Sn=0,Xa()),Y}function em(){for(;mn!==null;)ah(mn)}function tm(l,u){var p=Dn;Dn|=2;var y=sh(),v=oh();qn!==l||Sn!==u?(Al=null,Rl=Ft()+500,Bo(l,u)):Do=Wt(l,u);e:do try{if(Mn!==0&&mn!==null){u=mn;var S=ti;t:switch(Mn){case 1:Mn=0,ti=null,Lo(l,u,S,1);break;case 2:case 9:if(_d(S)){Mn=0,ti=null,lh(u);break}u=function(){Mn!==2&&Mn!==9||qn!==l||(Mn=7),Di(l)},S.then(u,u);break e;case 3:Mn=7;break e;case 4:Mn=5;break e;case 7:_d(S)?(Mn=0,ti=null,lh(u)):(Mn=0,ti=null,Lo(l,u,S,7));break;case 5:var Y=null;switch(mn.tag){case 26:Y=mn.memoizedState;case 5:case 27:var ce=mn;if(!Y||Hh(Y)){Mn=0,ti=null;var ve=ce.sibling;if(ve!==null)mn=ve;else{var $e=ce.return;$e!==null?(mn=$e,Cl($e)):mn=null}break t}}Mn=0,ti=null,Lo(l,u,S,5);break;case 6:Mn=0,ti=null,Lo(l,u,S,6);break;case 8:fu(),tr=6;break e;default:throw Error(o(462))}}nm();break}catch(je){ih(l,je)}while(!0);return Yi=Js=null,oe.H=y,oe.A=v,Dn=p,mn!==null?0:(qn=null,Sn=0,Xa(),tr)}function nm(){for(;mn!==null&&!ln();)ah(mn)}function ah(l){var u=Df(l.alternate,l,rs);l.memoizedProps=l.pendingProps,u===null?Cl(l):mn=u}function lh(l){var u=l,p=u.alternate;switch(u.tag){case 15:case 0:u=If(p,u,u.pendingProps,u.type,void 0,Sn);break;case 11:u=If(p,u,u.pendingProps,u.type.render,u.ref,Sn);break;case 5:Cc(u);default:Nf(p,u),u=mn=ld(u,rs),u=Df(p,u,rs)}l.memoizedProps=l.pendingProps,u===null?Cl(l):mn=u}function Lo(l,u,p,y){Yi=Js=null,Cc(u),Po=null,ma=0;var v=u.return;try{if(qp(l,v,u,p,Sn)){tr=1,El(l,ci(p,l.current)),mn=null;return}}catch(S){if(v!==null)throw mn=v,S;tr=1,El(l,ci(p,l.current)),mn=null;return}u.flags&32768?(kn||y===1?l=!0:Do||(Sn&536870912)!==0?l=!1:(ws=l=!0,(y===2||y===9||y===3||y===6)&&(y=hi.current,y!==null&&y.tag===13&&(y.flags|=16384))),ch(u,l)):Cl(u)}function Cl(l){var u=l;do{if((u.flags&32768)!==0){ch(u,ws);return}l=u.return;var p=Gp(u.alternate,u,rs);if(p!==null){mn=p;return}if(u=u.sibling,u!==null){mn=u;return}mn=u=l}while(u!==null);tr===0&&(tr=5)}function ch(l,u){do{var p=Kp(l.alternate,l);if(p!==null){p.flags&=32767,mn=p;return}if(p=l.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(l=l.sibling,l!==null)){mn=l;return}mn=l=p}while(l!==null);tr=6,mn=null}function uh(l,u,p,y,v,S,Y,ce,ve){l.cancelPendingCommit=null;do Pl();while(Ir!==0);if((Dn&6)!==0)throw Error(o(327));if(u!==null){if(u===l.current)throw Error(o(177));if(S=u.lanes|u.childLanes,S|=ic,Je(l,p,S,Y,ce,ve),l===qn&&(mn=qn=null,Sn=0),No=u,Is=l,Oo=p,cu=S,uu=v,eh=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(l.callbackNode=null,l.callbackPriority=0,om(Qn,function(){return mh(),null})):(l.callbackNode=null,l.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=oe.T,oe.T=null,v=_e.p,_e.p=2,Y=Dn,Dn|=4;try{Yp(l,u,p)}finally{Dn=Y,_e.p=v,oe.T=y}}Ir=1,dh(),fh(),hh()}}function dh(){if(Ir===1){Ir=0;var l=Is,u=No,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=oe.T,oe.T=null;var y=_e.p;_e.p=2;var v=Dn;Dn|=4;try{Gf(u,l);var S=Ru,Y=Qu(l.containerInfo),ce=S.focusedElem,ve=S.selectionRange;if(Y!==ce&&ce&&ce.ownerDocument&&Xu(ce.ownerDocument.documentElement,ce)){if(ve!==null&&Jl(ce)){var $e=ve.start,je=ve.end;if(je===void 0&&(je=$e),"selectionStart"in ce)ce.selectionStart=$e,ce.selectionEnd=Math.min(je,ce.value.length);else{var He=ce.ownerDocument||document,De=He&&He.defaultView||window;if(De.getSelection){var Me=De.getSelection(),vt=ce.textContent.length,nt=Math.min(ve.start,vt),Ln=ve.end===void 0?nt:Math.min(ve.end,vt);!Me.extend&&nt>Ln&&(Y=Ln,Ln=nt,nt=Y);var Ce=Yu(ce,nt),we=Yu(ce,Ln);if(Ce&&we&&(Me.rangeCount!==1||Me.anchorNode!==Ce.node||Me.anchorOffset!==Ce.offset||Me.focusNode!==we.node||Me.focusOffset!==we.offset)){var Ve=He.createRange();Ve.setStart(Ce.node,Ce.offset),Me.removeAllRanges(),nt>Ln?(Me.addRange(Ve),Me.extend(we.node,we.offset)):(Ve.setEnd(we.node,we.offset),Me.addRange(Ve))}}}}for(He=[],Me=ce;Me=Me.parentNode;)Me.nodeType===1&&He.push({element:Me,left:Me.scrollLeft,top:Me.scrollTop});for(typeof ce.focus=="function"&&ce.focus(),ce=0;ce<He.length;ce++){var ze=He[ce];ze.element.scrollLeft=ze.left,ze.element.scrollTop=ze.top}}Ul=!!wu,Ru=wu=null}finally{Dn=v,_e.p=y,oe.T=p}}l.current=u,Ir=2}}function fh(){if(Ir===2){Ir=0;var l=Is,u=No,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=oe.T,oe.T=null;var y=_e.p;_e.p=2;var v=Dn;Dn|=4;try{zf(l,u.alternate,u)}finally{Dn=v,_e.p=y,oe.T=p}}Ir=3}}function hh(){if(Ir===4||Ir===3){Ir=0,kt();var l=Is,u=No,p=Oo,y=eh;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Ir=5:(Ir=0,No=Is=null,ph(l,l.pendingLanes));var v=l.pendingLanes;if(v===0&&(As=null),cr(p),u=u.stateNode,ie&&typeof ie.onCommitFiberRoot=="function")try{ie.onCommitFiberRoot(Vn,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=oe.T,v=_e.p,_e.p=2,oe.T=null;try{for(var S=l.onRecoverableError,Y=0;Y<y.length;Y++){var ce=y[Y];S(ce.value,{componentStack:ce.stack})}}finally{oe.T=u,_e.p=v}}(Oo&3)!==0&&Pl(),Di(l),v=l.pendingLanes,(p&4194090)!==0&&(v&42)!==0?l===du?wa++:(wa=0,du=l):wa=0,Ra(0)}}function ph(l,u){(l.pooledCacheLanes&=u)===0&&(u=l.pooledCache,u!=null&&(l.pooledCache=null,ia(u)))}function Pl(l){return dh(),fh(),hh(),mh()}function mh(){if(Ir!==5)return!1;var l=Is,u=cu;cu=0;var p=cr(Oo),y=oe.T,v=_e.p;try{_e.p=32>p?32:p,oe.T=null,p=uu,uu=null;var S=Is,Y=Oo;if(Ir=0,No=Is=null,Oo=0,(Dn&6)!==0)throw Error(o(331));var ce=Dn;if(Dn|=4,Zf(S.current),Yf(S,S.current,Y,p),Dn=ce,Ra(0,!1),ie&&typeof ie.onPostCommitFiberRoot=="function")try{ie.onPostCommitFiberRoot(Vn,S)}catch{}return!0}finally{_e.p=v,oe.T=y,ph(l,u)}}function gh(l,u,p){u=ci(p,u),u=zc(l.stateNode,u,2),l=_s(l,u,2),l!==null&&(jt(l,2),Di(l))}function zn(l,u,p){if(l.tag===3)gh(l,l,p);else for(;u!==null;){if(u.tag===3){gh(u,l,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(As===null||!As.has(y))){l=ci(p,l),p=Ef(2),y=_s(u,p,2),y!==null&&(vf(p,y,u,l),jt(y,2),Di(y));break}}u=u.return}}function mu(l,u,p){var y=l.pingCache;if(y===null){y=l.pingCache=new Zp;var v=new Set;y.set(u,v)}else v=y.get(u),v===void 0&&(v=new Set,y.set(u,v));v.has(p)||(su=!0,v.add(p),l=rm.bind(null,l,u,p),u.then(l,l))}function rm(l,u,p){var y=l.pingCache;y!==null&&y.delete(u),l.pingedLanes|=l.suspendedLanes&p,l.warmLanes&=~p,qn===l&&(Sn&p)===p&&(tr===4||tr===3&&(Sn&62914560)===Sn&&300>Ft()-lu?(Dn&2)===0&&Bo(l,0):ou|=p,Mo===Sn&&(Mo=0)),Di(l)}function yh(l,u){u===0&&(u=wt()),l=Eo(l,u),l!==null&&(jt(l,u),Di(l))}function im(l){var u=l.memoizedState,p=0;u!==null&&(p=u.retryLane),yh(l,p)}function sm(l,u){var p=0;switch(l.tag){case 13:var y=l.stateNode,v=l.memoizedState;v!==null&&(p=v.retryLane);break;case 19:y=l.stateNode;break;case 22:y=l.stateNode._retryCache;break;default:throw Error(o(314))}y!==null&&y.delete(u),yh(l,p)}function om(l,u){return Mt(l,u)}var kl=null,Fo=null,gu=!1,Vl=!1,yu=!1,oo=0;function Di(l){l!==Fo&&l.next===null&&(Fo===null?kl=Fo=l:Fo=Fo.next=l),Vl=!0,gu||(gu=!0,lm())}function Ra(l,u){if(!yu&&Vl){yu=!0;do for(var p=!1,y=kl;y!==null;){if(l!==0){var v=y.pendingLanes;if(v===0)var S=0;else{var Y=y.suspendedLanes,ce=y.pingedLanes;S=(1<<31-P(42|l)+1)-1,S&=v&~(Y&~ce),S=S&201326741?S&201326741|1:S?S|2:0}S!==0&&(p=!0,xh(y,S))}else S=Sn,S=At(y,y===qn?S:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(S&3)===0||Wt(y,S)||(p=!0,xh(y,S));y=y.next}while(p);yu=!1}}function am(){_h()}function _h(){Vl=gu=!1;var l=0;oo!==0&&(gm()&&(l=oo),oo=0);for(var u=Ft(),p=null,y=kl;y!==null;){var v=y.next,S=bh(y,u);S===0?(y.next=null,p===null?kl=v:p.next=v,v===null&&(Fo=p)):(p=y,(l!==0||(S&3)!==0)&&(Vl=!0)),y=v}Ra(l)}function bh(l,u){for(var p=l.suspendedLanes,y=l.pingedLanes,v=l.expirationTimes,S=l.pendingLanes&-62914561;0<S;){var Y=31-P(S),ce=1<<Y,ve=v[Y];ve===-1?((ce&p)===0||(ce&y)!==0)&&(v[Y]=Fe(ce,u)):ve<=u&&(l.expiredLanes|=ce),S&=~ce}if(u=qn,p=Sn,p=At(l,l===u?p:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y=l.callbackNode,p===0||l===u&&(Mn===2||Mn===9)||l.cancelPendingCommit!==null)return y!==null&&y!==null&&Ge(y),l.callbackNode=null,l.callbackPriority=0;if((p&3)===0||Wt(l,p)){if(u=p&-p,u===l.callbackPriority)return u;switch(y!==null&&Ge(y),cr(p)){case 2:case 8:p=Hn;break;case 32:p=Qn;break;case 268435456:p=Gn;break;default:p=Qn}return y=Eh.bind(null,l),p=Mt(p,y),l.callbackPriority=u,l.callbackNode=p,u}return y!==null&&y!==null&&Ge(y),l.callbackPriority=2,l.callbackNode=null,2}function Eh(l,u){if(Ir!==0&&Ir!==5)return l.callbackNode=null,l.callbackPriority=0,null;var p=l.callbackNode;if(Pl()&&l.callbackNode!==p)return null;var y=Sn;return y=At(l,l===qn?y:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),y===0?null:(nh(l,y,u),bh(l,Ft()),l.callbackNode!=null&&l.callbackNode===p?Eh.bind(null,l):null)}function xh(l,u){if(Pl())return null;nh(l,u,!0)}function lm(){_m(function(){(Dn&6)!==0?Mt(Fn,am):_h()})}function _u(){return oo===0&&(oo=dt()),oo}function Th(l){return l==null||typeof l=="symbol"||typeof l=="boolean"?null:typeof l=="function"?l:ds(""+l)}function Sh(l,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,l.id&&p.setAttribute("form",l.id),u.parentNode.insertBefore(p,u),l=new FormData(l),p.parentNode.removeChild(p),l}function cm(l,u,p,y,v){if(u==="submit"&&p&&p.stateNode===v){var S=Th((v[En]||null).action),Y=y.submitter;Y&&(u=(u=Y[En]||null)?Th(u.formAction):Y.getAttribute("formAction"),u!==null&&(S=u,Y=null));var ce=new Ne("action","action",null,y,v);l.push({event:ce,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(oo!==0){var ve=Y?Sh(v,Y):new FormData(v);Bc(p,{pending:!0,data:ve,method:v.method,action:S},null,ve)}}else typeof S=="function"&&(ce.preventDefault(),ve=Y?Sh(v,Y):new FormData(v),Bc(p,{pending:!0,data:ve,method:v.method,action:S},S,ve))},currentTarget:v}]})}}for(var bu=0;bu<rc.length;bu++){var Eu=rc[bu],um=Eu.toLowerCase(),dm=Eu[0].toUpperCase()+Eu.slice(1);xi(um,"on"+dm)}xi(ed,"onAnimationEnd"),xi(td,"onAnimationIteration"),xi(nd,"onAnimationStart"),xi("dblclick","onDoubleClick"),xi("focusin","onFocus"),xi("focusout","onBlur"),xi(Ap,"onTransitionRun"),xi(Ip,"onTransitionStart"),xi(Cp,"onTransitionCancel"),xi(rd,"onTransitionEnd"),zr("onMouseEnter",["mouseout","mouseover"]),zr("onMouseLeave",["mouseout","mouseover"]),zr("onPointerEnter",["pointerout","pointerover"]),zr("onPointerLeave",["pointerout","pointerover"]),Ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Aa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fm=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Aa));function wh(l,u){u=(u&4)!==0;for(var p=0;p<l.length;p++){var y=l[p],v=y.event;y=y.listeners;e:{var S=void 0;if(u)for(var Y=y.length-1;0<=Y;Y--){var ce=y[Y],ve=ce.instance,$e=ce.currentTarget;if(ce=ce.listener,ve!==S&&v.isPropagationStopped())break e;S=ce,v.currentTarget=$e;try{S(v)}catch(je){bl(je)}v.currentTarget=null,S=ve}else for(Y=0;Y<y.length;Y++){if(ce=y[Y],ve=ce.instance,$e=ce.currentTarget,ce=ce.listener,ve!==S&&v.isPropagationStopped())break e;S=ce,v.currentTarget=$e;try{S(v)}catch(je){bl(je)}v.currentTarget=null,S=ve}}}}function gn(l,u){var p=u[Wn];p===void 0&&(p=u[Wn]=new Set);var y=l+"__bubble";p.has(y)||(Rh(u,l,2,!1),p.add(y))}function vu(l,u,p){var y=0;u&&(y|=4),Rh(p,l,y,u)}var $l="_reactListening"+Math.random().toString(36).slice(2);function xu(l){if(!l[$l]){l[$l]=!0,Ns.forEach(function(p){p!=="selectionchange"&&(fm.has(p)||vu(p,!1,l),vu(p,!0,l))});var u=l.nodeType===9?l:l.ownerDocument;u===null||u[$l]||(u[$l]=!0,vu("selectionchange",!1,u))}}function Rh(l,u,p,y){switch(Xh(u)){case 2:var v=Lm;break;case 8:v=Fm;break;default:v=Nu}p=v.bind(null,u,p,l),v=void 0,!yr||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(v=!0),y?v!==void 0?l.addEventListener(u,p,{capture:!0,passive:v}):l.addEventListener(u,p,!0):v!==void 0?l.addEventListener(u,p,{passive:v}):l.addEventListener(u,p,!1)}function Tu(l,u,p,y,v){var S=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var Y=y.tag;if(Y===3||Y===4){var ce=y.stateNode.containerInfo;if(ce===v)break;if(Y===4)for(Y=y.return;Y!==null;){var ve=Y.tag;if((ve===3||ve===4)&&Y.stateNode.containerInfo===v)return;Y=Y.return}for(;ce!==null;){if(Y=yi(ce),Y===null)return;if(ve=Y.tag,ve===5||ve===6||ve===26||ve===27){y=S=Y;continue e}ce=ce.parentNode}}y=y.return}fs(function(){var $e=S,je=Pr(p),He=[];e:{var De=sd.get(l);if(De!==void 0){var Me=Ne,vt=l;switch(l){case"keypress":if(li(p)===0)break e;case"keydown":case"keyup":Me=mo;break;case"focusin":vt="focus",Me=Ai;break;case"focusout":vt="blur",Me=Ai;break;case"beforeblur":case"afterblur":Me=Ai;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Me=Yn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Me=zi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Me=za;break;case ed:case td:case nd:Me=ho;break;case rd:Me=qa;break;case"scroll":case"scrollend":Me=zt;break;case"wheel":Me=go;break;case"copy":case"cut":case"paste":Me=po;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Me=Xo;break;case"toggle":case"beforetoggle":Me=Ga}var nt=(u&4)!==0,Ln=!nt&&(l==="scroll"||l==="scrollend"),Ce=nt?De!==null?De+"Capture":null:De;nt=[];for(var we=$e,Ve;we!==null;){var ze=we;if(Ve=ze.stateNode,ze=ze.tag,ze!==5&&ze!==26&&ze!==27||Ve===null||Ce===null||(ze=wi(we,Ce),ze!=null&&nt.push(Ia(we,ze,Ve))),Ln)break;we=we.return}0<nt.length&&(De=new Me(De,vt,null,p,je),He.push({event:De,listeners:nt}))}}if((u&7)===0){e:{if(De=l==="mouseover"||l==="pointerover",Me=l==="mouseout"||l==="pointerout",De&&p!==Br&&(vt=p.relatedTarget||p.fromElement)&&(yi(vt)||vt[pn]))break e;if((Me||De)&&(De=je.window===je?je:(De=je.ownerDocument)?De.defaultView||De.parentWindow:window,Me?(vt=p.relatedTarget||p.toElement,Me=$e,vt=vt?yi(vt):null,vt!==null&&(Ln=c(vt),nt=vt.tag,vt!==Ln||nt!==5&&nt!==27&&nt!==6)&&(vt=null)):(Me=null,vt=$e),Me!==vt)){if(nt=Yn,ze="onMouseLeave",Ce="onMouseEnter",we="mouse",(l==="pointerout"||l==="pointerover")&&(nt=Xo,ze="onPointerLeave",Ce="onPointerEnter",we="pointer"),Ln=Me==null?De:si(Me),Ve=vt==null?De:si(vt),De=new nt(ze,we+"leave",Me,p,je),De.target=Ln,De.relatedTarget=Ve,ze=null,yi(je)===$e&&(nt=new nt(Ce,we+"enter",vt,p,je),nt.target=Ve,nt.relatedTarget=Ln,ze=nt),Ln=ze,Me&&vt)t:{for(nt=Me,Ce=vt,we=0,Ve=nt;Ve;Ve=jo(Ve))we++;for(Ve=0,ze=Ce;ze;ze=jo(ze))Ve++;for(;0<we-Ve;)nt=jo(nt),we--;for(;0<Ve-we;)Ce=jo(Ce),Ve--;for(;we--;){if(nt===Ce||Ce!==null&&nt===Ce.alternate)break t;nt=jo(nt),Ce=jo(Ce)}nt=null}else nt=null;Me!==null&&Ah(He,De,Me,nt,!1),vt!==null&&Ln!==null&&Ah(He,Ln,vt,nt,!0)}}e:{if(De=$e?si($e):window,Me=De.nodeName&&De.nodeName.toLowerCase(),Me==="select"||Me==="input"&&De.type==="file")var Qe=zu;else if(hr(De))if(Hu)Qe=Sp;else{Qe=xp;var Qt=vp}else Me=De.nodeName,!Me||Me.toLowerCase()!=="input"||De.type!=="checkbox"&&De.type!=="radio"?$e&&ji($e.elementType)&&(Qe=zu):Qe=Tp;if(Qe&&(Qe=Qe(l,$e))){qi(He,Qe,p,je);break e}Qt&&Qt(l,De,$e),l==="focusout"&&$e&&De.type==="number"&&$e.memoizedProps.value!=null&&bi(De,"number",De.value)}switch(Qt=$e?si($e):window,l){case"focusin":(hr(Qt)||Qt.contentEditable==="true")&&(yo=Qt,ec=$e,Jo=null);break;case"focusout":Jo=ec=yo=null;break;case"mousedown":tc=!0;break;case"contextmenu":case"mouseup":case"dragend":tc=!1,Zu(He,p,je);break;case"selectionchange":if(Rp)break;case"keydown":case"keyup":Zu(He,p,je)}var et;if(Ii)e:{switch(l){case"compositionstart":var rt="onCompositionStart";break e;case"compositionend":rt="onCompositionEnd";break e;case"compositionupdate":rt="onCompositionUpdate";break e}rt=void 0}else xn?Oe(l,p)&&(rt="onCompositionEnd"):l==="keydown"&&p.keyCode===229&&(rt="onCompositionStart");rt&&(G&&p.locale!=="ko"&&(xn||rt!=="onCompositionStart"?rt==="onCompositionEnd"&&xn&&(et=Us()):(Yr=je,Ri="value"in Yr?Yr.value:Yr.textContent,xn=!0)),Qt=Dl($e,rt),0<Qt.length&&(rt=new Ko(rt,l,null,p,je),He.push({event:rt,listeners:Qt}),et?rt.data=et:(et=We(p),et!==null&&(rt.data=et)))),(et=I?fr(l,p):Tn(l,p))&&(rt=Dl($e,"onBeforeInput"),0<rt.length&&(Qt=new Ko("onBeforeInput","beforeinput",null,p,je),He.push({event:Qt,listeners:rt}),Qt.data=et)),cm(He,l,$e,p,je)}wh(He,u)})}function Ia(l,u,p){return{instance:l,listener:u,currentTarget:p}}function Dl(l,u){for(var p=u+"Capture",y=[];l!==null;){var v=l,S=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||S===null||(v=wi(l,p),v!=null&&y.unshift(Ia(l,v,S)),v=wi(l,u),v!=null&&y.push(Ia(l,v,S))),l.tag===3)return y;l=l.return}return[]}function jo(l){if(l===null)return null;do l=l.return;while(l&&l.tag!==5&&l.tag!==27);return l||null}function Ah(l,u,p,y,v){for(var S=u._reactName,Y=[];p!==null&&p!==y;){var ce=p,ve=ce.alternate,$e=ce.stateNode;if(ce=ce.tag,ve!==null&&ve===y)break;ce!==5&&ce!==26&&ce!==27||$e===null||(ve=$e,v?($e=wi(p,S),$e!=null&&Y.unshift(Ia(p,$e,ve))):v||($e=wi(p,S),$e!=null&&Y.push(Ia(p,$e,ve)))),p=p.return}Y.length!==0&&l.push({event:u,listeners:Y})}var hm=/\r\n?/g,pm=/\u0000|\uFFFD/g;function Ih(l){return(typeof l=="string"?l:""+l).replace(hm,`
`).replace(pm,"")}function Ch(l,u){return u=Ih(u),Ih(l)===u}function Ml(){}function Bn(l,u,p,y,v,S){switch(p){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||Mr(l,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&Mr(l,""+y);break;case"className":qr(l,"class",y);break;case"tabIndex":qr(l,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":qr(l,p,y);break;case"style":Fs(l,y,S);break;case"data":if(u!=="object"){qr(l,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||p!=="href")){l.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=ds(""+y),l.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){l.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof S=="function"&&(p==="formAction"?(u!=="input"&&Bn(l,u,"name",v.name,v,null),Bn(l,u,"formEncType",v.formEncType,v,null),Bn(l,u,"formMethod",v.formMethod,v,null),Bn(l,u,"formTarget",v.formTarget,v,null)):(Bn(l,u,"encType",v.encType,v,null),Bn(l,u,"method",v.method,v,null),Bn(l,u,"target",v.target,v,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){l.removeAttribute(p);break}y=ds(""+y),l.setAttribute(p,y);break;case"onClick":y!=null&&(l.onclick=Ml);break;case"onScroll":y!=null&&gn("scroll",l);break;case"onScrollEnd":y!=null&&gn("scrollend",l);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(o(61));if(p=y.__html,p!=null){if(v.children!=null)throw Error(o(60));l.innerHTML=p}}break;case"multiple":l.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":l.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){l.removeAttribute("xlink:href");break}p=ds(""+y),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""+y):l.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,""):l.removeAttribute(p);break;case"capture":case"download":y===!0?l.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?l.setAttribute(p,y):l.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?l.setAttribute(p,y):l.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?l.removeAttribute(p):l.setAttribute(p,y);break;case"popover":gn("beforetoggle",l),gn("toggle",l),Hr(l,"popover",y);break;case"xlinkActuate":ur(l,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ur(l,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ur(l,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ur(l,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ur(l,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ur(l,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ur(l,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ur(l,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ur(l,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Hr(l,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Wo.get(p)||p,Hr(l,p,y))}}function Su(l,u,p,y,v,S){switch(p){case"style":Fs(l,y,S);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(o(61));if(p=y.__html,p!=null){if(v.children!=null)throw Error(o(60));l.innerHTML=p}}break;case"children":typeof y=="string"?Mr(l,y):(typeof y=="number"||typeof y=="bigint")&&Mr(l,""+y);break;case"onScroll":y!=null&&gn("scroll",l);break;case"onScrollEnd":y!=null&&gn("scrollend",l);break;case"onClick":y!=null&&(l.onclick=Ml);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ss.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(v=p.endsWith("Capture"),u=p.slice(2,v?p.length-7:void 0),S=l[En]||null,S=S!=null?S[p]:null,typeof S=="function"&&l.removeEventListener(u,S,v),typeof y=="function")){typeof S!="function"&&S!==null&&(p in l?l[p]=null:l.hasAttribute(p)&&l.removeAttribute(p)),l.addEventListener(u,y,v);break e}p in l?l[p]=y:y===!0?l.setAttribute(p,""):Hr(l,p,y)}}}function Cr(l,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":gn("error",l),gn("load",l);var y=!1,v=!1,S;for(S in p)if(p.hasOwnProperty(S)){var Y=p[S];if(Y!=null)switch(S){case"src":y=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(o(137,u));default:Bn(l,u,S,Y,p,null)}}v&&Bn(l,u,"srcSet",p.srcSet,p,null),y&&Bn(l,u,"src",p.src,p,null);return;case"input":gn("invalid",l);var ce=S=Y=v=null,ve=null,$e=null;for(y in p)if(p.hasOwnProperty(y)){var je=p[y];if(je!=null)switch(y){case"name":v=je;break;case"type":Y=je;break;case"checked":ve=je;break;case"defaultChecked":$e=je;break;case"value":S=je;break;case"defaultValue":ce=je;break;case"children":case"dangerouslySetInnerHTML":if(je!=null)throw Error(o(137,u));break;default:Bn(l,u,y,je,p,null)}}Bi(l,S,ce,ve,$e,Y,v,!1),cs(l);return;case"select":gn("invalid",l),y=Y=S=null;for(v in p)if(p.hasOwnProperty(v)&&(ce=p[v],ce!=null))switch(v){case"value":S=ce;break;case"defaultValue":Y=ce;break;case"multiple":y=ce;default:Bn(l,u,v,ce,p,null)}u=S,p=Y,l.multiple=!!y,u!=null?Ei(l,!!y,u,!1):p!=null&&Ei(l,!!y,p,!0);return;case"textarea":gn("invalid",l),S=v=y=null;for(Y in p)if(p.hasOwnProperty(Y)&&(ce=p[Y],ce!=null))switch(Y){case"value":y=ce;break;case"defaultValue":v=ce;break;case"children":S=ce;break;case"dangerouslySetInnerHTML":if(ce!=null)throw Error(o(91));break;default:Bn(l,u,Y,ce,p,null)}Li(l,y,v,S),cs(l);return;case"option":for(ve in p)if(p.hasOwnProperty(ve)&&(y=p[ve],y!=null))switch(ve){case"selected":l.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Bn(l,u,ve,y,p,null)}return;case"dialog":gn("beforetoggle",l),gn("toggle",l),gn("cancel",l),gn("close",l);break;case"iframe":case"object":gn("load",l);break;case"video":case"audio":for(y=0;y<Aa.length;y++)gn(Aa[y],l);break;case"image":gn("error",l),gn("load",l);break;case"details":gn("toggle",l);break;case"embed":case"source":case"link":gn("error",l),gn("load",l);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for($e in p)if(p.hasOwnProperty($e)&&(y=p[$e],y!=null))switch($e){case"children":case"dangerouslySetInnerHTML":throw Error(o(137,u));default:Bn(l,u,$e,y,p,null)}return;default:if(ji(u)){for(je in p)p.hasOwnProperty(je)&&(y=p[je],y!==void 0&&Su(l,u,je,y,p,void 0));return}}for(ce in p)p.hasOwnProperty(ce)&&(y=p[ce],y!=null&&Bn(l,u,ce,y,p,null))}function mm(l,u,p,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,S=null,Y=null,ce=null,ve=null,$e=null,je=null;for(Me in p){var He=p[Me];if(p.hasOwnProperty(Me)&&He!=null)switch(Me){case"checked":break;case"value":break;case"defaultValue":ve=He;default:y.hasOwnProperty(Me)||Bn(l,u,Me,null,y,He)}}for(var De in y){var Me=y[De];if(He=p[De],y.hasOwnProperty(De)&&(Me!=null||He!=null))switch(De){case"type":S=Me;break;case"name":v=Me;break;case"checked":$e=Me;break;case"defaultChecked":je=Me;break;case"value":Y=Me;break;case"defaultValue":ce=Me;break;case"children":case"dangerouslySetInnerHTML":if(Me!=null)throw Error(o(137,u));break;default:Me!==He&&Bn(l,u,De,Me,y,He)}}Dr(l,Y,ce,ve,$e,je,S,v);return;case"select":Me=Y=ce=De=null;for(S in p)if(ve=p[S],p.hasOwnProperty(S)&&ve!=null)switch(S){case"value":break;case"multiple":Me=ve;default:y.hasOwnProperty(S)||Bn(l,u,S,null,y,ve)}for(v in y)if(S=y[v],ve=p[v],y.hasOwnProperty(v)&&(S!=null||ve!=null))switch(v){case"value":De=S;break;case"defaultValue":ce=S;break;case"multiple":Y=S;default:S!==ve&&Bn(l,u,v,S,y,ve)}u=ce,p=Y,y=Me,De!=null?Ei(l,!!p,De,!1):!!y!=!!p&&(u!=null?Ei(l,!!p,u,!0):Ei(l,!!p,p?[]:"",!1));return;case"textarea":Me=De=null;for(ce in p)if(v=p[ce],p.hasOwnProperty(ce)&&v!=null&&!y.hasOwnProperty(ce))switch(ce){case"value":break;case"children":break;default:Bn(l,u,ce,null,y,v)}for(Y in y)if(v=y[Y],S=p[Y],y.hasOwnProperty(Y)&&(v!=null||S!=null))switch(Y){case"value":De=v;break;case"defaultValue":Me=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(o(91));break;default:v!==S&&Bn(l,u,Y,v,y,S)}$n(l,De,Me);return;case"option":for(var vt in p)if(De=p[vt],p.hasOwnProperty(vt)&&De!=null&&!y.hasOwnProperty(vt))switch(vt){case"selected":l.selected=!1;break;default:Bn(l,u,vt,null,y,De)}for(ve in y)if(De=y[ve],Me=p[ve],y.hasOwnProperty(ve)&&De!==Me&&(De!=null||Me!=null))switch(ve){case"selected":l.selected=De&&typeof De!="function"&&typeof De!="symbol";break;default:Bn(l,u,ve,De,y,Me)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in p)De=p[nt],p.hasOwnProperty(nt)&&De!=null&&!y.hasOwnProperty(nt)&&Bn(l,u,nt,null,y,De);for($e in y)if(De=y[$e],Me=p[$e],y.hasOwnProperty($e)&&De!==Me&&(De!=null||Me!=null))switch($e){case"children":case"dangerouslySetInnerHTML":if(De!=null)throw Error(o(137,u));break;default:Bn(l,u,$e,De,y,Me)}return;default:if(ji(u)){for(var Ln in p)De=p[Ln],p.hasOwnProperty(Ln)&&De!==void 0&&!y.hasOwnProperty(Ln)&&Su(l,u,Ln,void 0,y,De);for(je in y)De=y[je],Me=p[je],!y.hasOwnProperty(je)||De===Me||De===void 0&&Me===void 0||Su(l,u,je,De,y,Me);return}}for(var Ce in p)De=p[Ce],p.hasOwnProperty(Ce)&&De!=null&&!y.hasOwnProperty(Ce)&&Bn(l,u,Ce,null,y,De);for(He in y)De=y[He],Me=p[He],!y.hasOwnProperty(He)||De===Me||De==null&&Me==null||Bn(l,u,He,De,y,Me)}var wu=null,Ru=null;function Nl(l){return l.nodeType===9?l:l.ownerDocument}function Ph(l){switch(l){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kh(l,u){if(l===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return l===1&&u==="foreignObject"?0:l}function Au(l,u){return l==="textarea"||l==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Iu=null;function gm(){var l=window.event;return l&&l.type==="popstate"?l===Iu?!1:(Iu=l,!0):(Iu=null,!1)}var Vh=typeof setTimeout=="function"?setTimeout:void 0,ym=typeof clearTimeout=="function"?clearTimeout:void 0,$h=typeof Promise=="function"?Promise:void 0,_m=typeof queueMicrotask=="function"?queueMicrotask:typeof $h<"u"?function(l){return $h.resolve(null).then(l).catch(bm)}:Vh;function bm(l){setTimeout(function(){throw l})}function Ps(l){return l==="head"}function Dh(l,u){var p=u,y=0,v=0;do{var S=p.nextSibling;if(l.removeChild(p),S&&S.nodeType===8)if(p=S.data,p==="/$"){if(0<y&&8>y){p=y;var Y=l.ownerDocument;if(p&1&&Ca(Y.documentElement),p&2&&Ca(Y.body),p&4)for(p=Y.head,Ca(p),Y=p.firstChild;Y;){var ce=Y.nextSibling,ve=Y.nodeName;Y[gi]||ve==="SCRIPT"||ve==="STYLE"||ve==="LINK"&&Y.rel.toLowerCase()==="stylesheet"||p.removeChild(Y),Y=ce}}if(v===0){l.removeChild(S),Oa(u);return}v--}else p==="$"||p==="$?"||p==="$!"?v++:y=p.charCodeAt(0)-48;else y=0;p=S}while(p);Oa(u)}function Cu(l){var u=l.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":Cu(p),ii(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}l.removeChild(p)}}function Em(l,u,p,y){for(;l.nodeType===1;){var v=p;if(l.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(l.nodeName!=="INPUT"||l.type!=="hidden"))break}else if(y){if(!l[gi])switch(u){case"meta":if(!l.hasAttribute("itemprop"))break;return l;case"link":if(S=l.getAttribute("rel"),S==="stylesheet"&&l.hasAttribute("data-precedence"))break;if(S!==v.rel||l.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||l.getAttribute("title")!==(v.title==null?null:v.title))break;return l;case"style":if(l.hasAttribute("data-precedence"))break;return l;case"script":if(S=l.getAttribute("src"),(S!==(v.src==null?null:v.src)||l.getAttribute("type")!==(v.type==null?null:v.type)||l.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&S&&l.hasAttribute("async")&&!l.hasAttribute("itemprop"))break;return l;default:return l}}else if(u==="input"&&l.type==="hidden"){var S=v.name==null?null:""+v.name;if(v.type==="hidden"&&l.getAttribute("name")===S)return l}else return l;if(l=Si(l.nextSibling),l===null)break}return null}function vm(l,u,p){if(u==="")return null;for(;l.nodeType!==3;)if((l.nodeType!==1||l.nodeName!=="INPUT"||l.type!=="hidden")&&!p||(l=Si(l.nextSibling),l===null))return null;return l}function Pu(l){return l.data==="$!"||l.data==="$?"&&l.ownerDocument.readyState==="complete"}function xm(l,u){var p=l.ownerDocument;if(l.data!=="$?"||p.readyState==="complete")u();else{var y=function(){u(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),l._reactRetry=y}}function Si(l){for(;l!=null;l=l.nextSibling){var u=l.nodeType;if(u===1||u===3)break;if(u===8){if(u=l.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return l}var ku=null;function Mh(l){l=l.previousSibling;for(var u=0;l;){if(l.nodeType===8){var p=l.data;if(p==="$"||p==="$!"||p==="$?"){if(u===0)return l;u--}else p==="/$"&&u++}l=l.previousSibling}return null}function Nh(l,u,p){switch(u=Nl(p),l){case"html":if(l=u.documentElement,!l)throw Error(o(452));return l;case"head":if(l=u.head,!l)throw Error(o(453));return l;case"body":if(l=u.body,!l)throw Error(o(454));return l;default:throw Error(o(451))}}function Ca(l){for(var u=l.attributes;u.length;)l.removeAttributeNode(u[0]);ii(l)}var mi=new Map,Oh=new Set;function Ol(l){return typeof l.getRootNode=="function"?l.getRootNode():l.nodeType===9?l:l.ownerDocument}var is=_e.d;_e.d={f:Tm,r:Sm,D:wm,C:Rm,L:Am,m:Im,X:Pm,S:Cm,M:km};function Tm(){var l=is.f(),u=Il();return l||u}function Sm(l){var u=Tr(l);u!==null&&u.tag===5&&u.type==="form"?tf(u):is.r(l)}var Uo=typeof document>"u"?null:document;function Bh(l,u,p){var y=Uo;if(y&&typeof u=="string"&&u){var v=Kn(u);v='link[rel="'+l+'"][href="'+v+'"]',typeof p=="string"&&(v+='[crossorigin="'+p+'"]'),Oh.has(v)||(Oh.add(v),l={rel:l,crossOrigin:p,href:u},y.querySelector(v)===null&&(u=y.createElement("link"),Cr(u,"link",l),Zn(u),y.head.appendChild(u)))}}function wm(l){is.D(l),Bh("dns-prefetch",l,null)}function Rm(l,u){is.C(l,u),Bh("preconnect",l,u)}function Am(l,u,p){is.L(l,u,p);var y=Uo;if(y&&l&&u){var v='link[rel="preload"][as="'+Kn(u)+'"]';u==="image"&&p&&p.imageSrcSet?(v+='[imagesrcset="'+Kn(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(v+='[imagesizes="'+Kn(p.imageSizes)+'"]')):v+='[href="'+Kn(l)+'"]';var S=v;switch(u){case"style":S=zo(l);break;case"script":S=Ho(l)}mi.has(S)||(l=_({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:l,as:u},p),mi.set(S,l),y.querySelector(v)!==null||u==="style"&&y.querySelector(Pa(S))||u==="script"&&y.querySelector(ka(S))||(u=y.createElement("link"),Cr(u,"link",l),Zn(u),y.head.appendChild(u)))}}function Im(l,u){is.m(l,u);var p=Uo;if(p&&l){var y=u&&typeof u.as=="string"?u.as:"script",v='link[rel="modulepreload"][as="'+Kn(y)+'"][href="'+Kn(l)+'"]',S=v;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":S=Ho(l)}if(!mi.has(S)&&(l=_({rel:"modulepreload",href:l},u),mi.set(S,l),p.querySelector(v)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(ka(S)))return}y=p.createElement("link"),Cr(y,"link",l),Zn(y),p.head.appendChild(y)}}}function Cm(l,u,p){is.S(l,u,p);var y=Uo;if(y&&l){var v=Sr(y).hoistableStyles,S=zo(l);u=u||"default";var Y=v.get(S);if(!Y){var ce={loading:0,preload:null};if(Y=y.querySelector(Pa(S)))ce.loading=5;else{l=_({rel:"stylesheet",href:l,"data-precedence":u},p),(p=mi.get(S))&&Vu(l,p);var ve=Y=y.createElement("link");Zn(ve),Cr(ve,"link",l),ve._p=new Promise(function($e,je){ve.onload=$e,ve.onerror=je}),ve.addEventListener("load",function(){ce.loading|=1}),ve.addEventListener("error",function(){ce.loading|=2}),ce.loading|=4,Bl(Y,u,y)}Y={type:"stylesheet",instance:Y,count:1,state:ce},v.set(S,Y)}}}function Pm(l,u){is.X(l,u);var p=Uo;if(p&&l){var y=Sr(p).hoistableScripts,v=Ho(l),S=y.get(v);S||(S=p.querySelector(ka(v)),S||(l=_({src:l,async:!0},u),(u=mi.get(v))&&$u(l,u),S=p.createElement("script"),Zn(S),Cr(S,"link",l),p.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(v,S))}}function km(l,u){is.M(l,u);var p=Uo;if(p&&l){var y=Sr(p).hoistableScripts,v=Ho(l),S=y.get(v);S||(S=p.querySelector(ka(v)),S||(l=_({src:l,async:!0,type:"module"},u),(u=mi.get(v))&&$u(l,u),S=p.createElement("script"),Zn(S),Cr(S,"link",l),p.head.appendChild(S)),S={type:"script",instance:S,count:1,state:null},y.set(v,S))}}function Lh(l,u,p,y){var v=(v=qe.current)?Ol(v):null;if(!v)throw Error(o(446));switch(l){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=zo(p.href),p=Sr(v).hoistableStyles,y=p.get(u),y||(y={type:"style",instance:null,count:0,state:null},p.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){l=zo(p.href);var S=Sr(v).hoistableStyles,Y=S.get(l);if(Y||(v=v.ownerDocument||v,Y={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},S.set(l,Y),(S=v.querySelector(Pa(l)))&&!S._p&&(Y.instance=S,Y.state.loading=5),mi.has(l)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},mi.set(l,p),S||Vm(v,l,p,Y.state))),u&&y===null)throw Error(o(528,""));return Y}if(u&&y!==null)throw Error(o(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ho(p),p=Sr(v).hoistableScripts,y=p.get(u),y||(y={type:"script",instance:null,count:0,state:null},p.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(o(444,l))}}function zo(l){return'href="'+Kn(l)+'"'}function Pa(l){return'link[rel="stylesheet"]['+l+"]"}function Fh(l){return _({},l,{"data-precedence":l.precedence,precedence:null})}function Vm(l,u,p,y){l.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=l.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),Cr(u,"link",p),Zn(u),l.head.appendChild(u))}function Ho(l){return'[src="'+Kn(l)+'"]'}function ka(l){return"script[async]"+l}function jh(l,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var y=l.querySelector('style[data-href~="'+Kn(p.href)+'"]');if(y)return u.instance=y,Zn(y),y;var v=_({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(l.ownerDocument||l).createElement("style"),Zn(y),Cr(y,"style",v),Bl(y,p.precedence,l),u.instance=y;case"stylesheet":v=zo(p.href);var S=l.querySelector(Pa(v));if(S)return u.state.loading|=4,u.instance=S,Zn(S),S;y=Fh(p),(v=mi.get(v))&&Vu(y,v),S=(l.ownerDocument||l).createElement("link"),Zn(S);var Y=S;return Y._p=new Promise(function(ce,ve){Y.onload=ce,Y.onerror=ve}),Cr(S,"link",y),u.state.loading|=4,Bl(S,p.precedence,l),u.instance=S;case"script":return S=Ho(p.src),(v=l.querySelector(ka(S)))?(u.instance=v,Zn(v),v):(y=p,(v=mi.get(S))&&(y=_({},p),$u(y,v)),l=l.ownerDocument||l,v=l.createElement("script"),Zn(v),Cr(v,"link",y),l.head.appendChild(v),u.instance=v);case"void":return null;default:throw Error(o(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,Bl(y,p.precedence,l));return u.instance}function Bl(l,u,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=y.length?y[y.length-1]:null,S=v,Y=0;Y<y.length;Y++){var ce=y[Y];if(ce.dataset.precedence===u)S=ce;else if(S!==v)break}S?S.parentNode.insertBefore(l,S.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(l,u.firstChild))}function Vu(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.title==null&&(l.title=u.title)}function $u(l,u){l.crossOrigin==null&&(l.crossOrigin=u.crossOrigin),l.referrerPolicy==null&&(l.referrerPolicy=u.referrerPolicy),l.integrity==null&&(l.integrity=u.integrity)}var Ll=null;function Uh(l,u,p){if(Ll===null){var y=new Map,v=Ll=new Map;v.set(p,y)}else v=Ll,y=v.get(p),y||(y=new Map,v.set(p,y));if(y.has(l))return y;for(y.set(l,null),p=p.getElementsByTagName(l),v=0;v<p.length;v++){var S=p[v];if(!(S[gi]||S[Rn]||l==="link"&&S.getAttribute("rel")==="stylesheet")&&S.namespaceURI!=="http://www.w3.org/2000/svg"){var Y=S.getAttribute(u)||"";Y=l+Y;var ce=y.get(Y);ce?ce.push(S):y.set(Y,[S])}}return y}function zh(l,u,p){l=l.ownerDocument||l,l.head.insertBefore(p,u==="title"?l.querySelector("head > title"):null)}function $m(l,u,p){if(p===1||u.itemProp!=null)return!1;switch(l){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return l=u.disabled,typeof u.precedence=="string"&&l==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function Hh(l){return!(l.type==="stylesheet"&&(l.state.loading&3)===0)}var Va=null;function Dm(){}function Mm(l,u,p){if(Va===null)throw Error(o(475));var y=Va;if(u.type==="stylesheet"&&(typeof p.media!="string"||matchMedia(p.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=zo(p.href),S=l.querySelector(Pa(v));if(S){l=S._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(y.count++,y=Fl.bind(y),l.then(y,y)),u.state.loading|=4,u.instance=S,Zn(S);return}S=l.ownerDocument||l,p=Fh(p),(v=mi.get(v))&&Vu(p,v),S=S.createElement("link"),Zn(S);var Y=S;Y._p=new Promise(function(ce,ve){Y.onload=ce,Y.onerror=ve}),Cr(S,"link",p),u.instance=S}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(u,l),(l=u.state.preload)&&(u.state.loading&3)===0&&(y.count++,u=Fl.bind(y),l.addEventListener("load",u),l.addEventListener("error",u))}}function Nm(){if(Va===null)throw Error(o(475));var l=Va;return l.stylesheets&&l.count===0&&Du(l,l.stylesheets),0<l.count?function(u){var p=setTimeout(function(){if(l.stylesheets&&Du(l,l.stylesheets),l.unsuspend){var y=l.unsuspend;l.unsuspend=null,y()}},6e4);return l.unsuspend=u,function(){l.unsuspend=null,clearTimeout(p)}}:null}function Fl(){if(this.count--,this.count===0){if(this.stylesheets)Du(this,this.stylesheets);else if(this.unsuspend){var l=this.unsuspend;this.unsuspend=null,l()}}}var jl=null;function Du(l,u){l.stylesheets=null,l.unsuspend!==null&&(l.count++,jl=new Map,u.forEach(Om,l),jl=null,Fl.call(l))}function Om(l,u){if(!(u.state.loading&4)){var p=jl.get(l);if(p)var y=p.get(null);else{p=new Map,jl.set(l,p);for(var v=l.querySelectorAll("link[data-precedence],style[data-precedence]"),S=0;S<v.length;S++){var Y=v[S];(Y.nodeName==="LINK"||Y.getAttribute("media")!=="not all")&&(p.set(Y.dataset.precedence,Y),y=Y)}y&&p.set(null,y)}v=u.instance,Y=v.getAttribute("data-precedence"),S=p.get(Y)||y,S===y&&p.set(null,v),p.set(Y,v),this.count++,y=Fl.bind(this),v.addEventListener("load",y),v.addEventListener("error",y),S?S.parentNode.insertBefore(v,S.nextSibling):(l=l.nodeType===9?l.head:l,l.insertBefore(v,l.firstChild)),u.state.loading|=4}}var $a={$$typeof:re,Provider:null,Consumer:null,_currentValue:Re,_currentValue2:Re,_threadCount:0};function Bm(l,u,p,y,v,S,Y,ce){this.tag=1,this.containerInfo=l,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=dn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dn(0),this.hiddenUpdates=dn(null),this.identifierPrefix=y,this.onUncaughtError=v,this.onCaughtError=S,this.onRecoverableError=Y,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ce,this.incompleteTransitions=new Map}function qh(l,u,p,y,v,S,Y,ce,ve,$e,je,He){return l=new Bm(l,u,p,Y,ce,ve,$e,He),u=1,S===!0&&(u|=24),S=Zr(3,null,null,u),l.current=S,S.stateNode=l,u=mc(),u.refCount++,l.pooledCache=u,u.refCount++,S.memoizedState={element:y,isDehydrated:p,cache:u},bc(S),l}function Wh(l){return l?(l=vo,l):vo}function Gh(l,u,p,y,v,S){v=Wh(v),y.context===null?y.context=v:y.pendingContext=v,y=ys(u),y.payload={element:p},S=S===void 0?null:S,S!==null&&(y.callback=S),p=_s(l,y,u),p!==null&&(ri(p,l,u),la(p,l,u))}function Kh(l,u){if(l=l.memoizedState,l!==null&&l.dehydrated!==null){var p=l.retryLane;l.retryLane=p!==0&&p<u?p:u}}function Mu(l,u){Kh(l,u),(l=l.alternate)&&Kh(l,u)}function Yh(l){if(l.tag===13){var u=Eo(l,67108864);u!==null&&ri(u,l,67108864),Mu(l,67108864)}}var Ul=!0;function Lm(l,u,p,y){var v=oe.T;oe.T=null;var S=_e.p;try{_e.p=2,Nu(l,u,p,y)}finally{_e.p=S,oe.T=v}}function Fm(l,u,p,y){var v=oe.T;oe.T=null;var S=_e.p;try{_e.p=8,Nu(l,u,p,y)}finally{_e.p=S,oe.T=v}}function Nu(l,u,p,y){if(Ul){var v=Ou(y);if(v===null)Tu(l,u,y,zl,p),Qh(l,y);else if(Um(v,l,u,p,y))y.stopPropagation();else if(Qh(l,y),u&4&&-1<jm.indexOf(l)){for(;v!==null;){var S=Tr(v);if(S!==null)switch(S.tag){case 3:if(S=S.stateNode,S.current.memoizedState.isDehydrated){var Y=st(S.pendingLanes);if(Y!==0){var ce=S;for(ce.pendingLanes|=2,ce.entangledLanes|=2;Y;){var ve=1<<31-P(Y);ce.entanglements[1]|=ve,Y&=~ve}Di(S),(Dn&6)===0&&(Rl=Ft()+500,Ra(0))}}break;case 13:ce=Eo(S,2),ce!==null&&ri(ce,S,2),Il(),Mu(S,2)}if(S=Ou(y),S===null&&Tu(l,u,y,zl,p),S===v)break;v=S}v!==null&&y.stopPropagation()}else Tu(l,u,y,null,p)}}function Ou(l){return l=Pr(l),Bu(l)}var zl=null;function Bu(l){if(zl=null,l=yi(l),l!==null){var u=c(l);if(u===null)l=null;else{var p=u.tag;if(p===13){if(l=f(u),l!==null)return l;l=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;l=null}else u!==l&&(l=null)}}return zl=l,null}function Xh(l){switch(l){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(lr()){case Fn:return 2;case Hn:return 8;case Qn:case Nn:return 32;case Gn:return 268435456;default:return 32}default:return 32}}var Lu=!1,ks=null,Vs=null,$s=null,Da=new Map,Ma=new Map,Ds=[],jm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Qh(l,u){switch(l){case"focusin":case"focusout":ks=null;break;case"dragenter":case"dragleave":Vs=null;break;case"mouseover":case"mouseout":$s=null;break;case"pointerover":case"pointerout":Da.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ma.delete(u.pointerId)}}function Na(l,u,p,y,v,S){return l===null||l.nativeEvent!==S?(l={blockedOn:u,domEventName:p,eventSystemFlags:y,nativeEvent:S,targetContainers:[v]},u!==null&&(u=Tr(u),u!==null&&Yh(u)),l):(l.eventSystemFlags|=y,u=l.targetContainers,v!==null&&u.indexOf(v)===-1&&u.push(v),l)}function Um(l,u,p,y,v){switch(u){case"focusin":return ks=Na(ks,l,u,p,y,v),!0;case"dragenter":return Vs=Na(Vs,l,u,p,y,v),!0;case"mouseover":return $s=Na($s,l,u,p,y,v),!0;case"pointerover":var S=v.pointerId;return Da.set(S,Na(Da.get(S)||null,l,u,p,y,v)),!0;case"gotpointercapture":return S=v.pointerId,Ma.set(S,Na(Ma.get(S)||null,l,u,p,y,v)),!0}return!1}function Zh(l){var u=yi(l.target);if(u!==null){var p=c(u);if(p!==null){if(u=p.tag,u===13){if(u=f(p),u!==null){l.blockedOn=u,Un(l.priority,function(){if(p.tag===13){var y=ni();y=Lt(y);var v=Eo(p,y);v!==null&&ri(v,p,y),Mu(p,y)}});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){l.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}l.blockedOn=null}function Hl(l){if(l.blockedOn!==null)return!1;for(var u=l.targetContainers;0<u.length;){var p=Ou(l.nativeEvent);if(p===null){p=l.nativeEvent;var y=new p.constructor(p.type,p);Br=y,p.target.dispatchEvent(y),Br=null}else return u=Tr(p),u!==null&&Yh(u),l.blockedOn=p,!1;u.shift()}return!0}function Jh(l,u,p){Hl(l)&&p.delete(u)}function zm(){Lu=!1,ks!==null&&Hl(ks)&&(ks=null),Vs!==null&&Hl(Vs)&&(Vs=null),$s!==null&&Hl($s)&&($s=null),Da.forEach(Jh),Ma.forEach(Jh)}function ql(l,u){l.blockedOn===u&&(l.blockedOn=null,Lu||(Lu=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,zm)))}var Wl=null;function ep(l){Wl!==l&&(Wl=l,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Wl===l&&(Wl=null);for(var u=0;u<l.length;u+=3){var p=l[u],y=l[u+1],v=l[u+2];if(typeof y!="function"){if(Bu(y||p)===null)continue;break}var S=Tr(p);S!==null&&(l.splice(u,3),u-=3,Bc(S,{pending:!0,data:v,method:p.method,action:y},y,v))}}))}function Oa(l){function u(ve){return ql(ve,l)}ks!==null&&ql(ks,l),Vs!==null&&ql(Vs,l),$s!==null&&ql($s,l),Da.forEach(u),Ma.forEach(u);for(var p=0;p<Ds.length;p++){var y=Ds[p];y.blockedOn===l&&(y.blockedOn=null)}for(;0<Ds.length&&(p=Ds[0],p.blockedOn===null);)Zh(p),p.blockedOn===null&&Ds.shift();if(p=(l.ownerDocument||l).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var v=p[y],S=p[y+1],Y=v[En]||null;if(typeof S=="function")Y||ep(p);else if(Y){var ce=null;if(S&&S.hasAttribute("formAction")){if(v=S,Y=S[En]||null)ce=Y.formAction;else if(Bu(v)!==null)continue}else ce=Y.action;typeof ce=="function"?p[y+1]=ce:(p.splice(y,3),y-=3),ep(p)}}}function Fu(l){this._internalRoot=l}Gl.prototype.render=Fu.prototype.render=function(l){var u=this._internalRoot;if(u===null)throw Error(o(409));var p=u.current,y=ni();Gh(p,y,l,u,null,null)},Gl.prototype.unmount=Fu.prototype.unmount=function(){var l=this._internalRoot;if(l!==null){this._internalRoot=null;var u=l.containerInfo;Gh(l.current,2,null,l,null,null),Il(),u[pn]=null}};function Gl(l){this._internalRoot=l}Gl.prototype.unstable_scheduleHydration=function(l){if(l){var u=jn();l={blockedOn:null,target:l,priority:u};for(var p=0;p<Ds.length&&u!==0&&u<Ds[p].priority;p++);Ds.splice(p,0,l),p===0&&Zh(l)}};var tp=e.version;if(tp!=="19.1.1")throw Error(o(527,tp,"19.1.1"));_e.findDOMNode=function(l){var u=l._reactInternals;if(u===void 0)throw typeof l.render=="function"?Error(o(188)):(l=Object.keys(l).join(","),Error(o(268,l)));return l=m(u),l=l!==null?g(l):null,l=l===null?null:l.stateNode,l};var Hm={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Vn=Kl.inject(Hm),ie=Kl}catch{}}return reactDomClient_production.createRoot=function(l,u){if(!a(l))throw Error(o(299));var p=!1,y="",v=gf,S=yf,Y=_f,ce=null;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(S=u.onCaughtError),u.onRecoverableError!==void 0&&(Y=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(ce=u.unstable_transitionCallbacks)),u=qh(l,1,!1,null,null,p,y,v,S,Y,ce,null),l[pn]=u.current,xu(l),new Fu(u)},reactDomClient_production.hydrateRoot=function(l,u,p){if(!a(l))throw Error(o(299));var y=!1,v="",S=gf,Y=yf,ce=_f,ve=null,$e=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(v=p.identifierPrefix),p.onUncaughtError!==void 0&&(S=p.onUncaughtError),p.onCaughtError!==void 0&&(Y=p.onCaughtError),p.onRecoverableError!==void 0&&(ce=p.onRecoverableError),p.unstable_transitionCallbacks!==void 0&&(ve=p.unstable_transitionCallbacks),p.formState!==void 0&&($e=p.formState)),u=qh(l,1,!0,u,p??null,y,v,S,Y,ce,ve,$e),u.context=Wh(null),p=u.current,y=ni(),y=Lt(y),v=ys(y),v.callback=null,_s(p,v,y),p=y,u.current.lanes=p,jt(u,p),Di(u),l[pn]=u.current,xu(l),new Gl(u)},reactDomClient_production.version="19.1.1",reactDomClient_production}var hasRequiredClient;function requireClient(){if(hasRequiredClient)return client.exports;hasRequiredClient=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),client.exports=requireReactDomClient_production(),client.exports}var clientExports=requireClient();const getDefaultsFromPostinstall=()=>{};var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(n){const e=[];let s=0;for(let o=0;o<n.length;o++){let a=n.charCodeAt(o);a<128?e[s++]=a:a<2048?(e[s++]=a>>6|192,e[s++]=a&63|128):(a&64512)===55296&&o+1<n.length&&(n.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(n.charCodeAt(++o)&1023),e[s++]=a>>18|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128,e[s++]=a&63|128):(e[s++]=a>>12|224,e[s++]=a>>6&63|128,e[s++]=a&63|128)}return e},byteArrayToString=function(n){const e=[];let s=0,o=0;for(;s<n.length;){const a=n[s++];if(a<128)e[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=n[s++];e[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=n[s++],f=n[s++],h=n[s++],m=((a&7)<<18|(c&63)<<12|(f&63)<<6|h&63)-65536;e[o++]=String.fromCharCode(55296+(m>>10)),e[o++]=String.fromCharCode(56320+(m&1023))}else{const c=n[s++],f=n[s++];e[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|f&63)}}return e.join("")},base64$1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<n.length;a+=3){const c=n[a],f=a+1<n.length,h=f?n[a+1]:0,m=a+2<n.length,g=m?n[a+2]:0,_=c>>2,E=(c&3)<<4|h>>4;let T=(h&15)<<2|g>>6,w=g&63;m||(w=64,f||(T=64)),o.push(s[_],s[E],s[T],s[w])}return o.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(stringToByteArray$1(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):byteArrayToString(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<n.length;){const c=s[n.charAt(a++)],h=a<n.length?s[n.charAt(a)]:0;++a;const g=a<n.length?s[n.charAt(a)]:64;++a;const E=a<n.length?s[n.charAt(a)]:64;if(++a,c==null||h==null||g==null||E==null)throw new DecodeBase64StringError;const T=c<<2|h>>4;if(o.push(T),g!==64){const w=h<<4&240|g>>2;if(o.push(w),E!==64){const A=g<<6&192|E;o.push(A)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(n){const e=stringToByteArray$1(n);return base64$1.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(n){return base64Encode(n).replace(/\./g,"")},base64Decode=function(n){try{return base64$1.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const n=define_process_env_default.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&base64Decode(n[1]);return e&&JSON.parse(e)},getDefaults$1=()=>{try{return getDefaultsFromPostinstall()||getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},getDefaultEmulatorHost=n=>getDefaults$1()?.emulatorHosts?.[n],getDefaultEmulatorHostnameAndPort=n=>{const e=getDefaultEmulatorHost(n);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),o]:[e.substring(0,s),o]},getDefaultAppConfig=()=>getDefaults$1()?.config;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,o)=>{s?this.reject(s):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,o))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isCloudWorkstation(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function pingServer(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},o=e||"demo-project",a=n.iat||0,c=n.sub||n.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}},...n};return[base64urlEncodeWithoutPadding(JSON.stringify(s)),base64urlEncodeWithoutPadding(JSON.stringify(f)),""].join(".")}const emulatorStatus={};function getEmulatorSummary(){const n={prod:[],emulator:[]};for(const e of Object.keys(emulatorStatus))emulatorStatus[e]?n.emulator.push(e):n.prod.push(e);return n}function getOrCreateEl(n){let e=document.getElementById(n),s=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),s=!0),{created:s,element:e}}let previouslyDismissed=!1;function updateEmulatorBanner(n,e){if(typeof window>"u"||typeof document>"u"||!isCloudWorkstation(window.location.host)||emulatorStatus[n]===e||emulatorStatus[n]||previouslyDismissed)return;emulatorStatus[n]=e;function s(T){return`__firebase__banner__${T}`}const o="__firebase__banner",c=getEmulatorSummary().prod.length>0;function f(){const T=document.getElementById(o);T&&T.remove()}function h(T){T.style.display="flex",T.style.background="#7faaf0",T.style.position="fixed",T.style.bottom="5px",T.style.left="5px",T.style.padding=".5em",T.style.borderRadius="5px",T.style.alignItems="center"}function m(T,w){T.setAttribute("width","24"),T.setAttribute("id",w),T.setAttribute("height","24"),T.setAttribute("viewBox","0 0 24 24"),T.setAttribute("fill","none"),T.style.marginLeft="-6px"}function g(){const T=document.createElement("span");return T.style.cursor="pointer",T.style.marginLeft="16px",T.style.fontSize="24px",T.innerHTML=" &times;",T.onclick=()=>{previouslyDismissed=!0,f()},T}function _(T,w){T.setAttribute("id",w),T.innerText="Learn more",T.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",T.setAttribute("target","__blank"),T.style.paddingLeft="5px",T.style.textDecoration="underline"}function E(){const T=getOrCreateEl(o),w=s("text"),A=document.getElementById(w)||document.createElement("span"),R=s("learnmore"),V=document.getElementById(R)||document.createElement("a"),te=s("preprendIcon"),se=document.getElementById(te)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(T.created){const re=T.element;h(re),_(V,R);const ye=g();m(se,te),re.append(se,A,V,ye),document.body.appendChild(re)}c?(A.innerText="Preview backend disconnected.",se.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(se.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",w)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isNode(){const n=getDefaults$1()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((n,e)=>{try{let s=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(o),n(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{e(a.error?.message||"")}}catch(s){e(s)}})}function areCookiesEnabled(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,s,o){super(s),this.code=e,this.customData=o,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,s,o){this.service=e,this.serviceName=s,this.errors=o}create(e,...s){const o=s[0]||{},a=`${this.service}/${e}`,c=this.errors[e],f=c?replaceTemplate(c,o):"Error",h=`${this.serviceName}: ${f} (${a}).`;return new FirebaseError(a,h,o)}}function replaceTemplate(n,e){return n.replace(PATTERN,(s,o)=>{const a=e[o];return a!=null?String(a):`<${o}?>`})}const PATTERN=/\{\$([^}]+)}/g;function deepEqual(n,e){if(n===e)return!0;const s=Object.keys(n),o=Object.keys(e);for(const a of s){if(!o.includes(a))return!1;const c=n[a],f=e[a];if(isObject$2(c)&&isObject$2(f)){if(!deepEqual(c,f))return!1}else if(c!==f)return!1}for(const a of o)if(!s.includes(a))return!1;return!0}function isObject$2(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance$1(n){return n&&n._delegate?n._delegate:n}let Component$1=class{constructor(e,s,o){this.name=e,this.instanceFactory=s,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Provider$1=class{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const o=new Deferred;if(this.instancesDeferred.set(s,o),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){const s=this.normalizeInstanceIdentifier(e?.identifier),o=e?.optional??!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(a){if(o)return null;throw a}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:s});for(const[c,f]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);o===h&&f.resolve(a)}return a}onInit(e,s){const o=this.normalizeInstanceIdentifier(s),a=this.onInitCallbacks.get(o)??new Set;a.add(e),this.onInitCallbacks.set(o,a);const c=this.instances.get(o);return c&&e(c,o),()=>{a.delete(e)}}invokeOnInitCallbacks(e,s){const o=this.onInitCallbacks.get(s);if(o)for(const a of o)try{a(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:s}),this.instances.set(e,o),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function normalizeIdentifierForFactory(n){return n===DEFAULT_ENTRY_NAME$1?void 0:n}function isComponentEager(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Provider$1(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel$1;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(LogLevel$1||(LogLevel$1={}));const levelStringToEnum$1={debug:LogLevel$1.DEBUG,verbose:LogLevel$1.VERBOSE,info:LogLevel$1.INFO,warn:LogLevel$1.WARN,error:LogLevel$1.ERROR,silent:LogLevel$1.SILENT},defaultLogLevel$1=LogLevel$1.INFO,ConsoleMethod$1={[LogLevel$1.DEBUG]:"log",[LogLevel$1.VERBOSE]:"log",[LogLevel$1.INFO]:"info",[LogLevel$1.WARN]:"warn",[LogLevel$1.ERROR]:"error"},defaultLogHandler$1=(n,e,...s)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),a=ConsoleMethod$1[e];if(a)console[a](`[${o}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};let Logger$1=class{constructor(e){this.name=e,this._logLevel=defaultLogLevel$1,this._logHandler=defaultLogHandler$1,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel$1))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum$1[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.DEBUG,...e),this._logHandler(this,LogLevel$1.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.VERBOSE,...e),this._logHandler(this,LogLevel$1.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.INFO,...e),this._logHandler(this,LogLevel$1.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.WARN,...e),this._logHandler(this,LogLevel$1.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel$1.ERROR,...e),this._logHandler(this,LogLevel$1.ERROR,...e)}};const instanceOfAny=(n,e)=>e.some(s=>n instanceof s);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(n){const e=new Promise((s,o)=>{const a=()=>{n.removeEventListener("success",c),n.removeEventListener("error",f)},c=()=>{s(wrap$2(n.result)),a()},f=()=>{o(n.error),a()};n.addEventListener("success",c),n.addEventListener("error",f)});return e.then(s=>{s instanceof IDBCursor&&cursorRequestMap.set(s,n)}).catch(()=>{}),reverseTransformCache.set(e,n),e}function cacheDonePromiseForTransaction(n){if(transactionDoneMap.has(n))return;const e=new Promise((s,o)=>{const a=()=>{n.removeEventListener("complete",c),n.removeEventListener("error",f),n.removeEventListener("abort",f)},c=()=>{s(),a()},f=()=>{o(n.error||new DOMException("AbortError","AbortError")),a()};n.addEventListener("complete",c),n.addEventListener("error",f),n.addEventListener("abort",f)});transactionDoneMap.set(n,e)}let idbProxyTraps={get(n,e,s){if(n instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||transactionStoreNamesMap.get(n);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wrap$2(n[e])},set(n,e,s){return n[e]=s,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function replaceTraps(n){idbProxyTraps=n(idbProxyTraps)}function wrapFunction(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const o=n.call(unwrap(this),e,...s);return transactionStoreNamesMap.set(o,e.sort?e.sort():[e]),wrap$2(o)}:getCursorAdvanceMethods().includes(n)?function(...e){return n.apply(unwrap(this),e),wrap$2(cursorRequestMap.get(this))}:function(...e){return wrap$2(n.apply(unwrap(this),e))}}function transformCachableValue(n){return typeof n=="function"?wrapFunction(n):(n instanceof IDBTransaction&&cacheDonePromiseForTransaction(n),instanceOfAny(n,getIdbProxyableTypes())?new Proxy(n,idbProxyTraps):n)}function wrap$2(n){if(n instanceof IDBRequest)return promisifyRequest(n);if(transformCache.has(n))return transformCache.get(n);const e=transformCachableValue(n);return e!==n&&(transformCache.set(n,e),reverseTransformCache.set(e,n)),e}const unwrap=n=>reverseTransformCache.get(n);function openDB(n,e,{blocked:s,upgrade:o,blocking:a,terminated:c}={}){const f=indexedDB.open(n,e),h=wrap$2(f);return o&&f.addEventListener("upgradeneeded",m=>{o(wrap$2(f.result),m.oldVersion,m.newVersion,wrap$2(f.transaction),m)}),s&&f.addEventListener("blocked",m=>s(m.oldVersion,m.newVersion,m)),h.then(m=>{c&&m.addEventListener("close",()=>c()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}function deleteDB(n,{blocked:e}={}){const s=indexedDB.deleteDatabase(n);return e&&s.addEventListener("blocked",o=>e(o.oldVersion,o)),wrap$2(s).then(()=>{})}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const s=e.replace(/FromIndex$/,""),o=e!==s,a=writeMethods.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(a||readMethods.includes(s)))return;const c=async function(f,...h){const m=this.transaction(f,a?"readwrite":"readonly");let g=m.store;return o&&(g=g.index(h.shift())),(await Promise.all([g[s](...h),a&&m.done]))[0]};return cachedMethods.set(e,c),c}replaceTraps(n=>({...n,get:(e,s,o)=>getMethod(e,s)||n.get(e,s,o),has:(e,s)=>!!getMethod(e,s)||n.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(isVersionServiceProvider(s)){const o=s.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(s=>s).join(" ")}}function isVersionServiceProvider(n){return n.getComponent()?.type==="VERSION"}const name$q="@firebase/app",version$1$1="0.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger$1("@firebase/app"),name$p="@firebase/app-compat",name$o="@firebase/analytics-compat",name$n="@firebase/analytics",name$m="@firebase/app-check-compat",name$l="@firebase/app-check",name$k="@firebase/auth",name$j="@firebase/auth-compat",name$i="@firebase/database",name$h="@firebase/data-connect",name$g="@firebase/database-compat",name$f="@firebase/functions",name$e="@firebase/functions-compat",name$d="@firebase/installations",name$c="@firebase/installations-compat",name$b="@firebase/messaging",name$a="@firebase/messaging-compat",name$9="@firebase/performance",name$8="@firebase/performance-compat",name$7="@firebase/remote-config",name$6="@firebase/remote-config-compat",name$5="@firebase/storage",name$4="@firebase/storage-compat",name$3$1="@firebase/firestore",name$2$1="@firebase/ai",name$1$1="@firebase/firestore-compat",name$r="firebase",version$4="12.1.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$q]:"fire-core",[name$p]:"fire-core-compat",[name$n]:"fire-analytics",[name$o]:"fire-analytics-compat",[name$l]:"fire-app-check",[name$m]:"fire-app-check-compat",[name$k]:"fire-auth",[name$j]:"fire-auth-compat",[name$i]:"fire-rtdb",[name$h]:"fire-data-connect",[name$g]:"fire-rtdb-compat",[name$f]:"fire-fn",[name$e]:"fire-fn-compat",[name$d]:"fire-iid",[name$c]:"fire-iid-compat",[name$b]:"fire-fcm",[name$a]:"fire-fcm-compat",[name$9]:"fire-perf",[name$8]:"fire-perf-compat",[name$7]:"fire-rc",[name$6]:"fire-rc-compat",[name$5]:"fire-gcs",[name$4]:"fire-gcs-compat",[name$3$1]:"fire-fst",[name$1$1]:"fire-fst-compat",[name$2$1]:"fire-vertex","fire-js":"fire-js",[name$r]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_serverApps=new Map,_components=new Map;function _addComponent(n,e){try{n.container.addComponent(e)}catch(s){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,s)}}function _registerComponent(n){const e=n.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,n);for(const s of _apps.values())_addComponent(s,n);for(const s of _serverApps.values())_addComponent(s,n);return!0}function _getProvider(n,e){const s=n.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),n.container.getProvider(e)}function _isFirebaseServerApp(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ERROR_FACTORY$2=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,s,o){this._isDeleted=!1,this._options={...e},this._config={...s},this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Component$1("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY$2.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$4;function initializeApp(n,e={}){let s=n;typeof e!="object"&&(e={name:e});const o={name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!0,...e},a=o.name;if(typeof a!="string"||!a)throw ERROR_FACTORY$2.create("bad-app-name",{appName:String(a)});if(s||(s=getDefaultAppConfig()),!s)throw ERROR_FACTORY$2.create("no-options");const c=_apps.get(a);if(c){if(deepEqual(s,c.options)&&deepEqual(o,c.config))return c;throw ERROR_FACTORY$2.create("duplicate-app",{appName:a})}const f=new ComponentContainer(a);for(const m of _components.values())f.addComponent(m);const h=new FirebaseAppImpl(s,o,f);return _apps.set(a,h),h}function getApp(n=DEFAULT_ENTRY_NAME){const e=_apps.get(n);if(!e&&n===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY$2.create("no-app",{appName:n});return e}function registerVersion(n,e,s){let o=PLATFORM_LOG_STRING[n]??n;s&&(o+=`-${s}`);const a=o.match(/\s|\//),c=e.match(/\s|\//);if(a||c){const f=[`Unable to register library "${o}" with version "${e}":`];a&&f.push(`library name "${o}" contains illegal characters (whitespace or "/")`),a&&c&&f.push("and"),c&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(f.join(" "));return}_registerComponent(new Component$1(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebase-heartbeat-database",DB_VERSION=1,STORE_NAME="firebase-heartbeat-store";let dbPromise$2=null;function getDbPromise$2(){return dbPromise$2||(dbPromise$2=openDB(DB_NAME,DB_VERSION,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(STORE_NAME)}catch(s){console.warn(s)}}}}).catch(n=>{throw ERROR_FACTORY$2.create("idb-open",{originalErrorMessage:n.message})})),dbPromise$2}async function readHeartbeatsFromIndexedDB(n){try{const s=(await getDbPromise$2()).transaction(STORE_NAME),o=await s.objectStore(STORE_NAME).get(computeKey(n));return await s.done,o}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const s=ERROR_FACTORY$2.create("idb-get",{originalErrorMessage:e?.message});logger.warn(s.message)}}}async function writeHeartbeatsToIndexedDB(n,e){try{const o=(await getDbPromise$2()).transaction(STORE_NAME,"readwrite");await o.objectStore(STORE_NAME).put(e,computeKey(n)),await o.done}catch(s){if(s instanceof FirebaseError)logger.warn(s.message);else{const o=ERROR_FACTORY$2.create("idb-set",{originalErrorMessage:s?.message});logger.warn(o.message)}}}function computeKey(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,MAX_NUM_STORED_HEARTBEATS=30;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(s),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=getUTCDateString();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>MAX_NUM_STORED_HEARTBEATS){const a=getEarliestHeartbeatIdx(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){logger.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=getUTCDateString(),{heartbeatsToSend:s,unsentEntries:o}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),a=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=e,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),a}catch(e){return logger.warn(e),""}}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(n,e=MAX_HEADER_BYTES){const s=[];let o=n.slice();for(const a of n){const c=s.find(f=>f.agent===a.agent);if(c){if(c.dates.push(a.date),countBytes(s)>e){c.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),countBytes(s)>e){s.pop();break}o=o.slice(1)}return{heartbeatsToSend:s,unsentEntries:o}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await readHeartbeatsFromIndexedDB(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const o=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function countBytes(n){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:n})).length}function getEarliestHeartbeatIdx(n){if(n.length===0)return-1;let e=0,s=n[0].date;for(let o=1;o<n.length;o++)n[o].date<s&&(s=n[o].date,e=o);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(n){_registerComponent(new Component$1("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component$1("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$q,version$1$1,n),registerVersion(name$q,version$1$1,"esm2020"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Integer,Md5;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(z,H){function X(){}X.prototype=H.prototype,z.D=H.prototype,z.prototype=new X,z.prototype.constructor=z,z.C=function(le,Z,ne){for(var W=Array(arguments.length-2),xe=2;xe<arguments.length;xe++)W[xe-2]=arguments[xe];return H.prototype[Z].apply(le,W)}}function s(){this.blockSize=-1}function o(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(o,s),o.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function a(z,H,X){X||(X=0);var le=Array(16);if(typeof H=="string")for(var Z=0;16>Z;++Z)le[Z]=H.charCodeAt(X++)|H.charCodeAt(X++)<<8|H.charCodeAt(X++)<<16|H.charCodeAt(X++)<<24;else for(Z=0;16>Z;++Z)le[Z]=H[X++]|H[X++]<<8|H[X++]<<16|H[X++]<<24;H=z.g[0],X=z.g[1],Z=z.g[2];var ne=z.g[3],W=H+(ne^X&(Z^ne))+le[0]+3614090360&4294967295;H=X+(W<<7&4294967295|W>>>25),W=ne+(Z^H&(X^Z))+le[1]+3905402710&4294967295,ne=H+(W<<12&4294967295|W>>>20),W=Z+(X^ne&(H^X))+le[2]+606105819&4294967295,Z=ne+(W<<17&4294967295|W>>>15),W=X+(H^Z&(ne^H))+le[3]+3250441966&4294967295,X=Z+(W<<22&4294967295|W>>>10),W=H+(ne^X&(Z^ne))+le[4]+4118548399&4294967295,H=X+(W<<7&4294967295|W>>>25),W=ne+(Z^H&(X^Z))+le[5]+1200080426&4294967295,ne=H+(W<<12&4294967295|W>>>20),W=Z+(X^ne&(H^X))+le[6]+2821735955&4294967295,Z=ne+(W<<17&4294967295|W>>>15),W=X+(H^Z&(ne^H))+le[7]+4249261313&4294967295,X=Z+(W<<22&4294967295|W>>>10),W=H+(ne^X&(Z^ne))+le[8]+1770035416&4294967295,H=X+(W<<7&4294967295|W>>>25),W=ne+(Z^H&(X^Z))+le[9]+2336552879&4294967295,ne=H+(W<<12&4294967295|W>>>20),W=Z+(X^ne&(H^X))+le[10]+4294925233&4294967295,Z=ne+(W<<17&4294967295|W>>>15),W=X+(H^Z&(ne^H))+le[11]+2304563134&4294967295,X=Z+(W<<22&4294967295|W>>>10),W=H+(ne^X&(Z^ne))+le[12]+1804603682&4294967295,H=X+(W<<7&4294967295|W>>>25),W=ne+(Z^H&(X^Z))+le[13]+4254626195&4294967295,ne=H+(W<<12&4294967295|W>>>20),W=Z+(X^ne&(H^X))+le[14]+2792965006&4294967295,Z=ne+(W<<17&4294967295|W>>>15),W=X+(H^Z&(ne^H))+le[15]+1236535329&4294967295,X=Z+(W<<22&4294967295|W>>>10),W=H+(Z^ne&(X^Z))+le[1]+4129170786&4294967295,H=X+(W<<5&4294967295|W>>>27),W=ne+(X^Z&(H^X))+le[6]+3225465664&4294967295,ne=H+(W<<9&4294967295|W>>>23),W=Z+(H^X&(ne^H))+le[11]+643717713&4294967295,Z=ne+(W<<14&4294967295|W>>>18),W=X+(ne^H&(Z^ne))+le[0]+3921069994&4294967295,X=Z+(W<<20&4294967295|W>>>12),W=H+(Z^ne&(X^Z))+le[5]+3593408605&4294967295,H=X+(W<<5&4294967295|W>>>27),W=ne+(X^Z&(H^X))+le[10]+38016083&4294967295,ne=H+(W<<9&4294967295|W>>>23),W=Z+(H^X&(ne^H))+le[15]+3634488961&4294967295,Z=ne+(W<<14&4294967295|W>>>18),W=X+(ne^H&(Z^ne))+le[4]+3889429448&4294967295,X=Z+(W<<20&4294967295|W>>>12),W=H+(Z^ne&(X^Z))+le[9]+568446438&4294967295,H=X+(W<<5&4294967295|W>>>27),W=ne+(X^Z&(H^X))+le[14]+3275163606&4294967295,ne=H+(W<<9&4294967295|W>>>23),W=Z+(H^X&(ne^H))+le[3]+4107603335&4294967295,Z=ne+(W<<14&4294967295|W>>>18),W=X+(ne^H&(Z^ne))+le[8]+1163531501&4294967295,X=Z+(W<<20&4294967295|W>>>12),W=H+(Z^ne&(X^Z))+le[13]+2850285829&4294967295,H=X+(W<<5&4294967295|W>>>27),W=ne+(X^Z&(H^X))+le[2]+4243563512&4294967295,ne=H+(W<<9&4294967295|W>>>23),W=Z+(H^X&(ne^H))+le[7]+1735328473&4294967295,Z=ne+(W<<14&4294967295|W>>>18),W=X+(ne^H&(Z^ne))+le[12]+2368359562&4294967295,X=Z+(W<<20&4294967295|W>>>12),W=H+(X^Z^ne)+le[5]+4294588738&4294967295,H=X+(W<<4&4294967295|W>>>28),W=ne+(H^X^Z)+le[8]+2272392833&4294967295,ne=H+(W<<11&4294967295|W>>>21),W=Z+(ne^H^X)+le[11]+1839030562&4294967295,Z=ne+(W<<16&4294967295|W>>>16),W=X+(Z^ne^H)+le[14]+4259657740&4294967295,X=Z+(W<<23&4294967295|W>>>9),W=H+(X^Z^ne)+le[1]+2763975236&4294967295,H=X+(W<<4&4294967295|W>>>28),W=ne+(H^X^Z)+le[4]+1272893353&4294967295,ne=H+(W<<11&4294967295|W>>>21),W=Z+(ne^H^X)+le[7]+4139469664&4294967295,Z=ne+(W<<16&4294967295|W>>>16),W=X+(Z^ne^H)+le[10]+3200236656&4294967295,X=Z+(W<<23&4294967295|W>>>9),W=H+(X^Z^ne)+le[13]+681279174&4294967295,H=X+(W<<4&4294967295|W>>>28),W=ne+(H^X^Z)+le[0]+3936430074&4294967295,ne=H+(W<<11&4294967295|W>>>21),W=Z+(ne^H^X)+le[3]+3572445317&4294967295,Z=ne+(W<<16&4294967295|W>>>16),W=X+(Z^ne^H)+le[6]+76029189&4294967295,X=Z+(W<<23&4294967295|W>>>9),W=H+(X^Z^ne)+le[9]+3654602809&4294967295,H=X+(W<<4&4294967295|W>>>28),W=ne+(H^X^Z)+le[12]+3873151461&4294967295,ne=H+(W<<11&4294967295|W>>>21),W=Z+(ne^H^X)+le[15]+530742520&4294967295,Z=ne+(W<<16&4294967295|W>>>16),W=X+(Z^ne^H)+le[2]+3299628645&4294967295,X=Z+(W<<23&4294967295|W>>>9),W=H+(Z^(X|~ne))+le[0]+4096336452&4294967295,H=X+(W<<6&4294967295|W>>>26),W=ne+(X^(H|~Z))+le[7]+1126891415&4294967295,ne=H+(W<<10&4294967295|W>>>22),W=Z+(H^(ne|~X))+le[14]+2878612391&4294967295,Z=ne+(W<<15&4294967295|W>>>17),W=X+(ne^(Z|~H))+le[5]+4237533241&4294967295,X=Z+(W<<21&4294967295|W>>>11),W=H+(Z^(X|~ne))+le[12]+1700485571&4294967295,H=X+(W<<6&4294967295|W>>>26),W=ne+(X^(H|~Z))+le[3]+2399980690&4294967295,ne=H+(W<<10&4294967295|W>>>22),W=Z+(H^(ne|~X))+le[10]+4293915773&4294967295,Z=ne+(W<<15&4294967295|W>>>17),W=X+(ne^(Z|~H))+le[1]+2240044497&4294967295,X=Z+(W<<21&4294967295|W>>>11),W=H+(Z^(X|~ne))+le[8]+1873313359&4294967295,H=X+(W<<6&4294967295|W>>>26),W=ne+(X^(H|~Z))+le[15]+4264355552&4294967295,ne=H+(W<<10&4294967295|W>>>22),W=Z+(H^(ne|~X))+le[6]+2734768916&4294967295,Z=ne+(W<<15&4294967295|W>>>17),W=X+(ne^(Z|~H))+le[13]+1309151649&4294967295,X=Z+(W<<21&4294967295|W>>>11),W=H+(Z^(X|~ne))+le[4]+4149444226&4294967295,H=X+(W<<6&4294967295|W>>>26),W=ne+(X^(H|~Z))+le[11]+3174756917&4294967295,ne=H+(W<<10&4294967295|W>>>22),W=Z+(H^(ne|~X))+le[2]+718787259&4294967295,Z=ne+(W<<15&4294967295|W>>>17),W=X+(ne^(Z|~H))+le[9]+3951481745&4294967295,z.g[0]=z.g[0]+H&4294967295,z.g[1]=z.g[1]+(Z+(W<<21&4294967295|W>>>11))&4294967295,z.g[2]=z.g[2]+Z&4294967295,z.g[3]=z.g[3]+ne&4294967295}o.prototype.u=function(z,H){H===void 0&&(H=z.length);for(var X=H-this.blockSize,le=this.B,Z=this.h,ne=0;ne<H;){if(Z==0)for(;ne<=X;)a(this,z,ne),ne+=this.blockSize;if(typeof z=="string"){for(;ne<H;)if(le[Z++]=z.charCodeAt(ne++),Z==this.blockSize){a(this,le),Z=0;break}}else for(;ne<H;)if(le[Z++]=z[ne++],Z==this.blockSize){a(this,le),Z=0;break}}this.h=Z,this.o+=H},o.prototype.v=function(){var z=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);z[0]=128;for(var H=1;H<z.length-8;++H)z[H]=0;var X=8*this.o;for(H=z.length-8;H<z.length;++H)z[H]=X&255,X/=256;for(this.u(z),z=Array(16),H=X=0;4>H;++H)for(var le=0;32>le;le+=8)z[X++]=this.g[H]>>>le&255;return z};function c(z,H){var X=h;return Object.prototype.hasOwnProperty.call(X,z)?X[z]:X[z]=H(z)}function f(z,H){this.h=H;for(var X=[],le=!0,Z=z.length-1;0<=Z;Z--){var ne=z[Z]|0;le&&ne==H||(X[Z]=ne,le=!1)}this.g=X}var h={};function m(z){return-128<=z&&128>z?c(z,function(H){return new f([H|0],0>H?-1:0)}):new f([z|0],0>z?-1:0)}function g(z){if(isNaN(z)||!isFinite(z))return E;if(0>z)return V(g(-z));for(var H=[],X=1,le=0;z>=X;le++)H[le]=z/X|0,X*=4294967296;return new f(H,0)}function _(z,H){if(z.length==0)throw Error("number format error: empty string");if(H=H||10,2>H||36<H)throw Error("radix out of range: "+H);if(z.charAt(0)=="-")return V(_(z.substring(1),H));if(0<=z.indexOf("-"))throw Error('number format error: interior "-" character');for(var X=g(Math.pow(H,8)),le=E,Z=0;Z<z.length;Z+=8){var ne=Math.min(8,z.length-Z),W=parseInt(z.substring(Z,Z+ne),H);8>ne?(ne=g(Math.pow(H,ne)),le=le.j(ne).add(g(W))):(le=le.j(X),le=le.add(g(W)))}return le}var E=m(0),T=m(1),w=m(16777216);n=f.prototype,n.m=function(){if(R(this))return-V(this).m();for(var z=0,H=1,X=0;X<this.g.length;X++){var le=this.i(X);z+=(0<=le?le:4294967296+le)*H,H*=4294967296}return z},n.toString=function(z){if(z=z||10,2>z||36<z)throw Error("radix out of range: "+z);if(A(this))return"0";if(R(this))return"-"+V(this).toString(z);for(var H=g(Math.pow(z,6)),X=this,le="";;){var Z=ye(X,H).g;X=te(X,Z.j(H));var ne=((0<X.g.length?X.g[0]:X.h)>>>0).toString(z);if(X=Z,A(X))return ne+le;for(;6>ne.length;)ne="0"+ne;le=ne+le}},n.i=function(z){return 0>z?0:z<this.g.length?this.g[z]:this.h};function A(z){if(z.h!=0)return!1;for(var H=0;H<z.g.length;H++)if(z.g[H]!=0)return!1;return!0}function R(z){return z.h==-1}n.l=function(z){return z=te(this,z),R(z)?-1:A(z)?0:1};function V(z){for(var H=z.g.length,X=[],le=0;le<H;le++)X[le]=~z.g[le];return new f(X,~z.h).add(T)}n.abs=function(){return R(this)?V(this):this},n.add=function(z){for(var H=Math.max(this.g.length,z.g.length),X=[],le=0,Z=0;Z<=H;Z++){var ne=le+(this.i(Z)&65535)+(z.i(Z)&65535),W=(ne>>>16)+(this.i(Z)>>>16)+(z.i(Z)>>>16);le=W>>>16,ne&=65535,W&=65535,X[Z]=W<<16|ne}return new f(X,X[X.length-1]&-2147483648?-1:0)};function te(z,H){return z.add(V(H))}n.j=function(z){if(A(this)||A(z))return E;if(R(this))return R(z)?V(this).j(V(z)):V(V(this).j(z));if(R(z))return V(this.j(V(z)));if(0>this.l(w)&&0>z.l(w))return g(this.m()*z.m());for(var H=this.g.length+z.g.length,X=[],le=0;le<2*H;le++)X[le]=0;for(le=0;le<this.g.length;le++)for(var Z=0;Z<z.g.length;Z++){var ne=this.i(le)>>>16,W=this.i(le)&65535,xe=z.i(Z)>>>16,de=z.i(Z)&65535;X[2*le+2*Z]+=W*de,se(X,2*le+2*Z),X[2*le+2*Z+1]+=ne*de,se(X,2*le+2*Z+1),X[2*le+2*Z+1]+=W*xe,se(X,2*le+2*Z+1),X[2*le+2*Z+2]+=ne*xe,se(X,2*le+2*Z+2)}for(le=0;le<H;le++)X[le]=X[2*le+1]<<16|X[2*le];for(le=H;le<2*H;le++)X[le]=0;return new f(X,0)};function se(z,H){for(;(z[H]&65535)!=z[H];)z[H+1]+=z[H]>>>16,z[H]&=65535,H++}function re(z,H){this.g=z,this.h=H}function ye(z,H){if(A(H))throw Error("division by zero");if(A(z))return new re(E,E);if(R(z))return H=ye(V(z),H),new re(V(H.g),V(H.h));if(R(H))return H=ye(z,V(H)),new re(V(H.g),H.h);if(30<z.g.length){if(R(z)||R(H))throw Error("slowDivide_ only works with positive integers.");for(var X=T,le=H;0>=le.l(z);)X=D(X),le=D(le);var Z=ae(X,1),ne=ae(le,1);for(le=ae(le,2),X=ae(X,2);!A(le);){var W=ne.add(le);0>=W.l(z)&&(Z=Z.add(X),ne=W),le=ae(le,1),X=ae(X,1)}return H=te(z,Z.j(H)),new re(Z,H)}for(Z=E;0<=z.l(H);){for(X=Math.max(1,Math.floor(z.m()/H.m())),le=Math.ceil(Math.log(X)/Math.LN2),le=48>=le?1:Math.pow(2,le-48),ne=g(X),W=ne.j(H);R(W)||0<W.l(z);)X-=le,ne=g(X),W=ne.j(H);A(ne)&&(ne=T),Z=Z.add(ne),z=te(z,W)}return new re(Z,z)}n.A=function(z){return ye(this,z).h},n.and=function(z){for(var H=Math.max(this.g.length,z.g.length),X=[],le=0;le<H;le++)X[le]=this.i(le)&z.i(le);return new f(X,this.h&z.h)},n.or=function(z){for(var H=Math.max(this.g.length,z.g.length),X=[],le=0;le<H;le++)X[le]=this.i(le)|z.i(le);return new f(X,this.h|z.h)},n.xor=function(z){for(var H=Math.max(this.g.length,z.g.length),X=[],le=0;le<H;le++)X[le]=this.i(le)^z.i(le);return new f(X,this.h^z.h)};function D(z){for(var H=z.g.length+1,X=[],le=0;le<H;le++)X[le]=z.i(le)<<1|z.i(le-1)>>>31;return new f(X,z.h)}function ae(z,H){var X=H>>5;H%=32;for(var le=z.g.length-X,Z=[],ne=0;ne<le;ne++)Z[ne]=0<H?z.i(ne+X)>>>H|z.i(ne+X+1)<<32-H:z.i(ne+X);return new f(Z,z.h)}o.prototype.digest=o.prototype.v,o.prototype.reset=o.prototype.s,o.prototype.update=o.prototype.u,Md5=o,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.A,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=g,f.fromString=_,Integer=f}).apply(typeof commonjsGlobal$1<"u"?commonjsGlobal$1:typeof self<"u"?self:typeof window<"u"?window:{});var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var XhrIo,WebChannel,EventType,ErrorCode,Stat$1,Event,getStatEventTarget,createWebChannelTransport;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(b,I,G){return b==Array.prototype||b==Object.prototype||(b[I]=G.value),b};function s(b){b=[typeof globalThis=="object"&&globalThis,b,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var I=0;I<b.length;++I){var G=b[I];if(G&&G.Math==Math)return G}throw Error("Cannot find global object")}var o=s(this);function a(b,I){if(I)e:{var G=o;b=b.split(".");for(var pe=0;pe<b.length-1;pe++){var Pe=b[pe];if(!(Pe in G))break e;G=G[Pe]}b=b[b.length-1],pe=G[b],I=I(pe),I!=pe&&I!=null&&e(G,b,{configurable:!0,writable:!0,value:I})}}function c(b,I){b instanceof String&&(b+="");var G=0,pe=!1,Pe={next:function(){if(!pe&&G<b.length){var Oe=G++;return{value:I(Oe,b[Oe]),done:!1}}return pe=!0,{done:!0,value:void 0}}};return Pe[Symbol.iterator]=function(){return Pe},Pe}a("Array.prototype.values",function(b){return b||function(){return c(this,function(I,G){return G})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var f=f||{},h=this||self;function m(b){var I=typeof b;return I=I!="object"?I:b?Array.isArray(b)?"array":I:"null",I=="array"||I=="object"&&typeof b.length=="number"}function g(b){var I=typeof b;return I=="object"&&b!=null||I=="function"}function _(b,I,G){return b.call.apply(b.bind,arguments)}function E(b,I,G){if(!b)throw Error();if(2<arguments.length){var pe=Array.prototype.slice.call(arguments,2);return function(){var Pe=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(Pe,pe),b.apply(I,Pe)}}return function(){return b.apply(I,arguments)}}function T(b,I,G){return T=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,T.apply(null,arguments)}function w(b,I){var G=Array.prototype.slice.call(arguments,1);return function(){var pe=G.slice();return pe.push.apply(pe,arguments),b.apply(this,pe)}}function A(b,I){function G(){}G.prototype=I.prototype,b.aa=I.prototype,b.prototype=new G,b.prototype.constructor=b,b.Qb=function(pe,Pe,Oe){for(var We=Array(arguments.length-2),xn=2;xn<arguments.length;xn++)We[xn-2]=arguments[xn];return I.prototype[Pe].apply(pe,We)}}function R(b){const I=b.length;if(0<I){const G=Array(I);for(let pe=0;pe<I;pe++)G[pe]=b[pe];return G}return[]}function V(b,I){for(let G=1;G<arguments.length;G++){const pe=arguments[G];if(m(pe)){const Pe=b.length||0,Oe=pe.length||0;b.length=Pe+Oe;for(let We=0;We<Oe;We++)b[Pe+We]=pe[We]}else b.push(pe)}}class te{constructor(I,G){this.i=I,this.j=G,this.h=0,this.g=null}get(){let I;return 0<this.h?(this.h--,I=this.g,this.g=I.next,I.next=null):I=this.i(),I}}function se(b){return/^[\s\xa0]*$/.test(b)}function re(){var b=h.navigator;return b&&(b=b.userAgent)?b:""}function ye(b){return ye[" "](b),b}ye[" "]=function(){};var D=re().indexOf("Gecko")!=-1&&!(re().toLowerCase().indexOf("webkit")!=-1&&re().indexOf("Edge")==-1)&&!(re().indexOf("Trident")!=-1||re().indexOf("MSIE")!=-1)&&re().indexOf("Edge")==-1;function ae(b,I,G){for(const pe in b)I.call(G,b[pe],pe,b)}function z(b,I){for(const G in b)I.call(void 0,b[G],G,b)}function H(b){const I={};for(const G in b)I[G]=b[G];return I}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function le(b,I){let G,pe;for(let Pe=1;Pe<arguments.length;Pe++){pe=arguments[Pe];for(G in pe)b[G]=pe[G];for(let Oe=0;Oe<X.length;Oe++)G=X[Oe],Object.prototype.hasOwnProperty.call(pe,G)&&(b[G]=pe[G])}}function Z(b){var I=1;b=b.split(":");const G=[];for(;0<I&&b.length;)G.push(b.shift()),I--;return b.length&&G.push(b.join(":")),G}function ne(b){h.setTimeout(()=>{throw b},0)}function W(){var b=Ie;let I=null;return b.g&&(I=b.g,b.g=b.g.next,b.g||(b.h=null),I.next=null),I}class xe{constructor(){this.h=this.g=null}add(I,G){const pe=de.get();pe.set(I,G),this.h?this.h.next=pe:this.g=pe,this.h=pe}}var de=new te(()=>new oe,b=>b.reset());class oe{constructor(){this.next=this.g=this.h=null}set(I,G){this.h=I,this.g=G,this.next=null}reset(){this.next=this.g=this.h=null}}let _e,Re=!1,Ie=new xe,he=()=>{const b=h.Promise.resolve(void 0);_e=()=>{b.then(be)}};var be=()=>{for(var b;b=W();){try{b.h.call(b.g)}catch(G){ne(G)}var I=de;I.j(b),100>I.h&&(I.h++,b.next=I.g,I.g=b)}Re=!1};function Se(){this.s=this.s,this.C=this.C}Se.prototype.s=!1,Se.prototype.ma=function(){this.s||(this.s=!0,this.N())},Se.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ae(b,I){this.type=b,this.g=this.target=I,this.defaultPrevented=!1}Ae.prototype.h=function(){this.defaultPrevented=!0};var Be=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var b=!1,I=Object.defineProperty({},"passive",{get:function(){b=!0}});try{const G=()=>{};h.addEventListener("test",G,I),h.removeEventListener("test",G,I)}catch{}return b})();function Ue(b,I){if(Ae.call(this,b?b.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,b){var G=this.type=b.type,pe=b.changedTouches&&b.changedTouches.length?b.changedTouches[0]:null;if(this.target=b.target||b.srcElement,this.g=I,I=b.relatedTarget){if(D){e:{try{ye(I.nodeName);var Pe=!0;break e}catch{}Pe=!1}Pe||(I=null)}}else G=="mouseover"?I=b.fromElement:G=="mouseout"&&(I=b.toElement);this.relatedTarget=I,pe?(this.clientX=pe.clientX!==void 0?pe.clientX:pe.pageX,this.clientY=pe.clientY!==void 0?pe.clientY:pe.pageY,this.screenX=pe.screenX||0,this.screenY=pe.screenY||0):(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0),this.button=b.button,this.key=b.key||"",this.ctrlKey=b.ctrlKey,this.altKey=b.altKey,this.shiftKey=b.shiftKey,this.metaKey=b.metaKey,this.pointerId=b.pointerId||0,this.pointerType=typeof b.pointerType=="string"?b.pointerType:qe[b.pointerType]||"",this.state=b.state,this.i=b,b.defaultPrevented&&Ue.aa.h.call(this)}}A(Ue,Ae);var qe={2:"touch",3:"pen",4:"mouse"};Ue.prototype.h=function(){Ue.aa.h.call(this);var b=this.i;b.preventDefault?b.preventDefault():b.returnValue=!1};var Xe="closure_listenable_"+(1e6*Math.random()|0),Ke=0;function Ze(b,I,G,pe,Pe){this.listener=b,this.proxy=null,this.src=I,this.type=G,this.capture=!!pe,this.ha=Pe,this.key=++Ke,this.da=this.fa=!1}function it(b){b.da=!0,b.listener=null,b.proxy=null,b.src=null,b.ha=null}function wn(b){this.src=b,this.g={},this.h=0}wn.prototype.add=function(b,I,G,pe,Pe){var Oe=b.toString();b=this.g[Oe],b||(b=this.g[Oe]=[],this.h++);var We=Mt(b,I,pe,Pe);return-1<We?(I=b[We],G||(I.fa=!1)):(I=new Ze(I,this.src,Oe,!!pe,Pe),I.fa=G,b.push(I)),I};function yn(b,I){var G=I.type;if(G in b.g){var pe=b.g[G],Pe=Array.prototype.indexOf.call(pe,I,void 0),Oe;(Oe=0<=Pe)&&Array.prototype.splice.call(pe,Pe,1),Oe&&(it(I),b.g[G].length==0&&(delete b.g[G],b.h--))}}function Mt(b,I,G,pe){for(var Pe=0;Pe<b.length;++Pe){var Oe=b[Pe];if(!Oe.da&&Oe.listener==I&&Oe.capture==!!G&&Oe.ha==pe)return Pe}return-1}var Ge="closure_lm_"+(1e6*Math.random()|0),ln={};function kt(b,I,G,pe,Pe){if(Array.isArray(I)){for(var Oe=0;Oe<I.length;Oe++)kt(b,I[Oe],G,pe,Pe);return null}return G=ir(G),b&&b[Xe]?b.K(I,G,g(pe)?!!pe.capture:!1,Pe):Ft(b,I,G,!1,pe,Pe)}function Ft(b,I,G,pe,Pe,Oe){if(!I)throw Error("Invalid event type");var We=g(Pe)?!!Pe.capture:!!Pe,xn=Gn(b);if(xn||(b[Ge]=xn=new wn(b)),G=xn.add(I,G,pe,We,Oe),G.proxy)return G;if(pe=lr(),G.proxy=pe,pe.src=b,pe.listener=G,b.addEventListener)Be||(Pe=We),Pe===void 0&&(Pe=!1),b.addEventListener(I.toString(),pe,Pe);else if(b.attachEvent)b.attachEvent(Qn(I.toString()),pe);else if(b.addListener&&b.removeListener)b.addListener(pe);else throw Error("addEventListener and attachEvent are unavailable.");return G}function lr(){function b(G){return I.call(b.src,b.listener,G)}const I=Nn;return b}function Fn(b,I,G,pe,Pe){if(Array.isArray(I))for(var Oe=0;Oe<I.length;Oe++)Fn(b,I[Oe],G,pe,Pe);else pe=g(pe)?!!pe.capture:!!pe,G=ir(G),b&&b[Xe]?(b=b.i,I=String(I).toString(),I in b.g&&(Oe=b.g[I],G=Mt(Oe,G,pe,Pe),-1<G&&(it(Oe[G]),Array.prototype.splice.call(Oe,G,1),Oe.length==0&&(delete b.g[I],b.h--)))):b&&(b=Gn(b))&&(I=b.g[I.toString()],b=-1,I&&(b=Mt(I,G,pe,Pe)),(G=-1<b?I[b]:null)&&Hn(G))}function Hn(b){if(typeof b!="number"&&b&&!b.da){var I=b.src;if(I&&I[Xe])yn(I.i,b);else{var G=b.type,pe=b.proxy;I.removeEventListener?I.removeEventListener(G,pe,b.capture):I.detachEvent?I.detachEvent(Qn(G),pe):I.addListener&&I.removeListener&&I.removeListener(pe),(G=Gn(I))?(yn(G,b),G.h==0&&(G.src=null,I[Ge]=null)):it(b)}}}function Qn(b){return b in ln?ln[b]:ln[b]="on"+b}function Nn(b,I){if(b.da)b=!0;else{I=new Ue(I,this);var G=b.listener,pe=b.ha||b.src;b.fa&&Hn(b),b=G.call(pe,I)}return b}function Gn(b){return b=b[Ge],b instanceof wn?b:null}var Vr="__closure_events_fn_"+(1e9*Math.random()>>>0);function ir(b){return typeof b=="function"?b:(b[Vr]||(b[Vr]=function(I){return b.handleEvent(I)}),b[Vr])}function Vn(){Se.call(this),this.i=new wn(this),this.M=this,this.F=null}A(Vn,Se),Vn.prototype[Xe]=!0,Vn.prototype.removeEventListener=function(b,I,G,pe){Fn(this,b,I,G,pe)};function ie(b,I){var G,pe=b.F;if(pe)for(G=[];pe;pe=pe.F)G.push(pe);if(b=b.M,pe=I.type||I,typeof I=="string")I=new Ae(I,b);else if(I instanceof Ae)I.target=I.target||b;else{var Pe=I;I=new Ae(pe,b),le(I,Pe)}if(Pe=!0,G)for(var Oe=G.length-1;0<=Oe;Oe--){var We=I.g=G[Oe];Pe=C(We,pe,!0,I)&&Pe}if(We=I.g=b,Pe=C(We,pe,!0,I)&&Pe,Pe=C(We,pe,!1,I)&&Pe,G)for(Oe=0;Oe<G.length;Oe++)We=I.g=G[Oe],Pe=C(We,pe,!1,I)&&Pe}Vn.prototype.N=function(){if(Vn.aa.N.call(this),this.i){var b=this.i,I;for(I in b.g){for(var G=b.g[I],pe=0;pe<G.length;pe++)it(G[pe]);delete b.g[I],b.h--}}this.F=null},Vn.prototype.K=function(b,I,G,pe){return this.i.add(String(b),I,!1,G,pe)},Vn.prototype.L=function(b,I,G,pe){return this.i.add(String(b),I,!0,G,pe)};function C(b,I,G,pe){if(I=b.i.g[String(I)],!I)return!0;I=I.concat();for(var Pe=!0,Oe=0;Oe<I.length;++Oe){var We=I[Oe];if(We&&!We.da&&We.capture==G){var xn=We.listener,fr=We.ha||We.src;We.fa&&yn(b.i,We),Pe=xn.call(fr,pe)!==!1&&Pe}}return Pe&&!pe.defaultPrevented}function P(b,I,G){if(typeof b=="function")G&&(b=T(b,G));else if(b&&typeof b.handleEvent=="function")b=T(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<Number(I)?-1:h.setTimeout(b,I||0)}function ue(b){b.g=P(()=>{b.g=null,b.i&&(b.i=!1,ue(b))},b.l);const I=b.h;b.h=null,b.m.apply(null,I)}class Ee extends Se{constructor(I,G){super(),this.m=I,this.l=G,this.h=null,this.i=!1,this.g=null}j(I){this.h=arguments,this.g?this.i=!0:ue(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ke(b){Se.call(this),this.h=b,this.g={}}A(ke,Se);var Le=[];function tt(b){ae(b.g,function(I,G){this.g.hasOwnProperty(G)&&Hn(I)},b),b.g={}}ke.prototype.N=function(){ke.aa.N.call(this),tt(this)},ke.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var st=h.JSON.stringify,At=h.JSON.parse,Wt=class{stringify(b){return h.JSON.stringify(b,void 0)}parse(b){return h.JSON.parse(b,void 0)}};function Fe(){}Fe.prototype.h=null;function dt(b){return b.h||(b.h=b.i())}function wt(){}var dn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function jt(){Ae.call(this,"d")}A(jt,Ae);function Je(){Ae.call(this,"c")}A(Je,Ae);var bn={},Gt=null;function Lt(){return Gt=Gt||new Vn}bn.La="serverreachability";function cr(b){Ae.call(this,bn.La,b)}A(cr,Ae);function jn(b){const I=Lt();ie(I,new cr(I))}bn.STAT_EVENT="statevent";function Un(b,I){Ae.call(this,bn.STAT_EVENT,b),this.stat=I}A(Un,Ae);function fn(b){const I=Lt();ie(I,new Un(I,b))}bn.Ma="timingevent";function Rn(b,I){Ae.call(this,bn.Ma,b),this.size=I}A(Rn,Ae);function En(b,I){if(typeof b!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){b()},I)}function pn(){this.g=!0}pn.prototype.xa=function(){this.g=!1};function Wn(b,I,G,pe,Pe,Oe){b.info(function(){if(b.g)if(Oe)for(var We="",xn=Oe.split("&"),fr=0;fr<xn.length;fr++){var Tn=xn[fr].split("=");if(1<Tn.length){var br=Tn[0];Tn=Tn[1];var hr=br.split("_");We=2<=hr.length&&hr[1]=="type"?We+(br+"="+Tn+"&"):We+(br+"=redacted&")}}else We=null;else We=Oe;return"XMLHTTP REQ ("+pe+") [attempt "+Pe+"]: "+I+`
`+G+`
`+We})}function gr(b,I,G,pe,Pe,Oe,We){b.info(function(){return"XMLHTTP RESP ("+pe+") [ attempt "+Pe+"]: "+I+`
`+G+`
`+Oe+" "+We})}function sr(b,I,G,pe){b.info(function(){return"XMLHTTP TEXT ("+I+"): "+gi(b,G)+(pe?" "+pe:"")})}function $r(b,I){b.info(function(){return"TIMEOUT: "+I})}pn.prototype.info=function(){};function gi(b,I){if(!b.g)return I;if(!I)return null;try{var G=JSON.parse(I);if(G){for(b=0;b<G.length;b++)if(Array.isArray(G[b])){var pe=G[b];if(!(2>pe.length)){var Pe=pe[1];if(Array.isArray(Pe)&&!(1>Pe.length)){var Oe=Pe[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var We=1;We<Pe.length;We++)Pe[We]=""}}}}return st(G)}catch{return I}}var ii={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yi={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tr;function si(){}A(si,Fe),si.prototype.g=function(){return new XMLHttpRequest},si.prototype.i=function(){return{}},Tr=new si;function Sr(b,I,G,pe){this.j=b,this.i=I,this.l=G,this.R=pe||1,this.U=new ke(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Ns={},ss={};function Ur(b,I,G){b.L=1,b.v=Li(Dr(I)),b.m=G,b.P=!0,zr(b,null)}function zr(b,I){b.F=Date.now(),_i(b),b.A=Dr(b.v);var G=b.A,pe=b.R;Array.isArray(pe)||(pe=[String(pe)]),js(G.i,"t",pe),b.C=0,G=b.j.J,b.h=new Zn,b.g=qa(b.j,G?I:null,!b.m),0<b.O&&(b.M=new Ee(T(b.Y,b,b.g),b.O)),I=b.U,G=b.g,pe=b.ca;var Pe="readystatechange";Array.isArray(Pe)||(Pe&&(Le[0]=Pe.toString()),Pe=Le);for(var Oe=0;Oe<Pe.length;Oe++){var We=kt(G,Pe[Oe],pe||I.handleEvent,!1,I.h||I);if(!We)break;I.g[We.key]=We}I=b.H?H(b.H):{},b.m?(b.u||(b.u="POST"),I["Content-Type"]="application/x-www-form-urlencoded",b.g.ea(b.A,b.u,b.m,I)):(b.u="GET",b.g.ea(b.A,b.u,null,I)),jn(),Wn(b.i,b.u,b.A,b.l,b.R,b.m)}Sr.prototype.ca=function(b){b=b.target;const I=this.M;I&&Yn(b)==3?I.j():this.Y(b)},Sr.prototype.Y=function(b){try{if(b==this.g)e:{const hr=Yn(this.g);var I=this.g.Ba();const qi=this.g.Z();if(!(3>hr)&&(hr!=3||this.g&&(this.h.h||this.g.oa()||_r(this.g)))){this.J||hr!=4||I==7||(I==8||0>=qi?jn(3):jn(2)),Hr(this);var G=this.g.Z();this.X=G;t:if(lo(this)){var pe=_r(this.g);b="";var Pe=pe.length,Oe=Yn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ur(this),qr(this);var We="";break t}this.h.i=new h.TextDecoder}for(I=0;I<Pe;I++)this.h.h=!0,b+=this.h.i.decode(pe[I],{stream:!(Oe&&I==Pe-1)});pe.length=0,this.h.g+=b,this.C=0,We=this.h.g}else We=this.g.oa();if(this.o=G==200,gr(this.i,this.u,this.A,this.l,this.R,hr,G),this.o){if(this.T&&!this.K){t:{if(this.g){var xn,fr=this.g;if((xn=fr.g?fr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!se(xn)){var Tn=xn;break t}}Tn=null}if(G=Tn)sr(this.i,this.l,G,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ni(this,G);else{this.o=!1,this.s=3,fn(12),ur(this),qr(this);break e}}if(this.P){G=!0;let Rr;for(;!this.J&&this.C<We.length;)if(Rr=Mi(this,We),Rr==ss){hr==4&&(this.s=4,fn(14),G=!1),sr(this.i,this.l,null,"[Incomplete Response]");break}else if(Rr==Ns){this.s=4,fn(15),sr(this.i,this.l,We,"[Invalid Chunk]"),G=!1;break}else sr(this.i,this.l,Rr,null),Ni(this,Rr);if(lo(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),hr!=4||We.length!=0||this.h.h||(this.s=1,fn(16),G=!1),this.o=this.o&&G,!G)sr(this.i,this.l,We,"[Invalid Chunked Response]"),ur(this),qr(this);else if(0<We.length&&!this.W){this.W=!0;var br=this.j;br.g==this&&br.ba&&!br.M&&(br.j.info("Great, no buffering proxy detected. Bytes received: "+We.length),qs(br),br.M=!0,fn(11))}}else sr(this.i,this.l,We,null),Ni(this,We);hr==4&&ur(this),this.o&&!this.J&&(hr==4?Ua(this.j,this):(this.o=!1,_i(this)))}else zi(this.g),G==400&&0<We.indexOf("Unknown SID")?(this.s=3,fn(12)):(this.s=0,fn(13)),ur(this),qr(this)}}}catch{}finally{}};function lo(b){return b.g?b.u=="GET"&&b.L!=2&&b.j.Ca:!1}function Mi(b,I){var G=b.C,pe=I.indexOf(`
`,G);return pe==-1?ss:(G=Number(I.substring(G,pe)),isNaN(G)?Ns:(pe+=1,pe+G>I.length?ss:(I=I.slice(pe,pe+G),b.C=pe+G,I)))}Sr.prototype.cancel=function(){this.J=!0,ur(this)};function _i(b){b.S=Date.now()+b.I,co(b,b.I)}function co(b,I){if(b.B!=null)throw Error("WatchDog timer not null");b.B=En(T(b.ba,b),I)}function Hr(b){b.B&&(h.clearTimeout(b.B),b.B=null)}Sr.prototype.ba=function(){this.B=null;const b=Date.now();0<=b-this.S?($r(this.i,this.A),this.L!=2&&(jn(),fn(17)),ur(this),this.s=2,qr(this)):co(this,this.S-b)};function qr(b){b.j.G==0||b.J||Ua(b.j,b)}function ur(b){Hr(b);var I=b.M;I&&typeof I.ma=="function"&&I.ma(),b.M=null,tt(b.U),b.g&&(I=b.g,b.g=null,I.abort(),I.ma())}function Ni(b,I){try{var G=b.j;if(G.G!=0&&(G.g==b||Os(G.h,b))){if(!b.K&&Os(G.h,b)&&G.G==3){try{var pe=G.Da.g.parse(I)}catch{pe=null}if(Array.isArray(pe)&&pe.length==3){var Pe=pe;if(Pe[0]==0){e:if(!G.u){if(G.g)if(G.g.F+3e3<b.F)mo(G),ho(G);else break e;Yo(G),fn(18)}}else G.za=Pe[1],0<G.za-G.T&&37500>Pe[2]&&G.F&&G.v==0&&!G.C&&(G.C=En(T(G.Za,G),6e3));if(1>=as(G.h)&&G.ca){try{G.ca()}catch{}G.ca=void 0}}else Hi(G,11)}else if((b.K||G.g==b)&&mo(G),!se(I))for(Pe=G.Da.g.parse(I),I=0;I<Pe.length;I++){let Tn=Pe[I];if(G.T=Tn[0],Tn=Tn[1],G.G==2)if(Tn[0]=="c"){G.K=Tn[1],G.ia=Tn[2];const br=Tn[3];br!=null&&(G.la=br,G.j.info("VER="+G.la));const hr=Tn[4];hr!=null&&(G.Aa=hr,G.j.info("SVER="+G.Aa));const qi=Tn[5];qi!=null&&typeof qi=="number"&&0<qi&&(pe=1.5*qi,G.L=pe,G.j.info("backChannelRequestTimeoutMs_="+pe)),pe=G;const Rr=b.g;if(Rr){const Ci=Rr.g?Rr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ci){var Oe=pe.h;Oe.g||Ci.indexOf("spdy")==-1&&Ci.indexOf("quic")==-1&&Ci.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(ls(Oe,Oe.h),Oe.h=null))}if(pe.D){const Qo=Rr.g?Rr.g.getResponseHeader("X-HTTP-Session-Id"):null;Qo&&(pe.ya=Qo,$n(pe.I,pe.D,Qo))}}G.G=3,G.l&&G.l.ua(),G.ba&&(G.R=Date.now()-b.F,G.j.info("Handshake RTT: "+G.R+"ms")),pe=G;var We=b;if(pe.qa=Ha(pe,pe.J?pe.ia:null,pe.W),We.K){wr(pe.h,We);var xn=We,fr=pe.L;fr&&(xn.I=fr),xn.B&&(Hr(xn),_i(xn)),pe.g=We}else Fa(pe);0<G.i.length&&po(G)}else Tn[0]!="stop"&&Tn[0]!="close"||Hi(G,7);else G.G==3&&(Tn[0]=="stop"||Tn[0]=="close"?Tn[0]=="stop"?Hi(G,7):hs(G):Tn[0]!="noop"&&G.l&&G.l.ta(Tn),G.v=0)}}jn(4)}catch{}}var uo=class{constructor(b,I){this.g=b,this.map=I}};function oi(b){this.l=b||10,h.PerformanceNavigationTiming?(b=h.performance.getEntriesByType("navigation"),b=0<b.length&&(b[0].nextHopProtocol=="hq"||b[0].nextHopProtocol=="h2")):b=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=b?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function os(b){return b.h?!0:b.g?b.g.size>=b.j:!1}function as(b){return b.h?1:b.g?b.g.size:0}function Os(b,I){return b.h?b.h==I:b.g?b.g.has(I):!1}function ls(b,I){b.g?b.g.add(I):b.h=I}function wr(b,I){b.h&&b.h==I?b.h=null:b.g&&b.g.has(I)&&b.g.delete(I)}oi.prototype.cancel=function(){if(this.i=Bs(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const b of this.g.values())b.cancel();this.g.clear()}};function Bs(b){if(b.h!=null)return b.i.concat(b.h.D);if(b.g!=null&&b.g.size!==0){let I=b.i;for(const G of b.g.values())I=I.concat(G.D);return I}return R(b.i)}function qo(b){if(b.V&&typeof b.V=="function")return b.V();if(typeof Map<"u"&&b instanceof Map||typeof Set<"u"&&b instanceof Set)return Array.from(b.values());if(typeof b=="string")return b.split("");if(m(b)){for(var I=[],G=b.length,pe=0;pe<G;pe++)I.push(b[pe]);return I}I=[],G=0;for(pe in b)I[G++]=b[pe];return I}function cs(b){if(b.na&&typeof b.na=="function")return b.na();if(!b.V||typeof b.V!="function"){if(typeof Map<"u"&&b instanceof Map)return Array.from(b.keys());if(!(typeof Set<"u"&&b instanceof Set)){if(m(b)||typeof b=="string"){var I=[];b=b.length;for(var G=0;G<b;G++)I.push(G);return I}I=[],G=0;for(const pe in b)I[G++]=pe;return I}}}function Ls(b,I){if(b.forEach&&typeof b.forEach=="function")b.forEach(I,void 0);else if(m(b)||typeof b=="string")Array.prototype.forEach.call(b,I,void 0);else for(var G=cs(b),pe=qo(b),Pe=pe.length,Oe=0;Oe<Pe;Oe++)I.call(void 0,pe[Oe],G&&G[Oe],b)}var Oi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function us(b,I){if(b){b=b.split("&");for(var G=0;G<b.length;G++){var pe=b[G].indexOf("="),Pe=null;if(0<=pe){var Oe=b[G].substring(0,pe);Pe=b[G].substring(pe+1)}else Oe=b[G];I(Oe,Pe?decodeURIComponent(Pe.replace(/\+/g," ")):"")}}}function Kn(b){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,b instanceof Kn){this.h=b.h,Bi(this,b.j),this.o=b.o,this.g=b.g,bi(this,b.s),this.l=b.l;var I=b.i,G=new Br;G.i=I.i,I.g&&(G.g=new Map(I.g),G.h=I.h),Ei(this,G),this.m=b.m}else b&&(I=String(b).match(Oi))?(this.h=!1,Bi(this,I[1]||"",!0),this.o=Mr(I[2]||""),this.g=Mr(I[3]||"",!0),bi(this,I[4]),this.l=Mr(I[5]||"",!0),Ei(this,I[6]||"",!0),this.m=Mr(I[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}Kn.prototype.toString=function(){var b=[],I=this.j;I&&b.push(Fi(I,Fs,!0),":");var G=this.g;return(G||I=="file")&&(b.push("//"),(I=this.o)&&b.push(Fi(I,Fs,!0),"@"),b.push(encodeURIComponent(String(G)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),G=this.s,G!=null&&b.push(":",String(G))),(G=this.l)&&(this.g&&G.charAt(0)!="/"&&b.push("/"),b.push(Fi(G,G.charAt(0)=="/"?Wo:ji,!0))),(G=this.i.toString())&&b.push("?",G),(G=this.m)&&b.push("#",Fi(G,ds)),b.join("")};function Dr(b){return new Kn(b)}function Bi(b,I,G){b.j=G?Mr(I,!0):I,b.j&&(b.j=b.j.replace(/:$/,""))}function bi(b,I){if(I){if(I=Number(I),isNaN(I)||0>I)throw Error("Bad port number "+I);b.s=I}else b.s=null}function Ei(b,I,G){I instanceof Br?(b.i=I,fs(b.i,b.h)):(G||(I=Fi(I,Go)),b.i=new Br(I,b.h))}function $n(b,I,G){b.i.set(I,G)}function Li(b){return $n(b,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),b}function Mr(b,I){return b?I?decodeURI(b.replace(/%25/g,"%2525")):decodeURIComponent(b):""}function Fi(b,I,G){return typeof b=="string"?(b=encodeURI(b).replace(I,fo),G&&(b=b.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),b):null}function fo(b){return b=b.charCodeAt(0),"%"+(b>>4&15).toString(16)+(b&15).toString(16)}var Fs=/[#\/\?@]/g,ji=/[#\?:]/g,Wo=/[#\?]/g,Go=/[#\?@]/g,ds=/#/g;function Br(b,I){this.h=this.g=null,this.i=b||null,this.j=!!I}function Pr(b){b.g||(b.g=new Map,b.h=0,b.i&&us(b.i,function(I,G){b.add(decodeURIComponent(I.replace(/\+/g," ")),G)}))}n=Br.prototype,n.add=function(b,I){Pr(this),this.i=null,b=Kr(this,b);var G=this.g.get(b);return G||this.g.set(b,G=[]),G.push(I),this.h+=1,this};function Wr(b,I){Pr(b),I=Kr(b,I),b.g.has(I)&&(b.i=null,b.h-=b.g.get(I).length,b.g.delete(I))}function Gr(b,I){return Pr(b),I=Kr(b,I),b.g.has(I)}n.forEach=function(b,I){Pr(this),this.g.forEach(function(G,pe){G.forEach(function(Pe){b.call(I,Pe,pe,this)},this)},this)},n.na=function(){Pr(this);const b=Array.from(this.g.values()),I=Array.from(this.g.keys()),G=[];for(let pe=0;pe<I.length;pe++){const Pe=b[pe];for(let Oe=0;Oe<Pe.length;Oe++)G.push(I[pe])}return G},n.V=function(b){Pr(this);let I=[];if(typeof b=="string")Gr(this,b)&&(I=I.concat(this.g.get(Kr(this,b))));else{b=Array.from(this.g.values());for(let G=0;G<b.length;G++)I=I.concat(b[G])}return I},n.set=function(b,I){return Pr(this),this.i=null,b=Kr(this,b),Gr(this,b)&&(this.h-=this.g.get(b).length),this.g.set(b,[I]),this.h+=1,this},n.get=function(b,I){return b?(b=this.V(b),0<b.length?String(b[0]):I):I};function js(b,I,G){Wr(b,I),0<G.length&&(b.i=null,b.g.set(Kr(b,I),R(G)),b.h+=G.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const b=[],I=Array.from(this.g.keys());for(var G=0;G<I.length;G++){var pe=I[G];const Oe=encodeURIComponent(String(pe)),We=this.V(pe);for(pe=0;pe<We.length;pe++){var Pe=Oe;We[pe]!==""&&(Pe+="="+encodeURIComponent(String(We[pe]))),b.push(Pe)}}return this.i=b.join("&")};function Kr(b,I){return I=String(I),b.j&&(I=I.toLowerCase()),I}function fs(b,I){I&&!b.j&&(Pr(b),b.i=null,b.g.forEach(function(G,pe){var Pe=pe.toLowerCase();pe!=Pe&&(Wr(this,pe),js(this,Pe,G))},b)),b.j=I}function wi(b,I){const G=new pn;if(h.Image){const pe=new Image;pe.onload=w(yr,G,"TestLoadImage: loaded",!0,I,pe),pe.onerror=w(yr,G,"TestLoadImage: error",!1,I,pe),pe.onabort=w(yr,G,"TestLoadImage: abort",!1,I,pe),pe.ontimeout=w(yr,G,"TestLoadImage: timeout",!1,I,pe),h.setTimeout(function(){pe.ontimeout&&pe.ontimeout()},1e4),pe.src=b}else I(!1)}function dr(b,I){const G=new pn,pe=new AbortController,Pe=setTimeout(()=>{pe.abort(),yr(G,"TestPingServer: timeout",!1,I)},1e4);fetch(b,{signal:pe.signal}).then(Oe=>{clearTimeout(Pe),Oe.ok?yr(G,"TestPingServer: ok",!0,I):yr(G,"TestPingServer: server error",!1,I)}).catch(()=>{clearTimeout(Pe),yr(G,"TestPingServer: error",!1,I)})}function yr(b,I,G,pe,Pe){try{Pe&&(Pe.onload=null,Pe.onerror=null,Pe.onabort=null,Pe.ontimeout=null),pe(G)}catch{}}function Ui(){this.g=new Wt}function Yr(b,I,G){const pe=G||"";try{Ls(b,function(Pe,Oe){let We=Pe;g(Pe)&&(We=st(Pe)),I.push(pe+Oe+"="+encodeURIComponent(We))})}catch(Pe){throw I.push(pe+"type="+encodeURIComponent("_badmap")),Pe}}function Ri(b){this.l=b.Ub||null,this.j=b.eb||!1}A(Ri,Fe),Ri.prototype.g=function(){return new ai(this.l,this.j)},Ri.prototype.i=(function(b){return function(){return b}})({});function ai(b,I){Vn.call(this),this.D=b,this.o=I,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}A(ai,Vn),n=ai.prototype,n.open=function(b,I){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=b,this.A=I,this.readyState=1,Xr(this)},n.send=function(b){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const I={headers:this.u,method:this.B,credentials:this.m,cache:void 0};b&&(I.body=b),(this.D||h).fetch(new Request(this.A,I)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,li(this)),this.readyState=0},n.Sa=function(b){if(this.g&&(this.l=b,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=b.headers,this.readyState=2,Xr(this)),this.g&&(this.readyState=3,Xr(this),this.g)))if(this.responseType==="arraybuffer")b.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in b){if(this.j=b.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Us(this)}else b.text().then(this.Ra.bind(this),this.ga.bind(this))};function Us(b){b.j.read().then(b.Pa.bind(b)).catch(b.ga.bind(b))}n.Pa=function(b){if(this.g){if(this.o&&b.value)this.response.push(b.value);else if(!this.o){var I=b.value?b.value:new Uint8Array(0);(I=this.v.decode(I,{stream:!b.done}))&&(this.response=this.responseText+=I)}b.done?li(this):Xr(this),this.readyState==3&&Us(this)}},n.Ra=function(b){this.g&&(this.response=this.responseText=b,li(this))},n.Qa=function(b){this.g&&(this.response=b,li(this))},n.ga=function(){this.g&&li(this)};function li(b){b.readyState=4,b.l=null,b.j=null,b.v=null,Xr(b)}n.setRequestHeader=function(b,I){this.u.append(b,I)},n.getResponseHeader=function(b){return this.h&&this.h.get(b.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const b=[],I=this.h.entries();for(var G=I.next();!G.done;)G=G.value,b.push(G[0]+": "+G[1]),G=I.next();return b.join(`\r
`)};function Xr(b){b.onreadystatechange&&b.onreadystatechange.call(b)}Object.defineProperty(ai.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(b){this.m=b?"include":"same-origin"}});function zs(b){let I="";return ae(b,function(G,pe){I+=pe,I+=":",I+=G,I+=`\r
`}),I}function me(b,I,G){e:{for(pe in G){var pe=!1;break e}pe=!0}pe||(G=zs(G),typeof b=="string"?G!=null&&encodeURIComponent(String(G)):$n(b,I,G))}function Te(b){Vn.call(this),this.headers=new Map,this.o=b||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}A(Te,Vn);var Ne=/^https?$/i,Ye=["POST","PUT"];n=Te.prototype,n.Ha=function(b){this.J=b},n.ea=function(b,I,G,pe){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+b);I=I?I.toUpperCase():"GET",this.D=b,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tr.g(),this.v=this.o?dt(this.o):dt(Tr),this.g.onreadystatechange=T(this.Ea,this);try{this.B=!0,this.g.open(I,String(b),!0),this.B=!1}catch(Oe){zt(this,Oe);return}if(b=G||"",G=new Map(this.headers),pe)if(Object.getPrototypeOf(pe)===Object.prototype)for(var Pe in pe)G.set(Pe,pe[Pe]);else if(typeof pe.keys=="function"&&typeof pe.get=="function")for(const Oe of pe.keys())G.set(Oe,pe.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(pe));pe=Array.from(G.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),Pe=h.FormData&&b instanceof h.FormData,!(0<=Array.prototype.indexOf.call(Ye,I,void 0))||pe||Pe||G.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,We]of G)this.g.setRequestHeader(Oe,We);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{An(this),this.u=!0,this.g.send(b),this.u=!1}catch(Oe){zt(this,Oe)}};function zt(b,I){b.h=!1,b.g&&(b.j=!0,b.g.abort(),b.j=!1),b.l=I,b.m=5,vn(b),$t(b)}function vn(b){b.A||(b.A=!0,ie(b,"complete"),ie(b,"error"))}n.abort=function(b){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=b||7,ie(this,"complete"),ie(this,"abort"),$t(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),$t(this,!0)),Te.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Cn(this):this.bb())},n.bb=function(){Cn(this)};function Cn(b){if(b.h&&typeof f<"u"&&(!b.v[1]||Yn(b)!=4||b.Z()!=2)){if(b.u&&Yn(b)==4)P(b.Ea,0,b);else if(ie(b,"readystatechange"),Yn(b)==4){b.h=!1;try{const We=b.Z();e:switch(We){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var I=!0;break e;default:I=!1}var G;if(!(G=I)){var pe;if(pe=We===0){var Pe=String(b.D).match(Oi)[1]||null;!Pe&&h.self&&h.self.location&&(Pe=h.self.location.protocol.slice(0,-1)),pe=!Ne.test(Pe?Pe.toLowerCase():"")}G=pe}if(G)ie(b,"complete"),ie(b,"success");else{b.m=6;try{var Oe=2<Yn(b)?b.g.statusText:""}catch{Oe=""}b.l=Oe+" ["+b.Z()+"]",vn(b)}}finally{$t(b)}}}}function $t(b,I){if(b.g){An(b);const G=b.g,pe=b.v[0]?()=>{}:null;b.g=null,b.v=null,I||ie(b,"ready");try{G.onreadystatechange=pe}catch{}}}function An(b){b.I&&(h.clearTimeout(b.I),b.I=null)}n.isActive=function(){return!!this.g};function Yn(b){return b.g?b.g.readyState:0}n.Z=function(){try{return 2<Yn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(b){if(this.g){var I=this.g.responseText;return b&&I.indexOf(b)==0&&(I=I.substring(b.length)),At(I)}};function _r(b){try{if(!b.g)return null;if("response"in b.g)return b.g.response;switch(b.H){case"":case"text":return b.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in b.g)return b.g.mozResponseArrayBuffer}return null}catch{return null}}function zi(b){const I={};b=(b.g&&2<=Yn(b)&&b.g.getAllResponseHeaders()||"").split(`\r
`);for(let pe=0;pe<b.length;pe++){if(se(b[pe]))continue;var G=Z(b[pe]);const Pe=G[0];if(G=G[1],typeof G!="string")continue;G=G.trim();const Oe=I[Pe]||[];I[Pe]=Oe,Oe.push(G)}z(I,function(pe){return pe.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function vi(b,I,G){return G&&G.internalChannelParams&&G.internalChannelParams[b]||I}function Ai(b){this.Aa=0,this.i=[],this.j=new pn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=vi("failFast",!1,b),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=vi("baseRetryDelayMs",5e3,b),this.cb=vi("retryDelaySeedMs",1e4,b),this.Wa=vi("forwardChannelMaxRetries",2,b),this.wa=vi("forwardChannelRequestTimeoutMs",2e4,b),this.pa=b&&b.xmlHttpFactory||void 0,this.Xa=b&&b.Tb||void 0,this.Ca=b&&b.useFetchStreams||!1,this.L=void 0,this.J=b&&b.supportsCrossDomainXhr||!1,this.K="",this.h=new oi(b&&b.concurrentRequestLimit),this.Da=new Ui,this.P=b&&b.fastHandshake||!1,this.O=b&&b.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=b&&b.Rb||!1,b&&b.xa&&this.j.xa(),b&&b.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&b&&b.detectBufferingProxy||!1,this.ja=void 0,b&&b.longPollingTimeout&&0<b.longPollingTimeout&&(this.ja=b.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Ai.prototype,n.la=8,n.G=1,n.connect=function(b,I,G,pe){fn(0),this.W=b,this.H=I||{},G&&pe!==void 0&&(this.H.OSID=G,this.H.OAID=pe),this.F=this.X,this.I=Ha(this,null,this.W),po(this)};function hs(b){if(Ba(b),b.G==3){var I=b.U++,G=Dr(b.I);if($n(G,"SID",b.K),$n(G,"RID",I),$n(G,"TYPE","terminate"),Hs(b,G),I=new Sr(b,b.j,I),I.L=2,I.v=Li(Dr(G)),G=!1,h.navigator&&h.navigator.sendBeacon)try{G=h.navigator.sendBeacon(I.v.toString(),"")}catch{}!G&&h.Image&&(new Image().src=I.v,G=!0),G||(I.g=qa(I.j,null),I.g.ea(I.v)),I.F=Date.now(),_i(I)}za(b)}function ho(b){b.g&&(qs(b),b.g.cancel(),b.g=null)}function Ba(b){ho(b),b.u&&(h.clearTimeout(b.u),b.u=null),mo(b),b.h.cancel(),b.s&&(typeof b.s=="number"&&h.clearTimeout(b.s),b.s=null)}function po(b){if(!os(b.h)&&!b.s){b.s=!0;var I=b.Ga;_e||he(),Re||(_e(),Re=!0),Ie.add(I,b),b.B=0}}function Xl(b,I){return as(b.h)>=b.h.j-(b.s?1:0)?!1:b.s?(b.i=I.D.concat(b.i),!0):b.G==1||b.G==2||b.B>=(b.Va?0:b.Wa)?!1:(b.s=En(T(b.Ga,b,I),Xo(b,b.B)),b.B++,!0)}n.Ga=function(b){if(this.s)if(this.s=null,this.G==1){if(!b){this.U=Math.floor(1e5*Math.random()),b=this.U++;const Pe=new Sr(this,this.j,b);let Oe=this.o;if(this.S&&(Oe?(Oe=H(Oe),le(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(Pe.H=Oe,Oe=null),this.P)e:{for(var I=0,G=0;G<this.i.length;G++){t:{var pe=this.i[G];if("__data__"in pe.map&&(pe=pe.map.__data__,typeof pe=="string")){pe=pe.length;break t}pe=void 0}if(pe===void 0)break;if(I+=pe,4096<I){I=G;break e}if(I===4096||G===this.i.length-1){I=G+1;break e}}I=1e3}else I=1e3;I=La(this,Pe,I),G=Dr(this.I),$n(G,"RID",b),$n(G,"CVER",22),this.D&&$n(G,"X-HTTP-Session-Id",this.D),Hs(this,G),Oe&&(this.O?I="headers="+encodeURIComponent(String(zs(Oe)))+"&"+I:this.m&&me(G,this.m,Oe)),ls(this.h,Pe),this.Ua&&$n(G,"TYPE","init"),this.P?($n(G,"$req",I),$n(G,"SID","null"),Pe.T=!0,Ur(Pe,G,null)):Ur(Pe,G,I),this.G=2}}else this.G==3&&(b?Ko(this,b):this.i.length==0||os(this.h)||Ko(this))};function Ko(b,I){var G;I?G=I.l:G=b.U++;const pe=Dr(b.I);$n(pe,"SID",b.K),$n(pe,"RID",G),$n(pe,"AID",b.T),Hs(b,pe),b.m&&b.o&&me(pe,b.m,b.o),G=new Sr(b,b.j,G,b.B+1),b.m===null&&(G.H=b.o),I&&(b.i=I.D.concat(b.i)),I=La(b,G,1e3),G.I=Math.round(.5*b.wa)+Math.round(.5*b.wa*Math.random()),ls(b.h,G),Ur(G,pe,I)}function Hs(b,I){b.H&&ae(b.H,function(G,pe){$n(I,pe,G)}),b.l&&Ls({},function(G,pe){$n(I,pe,G)})}function La(b,I,G){G=Math.min(b.i.length,G);var pe=b.l?T(b.l.Na,b.l,b):null;e:{var Pe=b.i;let Oe=-1;for(;;){const We=["count="+G];Oe==-1?0<G?(Oe=Pe[0].g,We.push("ofs="+Oe)):Oe=0:We.push("ofs="+Oe);let xn=!0;for(let fr=0;fr<G;fr++){let Tn=Pe[fr].g;const br=Pe[fr].map;if(Tn-=Oe,0>Tn)Oe=Math.max(0,Pe[fr].g-100),xn=!1;else try{Yr(br,We,"req"+Tn+"_")}catch{pe&&pe(br)}}if(xn){pe=We.join("&");break e}}}return b=b.i.splice(0,G),I.D=b,pe}function Fa(b){if(!b.g&&!b.u){b.Y=1;var I=b.Fa;_e||he(),Re||(_e(),Re=!0),Ie.add(I,b),b.v=0}}function Yo(b){return b.g||b.u||3<=b.v?!1:(b.Y++,b.u=En(T(b.Fa,b),Xo(b,b.v)),b.v++,!0)}n.Fa=function(){if(this.u=null,ja(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var b=2*this.R;this.j.info("BP detection timer enabled: "+b),this.A=En(T(this.ab,this),b)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,fn(10),ho(this),ja(this))};function qs(b){b.A!=null&&(h.clearTimeout(b.A),b.A=null)}function ja(b){b.g=new Sr(b,b.j,"rpc",b.Y),b.m===null&&(b.g.H=b.o),b.g.O=0;var I=Dr(b.qa);$n(I,"RID","rpc"),$n(I,"SID",b.K),$n(I,"AID",b.T),$n(I,"CI",b.F?"0":"1"),!b.F&&b.ja&&$n(I,"TO",b.ja),$n(I,"TYPE","xmlhttp"),Hs(b,I),b.m&&b.o&&me(I,b.m,b.o),b.L&&(b.g.I=b.L);var G=b.g;b=b.ia,G.L=1,G.v=Li(Dr(I)),G.m=null,G.P=!0,zr(G,b)}n.Za=function(){this.C!=null&&(this.C=null,ho(this),Yo(this),fn(19))};function mo(b){b.C!=null&&(h.clearTimeout(b.C),b.C=null)}function Ua(b,I){var G=null;if(b.g==I){mo(b),qs(b),b.g=null;var pe=2}else if(Os(b.h,I))G=I.D,wr(b.h,I),pe=1;else return;if(b.G!=0){if(I.o)if(pe==1){G=I.m?I.m.length:0,I=Date.now()-I.F;var Pe=b.B;pe=Lt(),ie(pe,new Rn(pe,G)),po(b)}else Fa(b);else if(Pe=I.s,Pe==3||Pe==0&&0<I.X||!(pe==1&&Xl(b,I)||pe==2&&Yo(b)))switch(G&&0<G.length&&(I=b.h,I.i=I.i.concat(G)),Pe){case 1:Hi(b,5);break;case 4:Hi(b,10);break;case 3:Hi(b,6);break;default:Hi(b,2)}}}function Xo(b,I){let G=b.Ta+Math.floor(Math.random()*b.cb);return b.isActive()||(G*=2),G*I}function Hi(b,I){if(b.j.info("Error code "+I),I==2){var G=T(b.fb,b),pe=b.Xa;const Pe=!pe;pe=new Kn(pe||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Bi(pe,"https"),Li(pe),Pe?wi(pe.toString(),G):dr(pe.toString(),G)}else fn(2);b.G=0,b.l&&b.l.sa(I),za(b),Ba(b)}n.fb=function(b){b?(this.j.info("Successfully pinged google.com"),fn(2)):(this.j.info("Failed to ping google.com"),fn(1))};function za(b){if(b.G=0,b.ka=[],b.l){const I=Bs(b.h);(I.length!=0||b.i.length!=0)&&(V(b.ka,I),V(b.ka,b.i),b.h.i.length=0,R(b.i),b.i.length=0),b.l.ra()}}function Ha(b,I,G){var pe=G instanceof Kn?Dr(G):new Kn(G);if(pe.g!="")I&&(pe.g=I+"."+pe.g),bi(pe,pe.s);else{var Pe=h.location;pe=Pe.protocol,I=I?I+"."+Pe.hostname:Pe.hostname,Pe=+Pe.port;var Oe=new Kn(null);pe&&Bi(Oe,pe),I&&(Oe.g=I),Pe&&bi(Oe,Pe),G&&(Oe.l=G),pe=Oe}return G=b.D,I=b.ya,G&&I&&$n(pe,G,I),$n(pe,"VER",b.la),Hs(b,pe),pe}function qa(b,I,G){if(I&&!b.J)throw Error("Can't create secondary domain capable XhrIo object.");return I=b.Ca&&!b.pa?new Te(new Ri({eb:G})):new Te(b.pa),I.Ha(b.J),I}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wa(){}n=Wa.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function go(){}go.prototype.g=function(b,I){return new Nr(b,I)};function Nr(b,I){Vn.call(this),this.g=new Ai(I),this.l=b,this.h=I&&I.messageUrlParams||null,b=I&&I.messageHeaders||null,I&&I.clientProtocolHeaderRequired&&(b?b["X-Client-Protocol"]="webchannel":b={"X-Client-Protocol":"webchannel"}),this.g.o=b,b=I&&I.initMessageHeaders||null,I&&I.messageContentType&&(b?b["X-WebChannel-Content-Type"]=I.messageContentType:b={"X-WebChannel-Content-Type":I.messageContentType}),I&&I.va&&(b?b["X-WebChannel-Client-Profile"]=I.va:b={"X-WebChannel-Client-Profile":I.va}),this.g.S=b,(b=I&&I.Sb)&&!se(b)&&(this.g.m=b),this.v=I&&I.supportsCrossDomainXhr||!1,this.u=I&&I.sendRawJson||!1,(I=I&&I.httpSessionIdParam)&&!se(I)&&(this.g.D=I,b=this.h,b!==null&&I in b&&(b=this.h,I in b&&delete b[I])),this.j=new Ii(this)}A(Nr,Vn),Nr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Nr.prototype.close=function(){hs(this.g)},Nr.prototype.o=function(b){var I=this.g;if(typeof b=="string"){var G={};G.__data__=b,b=G}else this.u&&(G={},G.__data__=st(b),b=G);I.i.push(new uo(I.Ya++,b)),I.G==3&&po(I)},Nr.prototype.N=function(){this.g.l=null,delete this.j,hs(this.g),delete this.g,Nr.aa.N.call(this)};function Ga(b){jt.call(this),b.__headers__&&(this.headers=b.__headers__,this.statusCode=b.__status__,delete b.__headers__,delete b.__status__);var I=b.__sm__;if(I){e:{for(const G in I){b=G;break e}b=void 0}(this.i=b)&&(b=this.i,I=I!==null&&b in I?I[b]:void 0),this.data=I}else this.data=b}A(Ga,jt);function Ka(){Je.call(this),this.status=1}A(Ka,Je);function Ii(b){this.g=b}A(Ii,Wa),Ii.prototype.ua=function(){ie(this.g,"a")},Ii.prototype.ta=function(b){ie(this.g,new Ga(b))},Ii.prototype.sa=function(b){ie(this.g,new Ka)},Ii.prototype.ra=function(){ie(this.g,"b")},go.prototype.createWebChannel=go.prototype.g,Nr.prototype.send=Nr.prototype.o,Nr.prototype.open=Nr.prototype.m,Nr.prototype.close=Nr.prototype.close,createWebChannelTransport=function(){return new go},getStatEventTarget=function(){return Lt()},Event=bn,Stat$1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ii.NO_ERROR=0,ii.TIMEOUT=8,ii.HTTP_ERROR=6,ErrorCode=ii,yi.COMPLETE="complete",EventType=yi,wt.EventType=dn,dn.OPEN="a",dn.CLOSE="b",dn.ERROR="c",dn.MESSAGE="d",Vn.prototype.listen=Vn.prototype.K,WebChannel=wt,Te.prototype.listenOnce=Te.prototype.L,Te.prototype.getLastError=Te.prototype.Ka,Te.prototype.getLastErrorCode=Te.prototype.Ba,Te.prototype.getStatus=Te.prototype.Z,Te.prototype.getResponseJson=Te.prototype.Oa,Te.prototype.getResponseText=Te.prototype.oa,Te.prototype.send=Te.prototype.ea,Te.prototype.setWithCredentials=Te.prototype.Ha,XhrIo=Te}).apply(typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{});const F="@firebase/firestore",M="4.9.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let x="12.0.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O=new Logger$1("@firebase/firestore");function __PRIVATE_getLogLevel(){return O.logLevel}function __PRIVATE_logDebug(n,...e){if(O.logLevel<=LogLevel$1.DEBUG){const s=e.map(__PRIVATE_argToString);O.debug(`Firestore (${x}): ${n}`,...s)}}function __PRIVATE_logError(n,...e){if(O.logLevel<=LogLevel$1.ERROR){const s=e.map(__PRIVATE_argToString);O.error(`Firestore (${x}): ${n}`,...s)}}function __PRIVATE_logWarn(n,...e){if(O.logLevel<=LogLevel$1.WARN){const s=e.map(__PRIVATE_argToString);O.warn(`Firestore (${x}): ${n}`,...s)}}function __PRIVATE_argToString(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(s){return JSON.stringify(s)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(n,e,s){let o="Unexpected state";typeof e=="string"?o=e:s=e,__PRIVATE__fail(n,o,s)}function __PRIVATE__fail(n,e,s){let o=`FIRESTORE (${x}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(s!==void 0)try{o+=" CONTEXT: "+JSON.stringify(s)}catch{o+=" CONTEXT: "+s}throw __PRIVATE_logError(o),new Error(o)}function __PRIVATE_hardAssert(n,e,s,o){let a="Unexpected state";typeof s=="string"?a=s:o=s,n||__PRIVATE__fail(e,a,o)}function __PRIVATE_debugCast(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise(((e,s)=>{this.resolve=e,this.reject=s}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable((()=>s(User.UNAUTHENTICATED)))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable((()=>s(this.token.user)))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){__PRIVATE_hardAssert(this.o===void 0,42304);let o=this.i;const a=m=>this.i!==o?(o=this.i,s(m)):Promise.resolve();let c=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new __PRIVATE_Deferred,e.enqueueRetryable((()=>a(this.currentUser)))};const f=()=>{const m=c;e.enqueueRetryable((async()=>{await m.promise,await a(this.currentUser)}))},h=m=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=m,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((m=>h(m))),setTimeout((()=>{if(!this.auth){const m=this.t.getImmediate({optional:!0});m?h(m):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new __PRIVATE_Deferred)}}),0),f()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then((o=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(__PRIVATE_hardAssert(typeof o.accessToken=="string",31837,{l:o}),new __PRIVATE_OAuthToken(o.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string",2055,{h:e}),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,s,o){this.P=e,this.T=s,this.I=o,this.type="FirstParty",this.user=User.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,s,o){this.P=e,this.T=s,this.I=o}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.P,this.T,this.I))}start(e,s){e.enqueueRetryable((()=>s(User.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e,s){this.V=s,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_isFirebaseServerApp(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,s){__PRIVATE_hardAssert(this.o===void 0,3512);const o=c=>{c.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const f=c.token!==this.m;return this.m=c.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?s(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable((()=>o(c)))};const a=c=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((c=>a(c))),setTimeout((()=>{if(!this.appCheck){const c=this.V.getImmediate({optional:!0});c?a(c):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new AppCheckToken(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((s=>s?(__PRIVATE_hardAssert(typeof s.token=="string",44558,{tokenResult:s}),this.m=s.token,new AppCheckToken(s.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let o=0;o<n;o++)s[o]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=62*Math.floor(4.129032258064516);let o="";for(;o.length<20;){const a=__PRIVATE_randomBytes(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<s&&(o+=e.charAt(a[c]%62))}return o}}function __PRIVATE_primitiveComparator(n,e){return n<e?-1:n>e?1:0}function __PRIVATE_compareUtf8Strings(n,e){const s=Math.min(n.length,e.length);for(let o=0;o<s;o++){const a=n.charAt(o),c=e.charAt(o);if(a!==c)return __PRIVATE_isSurrogate(a)===__PRIVATE_isSurrogate(c)?__PRIVATE_primitiveComparator(a,c):__PRIVATE_isSurrogate(a)?1:-1}return __PRIVATE_primitiveComparator(n.length,e.length)}const B=55296,L=57343;function __PRIVATE_isSurrogate(n){const e=n.charCodeAt(0);return e>=B&&e<=L}function __PRIVATE_arrayEquals(n,e,s){return n.length===e.length&&n.every(((o,a)=>s(o,e[a])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k="__name__";class BasePath{constructor(e,s,o){s===void 0?s=0:s>e.length&&fail(637,{offset:s,range:e.length}),o===void 0?o=e.length-s:o>e.length-s&&fail(1746,{length:o,range:e.length-s}),this.segments=e,this.offset=s,this.len=o}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach((o=>{s.push(o)})):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,o=this.limit();s<o;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const o=Math.min(e.length,s.length);for(let a=0;a<o;a++){const c=BasePath.compareSegments(e.get(a),s.get(a));if(c!==0)return c}return __PRIVATE_primitiveComparator(e.length,s.length)}static compareSegments(e,s){const o=BasePath.isNumericId(e),a=BasePath.isNumericId(s);return o&&!a?-1:!o&&a?1:o&&a?BasePath.extractNumericId(e).compare(BasePath.extractNumericId(s)):__PRIVATE_compareUtf8Strings(e,s)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Integer.fromString(e.substring(4,e.length-2))}}class ResourcePath extends BasePath{construct(e,s,o){return new ResourcePath(e,s,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const o of e){if(o.indexOf("//")>=0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);s.push(...o.split("/").filter((a=>a.length>0)))}return new ResourcePath(s)}static emptyPath(){return new ResourcePath([])}}const q=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,s,o){return new FieldPath$1(e,s,o)}static isValidIdentifier(e){return q.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===k}static keyField(){return new FieldPath$1([k])}static fromServerFormat(e){const s=[];let o="",a=0;const c=()=>{if(o.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(o),o=""};let f=!1;for(;a<e.length;){const h=e[a];if(h==="\\"){if(a+1===e.length)throw new FirestoreError(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[a+1];if(m!=="\\"&&m!=="."&&m!=="`")throw new FirestoreError(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=m,a+=2}else h==="`"?(f=!f,a++):h!=="."||f?(o+=h,a++):(c(),a++)}if(c(),f)throw new FirestoreError(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(s)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return ResourcePath.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(n,e,s){if(!s)throw new FirestoreError(N.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(n,e,s,o){if(e===!0&&o===!0)throw new FirestoreError(N.INVALID_ARGUMENT,`${n} and ${s} cannot be used together.`)}function __PRIVATE_validateDocumentPath(n){if(!DocumentKey.isDocumentKey(n))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function __PRIVATE_validateCollectionPath(n){if(DocumentKey.isDocumentKey(n))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function __PRIVATE_isPlainObject(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function __PRIVATE_valueDescription(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(o){return o.constructor?o.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":fail(12329,{type:typeof n})}function __PRIVATE_cast(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new FirestoreError(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=__PRIVATE_valueDescription(n);throw new FirestoreError(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function property(n,e){const s={typeString:n};return e&&(s.value=e),s}function __PRIVATE_validateJSON(n,e){if(!__PRIVATE_isPlainObject(n))throw new FirestoreError(N.INVALID_ARGUMENT,"JSON must be an object");let s;for(const o in e)if(e[o]){const a=e[o].typeString,c="value"in e[o]?{value:e[o].value}:void 0;if(!(o in n)){s=`JSON missing required field: '${o}'`;break}const f=n[o];if(a&&typeof f!==a){s=`JSON field '${o}' must be a ${a}.`;break}if(c!==void 0&&f!==c.value){s=`Expected '${o}' field to equal '${c.value}'`;break}}if(s)throw new FirestoreError(N.INVALID_ARGUMENT,s);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q=-62135596800,$=1e6;class Timestamp{static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),o=Math.floor((e-1e3*s)*$);return new Timestamp(s,o)}constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<Q)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/$}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Timestamp._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Timestamp._jsonSchema))return new Timestamp(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Q;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Timestamp._jsonSchemaVersion="firestore/timestamp/1.0",Timestamp._jsonSchema={type:property("string",Timestamp._jsonSchemaVersion),seconds:property("number"),nanoseconds:property("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U=-1;function __PRIVATE_newIndexOffsetSuccessorFromReadTime(n,e){const s=n.toTimestamp().seconds,o=n.toTimestamp().nanoseconds+1,a=SnapshotVersion.fromTimestamp(o===1e9?new Timestamp(s+1,0):new Timestamp(s,o));return new IndexOffset(a,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(n){return new IndexOffset(n.readTime,n.key,U)}class IndexOffset{constructor(e,s,o){this.readTime=e,this.documentKey=s,this.largestBatchId=o}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),U)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),U)}}function __PRIVATE_indexOffsetComparator(n,e){let s=n.readTime.compareTo(e.readTime);return s!==0?s:(s=DocumentKey.comparator(n.documentKey,e.documentKey),s!==0?s:__PRIVATE_primitiveComparator(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(n){if(n.code!==N.FAILED_PRECONDITION||n.message!==K)throw n;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)}),(s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)}))}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&fail(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new PersistencePromise(((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(s,c).next(o,a)}}))}toPromise(){return new Promise(((e,s)=>{this.next(e,s)}))}wrapUserFunction(e){try{const s=e();return s instanceof PersistencePromise?s:PersistencePromise.resolve(s)}catch(s){return PersistencePromise.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction((()=>e(s))):PersistencePromise.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction((()=>e(s))):PersistencePromise.reject(s)}static resolve(e){return new PersistencePromise(((s,o)=>{s(e)}))}static reject(e){return new PersistencePromise(((s,o)=>{o(e)}))}static waitFor(e){return new PersistencePromise(((s,o)=>{let a=0,c=0,f=!1;e.forEach((h=>{++a,h.next((()=>{++c,f&&c===a&&s()}),(m=>o(m)))})),f=!0,c===a&&s()}))}static or(e){let s=PersistencePromise.resolve(!1);for(const o of e)s=s.next((a=>a?PersistencePromise.resolve(a):o()));return s}static forEach(e,s){const o=[];return e.forEach(((a,c)=>{o.push(s.call(this,a,c))})),this.waitFor(o)}static mapArray(e,s){return new PersistencePromise(((o,a)=>{const c=e.length,f=new Array(c);let h=0;for(let m=0;m<c;m++){const g=m;s(e[g]).next((_=>{f[g]=_,++h,h===c&&o(f)}),(_=>a(_)))}}))}static doWhile(e,s){return new PersistencePromise(((o,a)=>{const c=()=>{e()===!0?s().next((()=>{c()}),a):o()};c()}))}}function __PRIVATE_getAndroidVersion(n){const e=n.match(/Android ([\d.]+)/i),s=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(s)}function __PRIVATE_isIndexedDbTransactionError(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=o=>this.ae(o),this.ue=o=>s.writeSequenceNumber(o))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}__PRIVATE_ListenSequence.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j=-1;function __PRIVATE_isNullOrUndefined(n){return n==null}function __PRIVATE_isNegativeZero(n){return n===0&&1/n==-1/0}function isSafeInteger(n){return typeof n=="number"&&Number.isInteger(n)&&!__PRIVATE_isNegativeZero(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J="";function __PRIVATE_encodeResourcePath(n){let e="";for(let s=0;s<n.length;s++)e.length>0&&(e=__PRIVATE_encodeSeparator(e)),e=__PRIVATE_encodeSegment(n.get(s),e);return __PRIVATE_encodeSeparator(e)}function __PRIVATE_encodeSegment(n,e){let s=e;const o=n.length;for(let a=0;a<o;a++){const c=n.charAt(a);switch(c){case"\0":s+="";break;case J:s+="";break;default:s+=c}}return s}function __PRIVATE_encodeSeparator(n){return n+J+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(n){let e=0;for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&e++;return e}function forEach(n,e){for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&e(s,n[s])}function isEmpty(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,s){this.comparator=e,this.root=s||LLRBNode.EMPTY}insert(e,s){return new SortedMap(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return s.value;o<0?s=s.left:o>0&&(s=s.right)}return null}indexOf(e){let s=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return s+o.left.size;a<0?o=o.left:(s+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((s,o)=>(e(s,o),!1)))}toString(){const e=[];return this.inorderTraversal(((s,o)=>(e.push(`${s}:${o}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,s,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=s?o(e.key,s):1,s&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,s,o,a,c){this.key=e,this.value=s,this.color=o??LLRBNode.RED,this.left=a??LLRBNode.EMPTY,this.right=c??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,o,a,c){return new LLRBNode(e??this.key,s??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,s,o),null):c===0?a.copy(null,s,null,null,null):a.copy(null,null,null,null,a.right.insert(e,s,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let o,a=this;if(s(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,s),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),s(e,a.key)===0){if(a.right.isEmpty())return LLRBNode.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,s))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fail(43730,{key:this.key,value:this.value});if(this.right.isRed())throw fail(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw fail(27949);return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail(57766)}get value(){throw fail(16141)}get color(){throw fail(16727)}get left(){throw fail(29726)}get right(){throw fail(36894)}copy(e,s,o,a,c){return this}insert(e,s,o){return new LLRBNode(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((s,o)=>(e(s),!1)))}forEachInRange(e,s){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;s(a.key)}}forEachWhile(e,s){let o;for(o=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach((o=>{s=s.add(o)})),s}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const s=this.data.getIterator(),o=e.data.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((s=>{e.push(s)})),e}toString(){const e=[];return this.forEach((s=>e.push(s))),"SortedSet("+e.toString()+")"}copy(e){const s=new SortedSet(this.comparator);return s.data=e,s}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let s=new SortedSet(FieldPath$1.comparator);for(const o of this.fields)s=s.add(o);for(const o of e)s=s.add(o);return new FieldMask(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,((s,o)=>s.isEqual(o)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const s=(function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+c):c}})(e);return new ByteString(s)}static fromUint8Array(e){const s=(function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c})(e);return new ByteString(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(s){return btoa(s)})(this.binaryString)}toUint8Array(){return(function(s){const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ot=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(n){if(__PRIVATE_hardAssert(!!n,39018),typeof n=="string"){let e=0;const s=ot.exec(n);if(__PRIVATE_hardAssert(!!s,46558,{timestamp:n}),s[1]){let a=s[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(n);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(n.seconds),nanos:__PRIVATE_normalizeNumber(n.nanos)}}function __PRIVATE_normalizeNumber(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function __PRIVATE_normalizeByteString(n){return typeof n=="string"?ByteString.fromBase64String(n):ByteString.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t="server_timestamp",at="__type__",ut$1="__previous_value__",ct="__local_write_time__";function __PRIVATE_isServerTimestamp(n){return(n?.mapValue?.fields||{})[at]?.stringValue===_t}function __PRIVATE_getPreviousValue(n){const e=n.mapValue.fields[ut$1];return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(n){const e=__PRIVATE_normalizeTimestamp(n.mapValue.fields[ct].timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,s,o,a,c,f,h,m,g,_){this.databaseId=e,this.appId=s,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=f,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=g,this.isUsingEmulator=_}}const lt="(default)";class DatabaseId{constructor(e,s){this.projectId=e,this.database=s||lt}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database===lt}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="__type__",Pt="__max__",Tt={mapValue:{}},It="__vector__",Et="value";function __PRIVATE_typeOrder(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?__PRIVATE_isServerTimestamp(n)?4:__PRIVATE_isMaxValue(n)?9007199254740991:__PRIVATE_isVectorValue(n)?10:11:fail(28295,{value:n})}function __PRIVATE_valueEquals(n,e){if(n===e)return!0;const s=__PRIVATE_typeOrder(n);if(s!==__PRIVATE_typeOrder(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(n).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return(function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=__PRIVATE_normalizeTimestamp(a.timestampValue),h=__PRIVATE_normalizeTimestamp(c.timestampValue);return f.seconds===h.seconds&&f.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(a,c){return __PRIVATE_normalizeByteString(a.bytesValue).isEqual(__PRIVATE_normalizeByteString(c.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(a,c){return __PRIVATE_normalizeNumber(a.geoPointValue.latitude)===__PRIVATE_normalizeNumber(c.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(a.geoPointValue.longitude)===__PRIVATE_normalizeNumber(c.geoPointValue.longitude)})(n,e);case 2:return(function(a,c){if("integerValue"in a&&"integerValue"in c)return __PRIVATE_normalizeNumber(a.integerValue)===__PRIVATE_normalizeNumber(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=__PRIVATE_normalizeNumber(a.doubleValue),h=__PRIVATE_normalizeNumber(c.doubleValue);return f===h?__PRIVATE_isNegativeZero(f)===__PRIVATE_isNegativeZero(h):isNaN(f)&&isNaN(h)}return!1})(n,e);case 9:return __PRIVATE_arrayEquals(n.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:case 11:return(function(a,c){const f=a.mapValue.fields||{},h=c.mapValue.fields||{};if(__PRIVATE_objectSize(f)!==__PRIVATE_objectSize(h))return!1;for(const m in f)if(f.hasOwnProperty(m)&&(h[m]===void 0||!__PRIVATE_valueEquals(f[m],h[m])))return!1;return!0})(n,e);default:return fail(52216,{left:n})}}function __PRIVATE_arrayValueContains(n,e){return(n.values||[]).find((s=>__PRIVATE_valueEquals(s,e)))!==void 0}function __PRIVATE_valueCompare(n,e){if(n===e)return 0;const s=__PRIVATE_typeOrder(n),o=__PRIVATE_typeOrder(e);if(s!==o)return __PRIVATE_primitiveComparator(s,o);switch(s){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(n.booleanValue,e.booleanValue);case 2:return(function(c,f){const h=__PRIVATE_normalizeNumber(c.integerValue||c.doubleValue),m=__PRIVATE_normalizeNumber(f.integerValue||f.doubleValue);return h<m?-1:h>m?1:h===m?0:isNaN(h)?isNaN(m)?0:-1:1})(n,e);case 3:return __PRIVATE_compareTimestamps(n.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(n),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_compareUtf8Strings(n.stringValue,e.stringValue);case 6:return(function(c,f){const h=__PRIVATE_normalizeByteString(c),m=__PRIVATE_normalizeByteString(f);return h.compareTo(m)})(n.bytesValue,e.bytesValue);case 7:return(function(c,f){const h=c.split("/"),m=f.split("/");for(let g=0;g<h.length&&g<m.length;g++){const _=__PRIVATE_primitiveComparator(h[g],m[g]);if(_!==0)return _}return __PRIVATE_primitiveComparator(h.length,m.length)})(n.referenceValue,e.referenceValue);case 8:return(function(c,f){const h=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.latitude),__PRIVATE_normalizeNumber(f.latitude));return h!==0?h:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.longitude),__PRIVATE_normalizeNumber(f.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return __PRIVATE_compareArrays(n.arrayValue,e.arrayValue);case 10:return(function(c,f){const h=c.fields||{},m=f.fields||{},g=h[Et]?.arrayValue,_=m[Et]?.arrayValue,E=__PRIVATE_primitiveComparator(g?.values?.length||0,_?.values?.length||0);return E!==0?E:__PRIVATE_compareArrays(g,_)})(n.mapValue,e.mapValue);case 11:return(function(c,f){if(c===Tt.mapValue&&f===Tt.mapValue)return 0;if(c===Tt.mapValue)return 1;if(f===Tt.mapValue)return-1;const h=c.fields||{},m=Object.keys(h),g=f.fields||{},_=Object.keys(g);m.sort(),_.sort();for(let E=0;E<m.length&&E<_.length;++E){const T=__PRIVATE_compareUtf8Strings(m[E],_[E]);if(T!==0)return T;const w=__PRIVATE_valueCompare(h[m[E]],g[_[E]]);if(w!==0)return w}return __PRIVATE_primitiveComparator(m.length,_.length)})(n.mapValue,e.mapValue);default:throw fail(23264,{he:s})}}function __PRIVATE_compareTimestamps(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return __PRIVATE_primitiveComparator(n,e);const s=__PRIVATE_normalizeTimestamp(n),o=__PRIVATE_normalizeTimestamp(e),a=__PRIVATE_primitiveComparator(s.seconds,o.seconds);return a!==0?a:__PRIVATE_primitiveComparator(s.nanos,o.nanos)}function __PRIVATE_compareArrays(n,e){const s=n.values||[],o=e.values||[];for(let a=0;a<s.length&&a<o.length;++a){const c=__PRIVATE_valueCompare(s[a],o[a]);if(c)return c}return __PRIVATE_primitiveComparator(s.length,o.length)}function canonicalId(n){return __PRIVATE_canonifyValue(n)}function __PRIVATE_canonifyValue(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(s){const o=__PRIVATE_normalizeTimestamp(s);return`time(${o.seconds},${o.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(s){return __PRIVATE_normalizeByteString(s).toBase64()})(n.bytesValue):"referenceValue"in n?(function(s){return DocumentKey.fromName(s).toString()})(n.referenceValue):"geoPointValue"in n?(function(s){return`geo(${s.latitude},${s.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(s){let o="[",a=!0;for(const c of s.values||[])a?a=!1:o+=",",o+=__PRIVATE_canonifyValue(c);return o+"]"})(n.arrayValue):"mapValue"in n?(function(s){const o=Object.keys(s.fields||{}).sort();let a="{",c=!0;for(const f of o)c?c=!1:a+=",",a+=`${f}:${__PRIVATE_canonifyValue(s.fields[f])}`;return a+"}"})(n.mapValue):fail(61005,{value:n})}function __PRIVATE_estimateByteSize(n){switch(__PRIVATE_typeOrder(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=__PRIVATE_getPreviousValue(n);return e?16+__PRIVATE_estimateByteSize(e):16;case 5:return 2*n.stringValue.length;case 6:return __PRIVATE_normalizeByteString(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(o){return(o.values||[]).reduce(((a,c)=>a+__PRIVATE_estimateByteSize(c)),0)})(n.arrayValue);case 10:case 11:return(function(o){let a=0;return forEach(o.fields,((c,f)=>{a+=c.length+__PRIVATE_estimateByteSize(f)})),a})(n.mapValue);default:throw fail(13486,{value:n})}}function __PRIVATE_refValue(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function isInteger(n){return!!n&&"integerValue"in n}function isArray$1(n){return!!n&&"arrayValue"in n}function __PRIVATE_isNullValue(n){return!!n&&"nullValue"in n}function __PRIVATE_isNanValue(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function __PRIVATE_isMapValue(n){return!!n&&"mapValue"in n}function __PRIVATE_isVectorValue(n){return(n?.mapValue?.fields||{})[ht]?.stringValue===It}function __PRIVATE_deepClone(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return forEach(n.mapValue.fields,((s,o)=>e.mapValue.fields[s]=__PRIVATE_deepClone(o))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(n.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=__PRIVATE_deepClone(n.arrayValue.values[s]);return e}return{...n}}function __PRIVATE_isMaxValue(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Pt}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let o=0;o<e.length-1;++o)if(s=(s.mapValue.fields||{})[e.get(o)],!__PRIVATE_isMapValue(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(s)}setAll(e){let s=FieldPath$1.emptyPath(),o={},a=[];e.forEach(((f,h)=>{if(!s.isImmediateParentOf(h)){const m=this.getFieldsMap(s);this.applyChanges(m,o,a),o={},a=[],s=h.popLast()}f?o[h.lastSegment()]=__PRIVATE_deepClone(f):a.push(h.lastSegment())}));const c=this.getFieldsMap(s);this.applyChanges(c,o,a)}delete(e){const s=this.field(e.popLast());__PRIVATE_isMapValue(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=s.mapValue.fields[e.get(o)];__PRIVATE_isMapValue(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},s.mapValue.fields[e.get(o)]=a),s=a}return s.mapValue.fields}applyChanges(e,s,o){forEach(s,((a,c)=>e[a]=c));for(const a of o)delete e[a]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(n){const e=[];return forEach(n.fields,((s,o)=>{const a=new FieldPath$1([s]);if(__PRIVATE_isMapValue(o)){const c=__PRIVATE_extractFieldMask(o.mapValue).fields;if(c.length===0)e.push(a);else for(const f of c)e.push(a.child(f))}else e.push(a)})),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,s,o,a,c,f,h){this.key=e,this.documentType=s,this.version=o,this.readTime=a,this.createTime=c,this.data=f,this.documentState=h}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,s,o,a){return new MutableDocument(e,1,s,SnapshotVersion.min(),o,a,0)}static newNoDocument(e,s){return new MutableDocument(e,2,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,s){return new MutableDocument(e,3,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,s){this.position=e,this.inclusive=s}}function __PRIVATE_boundCompareToDocument(n,e,s){let o=0;for(let a=0;a<n.position.length;a++){const c=e[a],f=n.position[a];if(c.field.isKeyField()?o=DocumentKey.comparator(DocumentKey.fromName(f.referenceValue),s.key):o=__PRIVATE_valueCompare(f,s.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function __PRIVATE_boundEquals(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let s=0;s<n.position.length;s++)if(!__PRIVATE_valueEquals(n.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,s="asc"){this.field=e,this.dir=s}}function __PRIVATE_orderByEquals(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,s,o){super(),this.field=e,this.op=s,this.value=o}static create(e,s,o){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,o):new __PRIVATE_KeyFieldFilter(e,s,o):s==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,o):s==="in"?new __PRIVATE_InFilter(e,o):s==="not-in"?new __PRIVATE_NotInFilter(e,o):s==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,o):new FieldFilter(e,s,o)}static createKeyFieldInFilter(e,s,o){return s==="in"?new __PRIVATE_KeyFieldInFilter(e,o):new __PRIVATE_KeyFieldNotInFilter(e,o)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&s.nullValue===void 0&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value)):s!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(s)&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,s){super(),this.filters=e,this.op=s,this.Pe=null}static create(e,s){return new CompositeFilter(e,s)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find((s=>!s.matches(e)))===void 0:this.filters.find((s=>s.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,s)=>e.concat(s.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(n){return n.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(n){return __PRIVATE_compositeFilterIsFlat(n)&&__PRIVATE_compositeFilterIsConjunction(n)}function __PRIVATE_compositeFilterIsFlat(n){for(const e of n.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(n){if(n instanceof FieldFilter)return n.field.canonicalString()+n.op.toString()+canonicalId(n.value);if(__PRIVATE_compositeFilterIsFlatConjunction(n))return n.filters.map((e=>__PRIVATE_canonifyFilter(e))).join(",");{const e=n.filters.map((s=>__PRIVATE_canonifyFilter(s))).join(",");return`${n.op}(${e})`}}function __PRIVATE_filterEquals(n,e){return n instanceof FieldFilter?(function(o,a){return a instanceof FieldFilter&&o.op===a.op&&o.field.isEqual(a.field)&&__PRIVATE_valueEquals(o.value,a.value)})(n,e):n instanceof CompositeFilter?(function(o,a){return a instanceof CompositeFilter&&o.op===a.op&&o.filters.length===a.filters.length?o.filters.reduce(((c,f,h)=>c&&__PRIVATE_filterEquals(f,a.filters[h])),!0):!1})(n,e):void fail(19439)}function __PRIVATE_stringifyFilter(n){return n instanceof FieldFilter?(function(s){return`${s.field.canonicalString()} ${s.op} ${canonicalId(s.value)}`})(n):n instanceof CompositeFilter?(function(s){return s.op.toString()+" {"+s.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"})(n):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,s,o){super(e,s,o),this.key=DocumentKey.fromName(o.referenceValue)}matches(e){const s=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(s)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,s){super(e,"in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",s)}matches(e){return this.keys.some((s=>s.isEqual(e.key)))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,s){super(e,"not-in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",s)}matches(e){return!this.keys.some((s=>s.isEqual(e.key)))}}function __PRIVATE_extractDocumentKeysFromArrayValue(n,e){return(e.arrayValue?.values||[]).map((s=>DocumentKey.fromName(s.referenceValue)))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return isArray$1(s)&&__PRIVATE_arrayValueContains(s.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,s){super(e,"not-in",s)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&s.nullValue===void 0&&!__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!isArray$1(s)||!s.arrayValue.values)&&s.arrayValue.values.some((o=>__PRIVATE_arrayValueContains(this.value.arrayValue,o)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,s=null,o=[],a=[],c=null,f=null,h=null){this.path=e,this.collectionGroup=s,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=f,this.endAt=h,this.Te=null}}function __PRIVATE_newTarget(n,e=null,s=[],o=[],a=null,c=null,f=null){return new __PRIVATE_TargetImpl(n,e,s,o,a,c,f)}function __PRIVATE_canonifyTarget(n){const e=__PRIVATE_debugCast(n);if(e.Te===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map((o=>__PRIVATE_canonifyFilter(o))).join(","),s+="|ob:",s+=e.orderBy.map((o=>(function(c){return c.field.canonicalString()+c.dir})(o))).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map((o=>canonicalId(o))).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map((o=>canonicalId(o))).join(",")),e.Te=s}return e.Te}function __PRIVATE_targetEquals(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!__PRIVATE_orderByEquals(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if(!__PRIVATE_filterEquals(n.filters[s],e.filters[s]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(n.startAt,e.startAt)&&__PRIVATE_boundEquals(n.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(n){return DocumentKey.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,s=null,o=[],a=[],c=null,f="F",h=null,m=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=f,this.startAt=h,this.endAt=m,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(n,e,s,o,a,c,f,h){return new __PRIVATE_QueryImpl(n,e,s,o,a,c,f,h)}function __PRIVATE_newQueryForPath(n){return new __PRIVATE_QueryImpl(n)}function __PRIVATE_queryMatchesAllDocuments(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(n){return n.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(n){const e=__PRIVATE_debugCast(n);if(e.Ie===null){e.Ie=[];const s=new Set;for(const c of e.explicitOrderBy)e.Ie.push(c),s.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let h=new SortedSet(FieldPath$1.comparator);return f.filters.forEach((m=>{m.getFlattenedFilters().forEach((g=>{g.isInequality()&&(h=h.add(g.field))}))})),h})(e).forEach((c=>{s.has(c.canonicalString())||c.isKeyField()||e.Ie.push(new OrderBy(c,o))})),s.has(FieldPath$1.keyField().canonicalString())||e.Ie.push(new OrderBy(FieldPath$1.keyField(),o))}return e.Ie}function __PRIVATE_queryToTarget(n){const e=__PRIVATE_debugCast(n);return e.Ee||(e.Ee=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(n))),e.Ee}function __PRIVATE__queryToTarget(n,e){if(n.limitType==="F")return __PRIVATE_newTarget(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((a=>{const c=a.dir==="desc"?"asc":"desc";return new OrderBy(a.field,c)}));const s=n.endAt?new Bound(n.endAt.position,n.endAt.inclusive):null,o=n.startAt?new Bound(n.startAt.position,n.startAt.inclusive):null;return __PRIVATE_newTarget(n.path,n.collectionGroup,e,n.filters,n.limit,s,o)}}function __PRIVATE_queryWithAddedFilter(n,e){const s=n.filters.concat([e]);return new __PRIVATE_QueryImpl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),s,n.limit,n.limitType,n.startAt,n.endAt)}function __PRIVATE_queryWithLimit(n,e,s){return new __PRIVATE_QueryImpl(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,s,n.startAt,n.endAt)}function __PRIVATE_queryEquals(n,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(n),__PRIVATE_queryToTarget(e))&&n.limitType===e.limitType}function __PRIVATE_canonifyQuery(n){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(n))}|lt:${n.limitType}`}function __PRIVATE_stringifyQuery(n){return`Query(target=${(function(s){let o=s.path.canonicalString();return s.collectionGroup!==null&&(o+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(o+=`, filters: [${s.filters.map((a=>__PRIVATE_stringifyFilter(a))).join(", ")}]`),__PRIVATE_isNullOrUndefined(s.limit)||(o+=", limit: "+s.limit),s.orderBy.length>0&&(o+=`, orderBy: [${s.orderBy.map((a=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(a))).join(", ")}]`),s.startAt&&(o+=", startAt: ",o+=s.startAt.inclusive?"b:":"a:",o+=s.startAt.position.map((a=>canonicalId(a))).join(",")),s.endAt&&(o+=", endAt: ",o+=s.endAt.inclusive?"a:":"b:",o+=s.endAt.position.map((a=>canonicalId(a))).join(",")),`Target(${o})`})(__PRIVATE_queryToTarget(n))}; limitType=${n.limitType})`}function __PRIVATE_queryMatches(n,e){return e.isFoundDocument()&&(function(o,a){const c=a.key.path;return o.collectionGroup!==null?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):DocumentKey.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)})(n,e)&&(function(o,a){for(const c of __PRIVATE_queryNormalizedOrderBy(o))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0})(n,e)&&(function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0})(n,e)&&(function(o,a){return!(o.startAt&&!(function(f,h,m){const g=__PRIVATE_boundCompareToDocument(f,h,m);return f.inclusive?g<=0:g<0})(o.startAt,__PRIVATE_queryNormalizedOrderBy(o),a)||o.endAt&&!(function(f,h,m){const g=__PRIVATE_boundCompareToDocument(f,h,m);return f.inclusive?g>=0:g>0})(o.endAt,__PRIVATE_queryNormalizedOrderBy(o),a))})(n,e)}function __PRIVATE_queryCollectionGroup(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function __PRIVATE_newQueryComparator(n){return(e,s)=>{let o=!1;for(const a of __PRIVATE_queryNormalizedOrderBy(n)){const c=__PRIVATE_compareDocs(a,e,s);if(c!==0)return c;o=o||a.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(n,e,s){const o=n.field.isKeyField()?DocumentKey.comparator(e.key,s.key):(function(c,f,h){const m=f.data.field(c),g=h.data.field(c);return m!==null&&g!==null?__PRIVATE_valueCompare(m,g):fail(42886)})(n.field,e,s);switch(n.dir){case"asc":return o;case"desc":return-1*o;default:return fail(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),o=this.inner[s];if(o!==void 0){for(const[a,c]of o)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,s){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return this.inner[o]=[[e,s]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,s]);a.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return o.length===1?delete this.inner[s]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,((s,o)=>{for(const[a,c]of o)e(a,c)}))}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rt=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return Rt}const Vt=new SortedMap(DocumentKey.comparator);function documentMap(...n){let e=Vt;for(const s of n)e=e.insert(s.key,s);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(n){let e=Vt;return n.forEach(((s,o)=>e=e.insert(s,o.overlayedDocument))),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap((n=>n.toString()),((n,e)=>n.isEqual(e)))}const mt=new SortedMap(DocumentKey.comparator),ft=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...n){let e=ft;for(const s of n)e=e.add(s);return e}const gt=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return gt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(n){return{integerValue:""+n}}function toNumber$1(n,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(n,e,s){return n instanceof __PRIVATE_ServerTimestampTransform?(function(a,c){const f={fields:{[at]:{stringValue:_t},[ct]:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&__PRIVATE_isServerTimestamp(c)&&(c=__PRIVATE_getPreviousValue(c)),c&&(f.fields[ut$1]=c),{mapValue:f}})(s,e):n instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(n,e):n instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(n,e):(function(a,c){const f=__PRIVATE_computeTransformOperationBaseValue(a,c),h=asNumber$1(f)+asNumber$1(a.Ae);return isInteger(f)&&isInteger(a.Ae)?__PRIVATE_toInteger(h):__PRIVATE_toDouble(a.serializer,h)})(n,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(n,e,s){return n instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(n,e):n instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(n,e):s}function __PRIVATE_computeTransformOperationBaseValue(n,e){return n instanceof __PRIVATE_NumericIncrementTransformOperation?(function(o){return isInteger(o)||(function(c){return!!c&&"doubleValue"in c})(o)})(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(n,e){const s=__PRIVATE_coercedFieldValuesArray(e);for(const o of n.elements)s.some((a=>__PRIVATE_valueEquals(a,o)))||s.push(o);return{arrayValue:{values:s}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(n,e){let s=__PRIVATE_coercedFieldValuesArray(e);for(const o of n.elements)s=s.filter((a=>!__PRIVATE_valueEquals(a,o)));return{arrayValue:{values:s}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,s){super(),this.serializer=e,this.Ae=s}}function asNumber$1(n){return __PRIVATE_normalizeNumber(n.integerValue||n.doubleValue)}function __PRIVATE_coercedFieldValuesArray(n){return isArray$1(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldTransform{constructor(e,s){this.field=e,this.transform=s}}function __PRIVATE_fieldTransformEquals(n,e){return n.field.isEqual(e.field)&&(function(o,a){return o instanceof __PRIVATE_ArrayUnionTransformOperation&&a instanceof __PRIVATE_ArrayUnionTransformOperation||o instanceof __PRIVATE_ArrayRemoveTransformOperation&&a instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(o.elements,a.elements,__PRIVATE_valueEquals):o instanceof __PRIVATE_NumericIncrementTransformOperation&&a instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(o.Ae,a.Ae):o instanceof __PRIVATE_ServerTimestampTransform&&a instanceof __PRIVATE_ServerTimestampTransform})(n.transform,e.transform)}class MutationResult{constructor(e,s){this.version=e,this.transformResults=s}}class Precondition{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new __PRIVATE_DeleteMutation(n.key,Precondition.none()):new __PRIVATE_SetMutation(n.key,n.data,Precondition.none());{const s=n.data,o=ObjectValue.empty();let a=new SortedSet(FieldPath$1.comparator);for(let c of e.fields)if(!a.has(c)){let f=s.field(c);f===null&&c.length>1&&(c=c.popLast(),f=s.field(c)),f===null?o.delete(c):o.set(c,f),a=a.add(c)}return new __PRIVATE_PatchMutation(n.key,o,new FieldMask(a.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(n,e,s){n instanceof __PRIVATE_SetMutation?(function(a,c,f){const h=a.value.clone(),m=__PRIVATE_serverTransformResults(a.fieldTransforms,c,f.transformResults);h.setAll(m),c.convertToFoundDocument(f.version,h).setHasCommittedMutations()})(n,e,s):n instanceof __PRIVATE_PatchMutation?(function(a,c,f){if(!__PRIVATE_preconditionIsValidForDocument(a.precondition,c))return void c.convertToUnknownDocument(f.version);const h=__PRIVATE_serverTransformResults(a.fieldTransforms,c,f.transformResults),m=c.data;m.setAll(__PRIVATE_getPatch(a)),m.setAll(h),c.convertToFoundDocument(f.version,m).setHasCommittedMutations()})(n,e,s):(function(a,c,f){c.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,s)}function __PRIVATE_mutationApplyToLocalView(n,e,s,o){return n instanceof __PRIVATE_SetMutation?(function(c,f,h,m){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,f))return h;const g=c.value.clone(),_=__PRIVATE_localTransformResults(c.fieldTransforms,m,f);return g.setAll(_),f.convertToFoundDocument(f.version,g).setHasLocalMutations(),null})(n,e,s,o):n instanceof __PRIVATE_PatchMutation?(function(c,f,h,m){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,f))return h;const g=__PRIVATE_localTransformResults(c.fieldTransforms,m,f),_=f.data;return _.setAll(__PRIVATE_getPatch(c)),_.setAll(g),f.convertToFoundDocument(f.version,_).setHasLocalMutations(),h===null?null:h.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map((E=>E.field)))})(n,e,s,o):(function(c,f,h){return __PRIVATE_preconditionIsValidForDocument(c.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):h})(n,e,s)}function __PRIVATE_mutationExtractBaseValue(n,e){let s=null;for(const o of n.fieldTransforms){const a=e.data.field(o.field),c=__PRIVATE_computeTransformOperationBaseValue(o.transform,a||null);c!=null&&(s===null&&(s=ObjectValue.empty()),s.set(o.field,c))}return s||null}function __PRIVATE_mutationEquals(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(o,a){return o===void 0&&a===void 0||!(!o||!a)&&__PRIVATE_arrayEquals(o,a,((c,f)=>__PRIVATE_fieldTransformEquals(c,f)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,s,o,a=[]){super(),this.key=e,this.value=s,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,s,o,a,c=[]){super(),this.key=e,this.data=s,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(n){const e=new Map;return n.fieldMask.fields.forEach((s=>{if(!s.isEmpty()){const o=n.data.field(s);e.set(s,o)}})),e}function __PRIVATE_serverTransformResults(n,e,s){const o=new Map;__PRIVATE_hardAssert(n.length===s.length,32656,{Re:s.length,Ve:n.length});for(let a=0;a<s.length;a++){const c=n[a],f=c.transform,h=e.data.field(c.field);o.set(c.field,__PRIVATE_applyTransformOperationToRemoteDocument(f,h,s[a]))}return o}function __PRIVATE_localTransformResults(n,e,s){const o=new Map;for(const a of n){const c=a.transform,f=s.data.field(a.field);o.set(a.field,__PRIVATE_applyTransformOperationToLocalView(c,f,e))}return o}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,s,o,a){this.batchId=e,this.localWriteTime=s,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,s){const o=s.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(c,e,o[a])}}applyToLocalView(e,s){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(s=__PRIVATE_mutationApplyToLocalView(o,e,s,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(s=__PRIVATE_mutationApplyToLocalView(o,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const o=__PRIVATE_newMutationMap();return this.mutations.forEach((a=>{const c=e.get(a.key),f=c.overlayedDocument;let h=this.applyToLocalView(f,c.mutatedFields);h=s.has(a.key)?null:h;const m=__PRIVATE_calculateOverlayMutation(f,h);m!==null&&o.set(a.key,m),f.isValidDocument()||f.convertToNoDocument(SnapshotVersion.min())})),o}keys(){return this.mutations.reduce(((e,s)=>e.add(s.key)),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,((s,o)=>__PRIVATE_mutationEquals(s,o)))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,((s,o)=>__PRIVATE_mutationEquals(s,o)))}}class MutationBatchResult{constructor(e,s,o,a){this.batch=e,this.commitVersion=s,this.mutationResults=o,this.docVersions=a}static from(e,s,o){__PRIVATE_hardAssert(e.mutations.length===o.length,58842,{me:e.mutations.length,fe:o.length});let a=(function(){return mt})();const c=e.mutations;for(let f=0;f<c.length;f++)a=a.insert(c[f].key,o[f].version);return new MutationBatchResult(e,s,o,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var pt,yt;function __PRIVATE_isPermanentError(n){switch(n){case N.OK:return fail(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return fail(15467,{code:n})}}function __PRIVATE_mapCodeFromRpcCode(n){if(n===void 0)return __PRIVATE_logError("GRPC error has no .code"),N.UNKNOWN;switch(n){case pt.OK:return N.OK;case pt.CANCELLED:return N.CANCELLED;case pt.UNKNOWN:return N.UNKNOWN;case pt.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case pt.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case pt.INTERNAL:return N.INTERNAL;case pt.UNAVAILABLE:return N.UNAVAILABLE;case pt.UNAUTHENTICATED:return N.UNAUTHENTICATED;case pt.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case pt.NOT_FOUND:return N.NOT_FOUND;case pt.ALREADY_EXISTS:return N.ALREADY_EXISTS;case pt.PERMISSION_DENIED:return N.PERMISSION_DENIED;case pt.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case pt.ABORTED:return N.ABORTED;case pt.OUT_OF_RANGE:return N.OUT_OF_RANGE;case pt.UNIMPLEMENTED:return N.UNIMPLEMENTED;case pt.DATA_LOSS:return N.DATA_LOSS;default:return fail(39323,{code:n})}}(yt=pt||(pt={}))[yt.OK=0]="OK",yt[yt.CANCELLED=1]="CANCELLED",yt[yt.UNKNOWN=2]="UNKNOWN",yt[yt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",yt[yt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",yt[yt.NOT_FOUND=5]="NOT_FOUND",yt[yt.ALREADY_EXISTS=6]="ALREADY_EXISTS",yt[yt.PERMISSION_DENIED=7]="PERMISSION_DENIED",yt[yt.UNAUTHENTICATED=16]="UNAUTHENTICATED",yt[yt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",yt[yt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",yt[yt.ABORTED=10]="ABORTED",yt[yt.OUT_OF_RANGE=11]="OUT_OF_RANGE",yt[yt.UNIMPLEMENTED=12]="UNIMPLEMENTED",yt[yt.INTERNAL=13]="INTERNAL",yt[yt.UNAVAILABLE=14]="UNAVAILABLE",yt[yt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(n){const e=__PRIVATE_newTextEncoder().encode(n),s=new Md5;return s.update(e),new Uint8Array(s.digest())}function __PRIVATE_get64BitUints(n){const e=new DataView(n.buffer),s=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Integer([s,o],0),new Integer([a,c],0)]}class BloomFilter{constructor(e,s,o){if(this.bitmap=e,this.padding=s,this.hashCount=o,s<0||s>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${s}`);if(o<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length===0&&s!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${s}`);this.ge=8*e.length-s,this.pe=Integer.fromNumber(this.ge)}ye(e,s,o){let a=e.add(s.multiply(Integer.fromNumber(o)));return a.compare(St)===1&&(a=new Integer([a.getBits(0),a.getBits(1)],0)),a.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const s=__PRIVATE_getMd5HashValue(e),[o,a]=__PRIVATE_get64BitUints(s);for(let c=0;c<this.hashCount;c++){const f=this.ye(o,a,c);if(!this.we(f))return!1}return!0}static create(e,s,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),f=new BloomFilter(c,a,s);return o.forEach((h=>f.insert(h))),f}insert(e){if(this.ge===0)return;const s=__PRIVATE_getMd5HashValue(e),[o,a]=__PRIVATE_get64BitUints(s);for(let c=0;c<this.hashCount;c++){const f=this.ye(o,a,c);this.Se(f)}}Se(e){const s=Math.floor(e/8),o=e%8;this.bitmap[s]|=1<<o}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,s,o,a,c){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,s,o){const a=new Map;return a.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,s,o)),new RemoteEvent(SnapshotVersion.min(),a,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,s,o,a,c){this.resumeToken=e,this.current=s,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,s,o){return new TargetChange(o,s,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,s,o,a){this.be=e,this.removedTargetIds=s,this.key=o,this.De=a}}class __PRIVATE_ExistenceFilterChange{constructor(e,s){this.targetId=e,this.Ce=s}}class __PRIVATE_WatchTargetChange{constructor(e,s,o=ByteString.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=s,this.resumeToken=o,this.cause=a}}class __PRIVATE_TargetState{constructor(){this.ve=0,this.Fe=__PRIVATE_snapshotChangesMap(),this.Me=ByteString.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();return this.Fe.forEach(((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:s=s.add(a);break;case 1:o=o.add(a);break;default:fail(38017,{changeType:c})}})),new TargetChange(this.Me,this.xe,e,s,o)}qe(){this.Oe=!1,this.Fe=__PRIVATE_snapshotChangesMap()}Qe(e,s){this.Oe=!0,this.Fe=this.Fe.insert(e,s)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,__PRIVATE_hardAssert(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Ge=e,this.ze=new Map,this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator)}Ze(e){for(const s of e.be)e.De&&e.De.isFoundDocument()?this.Xe(s,e.De):this.et(s,e.key,e.De);for(const s of e.removedTargetIds)this.et(s,e.key,e.De)}tt(e){this.forEachTarget(e,(s=>{const o=this.nt(s);switch(e.state){case 0:this.rt(s)&&o.Le(e.resumeToken);break;case 1:o.Ke(),o.Ne||o.qe(),o.Le(e.resumeToken);break;case 2:o.Ke(),o.Ne||this.removeTarget(s);break;case 3:this.rt(s)&&(o.We(),o.Le(e.resumeToken));break;case 4:this.rt(s)&&(this.it(s),o.Le(e.resumeToken));break;default:fail(56790,{state:e.state})}}))}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ze.forEach(((o,a)=>{this.rt(a)&&s(a)}))}st(e){const s=e.targetId,o=e.Ce.count,a=this.ot(s);if(a){const c=a.target;if(__PRIVATE_targetIsDocumentTarget(c))if(o===0){const f=new DocumentKey(c.path);this.et(s,f,MutableDocument.newNoDocument(f,SnapshotVersion.min()))}else __PRIVATE_hardAssert(o===1,20013,{expectedCount:o});else{const f=this._t(s);if(f!==o){const h=this.ut(e),m=h?this.ct(h,e,f):1;if(m!==0){this.it(s);const g=m===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(s,g)}}}}}ut(e){const s=e.Ce.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=s;let f,h;try{f=__PRIVATE_normalizeByteString(o).toUint8Array()}catch(m){if(m instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+m.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw m}try{h=new BloomFilter(f,a,c)}catch(m){return __PRIVATE_logWarn(m instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",m),null}return h.ge===0?null:h}ct(e,s,o){return s.Ce.count===o-this.Pt(e,s.targetId)?0:2}Pt(e,s){const o=this.Ge.getRemoteKeysForTarget(s);let a=0;return o.forEach((c=>{const f=this.Ge.ht(),h=`projects/${f.projectId}/databases/${f.database}/documents/${c.path.canonicalString()}`;e.mightContain(h)||(this.et(s,c,null),a++)})),a}Tt(e){const s=new Map;this.ze.forEach(((c,f)=>{const h=this.ot(f);if(h){if(c.current&&__PRIVATE_targetIsDocumentTarget(h.target)){const m=new DocumentKey(h.target.path);this.It(m).has(f)||this.Et(f,m)||this.et(f,m,MutableDocument.newNoDocument(m,e))}c.Be&&(s.set(f,c.ke()),c.qe())}}));let o=__PRIVATE_documentKeySet();this.He.forEach(((c,f)=>{let h=!0;f.forEachWhile((m=>{const g=this.ot(m);return!g||g.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(o=o.add(c))})),this.je.forEach(((c,f)=>f.setReadTime(e)));const a=new RemoteEvent(e,s,this.Ye,this.je,o);return this.je=__PRIVATE_mutableDocumentMap(),this.Je=__PRIVATE_documentTargetMap(),this.He=__PRIVATE_documentTargetMap(),this.Ye=new SortedMap(__PRIVATE_primitiveComparator),a}Xe(e,s){if(!this.rt(e))return;const o=this.Et(e,s.key)?2:0;this.nt(e).Qe(s.key,o),this.je=this.je.insert(s.key,s),this.Je=this.Je.insert(s.key,this.It(s.key).add(e)),this.He=this.He.insert(s.key,this.dt(s.key).add(e))}et(e,s,o){if(!this.rt(e))return;const a=this.nt(e);this.Et(e,s)?a.Qe(s,1):a.$e(s),this.He=this.He.insert(s,this.dt(s).delete(e)),this.He=this.He.insert(s,this.dt(s).add(e)),o&&(this.je=this.je.insert(s,o))}removeTarget(e){this.ze.delete(e)}_t(e){const s=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let s=this.ze.get(e);return s||(s=new __PRIVATE_TargetState,this.ze.set(e,s)),s}dt(e){let s=this.He.get(e);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.He=this.He.insert(e,s)),s}It(e){let s=this.Je.get(e);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.Je=this.Je.insert(e,s)),s}rt(e){const s=this.ot(e)!==null;return s||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),s}ot(e){const s=this.ze.get(e);return s&&s.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new __PRIVATE_TargetState),this.Ge.getRemoteKeysForTarget(e).forEach((s=>{this.et(e,s,null)}))}Et(e,s){return this.Ge.getRemoteKeysForTarget(e).has(s)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const bt={asc:"ASCENDING",desc:"DESCENDING"},Dt={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ct={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function __PRIVATE_toInt32Proto(n,e){return n.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(n,e){return toTimestamp(n,e.toTimestamp())}function __PRIVATE_fromVersion(n){return __PRIVATE_hardAssert(!!n,49232),SnapshotVersion.fromTimestamp((function(s){const o=__PRIVATE_normalizeTimestamp(s);return new Timestamp(o.seconds,o.nanos)})(n))}function __PRIVATE_toResourceName(n,e){return __PRIVATE_toResourcePath(n,e).canonicalString()}function __PRIVATE_toResourcePath(n,e){const s=(function(a){return new ResourcePath(["projects",a.projectId,"databases",a.database])})(n).child("documents");return e===void 0?s:s.child(e)}function __PRIVATE_fromResourceName(n){const e=ResourcePath.fromString(n);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e),10190,{key:e.toString()}),e}function __PRIVATE_toName(n,e){return __PRIVATE_toResourceName(n.databaseId,e.path)}function fromName(n,e){const s=__PRIVATE_fromResourceName(e);if(s.get(1)!==n.databaseId.projectId)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+n.databaseId.projectId);if(s.get(3)!==n.databaseId.database)throw new FirestoreError(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+n.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(s))}function __PRIVATE_toQueryPath(n,e){return __PRIVATE_toResourceName(n.databaseId,e)}function __PRIVATE_fromQueryPath(n){const e=__PRIVATE_fromResourceName(n);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(n){return new ResourcePath(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(n){return __PRIVATE_hardAssert(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function __PRIVATE_toMutationDocument(n,e,s){return{name:__PRIVATE_toName(n,e),fields:s.value.mapValue.fields}}function __PRIVATE_fromWatchChange(n,e){let s;if("targetChange"in e){e.targetChange;const o=(function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:fail(39313,{state:g})})(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=(function(g,_){return g.useProto3Json?(__PRIVATE_hardAssert(_===void 0||typeof _=="string",58123),ByteString.fromBase64String(_||"")):(__PRIVATE_hardAssert(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array,16193),ByteString.fromUint8Array(_||new Uint8Array))})(n,e.targetChange.resumeToken),f=e.targetChange.cause,h=f&&(function(g){const _=g.code===void 0?N.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(g.code);return new FirestoreError(_,g.message||"")})(f);s=new __PRIVATE_WatchTargetChange(o,a,c,h||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const a=fromName(n,o.document.name),c=__PRIVATE_fromVersion(o.document.updateTime),f=o.document.createTime?__PRIVATE_fromVersion(o.document.createTime):SnapshotVersion.min(),h=new ObjectValue({mapValue:{fields:o.document.fields}}),m=MutableDocument.newFoundDocument(a,c,f,h),g=o.targetIds||[],_=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange(g,_,m.key,m)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const a=fromName(n,o.document),c=o.readTime?__PRIVATE_fromVersion(o.readTime):SnapshotVersion.min(),f=MutableDocument.newNoDocument(a,c),h=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],h,f.key,f)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const a=fromName(n,o.document),c=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],c,a,null)}else{if(!("filter"in e))return fail(11601,{Rt:e});{e.filter;const o=e.filter;o.targetId;const{count:a=0,unchangedNames:c}=o,f=new ExistenceFilter(a,c),h=o.targetId;s=new __PRIVATE_ExistenceFilterChange(h,f)}}return s}function toMutation(n,e){let s;if(e instanceof __PRIVATE_SetMutation)s={update:__PRIVATE_toMutationDocument(n,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)s={delete:__PRIVATE_toName(n,e.key)};else if(e instanceof __PRIVATE_PatchMutation)s={update:__PRIVATE_toMutationDocument(n,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail(16599,{Vt:e.type});s={verify:__PRIVATE_toName(n,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map((o=>(function(c,f){const h=f.transform;if(h instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:f.field.canonicalString(),increment:h.Ae};throw fail(20930,{transform:f.transform})})(0,o)))),e.precondition.isNone||(s.currentDocument=(function(a,c){return c.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:fail(27497)})(n,e.precondition)),s}function __PRIVATE_fromWriteResults(n,e){return n&&n.length>0?(__PRIVATE_hardAssert(e!==void 0,14353),n.map((s=>(function(a,c){let f=a.updateTime?__PRIVATE_fromVersion(a.updateTime):__PRIVATE_fromVersion(c);return f.isEqual(SnapshotVersion.min())&&(f=__PRIVATE_fromVersion(c)),new MutationResult(f,a.transformResults||[])})(s,e)))):[]}function __PRIVATE_toDocumentsTarget(n,e){return{documents:[__PRIVATE_toQueryPath(n,e.path)]}}function __PRIVATE_toQueryTarget(n,e){const s={structuredQuery:{}},o=e.path;let a;e.collectionGroup!==null?(a=o,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),s.structuredQuery.from=[{collectionId:o.lastSegment()}]),s.parent=__PRIVATE_toQueryPath(n,a);const c=(function(g){if(g.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(g,"and"))})(e.filters);c&&(s.structuredQuery.where=c);const f=(function(g){if(g.length!==0)return g.map((_=>(function(T){return{field:__PRIVATE_toFieldPathReference(T.field),direction:__PRIVATE_toDirection(T.dir)}})(_)))})(e.orderBy);f&&(s.structuredQuery.orderBy=f);const h=__PRIVATE_toInt32Proto(n,e.limit);return h!==null&&(s.structuredQuery.limit=h),e.startAt&&(s.structuredQuery.startAt=(function(g){return{before:g.inclusive,values:g.position}})(e.startAt)),e.endAt&&(s.structuredQuery.endAt=(function(g){return{before:!g.inclusive,values:g.position}})(e.endAt)),{ft:s,parent:a}}function __PRIVATE_convertQueryTargetToQuery(n){let e=__PRIVATE_fromQueryPath(n.parent);const s=n.structuredQuery,o=s.from?s.from.length:0;let a=null;if(o>0){__PRIVATE_hardAssert(o===1,65062);const _=s.from[0];_.allDescendants?a=_.collectionId:e=e.child(_.collectionId)}let c=[];s.where&&(c=(function(E){const T=__PRIVATE_fromFilter(E);return T instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(T)?T.getFilters():[T]})(s.where));let f=[];s.orderBy&&(f=(function(E){return E.map((T=>(function(A){return new OrderBy(__PRIVATE_fromFieldPathReference(A.field),(function(V){switch(V){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(T)))})(s.orderBy));let h=null;s.limit&&(h=(function(E){let T;return T=typeof E=="object"?E.value:E,__PRIVATE_isNullOrUndefined(T)?null:T})(s.limit));let m=null;s.startAt&&(m=(function(E){const T=!!E.before,w=E.values||[];return new Bound(w,T)})(s.startAt));let g=null;return s.endAt&&(g=(function(E){const T=!E.before,w=E.values||[];return new Bound(w,T)})(s.endAt)),__PRIVATE_newQuery(e,a,f,c,h,"F",m,g)}function __PRIVATE_toListenRequestLabels(n,e){const s=(function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail(28987,{purpose:a})}})(e.purpose);return s==null?null:{"goog-listen-tags":s}}function __PRIVATE_fromFilter(n){return n.unaryFilter!==void 0?(function(s){switch(s.unaryFilter.op){case"IS_NAN":const o=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return fail(61313);default:return fail(60726)}})(n):n.fieldFilter!==void 0?(function(s){return FieldFilter.create(__PRIVATE_fromFieldPathReference(s.fieldFilter.field),(function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return fail(58110);default:return fail(50506)}})(s.fieldFilter.op),s.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(s){return CompositeFilter.create(s.compositeFilter.filters.map((o=>__PRIVATE_fromFilter(o))),(function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fail(1026)}})(s.compositeFilter.op))})(n):fail(30097,{filter:n})}function __PRIVATE_toDirection(n){return bt[n]}function __PRIVATE_toOperatorName(n){return Dt[n]}function __PRIVATE_toCompositeOperatorName(n){return Ct[n]}function __PRIVATE_toFieldPathReference(n){return{fieldPath:n.canonicalString()}}function __PRIVATE_fromFieldPathReference(n){return FieldPath$1.fromServerFormat(n.fieldPath)}function __PRIVATE_toFilter(n){return n instanceof FieldFilter?(function(s){if(s.op==="=="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:__PRIVATE_toOperatorName(s.op),value:s.value}}})(n):n instanceof CompositeFilter?(function(s){const o=s.getFilters().map((a=>__PRIVATE_toFilter(a)));return o.length===1?o[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(s.op),filters:o}}})(n):fail(54877,{filter:n})}function __PRIVATE_toDocumentMask(n){const e=[];return n.fields.forEach((s=>e.push(s.canonicalString()))),{fieldPaths:e}}function __PRIVATE_isValidResourceName(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,s,o,a,c=SnapshotVersion.min(),f=SnapshotVersion.min(),h=ByteString.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=s,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.yt=e}}function __PRIVATE_fromBundledQuery(n){const e=__PRIVATE_convertQueryTargetToQuery({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this.Cn=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,s){return this.Cn.add(s),PersistencePromise.resolve()}getCollectionParents(e,s){return PersistencePromise.resolve(this.Cn.getEntries(s))}addFieldIndex(e,s){return PersistencePromise.resolve()}deleteFieldIndex(e,s){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,s){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,s){return PersistencePromise.resolve(null)}getIndexType(e,s){return PersistencePromise.resolve(0)}getFieldIndexes(e,s){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,s){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,s){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,s,o){return PersistencePromise.resolve()}updateIndexEntries(e,s){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const s=e.lastSegment(),o=e.popLast(),a=this.index[s]||new SortedSet(ResourcePath.comparator),c=!a.has(o);return this.index[s]=a.add(o),c}has(e){const s=e.lastSegment(),o=e.popLast(),a=this.index[s];return a&&a.has(o)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xt={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Ot=41943040;class LruParams{static withCacheSize(e){return new LruParams(e,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,s,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=s,this.maximumSequenceNumbersToCollect=o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */LruParams.DEFAULT_COLLECTION_PERCENTILE=10,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,LruParams.DEFAULT=new LruParams(Ot,LruParams.DEFAULT_COLLECTION_PERCENTILE,LruParams.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),LruParams.DISABLED=new LruParams(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new __PRIVATE_TargetIdGenerator(0)}static cr(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nt="LruGarbageCollector",Bt=1048576;function __PRIVATE_bufferEntryComparator([n,e],[s,o]){const a=__PRIVATE_primitiveComparator(n,s);return a===0?__PRIVATE_primitiveComparator(e,o):a}class __PRIVATE_RollingSequenceNumberBuffer{constructor(e){this.Ir=e,this.buffer=new SortedSet(__PRIVATE_bufferEntryComparator),this.Er=0}dr(){return++this.Er}Ar(e){const s=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(s);else{const o=this.buffer.last();__PRIVATE_bufferEntryComparator(s,o)<0&&(this.buffer=this.buffer.delete(o).add(s))}}get maxValue(){return this.buffer.last()[0]}}class __PRIVATE_LruScheduler{constructor(e,s,o){this.garbageCollector=e,this.asyncQueue=s,this.localStore=o,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){__PRIVATE_logDebug(Nt,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(s){__PRIVATE_isIndexedDbTransactionError(s)?__PRIVATE_logDebug(Nt,"Ignoring IndexedDB error during garbage collection: ",s):await __PRIVATE_ignoreIfPrimaryLeaseLoss(s)}await this.Vr(3e5)}))}}class __PRIVATE_LruGarbageCollectorImpl{constructor(e,s){this.mr=e,this.params=s}calculateTargetCount(e,s){return this.mr.gr(e).next((o=>Math.floor(s/100*o)))}nthSequenceNumber(e,s){if(s===0)return PersistencePromise.resolve(__PRIVATE_ListenSequence.ce);const o=new __PRIVATE_RollingSequenceNumberBuffer(s);return this.mr.forEachTarget(e,(a=>o.Ar(a.sequenceNumber))).next((()=>this.mr.pr(e,(a=>o.Ar(a))))).next((()=>o.maxValue))}removeTargets(e,s,o){return this.mr.removeTargets(e,s,o)}removeOrphanedDocuments(e,s){return this.mr.removeOrphanedDocuments(e,s)}collect(e,s){return this.params.cacheSizeCollectionThreshold===-1?(__PRIVATE_logDebug("LruGarbageCollector","Garbage collection skipped; disabled"),PersistencePromise.resolve(xt)):this.getCacheSize(e).next((o=>o<this.params.cacheSizeCollectionThreshold?(__PRIVATE_logDebug("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xt):this.yr(e,s)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,s){let o,a,c,f,h,m,g;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(__PRIVATE_logDebug("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),a=this.params.maximumSequenceNumbersToCollect):a=E,f=Date.now(),this.nthSequenceNumber(e,a)))).next((E=>(o=E,h=Date.now(),this.removeTargets(e,o,s)))).next((E=>(c=E,m=Date.now(),this.removeOrphanedDocuments(e,o)))).next((E=>(g=Date.now(),__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-_}ms
	Determined least recently used ${a} in `+(h-f)+`ms
	Removed ${c} targets in `+(m-h)+`ms
	Removed ${E} documents in `+(g-m)+`ms
Total Duration: ${g-_}ms`),PersistencePromise.resolve({didRun:!0,sequenceNumbersCollected:a,targetsRemoved:c,documentsRemoved:E}))))}}function __PRIVATE_newLruGarbageCollector(n,e){return new __PRIVATE_LruGarbageCollectorImpl(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap((e=>e.toString()),((e,s)=>e.isEqual(s))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const o=this.changes.get(s);return o!==void 0?PersistencePromise.resolve(o):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,s,o,a){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,s){let o=null;return this.documentOverlayCache.getOverlay(e,s).next((a=>(o=a,this.remoteDocumentCache.getEntry(e,s)))).next((a=>(o!==null&&__PRIVATE_mutationApplyToLocalView(o.mutation,a,FieldMask.empty(),Timestamp.now()),a)))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next((o=>this.getLocalViewOfDocuments(e,o,__PRIVATE_documentKeySet()).next((()=>o))))}getLocalViewOfDocuments(e,s,o=__PRIVATE_documentKeySet()){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(e,a,s).next((()=>this.computeViews(e,s,a,o).next((c=>{let f=documentMap();return c.forEach(((h,m)=>{f=f.insert(h,m.overlayedDocument)})),f}))))}getOverlayedDocuments(e,s){const o=__PRIVATE_newOverlayMap();return this.populateOverlays(e,o,s).next((()=>this.computeViews(e,s,o,__PRIVATE_documentKeySet())))}populateOverlays(e,s,o){const a=[];return o.forEach((c=>{s.has(c)||a.push(c)})),this.documentOverlayCache.getOverlays(e,a).next((c=>{c.forEach(((f,h)=>{s.set(f,h)}))}))}computeViews(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const f=__PRIVATE_newDocumentKeyMap(),h=(function(){return __PRIVATE_newDocumentKeyMap()})();return s.forEach(((m,g)=>{const _=o.get(g.key);a.has(g.key)&&(_===void 0||_.mutation instanceof __PRIVATE_PatchMutation)?c=c.insert(g.key,g):_!==void 0?(f.set(g.key,_.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(_.mutation,g,_.mutation.getFieldMask(),Timestamp.now())):f.set(g.key,FieldMask.empty())})),this.recalculateAndSaveOverlays(e,c).next((m=>(m.forEach(((g,_)=>f.set(g,_))),s.forEach(((g,_)=>h.set(g,new OverlayedDocument(_,f.get(g)??null)))),h)))}recalculateAndSaveOverlays(e,s){const o=__PRIVATE_newDocumentKeyMap();let a=new SortedMap(((f,h)=>f-h)),c=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next((f=>{for(const h of f)h.keys().forEach((m=>{const g=s.get(m);if(g===null)return;let _=o.get(m)||FieldMask.empty();_=h.applyToLocalView(g,_),o.set(m,_);const E=(a.get(h.batchId)||__PRIVATE_documentKeySet()).add(m);a=a.insert(h.batchId,E)}))})).next((()=>{const f=[],h=a.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),g=m.key,_=m.value,E=__PRIVATE_newMutationMap();_.forEach((T=>{if(!c.has(T)){const w=__PRIVATE_calculateOverlayMutation(s.get(T),o.get(T));w!==null&&E.set(T,w),c=c.add(T)}})),f.push(this.documentOverlayCache.saveOverlays(e,g,E))}return PersistencePromise.waitFor(f)})).next((()=>o))}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next((o=>this.recalculateAndSaveOverlays(e,o)))}getDocumentsMatchingQuery(e,s,o,a){return(function(f){return DocumentKey.isDocumentKey(f.path)&&f.collectionGroup===null&&f.filters.length===0})(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):__PRIVATE_isCollectionGroupQuery(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,o,a):this.getDocumentsMatchingCollectionQuery(e,s,o,a)}getNextDocuments(e,s,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,o,a).next((c=>{const f=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,o.largestBatchId,a-c.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let h=U,m=c;return f.next((g=>PersistencePromise.forEach(g,((_,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),c.get(_)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,_).next((T=>{m=m.insert(_,T)}))))).next((()=>this.populateOverlays(e,g,c))).next((()=>this.computeViews(e,m,g,__PRIVATE_documentKeySet()))).next((_=>({batchId:h,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(_)})))))}))}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new DocumentKey(s)).next((o=>{let a=documentMap();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a}))}getDocumentsMatchingCollectionGroupQuery(e,s,o,a){const c=s.collectionGroup;let f=documentMap();return this.indexManager.getCollectionParents(e,c).next((h=>PersistencePromise.forEach(h,(m=>{const g=(function(E,T){return new __PRIVATE_QueryImpl(T,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(s,m.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,o,a).next((_=>{_.forEach(((E,T)=>{f=f.insert(E,T)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,s,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,o.largestBatchId).next((f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,o,c,a)))).next((f=>{c.forEach(((m,g)=>{const _=g.getKey();f.get(_)===null&&(f=f.insert(_,MutableDocument.newInvalidDocument(_)))}));let h=documentMap();return f.forEach(((m,g)=>{const _=c.get(m);_!==void 0&&__PRIVATE_mutationApplyToLocalView(_.mutation,g,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(s,g)&&(h=h.insert(m,g))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,s){return PersistencePromise.resolve(this.Lr.get(s))}saveBundleMetadata(e,s){return this.Lr.set(s.id,(function(a){return{id:a.id,version:a.version,createTime:__PRIVATE_fromVersion(a.createTime)}})(s)),PersistencePromise.resolve()}getNamedQuery(e,s){return PersistencePromise.resolve(this.kr.get(s))}saveNamedQuery(e,s){return this.kr.set(s.name,(function(a){return{name:a.name,query:__PRIVATE_fromBundledQuery(a.bundledQuery),readTime:__PRIVATE_fromVersion(a.readTime)}})(s)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.qr=new Map}getOverlay(e,s){return PersistencePromise.resolve(this.overlays.get(s))}getOverlays(e,s){const o=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(s,(a=>this.getOverlay(e,a).next((c=>{c!==null&&o.set(a,c)})))).next((()=>o))}saveOverlays(e,s,o){return o.forEach(((a,c)=>{this.St(e,s,c)})),PersistencePromise.resolve()}removeOverlaysForBatchId(e,s,o){const a=this.qr.get(o);return a!==void 0&&(a.forEach((c=>this.overlays=this.overlays.remove(c))),this.qr.delete(o)),PersistencePromise.resolve()}getOverlaysForCollection(e,s,o){const a=__PRIVATE_newOverlayMap(),c=s.length+1,f=new DocumentKey(s.child("")),h=this.overlays.getIteratorFrom(f);for(;h.hasNext();){const m=h.getNext().value,g=m.getKey();if(!s.isPrefixOf(g.path))break;g.path.length===c&&m.largestBatchId>o&&a.set(m.getKey(),m)}return PersistencePromise.resolve(a)}getOverlaysForCollectionGroup(e,s,o,a){let c=new SortedMap(((g,_)=>g-_));const f=this.overlays.getIterator();for(;f.hasNext();){const g=f.getNext().value;if(g.getKey().getCollectionGroup()===s&&g.largestBatchId>o){let _=c.get(g.largestBatchId);_===null&&(_=__PRIVATE_newOverlayMap(),c=c.insert(g.largestBatchId,_)),_.set(g.getKey(),g)}}const h=__PRIVATE_newOverlayMap(),m=c.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach(((g,_)=>h.set(g,_))),!(h.size()>=a)););return PersistencePromise.resolve(h)}St(e,s,o){const a=this.overlays.get(o.key);if(a!==null){const f=this.qr.get(a.largestBatchId).delete(o.key);this.qr.set(a.largestBatchId,f)}this.overlays=this.overlays.insert(o.key,new Overlay(s,o));let c=this.qr.get(s);c===void 0&&(c=__PRIVATE_documentKeySet(),this.qr.set(s,c)),this.qr.set(s,c.add(o.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryGlobalsCache{constructor(){this.sessionToken=ByteString.EMPTY_BYTE_STRING}getSessionToken(e){return PersistencePromise.resolve(this.sessionToken)}setSessionToken(e,s){return this.sessionToken=s,PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Qr=new SortedSet(__PRIVATE_DocReference.$r),this.Ur=new SortedSet(__PRIVATE_DocReference.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,s){const o=new __PRIVATE_DocReference(e,s);this.Qr=this.Qr.add(o),this.Ur=this.Ur.add(o)}Wr(e,s){e.forEach((o=>this.addReference(o,s)))}removeReference(e,s){this.Gr(new __PRIVATE_DocReference(e,s))}zr(e,s){e.forEach((o=>this.removeReference(o,s)))}jr(e){const s=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(s,e),a=new __PRIVATE_DocReference(s,e+1),c=[];return this.Ur.forEachInRange([o,a],(f=>{this.Gr(f),c.push(f.key)})),c}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const s=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(s,e),a=new __PRIVATE_DocReference(s,e+1);let c=__PRIVATE_documentKeySet();return this.Ur.forEachInRange([o,a],(f=>{c=c.add(f.key)})),c}containsKey(e){const s=new __PRIVATE_DocReference(e,0),o=this.Qr.firstAfterOrEqual(s);return o!==null&&e.isEqual(o.key)}}class __PRIVATE_DocReference{constructor(e,s){this.key=e,this.Yr=s}static $r(e,s){return DocumentKey.comparator(e.key,s.key)||__PRIVATE_primitiveComparator(e.Yr,s.Yr)}static Kr(e,s){return __PRIVATE_primitiveComparator(e.Yr,s.Yr)||DocumentKey.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.tr=1,this.Zr=new SortedSet(__PRIVATE_DocReference.$r)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,o,a){const c=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new MutationBatch(c,s,o,a);this.mutationQueue.push(f);for(const h of a)this.Zr=this.Zr.add(new __PRIVATE_DocReference(h.key,c)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return PersistencePromise.resolve(f)}lookupMutationBatch(e,s){return PersistencePromise.resolve(this.Xr(s))}getNextMutationBatchAfterBatchId(e,s){const o=s+1,a=this.ei(o),c=a<0?0:a;return PersistencePromise.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?j:this.tr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const o=new __PRIVATE_DocReference(s,0),a=new __PRIVATE_DocReference(s,Number.POSITIVE_INFINITY),c=[];return this.Zr.forEachInRange([o,a],(f=>{const h=this.Xr(f.Yr);c.push(h)})),PersistencePromise.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,s){let o=new SortedSet(__PRIVATE_primitiveComparator);return s.forEach((a=>{const c=new __PRIVATE_DocReference(a,0),f=new __PRIVATE_DocReference(a,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([c,f],(h=>{o=o.add(h.Yr)}))})),PersistencePromise.resolve(this.ti(o))}getAllMutationBatchesAffectingQuery(e,s){const o=s.path,a=o.length+1;let c=o;DocumentKey.isDocumentKey(c)||(c=c.child(""));const f=new __PRIVATE_DocReference(new DocumentKey(c),0);let h=new SortedSet(__PRIVATE_primitiveComparator);return this.Zr.forEachWhile((m=>{const g=m.key.path;return!!o.isPrefixOf(g)&&(g.length===a&&(h=h.add(m.Yr)),!0)}),f),PersistencePromise.resolve(this.ti(h))}ti(e){const s=[];return e.forEach((o=>{const a=this.Xr(o);a!==null&&s.push(a)})),s}removeMutationBatch(e,s){__PRIVATE_hardAssert(this.ni(s.batchId,"removed")===0,55003),this.mutationQueue.shift();let o=this.Zr;return PersistencePromise.forEach(s.mutations,(a=>{const c=new __PRIVATE_DocReference(a.key,s.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)})).next((()=>{this.Zr=o}))}ir(e){}containsKey(e,s){const o=new __PRIVATE_DocReference(s,0),a=this.Zr.firstAfterOrEqual(o);return PersistencePromise.resolve(s.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}ni(e,s){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const s=this.ei(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.ri=e,this.docs=(function(){return new SortedMap(DocumentKey.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const o=s.key,a=this.docs.get(o),c=a?a.size:0,f=this.ri(s);return this.docs=this.docs.insert(o,{document:s.mutableCopy(),size:f}),this.size+=f-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const o=this.docs.get(s);return PersistencePromise.resolve(o?o.document.mutableCopy():MutableDocument.newInvalidDocument(s))}getEntries(e,s){let o=__PRIVATE_mutableDocumentMap();return s.forEach((a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():MutableDocument.newInvalidDocument(a))})),PersistencePromise.resolve(o)}getDocumentsMatchingQuery(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const f=s.path,h=new DocumentKey(f.child("__id-9223372036854775808__")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:g,value:{document:_}}=m.getNext();if(!f.isPrefixOf(g.path))break;g.path.length>f.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(_),o)<=0||(a.has(_.key)||__PRIVATE_queryMatches(s,_))&&(c=c.insert(_.key,_.mutableCopy()))}return PersistencePromise.resolve(c)}getAllFromCollectionGroup(e,s,o,a){fail(9500)}ii(e,s){return PersistencePromise.forEach(this.docs,(o=>s(o)))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.Nr=e}applyChanges(e){const s=[];return this.changes.forEach(((o,a)=>{a.isValidDocument()?s.push(this.Nr.addEntry(e,a)):this.Nr.removeEntry(o)})),PersistencePromise.waitFor(s)}getFromCache(e,s){return this.Nr.getEntry(e,s)}getAllFromCache(e,s){return this.Nr.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.si=new ObjectMap((s=>__PRIVATE_canonifyTarget(s)),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.oi=0,this._i=new __PRIVATE_ReferenceSet,this.targetCount=0,this.ai=__PRIVATE_TargetIdGenerator.ur()}forEachTarget(e,s){return this.si.forEach(((o,a)=>s(a))),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,s,o){return o&&(this.lastRemoteSnapshotVersion=o),s>this.oi&&(this.oi=s),PersistencePromise.resolve()}Pr(e){this.si.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.ai=new __PRIVATE_TargetIdGenerator(s),this.highestTargetId=s),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,s){return this.Pr(s),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,s){return this.Pr(s),PersistencePromise.resolve()}removeTargetData(e,s){return this.si.delete(s.target),this._i.jr(s.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,s,o){let a=0;const c=[];return this.si.forEach(((f,h)=>{h.sequenceNumber<=s&&o.get(h.targetId)===null&&(this.si.delete(f),c.push(this.removeMatchingKeysForTargetId(e,h.targetId)),a++)})),PersistencePromise.waitFor(c).next((()=>a))}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,s){const o=this.si.get(s)||null;return PersistencePromise.resolve(o)}addMatchingKeys(e,s,o){return this._i.Wr(s,o),PersistencePromise.resolve()}removeMatchingKeys(e,s,o){this._i.zr(s,o);const a=this.persistence.referenceDelegate,c=[];return a&&s.forEach((f=>{c.push(a.markPotentiallyOrphaned(e,f))})),PersistencePromise.waitFor(c)}removeMatchingKeysForTargetId(e,s){return this._i.jr(s),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,s){const o=this._i.Hr(s);return PersistencePromise.resolve(o)}containsKey(e,s){return PersistencePromise.resolve(this._i.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,s){this.ui={},this.overlays={},this.ci=new __PRIVATE_ListenSequence(0),this.li=!1,this.li=!0,this.hi=new __PRIVATE_MemoryGlobalsCache,this.referenceDelegate=e(this),this.Pi=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=(function(a){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(a)})((o=>this.referenceDelegate.Ti(o))),this.serializer=new __PRIVATE_LocalSerializer(s),this.Ii=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let o=this.ui[e.toKey()];return o||(o=new __PRIVATE_MemoryMutationQueue(s,this.referenceDelegate),this.ui[e.toKey()]=o),o}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,s,o){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const a=new __PRIVATE_MemoryTransaction(this.ci.next());return this.referenceDelegate.Ei(),o(a).next((c=>this.referenceDelegate.di(a).next((()=>c)))).toPromise().then((c=>(a.raiseOnCommittedEvent(),c)))}Ai(e,s){return PersistencePromise.or(Object.values(this.ui).map((o=>()=>o.containsKey(e,s))))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.Ri=new __PRIVATE_ReferenceSet,this.Vi=null}static mi(e){return new __PRIVATE_MemoryEagerDelegate(e)}get fi(){if(this.Vi)return this.Vi;throw fail(60996)}addReference(e,s,o){return this.Ri.addReference(o,s),this.fi.delete(o.toString()),PersistencePromise.resolve()}removeReference(e,s,o){return this.Ri.removeReference(o,s),this.fi.add(o.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,s){return this.fi.add(s.toString()),PersistencePromise.resolve()}removeTarget(e,s){this.Ri.jr(s.targetId).forEach((a=>this.fi.add(a.toString())));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,s.targetId).next((a=>{a.forEach((c=>this.fi.add(c.toString())))})).next((()=>o.removeTargetData(e,s)))}Ei(){this.Vi=new Set}di(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.fi,(o=>{const a=DocumentKey.fromPath(o);return this.gi(e,a).next((c=>{c||s.removeEntry(a,SnapshotVersion.min())}))})).next((()=>(this.Vi=null,s.apply(e))))}updateLimboDocument(e,s){return this.gi(e,s).next((o=>{o?this.fi.delete(s.toString()):this.fi.add(s.toString())}))}Ti(e){return 0}gi(e,s){return PersistencePromise.or([()=>PersistencePromise.resolve(this.Ri.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Ai(e,s)])}}class __PRIVATE_MemoryLruDelegate{constructor(e,s){this.persistence=e,this.pi=new ObjectMap((o=>__PRIVATE_encodeResourcePath(o.path)),((o,a)=>o.isEqual(a))),this.garbageCollector=__PRIVATE_newLruGarbageCollector(this,s)}static mi(e,s){return new __PRIVATE_MemoryLruDelegate(e,s)}Ei(){}di(e){return PersistencePromise.resolve()}forEachTarget(e,s){return this.persistence.getTargetCache().forEachTarget(e,s)}gr(e){const s=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((o=>s.next((a=>o+a))))}wr(e){let s=0;return this.pr(e,(o=>{s++})).next((()=>s))}pr(e,s){return PersistencePromise.forEach(this.pi,((o,a)=>this.br(e,o,a).next((c=>c?PersistencePromise.resolve():s(a)))))}removeTargets(e,s,o){return this.persistence.getTargetCache().removeTargets(e,s,o)}removeOrphanedDocuments(e,s){let o=0;const a=this.persistence.getRemoteDocumentCache(),c=a.newChangeBuffer();return a.ii(e,(f=>this.br(e,f,s).next((h=>{h||(o++,c.removeEntry(f,SnapshotVersion.min()))})))).next((()=>c.apply(e))).next((()=>o))}markPotentiallyOrphaned(e,s){return this.pi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}removeTarget(e,s){const o=s.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,o)}addReference(e,s,o){return this.pi.set(o,e.currentSequenceNumber),PersistencePromise.resolve()}removeReference(e,s,o){return this.pi.set(o,e.currentSequenceNumber),PersistencePromise.resolve()}updateLimboDocument(e,s){return this.pi.set(s,e.currentSequenceNumber),PersistencePromise.resolve()}Ti(e){let s=e.key.toString().length;return e.isFoundDocument()&&(s+=__PRIVATE_estimateByteSize(e.data.value)),s}br(e,s,o){return PersistencePromise.or([()=>this.persistence.Ai(e,s),()=>this.persistence.getTargetCache().containsKey(e,s),()=>{const a=this.pi.get(s);return PersistencePromise.resolve(a!==void 0&&a>o)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,s,o,a){this.targetId=e,this.fromCache=s,this.Es=o,this.ds=a}static As(e,s){let o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();for(const c of s.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new __PRIVATE_LocalViewChanges(e,s.fromCache,o,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return isSafari()?8:__PRIVATE_getAndroidVersion(getUA())>0?6:4})()}initialize(e,s){this.ps=e,this.indexManager=s,this.Rs=!0}getDocumentsMatchingQuery(e,s,o,a){const c={result:null};return this.ys(e,s).next((f=>{c.result=f})).next((()=>{if(!c.result)return this.ws(e,s,a,o).next((f=>{c.result=f}))})).next((()=>{if(c.result)return;const f=new QueryContext;return this.Ss(e,s,f).next((h=>{if(c.result=h,this.Vs)return this.bs(e,s,f,h.size)}))})).next((()=>c.result))}bs(e,s,o,a){return o.documentReadCount<this.fs?(__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(s),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(s),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.gs*a?(__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(s))):PersistencePromise.resolve())}ys(e,s){if(__PRIVATE_queryMatchesAllDocuments(s))return PersistencePromise.resolve(null);let o=__PRIVATE_queryToTarget(s);return this.indexManager.getIndexType(e,o).next((a=>a===0?null:(s.limit!==null&&a===1&&(s=__PRIVATE_queryWithLimit(s,null,"F"),o=__PRIVATE_queryToTarget(s)),this.indexManager.getDocumentsMatchingTarget(e,o).next((c=>{const f=__PRIVATE_documentKeySet(...c);return this.ps.getDocuments(e,f).next((h=>this.indexManager.getMinOffset(e,o).next((m=>{const g=this.Ds(s,h);return this.Cs(s,g,f,m.readTime)?this.ys(e,__PRIVATE_queryWithLimit(s,null,"F")):this.vs(e,g,s,m)}))))})))))}ws(e,s,o,a){return __PRIVATE_queryMatchesAllDocuments(s)||a.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.ps.getDocuments(e,o).next((c=>{const f=this.Ds(s,c);return this.Cs(s,f,o,a)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),__PRIVATE_stringifyQuery(s)),this.vs(e,f,s,__PRIVATE_newIndexOffsetSuccessorFromReadTime(a,U)).next((h=>h)))}))}Ds(e,s){let o=new SortedSet(__PRIVATE_newQueryComparator(e));return s.forEach(((a,c)=>{__PRIVATE_queryMatches(e,c)&&(o=o.add(c))})),o}Cs(e,s,o,a){if(e.limit===null)return!1;if(o.size!==s.size)return!0;const c=e.limitType==="F"?s.last():s.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ss(e,s,o){return __PRIVATE_getLogLevel()<=LogLevel$1.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(s)),this.ps.getDocumentsMatchingQuery(e,s,IndexOffset.min(),o)}vs(e,s,o,a){return this.ps.getDocumentsMatchingQuery(e,o,a).next((c=>(s.forEach((f=>{c=c.insert(f.key,f)})),c)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ut="LocalStore",Kt=3e8;class __PRIVATE_LocalStoreImpl{constructor(e,s,o,a){this.persistence=e,this.Fs=s,this.serializer=a,this.Ms=new SortedMap(__PRIVATE_primitiveComparator),this.xs=new ObjectMap((c=>__PRIVATE_canonifyTarget(c)),__PRIVATE_targetEquals),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(o)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(s=>e.collect(s,this.Ms)))}}function __PRIVATE_newLocalStore(n,e,s,o){return new __PRIVATE_LocalStoreImpl(n,e,s,o)}async function __PRIVATE_localStoreHandleUserChange(n,e){const s=__PRIVATE_debugCast(n);return await s.persistence.runTransaction("Handle user change","readonly",(o=>{let a;return s.mutationQueue.getAllMutationBatches(o).next((c=>(a=c,s.Bs(e),s.mutationQueue.getAllMutationBatches(o)))).next((c=>{const f=[],h=[];let m=__PRIVATE_documentKeySet();for(const g of a){f.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}for(const g of c){h.push(g.batchId);for(const _ of g.mutations)m=m.add(_.key)}return s.localDocuments.getDocuments(o,m).next((g=>({Ls:g,removedBatchIds:f,addedBatchIds:h})))}))}))}function __PRIVATE_localStoreAcknowledgeBatch(n,e){const s=__PRIVATE_debugCast(n);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",(o=>{const a=e.batch.keys(),c=s.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,m,g,_){const E=g.batch,T=E.keys();let w=PersistencePromise.resolve();return T.forEach((A=>{w=w.next((()=>_.getEntry(m,A))).next((R=>{const V=g.docVersions.get(A);__PRIVATE_hardAssert(V!==null,48541),R.version.compareTo(V)<0&&(E.applyToRemoteDocument(R,g),R.isValidDocument()&&(R.setReadTime(g.commitVersion),_.addEntry(R)))}))})),w.next((()=>h.mutationQueue.removeMutationBatch(m,E)))})(s,o,e,c).next((()=>c.apply(o))).next((()=>s.mutationQueue.performConsistencyCheck(o))).next((()=>s.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId))).next((()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,(function(h){let m=__PRIVATE_documentKeySet();for(let g=0;g<h.mutationResults.length;++g)h.mutationResults[g].transformResults.length>0&&(m=m.add(h.batch.mutations[g].key));return m})(e)))).next((()=>s.localDocuments.getDocuments(o,a)))}))}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(n){const e=__PRIVATE_debugCast(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(s=>e.Pi.getLastRemoteSnapshotVersion(s)))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(n,e){const s=__PRIVATE_debugCast(n),o=e.snapshotVersion;let a=s.Ms;return s.persistence.runTransaction("Apply remote event","readwrite-primary",(c=>{const f=s.Ns.newChangeBuffer({trackRemovals:!0});a=s.Ms;const h=[];e.targetChanges.forEach(((_,E)=>{const T=a.get(E);if(!T)return;h.push(s.Pi.removeMatchingKeys(c,_.removedDocuments,E).next((()=>s.Pi.addMatchingKeys(c,_.addedDocuments,E))));let w=T.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(E)!==null?w=w.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):_.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(_.resumeToken,o)),a=a.insert(E,w),(function(R,V,te){return R.resumeToken.approximateByteSize()===0||V.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=Kt?!0:te.addedDocuments.size+te.modifiedDocuments.size+te.removedDocuments.size>0})(T,w,_)&&h.push(s.Pi.updateTargetData(c,w))}));let m=__PRIVATE_mutableDocumentMap(),g=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach((_=>{e.resolvedLimboDocuments.has(_)&&h.push(s.persistence.referenceDelegate.updateLimboDocument(c,_))})),h.push(__PRIVATE_populateDocumentChangeBuffer(c,f,e.documentUpdates).next((_=>{m=_.ks,g=_.qs}))),!o.isEqual(SnapshotVersion.min())){const _=s.Pi.getLastRemoteSnapshotVersion(c).next((E=>s.Pi.setTargetsMetadata(c,c.currentSequenceNumber,o)));h.push(_)}return PersistencePromise.waitFor(h).next((()=>f.apply(c))).next((()=>s.localDocuments.getLocalViewOfDocuments(c,m,g))).next((()=>m))})).then((c=>(s.Ms=a,c)))}function __PRIVATE_populateDocumentChangeBuffer(n,e,s){let o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return s.forEach((c=>o=o.add(c))),e.getEntries(n,o).next((c=>{let f=__PRIVATE_mutableDocumentMap();return s.forEach(((h,m)=>{const g=c.get(h);m.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(h)),m.isNoDocument()&&m.version.isEqual(SnapshotVersion.min())?(e.removeEntry(h,m.readTime),f=f.insert(h,m)):!g.isValidDocument()||m.version.compareTo(g.version)>0||m.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry(m),f=f.insert(h,m)):__PRIVATE_logDebug(Ut,"Ignoring outdated watch update for ",h,". Current version:",g.version," Watch version:",m.version)})),{ks:f,qs:a}}))}function __PRIVATE_localStoreGetNextMutationBatch(n,e){const s=__PRIVATE_debugCast(n);return s.persistence.runTransaction("Get next mutation batch","readonly",(o=>(e===void 0&&(e=j),s.mutationQueue.getNextMutationBatchAfterBatchId(o,e))))}function __PRIVATE_localStoreAllocateTarget(n,e){const s=__PRIVATE_debugCast(n);return s.persistence.runTransaction("Allocate target","readwrite",(o=>{let a;return s.Pi.getTargetData(o,e).next((c=>c?(a=c,PersistencePromise.resolve(a)):s.Pi.allocateTargetId(o).next((f=>(a=new TargetData(e,f,"TargetPurposeListen",o.currentSequenceNumber),s.Pi.addTargetData(o,a).next((()=>a)))))))})).then((o=>{const a=s.Ms.get(o.targetId);return(a===null||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(s.Ms=s.Ms.insert(o.targetId,o),s.xs.set(e,o.targetId)),o}))}async function __PRIVATE_localStoreReleaseTarget(n,e,s){const o=__PRIVATE_debugCast(n),a=o.Ms.get(e),c=s?"readwrite":"readwrite-primary";try{s||await o.persistence.runTransaction("Release target",c,(f=>o.persistence.referenceDelegate.removeTarget(f,a)))}catch(f){if(!__PRIVATE_isIndexedDbTransactionError(f))throw f;__PRIVATE_logDebug(Ut,`Failed to update sequence numbers for target ${e}: ${f}`)}o.Ms=o.Ms.remove(e),o.xs.delete(a.target)}function __PRIVATE_localStoreExecuteQuery(n,e,s){const o=__PRIVATE_debugCast(n);let a=SnapshotVersion.min(),c=__PRIVATE_documentKeySet();return o.persistence.runTransaction("Execute query","readwrite",(f=>(function(m,g,_){const E=__PRIVATE_debugCast(m),T=E.xs.get(_);return T!==void 0?PersistencePromise.resolve(E.Ms.get(T)):E.Pi.getTargetData(g,_)})(o,f,__PRIVATE_queryToTarget(e)).next((h=>{if(h)return a=h.lastLimboFreeSnapshotVersion,o.Pi.getMatchingKeysForTargetId(f,h.targetId).next((m=>{c=m}))})).next((()=>o.Fs.getDocumentsMatchingQuery(f,e,s?a:SnapshotVersion.min(),s?c:__PRIVATE_documentKeySet()))).next((h=>(__PRIVATE_setMaxReadTime(o,__PRIVATE_queryCollectionGroup(e),h),{documents:h,Qs:c})))))}function __PRIVATE_setMaxReadTime(n,e,s){let o=n.Os.get(e)||SnapshotVersion.min();s.forEach(((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)})),n.Os.set(e,o)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.Mo=new __PRIVATE_LocalClientState,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,o){}addLocalQueryTarget(e,s=!0){return s&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,s,o){this.xo[e]=s}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,s,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jt="ConnectivityMonitor";class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){__PRIVATE_logDebug(Jt,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){__PRIVATE_logDebug(Jt,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ht=null;function __PRIVATE_generateUniqueDebugId(){return Ht===null?Ht=(function(){return 268435456+Math.round(2147483648*Math.random())})():Ht++,"0x"+Ht.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="RestConnection",Zt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class __PRIVATE_RestConnection{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const s=e.ssl?"https":"http",o=encodeURIComponent(this.databaseId.projectId),a=encodeURIComponent(this.databaseId.database);this.Uo=s+"://"+e.host,this.Ko=`projects/${o}/databases/${a}`,this.Wo=this.databaseId.database===lt?`project_id=${o}`:`project_id=${o}&database_id=${a}`}Go(e,s,o,a,c){const f=__PRIVATE_generateUniqueDebugId(),h=this.zo(e,s.toUriEncodedString());__PRIVATE_logDebug(Yt,`Sending RPC '${e}' ${f}:`,h,o);const m={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(m,a,c);const{host:g}=new URL(h),_=isCloudWorkstation(g);return this.Jo(e,h,m,o,_).then((E=>(__PRIVATE_logDebug(Yt,`Received RPC '${e}' ${f}: `,E),E)),(E=>{throw __PRIVATE_logWarn(Yt,`RPC '${e}' ${f} failed with error: `,E,"url: ",h,"request:",o),E}))}Ho(e,s,o,a,c,f){return this.Go(e,s,o,a,c)}jo(e,s,o){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+x})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),s&&s.headers.forEach(((a,c)=>e[c]=a)),o&&o.headers.forEach(((a,c)=>e[c]=a))}zo(e,s){const o=Zt[e];return`${this.Uo}/v1/${s}:${o}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xt="WebChannelConnection";class __PRIVATE_WebChannelConnection extends __PRIVATE_RestConnection{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,s,o,a,c){const f=__PRIVATE_generateUniqueDebugId();return new Promise(((h,m)=>{const g=new XhrIo;g.setWithCredentials(!0),g.listenOnce(EventType.COMPLETE,(()=>{try{switch(g.getLastErrorCode()){case ErrorCode.NO_ERROR:const E=g.getResponseJson();__PRIVATE_logDebug(Xt,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(E)),h(E);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Xt,`RPC '${e}' ${f} timed out`),m(new FirestoreError(N.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const T=g.getStatus();if(__PRIVATE_logDebug(Xt,`RPC '${e}' ${f} failed with status:`,T,"response text:",g.getResponseText()),T>0){let w=g.getResponseJson();Array.isArray(w)&&(w=w[0]);const A=w?.error;if(A&&A.status&&A.message){const R=(function(te){const se=te.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(se)>=0?se:N.UNKNOWN})(A.status);m(new FirestoreError(R,A.message))}else m(new FirestoreError(N.UNKNOWN,"Server responded with status "+g.getStatus()))}else m(new FirestoreError(N.UNAVAILABLE,"Connection failed."));break;default:fail(9055,{l_:e,streamId:f,h_:g.getLastErrorCode(),P_:g.getLastError()})}}finally{__PRIVATE_logDebug(Xt,`RPC '${e}' ${f} completed.`)}}));const _=JSON.stringify(a);__PRIVATE_logDebug(Xt,`RPC '${e}' ${f} sending request:`,a),g.send(s,"POST",_,o,15)}))}T_(e,s,o){const a=__PRIVATE_generateUniqueDebugId(),c=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=createWebChannelTransport(),h=getStatEventTarget(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(m.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(m.useFetchStreams=!0),this.jo(m.initMessageHeaders,s,o),m.encodeInitMessageHeaders=!0;const _=c.join("");__PRIVATE_logDebug(Xt,`Creating RPC '${e}' stream ${a}: ${_}`,m);const E=f.createWebChannel(_,m);this.I_(E);let T=!1,w=!1;const A=new __PRIVATE_StreamBridge({Yo:V=>{w?__PRIVATE_logDebug(Xt,`Not sending because RPC '${e}' stream ${a} is closed:`,V):(T||(__PRIVATE_logDebug(Xt,`Opening RPC '${e}' stream ${a} transport.`),E.open(),T=!0),__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} sending:`,V),E.send(V))},Zo:()=>E.close()}),R=(V,te,se)=>{V.listen(te,(re=>{try{se(re)}catch(ye){setTimeout((()=>{throw ye}),0)}}))};return R(E,WebChannel.EventType.OPEN,(()=>{w||(__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} transport opened.`),A.o_())})),R(E,WebChannel.EventType.CLOSE,(()=>{w||(w=!0,__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} transport closed`),A.a_(),this.E_(E))})),R(E,WebChannel.EventType.ERROR,(V=>{w||(w=!0,__PRIVATE_logWarn(Xt,`RPC '${e}' stream ${a} transport errored. Name:`,V.name,"Message:",V.message),A.a_(new FirestoreError(N.UNAVAILABLE,"The operation could not be completed")))})),R(E,WebChannel.EventType.MESSAGE,(V=>{if(!w){const te=V.data[0];__PRIVATE_hardAssert(!!te,16349);const se=te,re=se?.error||se[0]?.error;if(re){__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} received error:`,re);const ye=re.status;let D=(function(H){const X=pt[H];if(X!==void 0)return __PRIVATE_mapCodeFromRpcCode(X)})(ye),ae=re.message;D===void 0&&(D=N.INTERNAL,ae="Unknown error status: "+ye+" with message "+re.message),w=!0,A.a_(new FirestoreError(D,ae)),E.close()}else __PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} received:`,te),A.u_(te)}})),R(h,Event.STAT_EVENT,(V=>{V.stat===Stat$1.PROXY?__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} detected buffering proxy`):V.stat===Stat$1.NOPROXY&&__PRIVATE_logDebug(Xt,`RPC '${e}' stream ${a} detected no buffering proxy`)})),setTimeout((()=>{A.__()}),0),A}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((s=>s===e))}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(n){return new JsonProtoSerializer(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,s,o=1e3,a=1.5,c=6e4){this.Mi=e,this.timerId=s,this.d_=o,this.A_=a,this.R_=c,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const s=Math.floor(this.V_+this.y_()),o=Math.max(0,Date.now()-this.f_),a=Math.max(0,s-o);a>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.V_} ms, delay with jitter: ${s} ms, last attempt: ${o} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,a,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const en="PersistentStream";class __PRIVATE_PersistentStream{constructor(e,s,o,a,c,f,h,m){this.Mi=e,this.S_=o,this.b_=a,this.connection=c,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new __PRIVATE_ExponentialBackoff(e,s)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,s){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():s&&s.code===N.RESOURCE_EXHAUSTED?(__PRIVATE_logError(s.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):s&&s.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(s)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),s=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([o,a])=>{this.D_===s&&this.G_(o,a)}),(o=>{e((()=>{const a=new FirestoreError(N.UNKNOWN,"Fetching auth token failed: "+o.message);return this.z_(a)}))}))}G_(e,s){const o=this.W_(this.D_);this.stream=this.j_(e,s),this.stream.Xo((()=>{o((()=>this.listener.Xo()))})),this.stream.t_((()=>{o((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((a=>{o((()=>this.z_(a)))})),this.stream.onMessage((a=>{o((()=>++this.F_==1?this.J_(a):this.onNext(a)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return __PRIVATE_logDebug(en,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return s=>{this.Mi.enqueueAndForget((()=>this.D_===e?s():(__PRIVATE_logDebug(en,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,s,o,a,c,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,o,a,f),this.serializer=c}j_(e,s){return this.connection.T_("Listen",e,s)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const s=__PRIVATE_fromWatchChange(this.serializer,e),o=(function(c){if(!("targetChange"in c))return SnapshotVersion.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?SnapshotVersion.min():f.readTime?__PRIVATE_fromVersion(f.readTime):SnapshotVersion.min()})(e);return this.listener.H_(s,o)}Y_(e){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.addTarget=(function(c,f){let h;const m=f.target;if(h=__PRIVATE_targetIsDocumentTarget(m)?{documents:__PRIVATE_toDocumentsTarget(c,m)}:{query:__PRIVATE_toQueryTarget(c,m).ft},h.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){h.resumeToken=__PRIVATE_toBytes(c,f.resumeToken);const g=__PRIVATE_toInt32Proto(c,f.expectedCount);g!==null&&(h.expectedCount=g)}else if(f.snapshotVersion.compareTo(SnapshotVersion.min())>0){h.readTime=toTimestamp(c,f.snapshotVersion.toTimestamp());const g=__PRIVATE_toInt32Proto(c,f.expectedCount);g!==null&&(h.expectedCount=g)}return h})(this.serializer,e);const o=__PRIVATE_toListenRequestLabels(this.serializer,e);o&&(s.labels=o),this.q_(s)}Z_(e){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.removeTarget=e,this.q_(s)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,s,o,a,c,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,o,a,f),this.serializer=c}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,s){return this.connection.T_("Write",e,s)}J_(e){return __PRIVATE_hardAssert(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,__PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){__PRIVATE_hardAssert(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const s=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),o=__PRIVATE_fromVersion(e.commitTime);return this.listener.na(o,s)}ra(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.q_(e)}ea(e){const s={streamToken:this.lastStreamToken,writes:e.map((o=>toMutation(this.serializer,o)))};this.q_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Datastore{}class __PRIVATE_DatastoreImpl extends Datastore{constructor(e,s,o,a){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=o,this.serializer=a,this.ia=!1}sa(){if(this.ia)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,s,o,a){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,f])=>this.connection.Go(e,__PRIVATE_toResourcePath(s,o),a,c,f))).catch((c=>{throw c.name==="FirebaseError"?(c.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new FirestoreError(N.UNKNOWN,c.toString())}))}Ho(e,s,o,a,c){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,h])=>this.connection.Ho(e,__PRIVATE_toResourcePath(s,o),a,f,h,c))).catch((f=>{throw f.name==="FirebaseError"?(f.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new FirestoreError(N.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(__PRIVATE_logError(s),this.aa=!1):__PRIVATE_logDebug("OnlineStateTracker",s)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn="RemoteStore";class __PRIVATE_RemoteStoreImpl{constructor(e,s,o,a,c){this.localStore=e,this.datastore=s,this.asyncQueue=o,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=c,this.Aa.Oo((f=>{o.enqueueAndForget((async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug(tn,"Restarting streams for network reachability change."),await(async function(m){const g=__PRIVATE_debugCast(m);g.Ea.add(4),await __PRIVATE_disableNetworkInternal(g),g.Ra.set("Unknown"),g.Ea.delete(4),await __PRIVATE_enableNetworkInternal(g)})(this))}))})),this.Ra=new __PRIVATE_OnlineStateTracker(o,a)}}async function __PRIVATE_enableNetworkInternal(n){if(__PRIVATE_canUseNetwork(n))for(const e of n.da)await e(!0)}async function __PRIVATE_disableNetworkInternal(n){for(const e of n.da)await e(!1)}function __PRIVATE_remoteStoreListen(n,e){const s=__PRIVATE_debugCast(n);s.Ia.has(e.targetId)||(s.Ia.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(s)?__PRIVATE_startWatchStream(s):__PRIVATE_ensureWatchStream(s).O_()&&__PRIVATE_sendWatchRequest(s,e))}function __PRIVATE_remoteStoreUnlisten(n,e){const s=__PRIVATE_debugCast(n),o=__PRIVATE_ensureWatchStream(s);s.Ia.delete(e),o.O_()&&__PRIVATE_sendUnwatchRequest(s,e),s.Ia.size===0&&(o.O_()?o.L_():__PRIVATE_canUseNetwork(s)&&s.Ra.set("Unknown"))}function __PRIVATE_sendWatchRequest(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const s=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}__PRIVATE_ensureWatchStream(n).Y_(e)}function __PRIVATE_sendUnwatchRequest(n,e){n.Va.Ue(e),__PRIVATE_ensureWatchStream(n).Z_(e)}function __PRIVATE_startWatchStream(n){n.Va=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(n).start(),n.Ra.ua()}function __PRIVATE_shouldStartWatchStream(n){return __PRIVATE_canUseNetwork(n)&&!__PRIVATE_ensureWatchStream(n).x_()&&n.Ia.size>0}function __PRIVATE_canUseNetwork(n){return __PRIVATE_debugCast(n).Ea.size===0}function __PRIVATE_cleanUpWatchStreamState(n){n.Va=void 0}async function __PRIVATE_onWatchStreamConnected(n){n.Ra.set("Online")}async function __PRIVATE_onWatchStreamOpen(n){n.Ia.forEach(((e,s)=>{__PRIVATE_sendWatchRequest(n,e)}))}async function __PRIVATE_onWatchStreamClose(n,e){__PRIVATE_cleanUpWatchStreamState(n),__PRIVATE_shouldStartWatchStream(n)?(n.Ra.ha(e),__PRIVATE_startWatchStream(n)):n.Ra.set("Unknown")}async function __PRIVATE_onWatchStreamChange(n,e,s){if(n.Ra.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await(async function(a,c){const f=c.cause;for(const h of c.targetIds)a.Ia.has(h)&&(await a.remoteSyncer.rejectListen(h,f),a.Ia.delete(h),a.Va.removeTarget(h))})(n,e)}catch(o){__PRIVATE_logDebug(tn,"Failed to remove targets %s: %s ",e.targetIds.join(","),o),await __PRIVATE_disableNetworkUntilRecovery(n,o)}else if(e instanceof __PRIVATE_DocumentWatchChange?n.Va.Ze(e):e instanceof __PRIVATE_ExistenceFilterChange?n.Va.st(e):n.Va.tt(e),!s.isEqual(SnapshotVersion.min()))try{const o=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(n.localStore);s.compareTo(o)>=0&&await(function(c,f){const h=c.Va.Tt(f);return h.targetChanges.forEach(((m,g)=>{if(m.resumeToken.approximateByteSize()>0){const _=c.Ia.get(g);_&&c.Ia.set(g,_.withResumeToken(m.resumeToken,f))}})),h.targetMismatches.forEach(((m,g)=>{const _=c.Ia.get(m);if(!_)return;c.Ia.set(m,_.withResumeToken(ByteString.EMPTY_BYTE_STRING,_.snapshotVersion)),__PRIVATE_sendUnwatchRequest(c,m);const E=new TargetData(_.target,m,g,_.sequenceNumber);__PRIVATE_sendWatchRequest(c,E)})),c.remoteSyncer.applyRemoteEvent(h)})(n,s)}catch(o){__PRIVATE_logDebug(tn,"Failed to raise snapshot:",o),await __PRIVATE_disableNetworkUntilRecovery(n,o)}}async function __PRIVATE_disableNetworkUntilRecovery(n,e,s){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;n.Ea.add(1),await __PRIVATE_disableNetworkInternal(n),n.Ra.set("Offline"),s||(s=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{__PRIVATE_logDebug(tn,"Retrying IndexedDB access"),await s(),n.Ea.delete(1),await __PRIVATE_enableNetworkInternal(n)}))}function __PRIVATE_executeWithRecovery(n,e){return e().catch((s=>__PRIVATE_disableNetworkUntilRecovery(n,s,e)))}async function __PRIVATE_fillWritePipeline(n){const e=__PRIVATE_debugCast(n),s=__PRIVATE_ensureWriteStream(e);let o=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:j;for(;__PRIVATE_canAddToWritePipeline(e);)try{const a=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,o);if(a===null){e.Ta.length===0&&s.L_();break}o=a.batchId,__PRIVATE_addToWritePipeline(e,a)}catch(a){await __PRIVATE_disableNetworkUntilRecovery(e,a)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(n){return __PRIVATE_canUseNetwork(n)&&n.Ta.length<10}function __PRIVATE_addToWritePipeline(n,e){n.Ta.push(e);const s=__PRIVATE_ensureWriteStream(n);s.O_()&&s.X_&&s.ea(e.mutations)}function __PRIVATE_shouldStartWriteStream(n){return __PRIVATE_canUseNetwork(n)&&!__PRIVATE_ensureWriteStream(n).x_()&&n.Ta.length>0}function __PRIVATE_startWriteStream(n){__PRIVATE_ensureWriteStream(n).start()}async function __PRIVATE_onWriteStreamOpen(n){__PRIVATE_ensureWriteStream(n).ra()}async function __PRIVATE_onWriteHandshakeComplete(n){const e=__PRIVATE_ensureWriteStream(n);for(const s of n.Ta)e.ea(s.mutations)}async function __PRIVATE_onMutationResult(n,e,s){const o=n.Ta.shift(),a=MutationBatchResult.from(o,e,s);await __PRIVATE_executeWithRecovery(n,(()=>n.remoteSyncer.applySuccessfulWrite(a))),await __PRIVATE_fillWritePipeline(n)}async function __PRIVATE_onWriteStreamClose(n,e){e&&__PRIVATE_ensureWriteStream(n).X_&&await(async function(o,a){if((function(f){return __PRIVATE_isPermanentError(f)&&f!==N.ABORTED})(a.code)){const c=o.Ta.shift();__PRIVATE_ensureWriteStream(o).B_(),await __PRIVATE_executeWithRecovery(o,(()=>o.remoteSyncer.rejectFailedWrite(c.batchId,a))),await __PRIVATE_fillWritePipeline(o)}})(n,e),__PRIVATE_shouldStartWriteStream(n)&&__PRIVATE_startWriteStream(n)}async function __PRIVATE_remoteStoreHandleCredentialChange(n,e){const s=__PRIVATE_debugCast(n);s.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(tn,"RemoteStore received new credentials");const o=__PRIVATE_canUseNetwork(s);s.Ea.add(3),await __PRIVATE_disableNetworkInternal(s),o&&s.Ra.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.Ea.delete(3),await __PRIVATE_enableNetworkInternal(s)}async function __PRIVATE_remoteStoreApplyPrimaryState(n,e){const s=__PRIVATE_debugCast(n);e?(s.Ea.delete(2),await __PRIVATE_enableNetworkInternal(s)):e||(s.Ea.add(2),await __PRIVATE_disableNetworkInternal(s),s.Ra.set("Unknown"))}function __PRIVATE_ensureWatchStream(n){return n.ma||(n.ma=(function(s,o,a){const c=__PRIVATE_debugCast(s);return c.sa(),new __PRIVATE_PersistentListenStream(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(n.datastore,n.asyncQueue,{Xo:__PRIVATE_onWatchStreamConnected.bind(null,n),t_:__PRIVATE_onWatchStreamOpen.bind(null,n),r_:__PRIVATE_onWatchStreamClose.bind(null,n),H_:__PRIVATE_onWatchStreamChange.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),__PRIVATE_shouldStartWatchStream(n)?__PRIVATE_startWatchStream(n):n.Ra.set("Unknown")):(await n.ma.stop(),__PRIVATE_cleanUpWatchStreamState(n))}))),n.ma}function __PRIVATE_ensureWriteStream(n){return n.fa||(n.fa=(function(s,o,a){const c=__PRIVATE_debugCast(s);return c.sa(),new __PRIVATE_PersistentWriteStream(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:__PRIVATE_onWriteStreamOpen.bind(null,n),r_:__PRIVATE_onWriteStreamClose.bind(null,n),ta:__PRIVATE_onWriteHandshakeComplete.bind(null,n),na:__PRIVATE_onMutationResult.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await __PRIVATE_fillWritePipeline(n)):(await n.fa.stop(),n.Ta.length>0&&(__PRIVATE_logDebug(tn,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,s,o,a,c){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,s,o,a,c){const f=Date.now()+o,h=new DelayedOperation(e,s,f,a,c);return h.start(o),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(n,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${n}`),__PRIVATE_isIndexedDbTransactionError(n))return new FirestoreError(N.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{static emptySet(e){return new DocumentSet(e.comparator)}constructor(e){this.comparator=e?(s,o)=>e(s,o)||DocumentKey.comparator(s.key,o.key):(s,o)=>DocumentKey.comparator(s.key,o.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((s,o)=>(e(s),!1)))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach((s=>{e.push(s.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const o=new DocumentSet;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=s,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.ga=new SortedMap(DocumentKey.comparator)}track(e){const s=e.doc.key,o=this.ga.get(s);o?e.type!==0&&o.type===3?this.ga=this.ga.insert(s,e):e.type===3&&o.type!==1?this.ga=this.ga.insert(s,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.ga=this.ga.insert(s,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.ga=this.ga.remove(s):e.type===1&&o.type===2?this.ga=this.ga.insert(s,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.ga=this.ga.insert(s,{type:2,doc:e.doc}):fail(63341,{Rt:e,pa:o}):this.ga=this.ga.insert(s,e)}ya(){const e=[];return this.ga.inorderTraversal(((s,o)=>{e.push(o)})),e}}class ViewSnapshot{constructor(e,s,o,a,c,f,h,m,g){this.query=e,this.docs=s,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=f,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=g}static fromInitialDocuments(e,s,o,a,c){const f=[];return s.forEach((h=>{f.push({type:0,doc:h})})),new ViewSnapshot(e,s,DocumentSet.emptySet(s),f,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,o=e.docChanges;if(s.length!==o.length)return!1;for(let a=0;a<s.length;a++)if(s[a].type!==o[a].type||!s[a].doc.isEqual(o[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=__PRIVATE_newQueriesObjectMap(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(s,o){const a=__PRIVATE_debugCast(s),c=a.queries;a.queries=__PRIVATE_newQueriesObjectMap(),c.forEach(((f,h)=>{for(const m of h.Sa)m.onError(o)}))})(this,new FirestoreError(N.ABORTED,"Firestore shutting down"))}}function __PRIVATE_newQueriesObjectMap(){return new ObjectMap((n=>__PRIVATE_canonifyQuery(n)),__PRIVATE_queryEquals)}async function __PRIVATE_eventManagerListen(n,e){const s=__PRIVATE_debugCast(n);let o=3;const a=e.query;let c=s.queries.get(a);c?!c.ba()&&e.Da()&&(o=2):(c=new __PRIVATE_QueryListenersInfo,o=e.Da()?0:1);try{switch(o){case 0:c.wa=await s.onListen(a,!0);break;case 1:c.wa=await s.onListen(a,!1);break;case 2:await s.onFirstRemoteStoreListen(a)}}catch(f){const h=__PRIVATE_wrapInUserErrorIfRecoverable(f,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(h)}s.queries.set(a,c),c.Sa.push(e),e.va(s.onlineState),c.wa&&e.Fa(c.wa)&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}async function __PRIVATE_eventManagerUnlisten(n,e){const s=__PRIVATE_debugCast(n),o=e.query;let a=3;const c=s.queries.get(o);if(c){const f=c.Sa.indexOf(e);f>=0&&(c.Sa.splice(f,1),c.Sa.length===0?a=e.Da()?0:1:!c.ba()&&e.Da()&&(a=2))}switch(a){case 0:return s.queries.delete(o),s.onUnlisten(o,!0);case 1:return s.queries.delete(o),s.onUnlisten(o,!1);case 2:return s.onLastRemoteStoreUnlisten(o);default:return}}function __PRIVATE_eventManagerOnWatchChange(n,e){const s=__PRIVATE_debugCast(n);let o=!1;for(const a of e){const c=a.query,f=s.queries.get(c);if(f){for(const h of f.Sa)h.Fa(a)&&(o=!0);f.wa=a}}o&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}function __PRIVATE_eventManagerOnWatchError(n,e,s){const o=__PRIVATE_debugCast(n),a=o.queries.get(e);if(a)for(const c of a.Sa)c.onError(s);o.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(n){n.Ca.forEach((e=>{e.next()}))}var nn,rn;(rn=nn||(nn={})).Ma="default",rn.Cache="cache";class __PRIVATE_QueryListener{constructor(e,s,o){this.query=e,this.xa=s,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=o||{}}Fa(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)a.type!==3&&o.push(a);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),s=!0):this.La(e,this.onlineState)&&(this.ka(e),s=!0),this.Na=e,s}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let s=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),s=!0),s}La(e,s){if(!e.fromCache||!this.Da())return!0;const o=s!=="Offline";return(!this.options.qa||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const s=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}ka(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==nn.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,s){this.query=e,this.Ya=s,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.eu=__PRIVATE_newQueryComparator(e),this.tu=new DocumentSet(this.eu)}get nu(){return this.Ya}ru(e,s){const o=s?s.iu:new __PRIVATE_DocumentChangeSet,a=s?s.tu:this.tu;let c=s?s.mutatedKeys:this.mutatedKeys,f=a,h=!1;const m=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal(((_,E)=>{const T=a.get(_),w=__PRIVATE_queryMatches(this.query,E)?E:null,A=!!T&&this.mutatedKeys.has(T.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let V=!1;T&&w?T.data.isEqual(w.data)?A!==R&&(o.track({type:3,doc:w}),V=!0):this.su(T,w)||(o.track({type:2,doc:w}),V=!0,(m&&this.eu(w,m)>0||g&&this.eu(w,g)<0)&&(h=!0)):!T&&w?(o.track({type:0,doc:w}),V=!0):T&&!w&&(o.track({type:1,doc:T}),V=!0,(m||g)&&(h=!0)),V&&(w?(f=f.add(w),c=R?c.add(_):c.delete(_)):(f=f.delete(_),c=c.delete(_)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const _=this.query.limitType==="F"?f.last():f.first();f=f.delete(_.key),c=c.delete(_.key),o.track({type:1,doc:_})}return{tu:f,iu:o,Cs:h,mutatedKeys:c}}su(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,o,a){const c=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((_,E)=>(function(w,A){const R=V=>{switch(V){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail(20277,{Rt:V})}};return R(w)-R(A)})(_.type,E.type)||this.eu(_.doc,E.doc))),this.ou(o),a=a??!1;const h=s&&!a?this._u():[],m=this.Xa.size===0&&this.current&&!a?1:0,g=m!==this.Za;return this.Za=m,f.length!==0||g?{snapshot:new ViewSnapshot(this.query,e.tu,c,f,e.mutatedKeys,m===0,g,!1,!!o&&o.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((s=>this.Ya=this.Ya.add(s))),e.modifiedDocuments.forEach((s=>{})),e.removedDocuments.forEach((s=>this.Ya=this.Ya.delete(s))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=__PRIVATE_documentKeySet(),this.tu.forEach((o=>{this.uu(o.key)&&(this.Xa=this.Xa.add(o.key))}));const s=[];return e.forEach((o=>{this.Xa.has(o)||s.push(new __PRIVATE_RemovedLimboDocument(o))})),this.Xa.forEach((o=>{e.has(o)||s.push(new __PRIVATE_AddedLimboDocument(o))})),s}cu(e){this.Ya=e.Qs,this.Xa=__PRIVATE_documentKeySet();const s=this.ru(e.documents);return this.applyChanges(s,!0)}lu(){return ViewSnapshot.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const sn="SyncEngine";class __PRIVATE_QueryView{constructor(e,s,o){this.query=e,this.targetId=s,this.view=o}}class LimboResolution{constructor(e){this.key=e,this.hu=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,s,o,a,c,f){this.localStore=e,this.remoteStore=s,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new ObjectMap((h=>__PRIVATE_canonifyQuery(h)),__PRIVATE_queryEquals),this.Iu=new Map,this.Eu=new Set,this.du=new SortedMap(DocumentKey.comparator),this.Au=new Map,this.Ru=new __PRIVATE_ReferenceSet,this.Vu={},this.mu=new Map,this.fu=__PRIVATE_TargetIdGenerator.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function __PRIVATE_syncEngineListen(n,e,s=!0){const o=__PRIVATE_ensureWatchCallbacks(n);let a;const c=o.Tu.get(e);return c?(o.sharedClientState.addLocalQueryTarget(c.targetId),a=c.view.lu()):a=await __PRIVATE_allocateTargetAndMaybeListen(o,e,s,!0),a}async function __PRIVATE_triggerRemoteStoreListen(n,e){const s=__PRIVATE_ensureWatchCallbacks(n);await __PRIVATE_allocateTargetAndMaybeListen(s,e,!0,!1)}async function __PRIVATE_allocateTargetAndMaybeListen(n,e,s,o){const a=await __PRIVATE_localStoreAllocateTarget(n.localStore,__PRIVATE_queryToTarget(e)),c=a.targetId,f=n.sharedClientState.addLocalQueryTarget(c,s);let h;return o&&(h=await __PRIVATE_initializeViewAndComputeSnapshot(n,e,c,f==="current",a.resumeToken)),n.isPrimaryClient&&s&&__PRIVATE_remoteStoreListen(n.remoteStore,a),h}async function __PRIVATE_initializeViewAndComputeSnapshot(n,e,s,o,a){n.pu=(E,T,w)=>(async function(R,V,te,se){let re=V.view.ru(te);re.Cs&&(re=await __PRIVATE_localStoreExecuteQuery(R.localStore,V.query,!1).then((({documents:z})=>V.view.ru(z,re))));const ye=se&&se.targetChanges.get(V.targetId),D=se&&se.targetMismatches.get(V.targetId)!=null,ae=V.view.applyChanges(re,R.isPrimaryClient,ye,D);return __PRIVATE_updateTrackedLimbos(R,V.targetId,ae.au),ae.snapshot})(n,E,T,w);const c=await __PRIVATE_localStoreExecuteQuery(n.localStore,e,!0),f=new __PRIVATE_View(e,c.Qs),h=f.ru(c.documents),m=TargetChange.createSynthesizedTargetChangeForCurrentChange(s,o&&n.onlineState!=="Offline",a),g=f.applyChanges(h,n.isPrimaryClient,m);__PRIVATE_updateTrackedLimbos(n,s,g.au);const _=new __PRIVATE_QueryView(e,s,f);return n.Tu.set(e,_),n.Iu.has(s)?n.Iu.get(s).push(e):n.Iu.set(s,[e]),g.snapshot}async function __PRIVATE_syncEngineUnlisten(n,e,s){const o=__PRIVATE_debugCast(n),a=o.Tu.get(e),c=o.Iu.get(a.targetId);if(c.length>1)return o.Iu.set(a.targetId,c.filter((f=>!__PRIVATE_queryEquals(f,e)))),void o.Tu.delete(e);o.isPrimaryClient?(o.sharedClientState.removeLocalQueryTarget(a.targetId),o.sharedClientState.isActiveQueryTarget(a.targetId)||await __PRIVATE_localStoreReleaseTarget(o.localStore,a.targetId,!1).then((()=>{o.sharedClientState.clearQueryState(a.targetId),s&&__PRIVATE_remoteStoreUnlisten(o.remoteStore,a.targetId),__PRIVATE_removeAndCleanupTarget(o,a.targetId)})).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(o,a.targetId),await __PRIVATE_localStoreReleaseTarget(o.localStore,a.targetId,!0))}async function __PRIVATE_triggerRemoteStoreUnlisten(n,e){const s=__PRIVATE_debugCast(n),o=s.Tu.get(e),a=s.Iu.get(o.targetId);s.isPrimaryClient&&a.length===1&&(s.sharedClientState.removeLocalQueryTarget(o.targetId),__PRIVATE_remoteStoreUnlisten(s.remoteStore,o.targetId))}async function __PRIVATE_syncEngineWrite(n,e,s){const o=__PRIVATE_syncEngineEnsureWriteCallbacks(n);try{const a=await(function(f,h){const m=__PRIVATE_debugCast(f),g=Timestamp.now(),_=h.reduce(((w,A)=>w.add(A.key)),__PRIVATE_documentKeySet());let E,T;return m.persistence.runTransaction("Locally write mutations","readwrite",(w=>{let A=__PRIVATE_mutableDocumentMap(),R=__PRIVATE_documentKeySet();return m.Ns.getEntries(w,_).next((V=>{A=V,A.forEach(((te,se)=>{se.isValidDocument()||(R=R.add(te))}))})).next((()=>m.localDocuments.getOverlayedDocuments(w,A))).next((V=>{E=V;const te=[];for(const se of h){const re=__PRIVATE_mutationExtractBaseValue(se,E.get(se.key).overlayedDocument);re!=null&&te.push(new __PRIVATE_PatchMutation(se.key,re,__PRIVATE_extractFieldMask(re.value.mapValue),Precondition.exists(!0)))}return m.mutationQueue.addMutationBatch(w,g,te,h)})).next((V=>{T=V;const te=V.applyToLocalDocumentSet(E,R);return m.documentOverlayCache.saveOverlays(w,V.batchId,te)}))})).then((()=>({batchId:T.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(E)})))})(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),(function(f,h,m){let g=f.Vu[f.currentUser.toKey()];g||(g=new SortedMap(__PRIVATE_primitiveComparator)),g=g.insert(h,m),f.Vu[f.currentUser.toKey()]=g})(o,a.batchId,s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a.changes),await __PRIVATE_fillWritePipeline(o.remoteStore)}catch(a){const c=__PRIVATE_wrapInUserErrorIfRecoverable(a,"Failed to persist write");s.reject(c)}}async function __PRIVATE_syncEngineApplyRemoteEvent(n,e){const s=__PRIVATE_debugCast(n);try{const o=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(s.localStore,e);e.targetChanges.forEach(((a,c)=>{const f=s.Au.get(c);f&&(__PRIVATE_hardAssert(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1,22616),a.addedDocuments.size>0?f.hu=!0:a.modifiedDocuments.size>0?__PRIVATE_hardAssert(f.hu,14607):a.removedDocuments.size>0&&(__PRIVATE_hardAssert(f.hu,42227),f.hu=!1))})),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o,e)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}function __PRIVATE_syncEngineApplyOnlineStateChange(n,e,s){const o=__PRIVATE_debugCast(n);if(o.isPrimaryClient&&s===0||!o.isPrimaryClient&&s===1){const a=[];o.Tu.forEach(((c,f)=>{const h=f.view.va(e);h.snapshot&&a.push(h.snapshot)})),(function(f,h){const m=__PRIVATE_debugCast(f);m.onlineState=h;let g=!1;m.queries.forEach(((_,E)=>{for(const T of E.Sa)T.va(h)&&(g=!0)})),g&&__PRIVATE_raiseSnapshotsInSyncEvent(m)})(o.eventManager,e),a.length&&o.Pu.H_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(n,e,s){const o=__PRIVATE_debugCast(n);o.sharedClientState.updateQueryState(e,"rejected",s);const a=o.Au.get(e),c=a&&a.key;if(c){let f=new SortedMap(DocumentKey.comparator);f=f.insert(c,MutableDocument.newNoDocument(c,SnapshotVersion.min()));const h=__PRIVATE_documentKeySet().add(c),m=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),f,h);await __PRIVATE_syncEngineApplyRemoteEvent(o,m),o.du=o.du.remove(c),o.Au.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(o)}else await __PRIVATE_localStoreReleaseTarget(o.localStore,e,!1).then((()=>__PRIVATE_removeAndCleanupTarget(o,e,s))).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(n,e){const s=__PRIVATE_debugCast(n),o=e.batch.batchId;try{const a=await __PRIVATE_localStoreAcknowledgeBatch(s.localStore,e);__PRIVATE_processUserCallback(s,o,null),__PRIVATE_triggerPendingWritesCallbacks(s,o),s.sharedClientState.updateMutationState(o,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}async function __PRIVATE_syncEngineRejectFailedWrite(n,e,s){const o=__PRIVATE_debugCast(n);try{const a=await(function(f,h){const m=__PRIVATE_debugCast(f);return m.persistence.runTransaction("Reject batch","readwrite-primary",(g=>{let _;return m.mutationQueue.lookupMutationBatch(g,h).next((E=>(__PRIVATE_hardAssert(E!==null,37113),_=E.keys(),m.mutationQueue.removeMutationBatch(g,E)))).next((()=>m.mutationQueue.performConsistencyCheck(g))).next((()=>m.documentOverlayCache.removeOverlaysForBatchId(g,_,h))).next((()=>m.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,_))).next((()=>m.localDocuments.getDocuments(g,_)))}))})(o.localStore,e);__PRIVATE_processUserCallback(o,e,s),__PRIVATE_triggerPendingWritesCallbacks(o,e),o.sharedClientState.updateMutationState(e,"rejected",s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_triggerPendingWritesCallbacks(n,e){(n.mu.get(e)||[]).forEach((s=>{s.resolve()})),n.mu.delete(e)}function __PRIVATE_processUserCallback(n,e,s){const o=__PRIVATE_debugCast(n);let a=o.Vu[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(s?c.reject(s):c.resolve(),a=a.remove(e)),o.Vu[o.currentUser.toKey()]=a}}function __PRIVATE_removeAndCleanupTarget(n,e,s=null){n.sharedClientState.removeLocalQueryTarget(e);for(const o of n.Iu.get(e))n.Tu.delete(o),s&&n.Pu.yu(o,s);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((o=>{n.Ru.containsKey(o)||__PRIVATE_removeLimboTarget(n,o)}))}function __PRIVATE_removeLimboTarget(n,e){n.Eu.delete(e.path.canonicalString());const s=n.du.get(e);s!==null&&(__PRIVATE_remoteStoreUnlisten(n.remoteStore,s),n.du=n.du.remove(e),n.Au.delete(s),__PRIVATE_pumpEnqueuedLimboResolutions(n))}function __PRIVATE_updateTrackedLimbos(n,e,s){for(const o of s)o instanceof __PRIVATE_AddedLimboDocument?(n.Ru.addReference(o.key,e),__PRIVATE_trackLimboChange(n,o)):o instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug(sn,"Document no longer in limbo: "+o.key),n.Ru.removeReference(o.key,e),n.Ru.containsKey(o.key)||__PRIVATE_removeLimboTarget(n,o.key)):fail(19791,{wu:o})}function __PRIVATE_trackLimboChange(n,e){const s=e.key,o=s.path.canonicalString();n.du.get(s)||n.Eu.has(o)||(__PRIVATE_logDebug(sn,"New document in limbo: "+s),n.Eu.add(o),__PRIVATE_pumpEnqueuedLimboResolutions(n))}function __PRIVATE_pumpEnqueuedLimboResolutions(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const s=new DocumentKey(ResourcePath.fromString(e)),o=n.fu.next();n.Au.set(o,new LimboResolution(s)),n.du=n.du.insert(s,o),__PRIVATE_remoteStoreListen(n.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(s.path)),o,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence.ce))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(n,e,s){const o=__PRIVATE_debugCast(n),a=[],c=[],f=[];o.Tu.isEmpty()||(o.Tu.forEach(((h,m)=>{f.push(o.pu(m,e,s).then((g=>{if((g||s)&&o.isPrimaryClient){const _=g?!g.fromCache:s?.targetChanges.get(m.targetId)?.current;o.sharedClientState.updateQueryState(m.targetId,_?"current":"not-current")}if(g){a.push(g);const _=__PRIVATE_LocalViewChanges.As(m.targetId,g);c.push(_)}})))})),await Promise.all(f),o.Pu.H_(a),await(async function(m,g){const _=__PRIVATE_debugCast(m);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>PersistencePromise.forEach(g,(T=>PersistencePromise.forEach(T.Es,(w=>_.persistence.referenceDelegate.addReference(E,T.targetId,w))).next((()=>PersistencePromise.forEach(T.ds,(w=>_.persistence.referenceDelegate.removeReference(E,T.targetId,w)))))))))}catch(E){if(!__PRIVATE_isIndexedDbTransactionError(E))throw E;__PRIVATE_logDebug(Ut,"Failed to update sequence numbers: "+E)}for(const E of g){const T=E.targetId;if(!E.fromCache){const w=_.Ms.get(T),A=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(A);_.Ms=_.Ms.insert(T,R)}}})(o.localStore,c))}async function __PRIVATE_syncEngineHandleCredentialChange(n,e){const s=__PRIVATE_debugCast(n);if(!s.currentUser.isEqual(e)){__PRIVATE_logDebug(sn,"User change. New user:",e.toKey());const o=await __PRIVATE_localStoreHandleUserChange(s.localStore,e);s.currentUser=e,(function(c,f){c.mu.forEach((h=>{h.forEach((m=>{m.reject(new FirestoreError(N.CANCELLED,f))}))})),c.mu.clear()})(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o.Ls)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(n,e){const s=__PRIVATE_debugCast(n),o=s.Au.get(e);if(o&&o.hu)return __PRIVATE_documentKeySet().add(o.key);{let a=__PRIVATE_documentKeySet();const c=s.Iu.get(e);if(!c)return a;for(const f of c){const h=s.Tu.get(f);a=a.unionWith(h.view.nu)}return a}}function __PRIVATE_ensureWatchCallbacks(n){const e=__PRIVATE_debugCast(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.Pu.H_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.Pu.yu=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(n){const e=__PRIVATE_debugCast(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class __PRIVATE_MemoryOfflineComponentProvider{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,s){return null}Mu(e,s){return null}vu(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}Cu(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.mi,this.serializer)}Du(e){return new __PRIVATE_MemorySharedClientState}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}__PRIVATE_MemoryOfflineComponentProvider.provider={build:()=>new __PRIVATE_MemoryOfflineComponentProvider};class __PRIVATE_LruGcMemoryOfflineComponentProvider extends __PRIVATE_MemoryOfflineComponentProvider{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,s){__PRIVATE_hardAssert(this.persistence.referenceDelegate instanceof __PRIVATE_MemoryLruDelegate,46915);const o=this.persistence.referenceDelegate.garbageCollector;return new __PRIVATE_LruScheduler(o,e.asyncQueue,s)}Cu(e){const s=this.cacheSizeBytes!==void 0?LruParams.withCacheSize(this.cacheSizeBytes):LruParams.DEFAULT;return new __PRIVATE_MemoryPersistence((o=>__PRIVATE_MemoryLruDelegate.mi(o,s)),this.serializer)}}class OnlineComponentProvider{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new __PRIVATE_EventManagerImpl})()}createDatastore(e){const s=__PRIVATE_newSerializer(e.databaseInfo.databaseId),o=(function(c){return new __PRIVATE_WebChannelConnection(c)})(e.databaseInfo);return(function(c,f,h,m){return new __PRIVATE_DatastoreImpl(c,f,h,m)})(e.authCredentials,e.appCheckCredentials,o,s)}createRemoteStore(e){return(function(o,a,c,f,h){return new __PRIVATE_RemoteStoreImpl(o,a,c,f,h)})(this.localStore,this.datastore,e.asyncQueue,(s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,0)),(function(){return __PRIVATE_BrowserConnectivityMonitor.v()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor})())}createSyncEngine(e,s){return(function(a,c,f,h,m,g,_){const E=new __PRIVATE_SyncEngineImpl(a,c,f,h,m,g);return _&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){await(async function(s){const o=__PRIVATE_debugCast(s);__PRIVATE_logDebug(tn,"RemoteStore shutting down."),o.Ea.add(5),await __PRIVATE_disableNetworkInternal(o),o.Aa.shutdown(),o.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}OnlineComponentProvider.provider={build:()=>new OnlineComponentProvider};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,s){setTimeout((()=>{this.muted||e(s)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="FirestoreClient";class FirestoreClient{constructor(e,s,o,a,c){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=o,this.databaseInfo=a,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=c,this.authCredentials.start(o,(async f=>{__PRIVATE_logDebug(on,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(o,(f=>(__PRIVATE_logDebug(on,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const o=__PRIVATE_wrapInUserErrorIfRecoverable(s,"Failed to shutdown persistence");e.reject(o)}})),e.promise}}async function __PRIVATE_setOfflineComponentProvider(n,e){n.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug(on,"Initializing OfflineComponentProvider");const s=n.configuration;await e.initialize(s);let o=s.initialUser;n.setCredentialChangeListener((async a=>{o.isEqual(a)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,a),o=a)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(n,e){n.asyncQueue.verifyOperationInProgress();const s=await __PRIVATE_ensureOfflineComponents(n);__PRIVATE_logDebug(on,"Initializing OnlineComponentProvider"),await e.initialize(s,n.configuration),n.setCredentialChangeListener((o=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,o))),n.setAppCheckTokenChangeListener(((o,a)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,a))),n._onlineComponents=e}async function __PRIVATE_ensureOfflineComponents(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){__PRIVATE_logDebug(on,"Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(n,n._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!(function(a){return a.name==="FirebaseError"?a.code===N.FAILED_PRECONDITION||a.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||a.code===22||a.code===20||a.code===11})(s))throw s;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+s),await __PRIVATE_setOfflineComponentProvider(n,new __PRIVATE_MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug(on,"Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(n,new __PRIVATE_LruGcMemoryOfflineComponentProvider(void 0));return n._offlineComponents}async function __PRIVATE_ensureOnlineComponents(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(__PRIVATE_logDebug(on,"Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(n,n._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug(on,"Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(n,new OnlineComponentProvider))),n._onlineComponents}function __PRIVATE_getLocalStore(n){return __PRIVATE_ensureOfflineComponents(n).then((e=>e.localStore))}function __PRIVATE_getSyncEngine(n){return __PRIVATE_ensureOnlineComponents(n).then((e=>e.syncEngine))}async function __PRIVATE_getEventManager(n){const e=await __PRIVATE_ensureOnlineComponents(n),s=e.eventManager;return s.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),s.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),s.onFirstRemoteStoreListen=__PRIVATE_triggerRemoteStoreListen.bind(null,e.syncEngine),s.onLastRemoteStoreUnlisten=__PRIVATE_triggerRemoteStoreUnlisten.bind(null,e.syncEngine),s}function __PRIVATE_firestoreClientGetDocumentFromLocalCache(n,e){const s=new __PRIVATE_Deferred;return n.asyncQueue.enqueueAndForget((async()=>(async function(a,c,f){try{const h=await(function(g,_){const E=__PRIVATE_debugCast(g);return E.persistence.runTransaction("read document","readonly",(T=>E.localDocuments.getDocument(T,_)))})(a,c);h.isFoundDocument()?f.resolve(h):h.isNoDocument()?f.resolve(null):f.reject(new FirestoreError(N.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=__PRIVATE_wrapInUserErrorIfRecoverable(h,`Failed to get document '${c} from cache`);f.reject(m)}})(await __PRIVATE_getLocalStore(n),e,s))),s.promise}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(n,e,s={}){const o=new __PRIVATE_Deferred;return n.asyncQueue.enqueueAndForget((async()=>(function(c,f,h,m,g){const _=new __PRIVATE_AsyncObserver({next:T=>{_.Nu(),f.enqueueAndForget((()=>__PRIVATE_eventManagerUnlisten(c,E)));const w=T.docs.has(h);!w&&T.fromCache?g.reject(new FirestoreError(N.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&T.fromCache&&m&&m.source==="server"?g.reject(new FirestoreError(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):g.resolve(T)},error:T=>g.reject(T)}),E=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(h.path),_,{includeMetadataChanges:!0,qa:!0});return __PRIVATE_eventManagerListen(c,E)})(await __PRIVATE_getEventManager(n),n.asyncQueue,e,s,o))),o.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const an="firestore.googleapis.com",un=!0;class FirestoreSettingsImpl{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=an,this.ssl=un}else this.host=e.host,this.ssl=e.ssl??un;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Ot;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<Bt)throw new FirestoreError(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions(e.experimentalLongPollingOptions??{}),(function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new FirestoreError(N.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(o,a){return o.timeoutSeconds===a.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,s,o,a){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(o){if(!o)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(o.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new FirestoreError(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(s){const o=_n.get(s);o&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),_n.delete(s),o.terminate())})(this),Promise.resolve()}}function connectFirestoreEmulator(n,e,s,o={}){n=__PRIVATE_cast(n,Firestore$1);const a=isCloudWorkstation(e),c=n._getSettings(),f={...c,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${s}`;a&&(pingServer(`https://${h}`),updateEmulatorBanner("Firestore",!0)),c.host!==an&&c.host!==h&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const m={...c,host:h,ssl:a,emulatorOptions:o};if(!deepEqual(m,f)&&(n._setSettings(m),o.mockUserToken)){let g,_;if(typeof o.mockUserToken=="string")g=o.mockUserToken,_=User.MOCK_USER;else{g=createMockUserToken(o.mockUserToken,n._app?.options.projectId);const E=o.mockUserToken.sub||o.mockUserToken.user_id;if(!E)throw new FirestoreError(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new User(E)}n._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(g,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,s,o){this.converter=s,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,s,o){this.converter=s,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}toJSON(){return{type:DocumentReference._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,s,o){if(__PRIVATE_validateJSON(s,DocumentReference._jsonSchema))return new DocumentReference(e,o||null,new DocumentKey(ResourcePath.fromString(s.referencePath)))}}DocumentReference._jsonSchemaVersion="firestore/documentReference/1.0",DocumentReference._jsonSchema={type:property("string",DocumentReference._jsonSchemaVersion),referencePath:property("string")};class CollectionReference extends Query{constructor(e,s,o){super(e,s,__PRIVATE_newQueryForPath(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(n,e,...s){if(n=getModularInstance$1(n),__PRIVATE_validateNonEmptyArgument("collection","path",e),n instanceof Firestore$1){const o=ResourcePath.fromString(e,...s);return __PRIVATE_validateCollectionPath(o),new CollectionReference(n,null,o)}{if(!(n instanceof DocumentReference||n instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ResourcePath.fromString(e,...s));return __PRIVATE_validateCollectionPath(o),new CollectionReference(n.firestore,null,o)}}function doc(n,e,...s){if(n=getModularInstance$1(n),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),n instanceof Firestore$1){const o=ResourcePath.fromString(e,...s);return __PRIVATE_validateDocumentPath(o),new DocumentReference(n,null,new DocumentKey(o))}{if(!(n instanceof DocumentReference||n instanceof CollectionReference))throw new FirestoreError(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=n._path.child(ResourcePath.fromString(e,...s));return __PRIVATE_validateDocumentPath(o),new DocumentReference(n.firestore,n instanceof CollectionReference?n.converter:null,new DocumentKey(o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="AsyncQueue";class __PRIVATE_AsyncQueueImpl{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._c=()=>{const o=getDocument();o&&__PRIVATE_logDebug(cn,"Visibility state changed to "+o.visibilityState),this.M_.w_()},this.ac=e;const s=getDocument();s&&typeof s.addEventListener=="function"&&s.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const s=getDocument();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const s=new __PRIVATE_Deferred;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(s.resolve,s.reject),s.promise))).then((()=>s.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug(cn,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const s=this.ac.then((()=>(this.rc=!0,e().catch((o=>{throw this.nc=o,this.rc=!1,__PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",__PRIVATE_getMessageOrStack(o)),o})).then((o=>(this.rc=!1,o))))));return this.ac=s,s}enqueueAfterDelay(e,s,o){this.uc(),this.oc.indexOf(e)>-1&&(s=0);const a=DelayedOperation.createAndSchedule(this,e,s,o,(c=>this.hc(c)));return this.tc.push(a),a}uc(){this.nc&&fail(47125,{Pc:__PRIVATE_getMessageOrStack(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const s of this.tc)if(s.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((s,o)=>s.targetTimeMs-o.targetTimeMs));for(const s of this.tc)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const s=this.tc.indexOf(e);this.tc.splice(s,1)}}function __PRIVATE_getMessageOrStack(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isPartialObserver(n){return(function(s,o){if(typeof s!="object"||s===null)return!1;const a=s;for(const c of o)if(c in a&&typeof a[c]=="function")return!0;return!1})(n,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,s,o,a){super(e,s,o,a),this.type="firestore",this._queue=new __PRIVATE_AsyncQueueImpl,this._persistenceKey=a?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new __PRIVATE_AsyncQueueImpl(e),this._firestoreClient=void 0,await e}}}function getFirestore(n,e){const s=typeof n=="object"?n:getApp(),o=typeof n=="string"?n:lt,a=_getProvider(s,"firestore").getImmediate({identifier:o});if(!a._initialized){const c=getDefaultEmulatorHostnameAndPort("firestore");c&&connectFirestoreEmulator(a,...c)}return a}function ensureFirestoreConfigured(n){if(n._terminated)throw new FirestoreError(N.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||__PRIVATE_configureFirestore(n),n._firestoreClient}function __PRIVATE_configureFirestore(n){const e=n._freezeSettings(),s=(function(a,c,f,h){return new DatabaseInfo(a,c,f,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new FirestoreClient(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&(function(a){const c=a?._online.build();return{_offline:a?._offline.build(c),_online:c}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(s){throw new FirestoreError(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Bytes._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(__PRIVATE_validateJSON(e,Bytes._jsonSchema))return Bytes.fromBase64String(e.bytes)}}Bytes._jsonSchemaVersion="firestore/bytes/1.0",Bytes._jsonSchema={type:property("string",Bytes._jsonSchemaVersion),bytes:property("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new FirestoreError(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:GeoPoint._jsonSchemaVersion}}static fromJSON(e){if(__PRIVATE_validateJSON(e,GeoPoint._jsonSchema))return new GeoPoint(e.latitude,e.longitude)}}GeoPoint._jsonSchemaVersion="firestore/geoPoint/1.0",GeoPoint._jsonSchema={type:property("string",GeoPoint._jsonSchemaVersion),latitude:property("number"),longitude:property("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VectorValue{constructor(e){this._values=(e||[]).map((s=>s))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(o,a){if(o.length!==a.length)return!1;for(let c=0;c<o.length;++c)if(o[c]!==a[c])return!1;return!0})(this._values,e._values)}toJSON(){return{type:VectorValue._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(__PRIVATE_validateJSON(e,VectorValue._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((s=>typeof s=="number")))return new VectorValue(e.vectorValues);throw new FirestoreError(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}VectorValue._jsonSchemaVersion="firestore/vectorValue/1.0",VectorValue._jsonSchema={type:property("string",VectorValue._jsonSchemaVersion),vectorValues:property("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn=/^__.*__$/;class ParsedSetData{constructor(e,s,o){this.data=e,this.fieldMask=s,this.fieldTransforms=o}toMutation(e,s){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,s,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,s,this.fieldTransforms)}}function __PRIVATE_isWrite(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail(40011,{Ac:n})}}class __PRIVATE_ParseContextImpl{constructor(e,s,o,a,c,f){this.settings=e,this.databaseId=s,this.serializer=o,this.ignoreUndefinedProperties=a,c===void 0&&this.Rc(),this.fieldTransforms=c||[],this.fieldMask=f||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new __PRIVATE_ParseContextImpl({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const s=this.path?.child(e),o=this.Vc({path:s,fc:!1});return o.gc(e),o}yc(e){const s=this.path?.child(e),o=this.Vc({path:s,fc:!1});return o.Rc(),o}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((s=>e.isPrefixOf(s)))!==void 0||this.fieldTransforms.find((s=>e.isPrefixOf(s.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(__PRIVATE_isWrite(this.Ac)&&hn.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,s,o){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=o||__PRIVATE_newSerializer(e)}Cc(e,s,o,a=!1){return new __PRIVATE_ParseContextImpl({Ac:e,methodName:s,Dc:o,path:FieldPath$1.emptyPath(),fc:!1,bc:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(n){const e=n._freezeSettings(),s=__PRIVATE_newSerializer(n._databaseId);return new __PRIVATE_UserDataReader(n._databaseId,!!e.ignoreUndefinedProperties,s)}function __PRIVATE_parseSetData(n,e,s,o,a,c={}){const f=n.Cc(c.merge||c.mergeFields?2:0,e,s,a);__PRIVATE_validatePlainObject("Data must be an object, but it was:",f,o);const h=__PRIVATE_parseObject(o,f);let m,g;if(c.merge)m=new FieldMask(f.fieldMask),g=f.fieldTransforms;else if(c.mergeFields){const _=[];for(const E of c.mergeFields){const T=__PRIVATE_fieldPathFromArgument$1(e,E,s);if(!f.contains(T))throw new FirestoreError(N.INVALID_ARGUMENT,`Field '${T}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(_,T)||_.push(T)}m=new FieldMask(_),g=f.fieldTransforms.filter((E=>m.covers(E.field)))}else m=null,g=f.fieldTransforms;return new ParsedSetData(new ObjectValue(h),m,g)}class __PRIVATE_ServerTimestampFieldValueImpl extends FieldValue{_toFieldTransform(e){return new FieldTransform(e.path,new __PRIVATE_ServerTimestampTransform)}isEqual(e){return e instanceof __PRIVATE_ServerTimestampFieldValueImpl}}function __PRIVATE_parseQueryValue(n,e,s,o=!1){return __PRIVATE_parseData(s,n.Cc(o?4:3,e))}function __PRIVATE_parseData(n,e){if(__PRIVATE_looksLikeJsonObject(n=getModularInstance$1(n)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,n),__PRIVATE_parseObject(n,e);if(n instanceof FieldValue)return(function(o,a){if(!__PRIVATE_isWrite(a.Ac))throw a.Sc(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.Sc(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(o,a){const c=[];let f=0;for(const h of o){let m=__PRIVATE_parseData(h,a.wc(f));m==null&&(m={nullValue:"NULL_VALUE"}),c.push(m),f++}return{arrayValue:{values:c}}})(n,e)}return(function(o,a){if((o=getModularInstance$1(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return toNumber$1(a.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=Timestamp.fromDate(o);return{timestampValue:toTimestamp(a.serializer,c)}}if(o instanceof Timestamp){const c=new Timestamp(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:toTimestamp(a.serializer,c)}}if(o instanceof GeoPoint)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(a.serializer,o._byteString)};if(o instanceof DocumentReference){const c=a.databaseId,f=o.firestore._databaseId;if(!f.isEqual(c))throw a.Sc(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:__PRIVATE_toResourceName(o.firestore._databaseId||a.databaseId,o._key.path)}}if(o instanceof VectorValue)return(function(f,h){return{mapValue:{fields:{[ht]:{stringValue:It},[Et]:{arrayValue:{values:f.toArray().map((g=>{if(typeof g!="number")throw h.Sc("VectorValues must only contain numeric values.");return __PRIVATE_toDouble(h.serializer,g)}))}}}}}})(o,a);throw a.Sc(`Unsupported field value: ${__PRIVATE_valueDescription(o)}`)})(n,e)}function __PRIVATE_parseObject(n,e){const s={};return isEmpty(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(n,((o,a)=>{const c=__PRIVATE_parseData(a,e.mc(o));c!=null&&(s[o]=c)})),{mapValue:{fields:s}}}function __PRIVATE_looksLikeJsonObject(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Timestamp||n instanceof GeoPoint||n instanceof Bytes||n instanceof DocumentReference||n instanceof FieldValue||n instanceof VectorValue)}function __PRIVATE_validatePlainObject(n,e,s){if(!__PRIVATE_looksLikeJsonObject(s)||!__PRIVATE_isPlainObject(s)){const o=__PRIVATE_valueDescription(s);throw o==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+o)}}function __PRIVATE_fieldPathFromArgument$1(n,e,s){if((e=getModularInstance$1(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(n,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",n,!1,void 0,s)}const Pn=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(n,e,s){if(e.search(Pn)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,s);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,s)}}function __PRIVATE_createError(n,e,s,o,a){const c=o&&!o.isEmpty(),f=a!==void 0;let h=`Function ${e}() called with invalid data`;s&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(c||f)&&(m+=" (found",c&&(m+=` in field ${o}`),f&&(m+=` in document ${a}`),m+=")"),new FirestoreError(N.INVALID_ARGUMENT,h+n+m)}function __PRIVATE_fieldMaskContains(n,e){return n.some((s=>s.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,s,o,a,c){this._firestore=e,this._userDataWriter=s,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(n,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(n,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new FirestoreError(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(n,e,...s){let o=[];e instanceof AppliableConstraint&&o.push(e),o=o.concat(s),(function(c){const f=c.filter((m=>m instanceof QueryCompositeFilterConstraint)).length,h=c.filter((m=>m instanceof QueryFieldFilterConstraint)).length;if(f>1||f>0&&h>0)throw new FirestoreError(N.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(o);for(const a of o)n=a._apply(n);return n}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,s,o){super(),this._field=e,this._op=s,this._value=o,this.type="where"}static _create(e,s,o){return new QueryFieldFilterConstraint(e,s,o)}_apply(e){const s=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,s),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,s))}_parse(e){const s=__PRIVATE_newUserDataReader(e.firestore);return(function(c,f,h,m,g,_,E){let T;if(g.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(E,_);const A=[];for(const R of E)A.push(__PRIVATE_parseDocumentIdValue(m,c,R));T={arrayValue:{values:A}}}else T=__PRIVATE_parseDocumentIdValue(m,c,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(E,_),T=__PRIVATE_parseQueryValue(h,f,E,_==="in"||_==="not-in");return FieldFilter.create(g,_,T)})(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new QueryCompositeFilterConstraint(e,s)}_parse(e){const s=this._queryConstraints.map((o=>o._parse(e))).filter((o=>o.getFilters().length>0));return s.length===1?s[0]:CompositeFilter.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:((function(a,c){let f=a;const h=c.getFlattenedFilters();for(const m of h)__PRIVATE_validateNewFieldFilter(f,m),f=__PRIVATE_queryWithAddedFilter(f,m)})(e._query,s),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new QueryOrderByConstraint(e,s)}_apply(e){const s=(function(a,c,f){if(a.startAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(c,f)})(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,(function(a,c){const f=a.explicitOrderBy.concat([c]);return new __PRIVATE_QueryImpl(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)})(e._query,s))}}function orderBy(n,e="asc"){const s=e,o=__PRIVATE_fieldPathFromArgument("orderBy",n);return QueryOrderByConstraint._create(o,s)}class QueryLimitConstraint extends QueryConstraint{constructor(e,s,o){super(),this.type=e,this._limit=s,this._limitType=o}static _create(e,s,o){return new QueryLimitConstraint(e,s,o)}_apply(e){return new Query(e.firestore,e.converter,__PRIVATE_queryWithLimit(e._query,this._limit,this._limitType))}}function limit(n){return QueryLimitConstraint._create("limit",n,"F")}function __PRIVATE_parseDocumentIdValue(n,e,s){if(typeof(s=getModularInstance$1(s))=="string"){if(s==="")throw new FirestoreError(N.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&s.indexOf("/")!==-1)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const o=e.path.child(ResourcePath.fromString(s));if(!DocumentKey.isDocumentKey(o))throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return __PRIVATE_refValue(n,new DocumentKey(o))}if(s instanceof DocumentReference)return __PRIVATE_refValue(n,s._key);throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(s)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(n,e){if(!Array.isArray(n)||n.length===0)throw new FirestoreError(N.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(n,e){const s=(function(a,c){for(const f of a)for(const h of f.getFlattenedFilters())if(c.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(s!==null)throw s===e.op?new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(N.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,s="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 11:return this.convertObject(e.mapValue,s);case 10:return this.convertVectorValue(e.mapValue);default:throw fail(62114,{value:e})}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const o={};return forEach(e,((a,c)=>{o[a]=this.convertValue(c,s)})),o}convertVectorValue(e){const s=e.fields?.[Et].arrayValue?.values?.map((o=>__PRIVATE_normalizeNumber(o.doubleValue)));return new VectorValue(s)}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,s){return(e.values||[]).map((o=>this.convertValue(o,s)))}convertServerTimestamp(e,s){switch(s){case"previous":const o=__PRIVATE_getPreviousValue(e);return o==null?null:this.convertValue(o,s);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const s=__PRIVATE_normalizeTimestamp(e);return new Timestamp(s.seconds,s.nanos)}convertDocumentKey(e,s){const o=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(o),9688,{name:e});const a=new DatabaseId(o.get(1),o.get(3)),c=new DocumentKey(o.popFirst(5));return a.isEqual(s)||__PRIVATE_logError(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(n,e,s){let o;return o=n?s&&(s.merge||s.mergeFields)?n.toFirestore(e,s):n.toFirestore(e):e,o}class SnapshotMetadata{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,s,o,a,c,f){super(e,s,o,a,f),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const o=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,s.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,s={};return s.type=DocumentSnapshot._jsonSchemaVersion,s.bundle="",s.bundleSource="DocumentSnapshot",s.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?s:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),s.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),s)}}DocumentSnapshot._jsonSchemaVersion="firestore/documentSnapshot/1.0",DocumentSnapshot._jsonSchema={type:property("string",DocumentSnapshot._jsonSchemaVersion),bundleSource:property("string","DocumentSnapshot"),bundleName:property("string"),bundle:property("string")};class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,s,o,a){this._firestore=e,this._userDataWriter=s,this._snapshot=a,this.metadata=new SnapshotMetadata(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const e=[];return this.forEach((s=>e.push(s))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach((o=>{e.call(s,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,o.key,o,new SnapshotMetadata(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=(function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map((h=>{const m=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,h.doc.key,h.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);return h.doc,{type:"added",doc:m,oldIndex:-1,newIndex:f++}}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter((h=>c||h.type!==3)).map((h=>{const m=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,h.doc.key,h.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(h.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,_=-1;return h.type!==0&&(g=f.indexOf(h.doc.key),f=f.delete(h.doc.key)),h.type!==1&&(f=f.add(h.doc),_=f.indexOf(h.doc.key)),{type:__PRIVATE_resultChangeType(h.type),doc:m,oldIndex:g,newIndex:_}}))}})(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new FirestoreError(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=QuerySnapshot._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=__PRIVATE_AutoId.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const s=[],o=[],a=[];return this.docs.forEach((c=>{c._document!==null&&(s.push(c._document),o.push(this._userDataWriter.convertObjectMap(c._document.data.value.mapValue.fields,"previous")),a.push(c.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function __PRIVATE_resultChangeType(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(n){n=__PRIVATE_cast(n,DocumentReference);const e=__PRIVATE_cast(n.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(e),n._key).then((s=>__PRIVATE_convertToDocSnapshot(e,n,s)))}QuerySnapshot._jsonSchemaVersion="firestore/querySnapshot/1.0",QuerySnapshot._jsonSchema={type:property("string",QuerySnapshot._jsonSchemaVersion),bundleSource:property("string","QuerySnapshot"),bundleName:property("string"),bundle:property("string")};class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,s)}}function getDocFromCache(n){n=__PRIVATE_cast(n,DocumentReference);const e=__PRIVATE_cast(n.firestore,Firestore),s=ensureFirestoreConfigured(e),o=new __PRIVATE_ExpUserDataWriter(e);return __PRIVATE_firestoreClientGetDocumentFromLocalCache(s,n._key).then((a=>new DocumentSnapshot(e,o,n._key,a,new SnapshotMetadata(a!==null&&a.hasLocalMutations,!0),n.converter)))}function setDoc(n,e,s){n=__PRIVATE_cast(n,DocumentReference);const o=__PRIVATE_cast(n.firestore,Firestore),a=__PRIVATE_applyFirestoreDataConverter(n.converter,e,s);return executeWrite(o,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(o),"setDoc",n._key,a,n.converter!==null,s).toMutation(n._key,Precondition.none())])}function addDoc(n,e){const s=__PRIVATE_cast(n.firestore,Firestore),o=doc(n),a=__PRIVATE_applyFirestoreDataConverter(n.converter,e);return executeWrite(s,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(n.firestore),"addDoc",o._key,a,n.converter!==null,{}).toMutation(o._key,Precondition.exists(!1))]).then((()=>o))}function onSnapshot(n,...e){n=getModularInstance$1(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||__PRIVATE_isPartialObserver(e[o])||(s=e[o++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(__PRIVATE_isPartialObserver(e[o])){const m=e[o];e[o]=m.next?.bind(m),e[o+1]=m.error?.bind(m),e[o+2]=m.complete?.bind(m)}let c,f,h;if(n instanceof DocumentReference)f=__PRIVATE_cast(n.firestore,Firestore),h=__PRIVATE_newQueryForPath(n._key.path),c={next:m=>{e[o]&&e[o](__PRIVATE_convertToDocSnapshot(f,n,m))},error:e[o+1],complete:e[o+2]};else{const m=__PRIVATE_cast(n,Query);f=__PRIVATE_cast(m.firestore,Firestore),h=m._query;const g=new __PRIVATE_ExpUserDataWriter(f);c={next:_=>{e[o]&&e[o](new QuerySnapshot(f,g,m,_))},error:e[o+1],complete:e[o+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(n._query)}return(function(g,_,E,T){const w=new __PRIVATE_AsyncObserver(T),A=new __PRIVATE_QueryListener(_,w,E);return g.asyncQueue.enqueueAndForget((async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(g),A))),()=>{w.Nu(),g.asyncQueue.enqueueAndForget((async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(g),A)))}})(ensureFirestoreConfigured(f),h,a,c)}function executeWrite(n,e){return(function(o,a){const c=new __PRIVATE_Deferred;return o.asyncQueue.enqueueAndForget((async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(o),a,c))),c.promise})(ensureFirestoreConfigured(n),e)}function __PRIVATE_convertToDocSnapshot(n,e,s){const o=s.docs.get(e._key),a=new __PRIVATE_ExpUserDataWriter(n);return new DocumentSnapshot(n,a,e._key,o,new SnapshotMetadata(s.hasPendingWrites,s.fromCache),e.converter)}function serverTimestamp(){return new __PRIVATE_ServerTimestampFieldValueImpl("serverTimestamp")}(function(e,s=!0){(function(a){x=a})(SDK_VERSION),_registerComponent(new Component$1("firestore",((o,{instanceIdentifier:a,options:c})=>{const f=o.getProvider("app").getImmediate(),h=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(o.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(f,o.getProvider("app-check-internal")),(function(g,_){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new FirestoreError(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(g.options.projectId,_)})(f,a),f);return c={useFetchStreams:s,...c},h._setSettings(c),h}),"PUBLIC").setMultipleInstances(!0)),registerVersion(F,M,e),registerVersion(F,M,"esm2020")})();function addDomEvent$1(n,e,s,o){return n.addEventListener(e,s,o),()=>{n.removeEventListener(e,s,o)}}function isHTMLElement$1(n){return n!=null&&typeof n=="object"&&"nodeType"in n&&n.nodeType===Node.ELEMENT_NODE}function isBrowser$2(){return!!globalThis?.document}function isHiddenElement(n){return n.parentElement&&isHiddenElement(n.parentElement)?!0:n.hidden}function isContentEditableElement(n){const e=n.getAttribute("contenteditable");return e!=="false"&&e!=null}function isDisabledElement(n){return!!n.getAttribute("disabled")||!!n.getAttribute("aria-disabled")}function getEventWindow(n){return n.view??window}function isMouseEvent(n){const e=getEventWindow(n);return typeof e.PointerEvent<"u"&&n instanceof e.PointerEvent?n.pointerType==="mouse":n instanceof e.MouseEvent}function isTouchEvent(n){return!!n.touches}function isMultiTouchEvent(n){return isTouchEvent(n)&&n.touches.length>1}function pointFromTouch(n,e="page"){const s=n.touches[0]||n.changedTouches[0];return{x:s[`${e}X`],y:s[`${e}Y`]}}function pointFromMouse(n,e="page"){return{x:n[`${e}X`],y:n[`${e}Y`]}}function getEventPoint(n,e="page"){return isTouchEvent(n)?pointFromTouch(n,e):pointFromMouse(n,e)}function filter$2(n){return e=>{const s=isMouseEvent(e);(!s||s&&e.button===0)&&n(e)}}function wrap$1(n,e=!1){function s(a){n(a,{point:getEventPoint(a)})}return e?filter$2(s):s}function addPointerEvent$1(n,e,s,o){return addDomEvent$1(n,e,wrap$1(s,e==="pointerdown"),o)}function assignAfter(n,...e){if(n==null)throw new TypeError("Cannot convert undefined or null to object");const s={...n};for(const o of e)if(o!=null)for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&(a in s&&delete s[a],s[a]=o[a]);return s}const dataAttr=n=>n?"":void 0,ariaAttr=n=>n?!0:void 0;function isArray(n){return Array.isArray(n)}function isObject$1(n){const e=typeof n;return n!=null&&(e==="object"||e==="function")&&!isArray(n)}function getLastItem(n){const e=n==null?0:n.length;return e?n[e-1]:void 0}function analyzeCSSValue$1(n){const e=parseFloat(n.toString()),s=n.toString().replace(String(e),"");return{unitless:!s,value:e,unit:s}}function px$1(n){if(n==null)return n;const{unitless:e}=analyzeCSSValue$1(n);return e||typeof n=="number"?`${n}px`:n}const sortByBreakpointValue=(n,e)=>parseInt(n[1],10)>parseInt(e[1],10)?1:-1,sortBps=n=>Object.fromEntries(Object.entries(n).sort(sortByBreakpointValue));function normalize$3(n){const e=sortBps(n);return Object.assign(Object.values(e),e)}function keys(n){const e=Object.keys(sortBps(n));return new Set(e)}function subtract$3(n){if(!n)return n;n=px$1(n)??n;const e=-.02;return typeof n=="number"?`${n+e}`:n.replace(/(\d+\.?\d*)/u,s=>`${parseFloat(s)+e}`)}function toMediaQueryString(n,e){const s=["@media screen"];return n&&s.push("and",`(min-width: ${px$1(n)})`),e&&s.push("and",`(max-width: ${px$1(e)})`),s.join(" ")}function analyzeBreakpoints(n){if(!n)return null;n.base=n.base??"0px";const e=normalize$3(n),s=Object.entries(n).sort(sortByBreakpointValue).map(([c,f],h,m)=>{let[,g]=m[h+1]??[];return g=parseFloat(g)>0?subtract$3(g):void 0,{_minW:subtract$3(f),breakpoint:c,minW:f,maxW:g,maxWQuery:toMediaQueryString(null,g),minWQuery:toMediaQueryString(f),minMaxQuery:toMediaQueryString(f,g)}}),o=keys(n),a=Array.from(o.values());return{keys:o,normalized:e,isResponsive(c){const f=Object.keys(c);return f.length>0&&f.every(h=>o.has(h))},asObject:sortBps(n),asArray:normalize$3(n),details:s,get(c){return s.find(f=>f.breakpoint===c)},media:[null,...e.map(c=>toMediaQueryString(c)).slice(1)],toArrayValue(c){if(!isObject$1(c))throw new Error("toArrayValue: value must be an object");const f=a.map(h=>c[h]??null);for(;getLastItem(f)===null;)f.pop();return f},toObjectValue(c){if(!Array.isArray(c))throw new Error("toObjectValue: value must be an array");return c.reduce((f,h,m)=>{const g=a[m];return g!=null&&h!=null&&(f[g]=h),f},{})}}}function callAllHandlers(...n){return function(s){n.some(o=>(o?.(s),s?.defaultPrevented))}}function getValidChildren(n){return reactExports.Children.toArray(n).filter(e=>reactExports.isValidElement(e))}function compact(n){const e=Object.assign({},n);for(let s in e)e[s]===void 0&&delete e[s];return e}function getErrorMessage(n,e){return`${n} returned \`undefined\`. Seems you forgot to wrap component within ${e}`}function createContext(n={}){const{name:e,strict:s=!0,hookName:o="useContext",providerName:a="Provider",errorMessage:c,defaultValue:f}=n,h=reactExports.createContext(f);h.displayName=e;function m(){const g=reactExports.useContext(h);if(!g&&s){const _=new Error(c??getErrorMessage(o,a));throw _.name="ContextError",Error.captureStackTrace?.(_,m),_}return g}return[h.Provider,m,h]}const cx=(...n)=>n.filter(Boolean).join(" "),hasTabIndex=n=>n.hasAttribute("tabindex");function isFocusable(n){if(!isHTMLElement$1(n)||isHiddenElement(n)||isDisabledElement(n))return!1;const{localName:e}=n;if(["input","select","textarea","button"].indexOf(e)>=0)return!0;const o={a:()=>n.hasAttribute("href"),audio:()=>n.hasAttribute("controls"),video:()=>n.hasAttribute("controls")};return e in o?o[e]():isContentEditableElement(n)?!0:hasTabIndex(n)}const focusableElList=["input:not(:disabled):not([disabled])","select:not(:disabled):not([disabled])","textarea:not(:disabled):not([disabled])","embed","iframe","object","a[href]","area[href]","button:not(:disabled):not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"],focusableElSelector=focusableElList.join(),isVisible=n=>n.offsetWidth>0&&n.offsetHeight>0;function getAllFocusable(n){const e=Array.from(n.querySelectorAll(focusableElSelector));return e.unshift(n),e.filter(s=>isFocusable(s)&&isVisible(s))}function get$2(n,e,s,o){const a=typeof e=="string"?e.split("."):[e];for(o=0;o<a.length&&n;o+=1)n=n[a[o]];return n===void 0?s:n}const memoize$2=n=>{const e=new WeakMap;return(o,a,c,f)=>{if(typeof o>"u")return n(o,a,c);e.has(o)||e.set(o,new Map);const h=e.get(o);if(h.has(a))return h.get(a);const m=n(o,a,c,f);return h.set(a,m),m}},memoizedGet$1=memoize$2(get$2),interopDefault=n=>n.default||n;function toNumber(n){const e=parseFloat(n);return typeof e!="number"||Number.isNaN(e)?0:e}function toPrecision(n,e){let s=toNumber(n);const o=10**(e??10);return s=Math.round(s*o)/o,e?s.toFixed(e):s.toString()}function countDecimalPlaces(n){if(!Number.isFinite(n))return 0;let e=1,s=0;for(;Math.round(n*e)/e!==n;)e*=10,s+=1;return s}function valueToPercent$1(n,e,s){return(n-e)*100/(s-e)}function percentToValue(n,e,s){return(s-e)*n+e}function roundValueToStep(n,e,s){const o=Math.round((n-e)/s)*s+e,a=countDecimalPlaces(s);return toPrecision(o,a)}function clampValue(n,e,s){return n==null?n:(s<e&&console.warn("clamp: max cannot be less than min"),Math.min(Math.max(n,e),s))}function omit(n,e=[]){const s=Object.assign({},n);for(const o of e)o in s&&delete s[o];return s}function pick(n,e){const s={};for(const o of e)o in n&&(s[o]=n[o]);return s}function mapResponsive(n,e){return Array.isArray(n)?n.map(s=>s===null?null:e(s)):isObject$1(n)?Object.keys(n).reduce((s,o)=>(s[o]=e(n[o]),s),{}):n!=null?e(n):null}const isFunction$1=n=>typeof n=="function";function runIfFn$1(n,...e){return isFunction$1(n)?n(...e):n}function split(n,e){const s={},o={};for(const[a,c]of Object.entries(n))e.includes(a)?s[a]=c:o[a]=c;return[s,o]}function splitProps(n,...e){const s=Object.getOwnPropertyDescriptors(n),o=Object.keys(s),a=f=>{const h={};for(let m=0;m<f.length;m++){const g=f[m];s[g]&&(Object.defineProperty(h,g,s[g]),delete s[g])}return h},c=f=>a(Array.isArray(f)?f:o.filter(f));return e.map(c).concat(a(o))}function walkObject(n,e,s={}){const{stop:o,getKey:a}=s;function c(f,h=[]){if(isObject$1(f)||Array.isArray(f)){const m={};for(const[g,_]of Object.entries(f)){const E=a?.(g)??g,T=[...h,E];if(o?.(f,T))return e(f,h);m[E]=c(_,T)}return m}return e(f,h)}return c(n)}var lodash_mergewith={exports:{}};lodash_mergewith.exports;var hasRequiredLodash_mergewith;function requireLodash_mergewith(){return hasRequiredLodash_mergewith||(hasRequiredLodash_mergewith=1,(function(n,e){var s=200,o="__lodash_hash_undefined__",a=800,c=16,f=9007199254740991,h="[object Arguments]",m="[object Array]",g="[object AsyncFunction]",_="[object Boolean]",E="[object Date]",T="[object Error]",w="[object Function]",A="[object GeneratorFunction]",R="[object Map]",V="[object Number]",te="[object Null]",se="[object Object]",re="[object Proxy]",ye="[object RegExp]",D="[object Set]",ae="[object String]",z="[object Undefined]",H="[object WeakMap]",X="[object ArrayBuffer]",le="[object DataView]",Z="[object Float32Array]",ne="[object Float64Array]",W="[object Int8Array]",xe="[object Int16Array]",de="[object Int32Array]",oe="[object Uint8Array]",_e="[object Uint8ClampedArray]",Re="[object Uint16Array]",Ie="[object Uint32Array]",he=/[\\^$.*+?()[\]{}|]/g,be=/^\[object .+?Constructor\]$/,Se=/^(?:0|[1-9]\d*)$/,Ae={};Ae[Z]=Ae[ne]=Ae[W]=Ae[xe]=Ae[de]=Ae[oe]=Ae[_e]=Ae[Re]=Ae[Ie]=!0,Ae[h]=Ae[m]=Ae[X]=Ae[_]=Ae[le]=Ae[E]=Ae[T]=Ae[w]=Ae[R]=Ae[V]=Ae[se]=Ae[ye]=Ae[D]=Ae[ae]=Ae[H]=!1;var Be=typeof commonjsGlobal$2=="object"&&commonjsGlobal$2&&commonjsGlobal$2.Object===Object&&commonjsGlobal$2,Ue=typeof self=="object"&&self&&self.Object===Object&&self,qe=Be||Ue||Function("return this")(),Xe=e&&!e.nodeType&&e,Ke=Xe&&!0&&n&&!n.nodeType&&n,Ze=Ke&&Ke.exports===Xe,it=Ze&&Be.process,wn=(function(){try{var me=Ke&&Ke.require&&Ke.require("util").types;return me||it&&it.binding&&it.binding("util")}catch{}})(),yn=wn&&wn.isTypedArray;function Mt(me,Te,Ne){switch(Ne.length){case 0:return me.call(Te);case 1:return me.call(Te,Ne[0]);case 2:return me.call(Te,Ne[0],Ne[1]);case 3:return me.call(Te,Ne[0],Ne[1],Ne[2])}return me.apply(Te,Ne)}function Ge(me,Te){for(var Ne=-1,Ye=Array(me);++Ne<me;)Ye[Ne]=Te(Ne);return Ye}function ln(me){return function(Te){return me(Te)}}function kt(me,Te){return me?.[Te]}function Ft(me,Te){return function(Ne){return me(Te(Ne))}}var lr=Array.prototype,Fn=Function.prototype,Hn=Object.prototype,Qn=qe["__core-js_shared__"],Nn=Fn.toString,Gn=Hn.hasOwnProperty,Vr=(function(){var me=/[^.]+$/.exec(Qn&&Qn.keys&&Qn.keys.IE_PROTO||"");return me?"Symbol(src)_1."+me:""})(),ir=Hn.toString,Vn=Nn.call(Object),ie=RegExp("^"+Nn.call(Gn).replace(he,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),C=Ze?qe.Buffer:void 0,P=qe.Symbol,ue=qe.Uint8Array;C&&C.allocUnsafe;var Ee=Ft(Object.getPrototypeOf,Object),ke=Object.create,Le=Hn.propertyIsEnumerable,tt=lr.splice,st=P?P.toStringTag:void 0,At=(function(){try{var me=Kn(Object,"defineProperty");return me({},"",{}),me}catch{}})(),Wt=C?C.isBuffer:void 0,Fe=Math.max,dt=Date.now,wt=Kn(qe,"Map"),dn=Kn(Object,"create"),jt=(function(){function me(){}return function(Te){if(!dr(Te))return{};if(ke)return ke(Te);me.prototype=Te;var Ne=new me;return me.prototype=void 0,Ne}})();function Je(me){var Te=-1,Ne=me==null?0:me.length;for(this.clear();++Te<Ne;){var Ye=me[Te];this.set(Ye[0],Ye[1])}}function bn(){this.__data__=dn?dn(null):{},this.size=0}function Gt(me){var Te=this.has(me)&&delete this.__data__[me];return this.size-=Te?1:0,Te}function Lt(me){var Te=this.__data__;if(dn){var Ne=Te[me];return Ne===o?void 0:Ne}return Gn.call(Te,me)?Te[me]:void 0}function cr(me){var Te=this.__data__;return dn?Te[me]!==void 0:Gn.call(Te,me)}function jn(me,Te){var Ne=this.__data__;return this.size+=this.has(me)?0:1,Ne[me]=dn&&Te===void 0?o:Te,this}Je.prototype.clear=bn,Je.prototype.delete=Gt,Je.prototype.get=Lt,Je.prototype.has=cr,Je.prototype.set=jn;function Un(me){var Te=-1,Ne=me==null?0:me.length;for(this.clear();++Te<Ne;){var Ye=me[Te];this.set(Ye[0],Ye[1])}}function fn(){this.__data__=[],this.size=0}function Rn(me){var Te=this.__data__,Ne=Mi(Te,me);if(Ne<0)return!1;var Ye=Te.length-1;return Ne==Ye?Te.pop():tt.call(Te,Ne,1),--this.size,!0}function En(me){var Te=this.__data__,Ne=Mi(Te,me);return Ne<0?void 0:Te[Ne][1]}function pn(me){return Mi(this.__data__,me)>-1}function Wn(me,Te){var Ne=this.__data__,Ye=Mi(Ne,me);return Ye<0?(++this.size,Ne.push([me,Te])):Ne[Ye][1]=Te,this}Un.prototype.clear=fn,Un.prototype.delete=Rn,Un.prototype.get=En,Un.prototype.has=pn,Un.prototype.set=Wn;function gr(me){var Te=-1,Ne=me==null?0:me.length;for(this.clear();++Te<Ne;){var Ye=me[Te];this.set(Ye[0],Ye[1])}}function sr(){this.size=0,this.__data__={hash:new Je,map:new(wt||Un),string:new Je}}function $r(me){var Te=us(this,me).delete(me);return this.size-=Te?1:0,Te}function gi(me){return us(this,me).get(me)}function ii(me){return us(this,me).has(me)}function yi(me,Te){var Ne=us(this,me),Ye=Ne.size;return Ne.set(me,Te),this.size+=Ne.size==Ye?0:1,this}gr.prototype.clear=sr,gr.prototype.delete=$r,gr.prototype.get=gi,gr.prototype.has=ii,gr.prototype.set=yi;function Tr(me){var Te=this.__data__=new Un(me);this.size=Te.size}function si(){this.__data__=new Un,this.size=0}function Sr(me){var Te=this.__data__,Ne=Te.delete(me);return this.size=Te.size,Ne}function Zn(me){return this.__data__.get(me)}function Ns(me){return this.__data__.has(me)}function ss(me,Te){var Ne=this.__data__;if(Ne instanceof Un){var Ye=Ne.__data__;if(!wt||Ye.length<s-1)return Ye.push([me,Te]),this.size=++Ne.size,this;Ne=this.__data__=new gr(Ye)}return Ne.set(me,Te),this.size=Ne.size,this}Tr.prototype.clear=si,Tr.prototype.delete=Sr,Tr.prototype.get=Zn,Tr.prototype.has=Ns,Tr.prototype.set=ss;function Ur(me,Te){var Ne=Wr(me),Ye=!Ne&&Pr(me),zt=!Ne&&!Ye&&Kr(me),vn=!Ne&&!Ye&&!zt&&Yr(me),Cn=Ne||Ye||zt||vn,$t=Cn?Ge(me.length,String):[],An=$t.length;for(var Yn in me)Cn&&(Yn=="length"||zt&&(Yn=="offset"||Yn=="parent")||vn&&(Yn=="buffer"||Yn=="byteLength"||Yn=="byteOffset")||bi(Yn,An))||$t.push(Yn);return $t}function zr(me,Te,Ne){(Ne!==void 0&&!Br(me[Te],Ne)||Ne===void 0&&!(Te in me))&&_i(me,Te,Ne)}function lo(me,Te,Ne){var Ye=me[Te];(!(Gn.call(me,Te)&&Br(Ye,Ne))||Ne===void 0&&!(Te in me))&&_i(me,Te,Ne)}function Mi(me,Te){for(var Ne=me.length;Ne--;)if(Br(me[Ne][0],Te))return Ne;return-1}function _i(me,Te,Ne){Te=="__proto__"&&At?At(me,Te,{configurable:!0,enumerable:!0,value:Ne,writable:!0}):me[Te]=Ne}var co=Oi();function Hr(me){return me==null?me===void 0?z:te:st&&st in Object(me)?Dr(me):fo(me)}function qr(me){return yr(me)&&Hr(me)==h}function ur(me){if(!dr(me)||Li(me))return!1;var Te=fs(me)?ie:be;return Te.test(ds(me))}function Ni(me){return yr(me)&&wi(me.length)&&!!Ae[Hr(me)]}function uo(me){if(!dr(me))return Fi(me);var Te=Mr(me),Ne=[];for(var Ye in me)Ye=="constructor"&&(Te||!Gn.call(me,Ye))||Ne.push(Ye);return Ne}function oi(me,Te,Ne,Ye,zt){me!==Te&&co(Te,function(vn,Cn){if(zt||(zt=new Tr),dr(vn))os(me,Te,Cn,Ne,oi,Ye,zt);else{var $t=Ye?Ye(ji(me,Cn),vn,Cn+"",me,Te,zt):void 0;$t===void 0&&($t=vn),zr(me,Cn,$t)}},ai)}function os(me,Te,Ne,Ye,zt,vn,Cn){var $t=ji(me,Ne),An=ji(Te,Ne),Yn=Cn.get(An);if(Yn){zr(me,Ne,Yn);return}var _r=vn?vn($t,An,Ne+"",me,Te,Cn):void 0,zi=_r===void 0;if(zi){var vi=Wr(An),Ai=!vi&&Kr(An),hs=!vi&&!Ai&&Yr(An);_r=An,vi||Ai||hs?Wr($t)?_r=$t:js($t)?_r=qo($t):Ai?(zi=!1,_r=ls(An)):hs?(zi=!1,_r=Bs(An)):_r=[]:Ui(An)||Pr(An)?(_r=$t,Pr($t)?_r=Ri($t):(!dr($t)||fs($t))&&(_r=Bi(An))):zi=!1}zi&&(Cn.set(An,_r),zt(_r,An,Ye,vn,Cn),Cn.delete(An)),zr(me,Ne,_r)}function as(me,Te){return Wo(Fs(me,Te,Xr),me+"")}var Os=At?function(me,Te){return At(me,"toString",{configurable:!0,enumerable:!1,value:li(Te),writable:!0})}:Xr;function ls(me,Te){return me.slice()}function wr(me){var Te=new me.constructor(me.byteLength);return new ue(Te).set(new ue(me)),Te}function Bs(me,Te){var Ne=wr(me.buffer);return new me.constructor(Ne,me.byteOffset,me.length)}function qo(me,Te){var Ne=-1,Ye=me.length;for(Te||(Te=Array(Ye));++Ne<Ye;)Te[Ne]=me[Ne];return Te}function cs(me,Te,Ne,Ye){var zt=!Ne;Ne||(Ne={});for(var vn=-1,Cn=Te.length;++vn<Cn;){var $t=Te[vn],An=void 0;An===void 0&&(An=me[$t]),zt?_i(Ne,$t,An):lo(Ne,$t,An)}return Ne}function Ls(me){return as(function(Te,Ne){var Ye=-1,zt=Ne.length,vn=zt>1?Ne[zt-1]:void 0,Cn=zt>2?Ne[2]:void 0;for(vn=me.length>3&&typeof vn=="function"?(zt--,vn):void 0,Cn&&Ei(Ne[0],Ne[1],Cn)&&(vn=zt<3?void 0:vn,zt=1),Te=Object(Te);++Ye<zt;){var $t=Ne[Ye];$t&&me(Te,$t,Ye,vn)}return Te})}function Oi(me){return function(Te,Ne,Ye){for(var zt=-1,vn=Object(Te),Cn=Ye(Te),$t=Cn.length;$t--;){var An=Cn[++zt];if(Ne(vn[An],An,vn)===!1)break}return Te}}function us(me,Te){var Ne=me.__data__;return $n(Te)?Ne[typeof Te=="string"?"string":"hash"]:Ne.map}function Kn(me,Te){var Ne=kt(me,Te);return ur(Ne)?Ne:void 0}function Dr(me){var Te=Gn.call(me,st),Ne=me[st];try{me[st]=void 0;var Ye=!0}catch{}var zt=ir.call(me);return Ye&&(Te?me[st]=Ne:delete me[st]),zt}function Bi(me){return typeof me.constructor=="function"&&!Mr(me)?jt(Ee(me)):{}}function bi(me,Te){var Ne=typeof me;return Te=Te??f,!!Te&&(Ne=="number"||Ne!="symbol"&&Se.test(me))&&me>-1&&me%1==0&&me<Te}function Ei(me,Te,Ne){if(!dr(Ne))return!1;var Ye=typeof Te;return(Ye=="number"?Gr(Ne)&&bi(Te,Ne.length):Ye=="string"&&Te in Ne)?Br(Ne[Te],me):!1}function $n(me){var Te=typeof me;return Te=="string"||Te=="number"||Te=="symbol"||Te=="boolean"?me!=="__proto__":me===null}function Li(me){return!!Vr&&Vr in me}function Mr(me){var Te=me&&me.constructor,Ne=typeof Te=="function"&&Te.prototype||Hn;return me===Ne}function Fi(me){var Te=[];if(me!=null)for(var Ne in Object(me))Te.push(Ne);return Te}function fo(me){return ir.call(me)}function Fs(me,Te,Ne){return Te=Fe(Te===void 0?me.length-1:Te,0),function(){for(var Ye=arguments,zt=-1,vn=Fe(Ye.length-Te,0),Cn=Array(vn);++zt<vn;)Cn[zt]=Ye[Te+zt];zt=-1;for(var $t=Array(Te+1);++zt<Te;)$t[zt]=Ye[zt];return $t[Te]=Ne(Cn),Mt(me,this,$t)}}function ji(me,Te){if(!(Te==="constructor"&&typeof me[Te]=="function")&&Te!="__proto__")return me[Te]}var Wo=Go(Os);function Go(me){var Te=0,Ne=0;return function(){var Ye=dt(),zt=c-(Ye-Ne);if(Ne=Ye,zt>0){if(++Te>=a)return arguments[0]}else Te=0;return me.apply(void 0,arguments)}}function ds(me){if(me!=null){try{return Nn.call(me)}catch{}try{return me+""}catch{}}return""}function Br(me,Te){return me===Te||me!==me&&Te!==Te}var Pr=qr((function(){return arguments})())?qr:function(me){return yr(me)&&Gn.call(me,"callee")&&!Le.call(me,"callee")},Wr=Array.isArray;function Gr(me){return me!=null&&wi(me.length)&&!fs(me)}function js(me){return yr(me)&&Gr(me)}var Kr=Wt||zs;function fs(me){if(!dr(me))return!1;var Te=Hr(me);return Te==w||Te==A||Te==g||Te==re}function wi(me){return typeof me=="number"&&me>-1&&me%1==0&&me<=f}function dr(me){var Te=typeof me;return me!=null&&(Te=="object"||Te=="function")}function yr(me){return me!=null&&typeof me=="object"}function Ui(me){if(!yr(me)||Hr(me)!=se)return!1;var Te=Ee(me);if(Te===null)return!0;var Ne=Gn.call(Te,"constructor")&&Te.constructor;return typeof Ne=="function"&&Ne instanceof Ne&&Nn.call(Ne)==Vn}var Yr=yn?ln(yn):Ni;function Ri(me){return cs(me,ai(me))}function ai(me){return Gr(me)?Ur(me):uo(me)}var Us=Ls(function(me,Te,Ne,Ye){oi(me,Te,Ne,Ye)});function li(me){return function(){return me}}function Xr(me){return me}function zs(){return!1}n.exports=Us})(lodash_mergewith,lodash_mergewith.exports)),lodash_mergewith.exports}var lodash_mergewithExports=requireLodash_mergewith();const mergeWith=getDefaultExportFromCjs(lodash_mergewithExports);function useCallbackRef$1(n,e=[]){const s=reactExports.useRef(n);return reactExports.useEffect(()=>{s.current=n}),reactExports.useCallback((...o)=>s.current?.(...o),e)}function useControllableState(n){const{value:e,defaultValue:s,onChange:o,shouldUpdate:a=(T,w)=>T!==w}=n,c=useCallbackRef$1(o),f=useCallbackRef$1(a),[h,m]=reactExports.useState(s),g=e!==void 0,_=g?e:h,E=useCallbackRef$1(T=>{const A=typeof T=="function"?T(_):T;f(_,A)&&(g||m(A),c(A))},[g,c,_,f]);return[_,E]}function useDisclosure(n={}){const{onClose:e,onOpen:s,isOpen:o,id:a}=n,c=useCallbackRef$1(s),f=useCallbackRef$1(e),[h,m]=reactExports.useState(n.defaultIsOpen||!1),g=o!==void 0?o:h,_=o!==void 0,E=reactExports.useId(),T=a??`disclosure-${E}`,w=reactExports.useCallback(()=>{_||m(!1),f?.()},[_,f]),A=reactExports.useCallback(()=>{_||m(!0),c?.()},[_,c]),R=reactExports.useCallback(()=>{g?w():A()},[g,A,w]);function V(se={}){return{...se,"aria-expanded":g,"aria-controls":T,onClick(re){se.onClick?.(re),R()}}}function te(se={}){return{...se,hidden:!g,id:T}}return{isOpen:g,onOpen:A,onClose:w,onToggle:R,isControlled:_,getButtonProps:V,getDisclosureProps:te}}const useSafeLayoutEffect$1=globalThis?.document?reactExports.useLayoutEffect:reactExports.useEffect,useUpdateEffect=(n,e)=>{const s=reactExports.useRef(!1),o=reactExports.useRef(!1);reactExports.useEffect(()=>{if(s.current&&o.current)return n();o.current=!0},e),reactExports.useEffect(()=>(s.current=!0,()=>{s.current=!1}),[])};function useLatestRef(n){const e=reactExports.useRef(null);return e.current=n,e}function assignRef$1(n,e){if(n!=null){if(typeof n=="function"){n(e);return}try{n.current=e}catch{throw new Error(`Cannot assign value '${e}' to ref '${n}'`)}}}function mergeRefs(...n){return e=>{n.forEach(s=>{assignRef$1(s,e)})}}function useMergeRefs$1(...n){return reactExports.useMemo(()=>mergeRefs(...n),n)}function useTimeout(n,e){const s=useCallbackRef$1(n);reactExports.useEffect(()=>{if(e==null)return;let o=null;return o=window.setTimeout(()=>{s()},e),()=>{o&&window.clearTimeout(o)}},[e,s])}const defaultTimestep=1/60*1e3,getCurrentTime=typeof performance<"u"?()=>performance.now():()=>Date.now(),onNextFrame=typeof window<"u"?n=>window.requestAnimationFrame(n):n=>setTimeout(()=>n(getCurrentTime()),defaultTimestep);function createRenderStep$1(n){let e=[],s=[],o=0,a=!1,c=!1;const f=new WeakSet,h={schedule:(m,g=!1,_=!1)=>{const E=_&&a,T=E?e:s;return g&&f.add(m),T.indexOf(m)===-1&&(T.push(m),E&&a&&(o=e.length)),m},cancel:m=>{const g=s.indexOf(m);g!==-1&&s.splice(g,1),f.delete(m)},process:m=>{if(a){c=!0;return}if(a=!0,[e,s]=[s,e],s.length=0,o=e.length,o)for(let g=0;g<o;g++){const _=e[g];_(m),f.has(_)&&(h.schedule(_),n())}a=!1,c&&(c=!1,h.process(m))}};return h}const maxElapsed$1=40;let useDefaultElapsed=!0,runNextFrame=!1,isProcessing=!1;const frame$1={delta:0,timestamp:0},stepsOrder$1=["read","update","preRender","render","postRender"],steps=stepsOrder$1.reduce((n,e)=>(n[e]=createRenderStep$1(()=>runNextFrame=!0),n),{}),sync=stepsOrder$1.reduce((n,e)=>{const s=steps[e];return n[e]=(o,a=!1,c=!1)=>(runNextFrame||startLoop(),s.schedule(o,a,c)),n},{}),cancelSync=stepsOrder$1.reduce((n,e)=>(n[e]=steps[e].cancel,n),{});stepsOrder$1.reduce((n,e)=>(n[e]=()=>steps[e].process(frame$1),n),{});const processStep=n=>steps[n].process(frame$1),processFrame=n=>{runNextFrame=!1,frame$1.delta=useDefaultElapsed?defaultTimestep:Math.max(Math.min(n-frame$1.timestamp,maxElapsed$1),1),frame$1.timestamp=n,isProcessing=!0,stepsOrder$1.forEach(processStep),isProcessing=!1,runNextFrame&&(useDefaultElapsed=!1,onNextFrame(processFrame))},startLoop=()=>{runNextFrame=!0,useDefaultElapsed=!0,isProcessing||onNextFrame(processFrame)},getFrameData=()=>frame$1;var __defProp$2=Object.defineProperty,__defNormalProp$1=(n,e,s)=>e in n?__defProp$2(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,__publicField$1=(n,e,s)=>(__defNormalProp$1(n,typeof e!="symbol"?e+"":e,s),s);class PanEvent{constructor(e,s,o){if(__publicField$1(this,"history",[]),__publicField$1(this,"startEvent",null),__publicField$1(this,"lastEvent",null),__publicField$1(this,"lastEventInfo",null),__publicField$1(this,"handlers",{}),__publicField$1(this,"removeListeners",()=>{}),__publicField$1(this,"threshold",3),__publicField$1(this,"win"),__publicField$1(this,"updatePoint",()=>{if(!(this.lastEvent&&this.lastEventInfo))return;const h=getPanInfo$1(this.lastEventInfo,this.history),m=this.startEvent!==null,g=distance$1(h.offset,{x:0,y:0})>=this.threshold;if(!m&&!g)return;const{timestamp:_}=getFrameData();this.history.push({...h.point,timestamp:_});const{onStart:E,onMove:T}=this.handlers;m||(E?.(this.lastEvent,h),this.startEvent=this.lastEvent),T?.(this.lastEvent,h)}),__publicField$1(this,"onPointerMove",(h,m)=>{this.lastEvent=h,this.lastEventInfo=m,sync.update(this.updatePoint,!0)}),__publicField$1(this,"onPointerUp",(h,m)=>{const g=getPanInfo$1(m,this.history),{onEnd:_,onSessionEnd:E}=this.handlers;E?.(h,g),this.end(),!(!_||!this.startEvent)&&_?.(h,g)}),this.win=e.view??window,isMultiTouchEvent(e))return;this.handlers=s,o&&(this.threshold=o),e.stopPropagation(),e.preventDefault();const a={point:getEventPoint(e)},{timestamp:c}=getFrameData();this.history=[{...a.point,timestamp:c}];const{onSessionStart:f}=s;f?.(e,getPanInfo$1(a,this.history)),this.removeListeners=pipe$2(addPointerEvent$1(this.win,"pointermove",this.onPointerMove),addPointerEvent$1(this.win,"pointerup",this.onPointerUp),addPointerEvent$1(this.win,"pointercancel",this.onPointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners?.(),cancelSync.update(this.updatePoint)}}function subtract$2(n,e){return{x:n.x-e.x,y:n.y-e.y}}function getPanInfo$1(n,e){return{point:n.point,delta:subtract$2(n.point,e[e.length-1]),offset:subtract$2(n.point,e[0]),velocity:getVelocity$1(e,.1)}}const toMilliseconds=n=>n*1e3;function getVelocity$1(n,e){if(n.length<2)return{x:0,y:0};let s=n.length-1,o=null;const a=n[n.length-1];for(;s>=0&&(o=n[s],!(a.timestamp-o.timestamp>toMilliseconds(e)));)s--;if(!o)return{x:0,y:0};const c=(a.timestamp-o.timestamp)/1e3;if(c===0)return{x:0,y:0};const f={x:(a.x-o.x)/c,y:(a.y-o.y)/c};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function pipe$2(...n){return e=>n.reduce((s,o)=>o(s),e)}function distance1D(n,e){return Math.abs(n-e)}function isPoint(n){return"x"in n&&"y"in n}function distance$1(n,e){if(typeof n=="number"&&typeof e=="number")return distance1D(n,e);if(isPoint(n)&&isPoint(e)){const s=distance1D(n.x,e.x),o=distance1D(n.y,e.y);return Math.sqrt(s**2+o**2)}return 0}function usePanEvent(n,e){const{onPan:s,onPanStart:o,onPanEnd:a,onPanSessionStart:c,onPanSessionEnd:f,threshold:h}=e,m=!!(s||o||a||c||f),g=reactExports.useRef(null),_=useLatestRef({onSessionStart:c,onSessionEnd:f,onStart:o,onMove:s,onEnd(E,T){g.current=null,a?.(E,T)}});reactExports.useEffect(()=>{g.current?.updateHandlers(_.current)}),reactExports.useEffect(()=>{const E=n.current;if(!E||!m)return;function T(w){g.current=new PanEvent(w,_.current,h)}return addPointerEvent$1(E,"pointerdown",T)},[n,m,_,h]),reactExports.useEffect(()=>()=>{g.current?.end(),g.current=null},[])}const state={open:(n,e)=>`${n}[data-open], ${n}[open], ${n}[data-state=open] ${e}`,closed:(n,e)=>`${n}[data-closed], ${n}[data-state=closed] ${e}`,hover:(n,e)=>`${n}:hover ${e}, ${n}[data-hover] ${e}`,focus:(n,e)=>`${n}:focus ${e}, ${n}[data-focus] ${e}`,focusVisible:(n,e)=>`${n}:focus-visible ${e}`,focusWithin:(n,e)=>`${n}:focus-within ${e}`,active:(n,e)=>`${n}:active ${e}, ${n}[data-active] ${e}`,disabled:(n,e)=>`${n}:disabled ${e}, ${n}[data-disabled] ${e}`,invalid:(n,e)=>`${n}:invalid ${e}, ${n}[data-invalid] ${e}`,checked:(n,e)=>`${n}:checked ${e}, ${n}[data-checked] ${e}`,placeholderShown:(n,e)=>`${n}:placeholder-shown ${e}`},toGroup=n=>merge(e=>n(e,"&"),"[role=group]","[data-group]",".group"),toPeer=n=>merge(e=>n(e,"~ &"),"[data-peer]",".peer"),merge=(n,...e)=>e.map(n).join(", "),pseudoSelectors={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within, &[data-focus-within]",_focusVisible:"&:focus-visible, &[data-focus-visible]",_disabled:"&:disabled, &[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty, &[data-empty]",_expanded:"&[aria-expanded=true], &[data-expanded], &[data-state=expanded]",_checked:"&[aria-checked=true], &[data-checked], &[data-state=checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_firstLetter:"&::first-letter",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate], &[data-state=indeterminate]",_groupOpen:toGroup(state.open),_groupClosed:toGroup(state.closed),_groupHover:toGroup(state.hover),_peerHover:toPeer(state.hover),_groupFocus:toGroup(state.focus),_peerFocus:toPeer(state.focus),_groupFocusVisible:toGroup(state.focusVisible),_peerFocusVisible:toPeer(state.focusVisible),_groupActive:toGroup(state.active),_peerActive:toPeer(state.active),_groupDisabled:toGroup(state.disabled),_peerDisabled:toPeer(state.disabled),_groupInvalid:toGroup(state.invalid),_peerInvalid:toPeer(state.invalid),_groupChecked:toGroup(state.checked),_peerChecked:toPeer(state.checked),_groupFocusWithin:toGroup(state.focusWithin),_peerFocusWithin:toPeer(state.focusWithin),_peerPlaceholderShown:toPeer(state.placeholderShown),_placeholder:"&::placeholder, &[data-placeholder]",_placeholderShown:"&:placeholder-shown, &[data-placeholder-shown]",_fullScreen:"&:fullscreen, &[data-fullscreen]",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]",_horizontal:"&[data-orientation=horizontal]",_vertical:"&[data-orientation=vertical]",_open:"&[data-open], &[open], &[data-state=open]",_closed:"&[data-closed], &[data-state=closed]",_complete:"&[data-complete]",_incomplete:"&[data-incomplete]",_current:"&[data-current]"},pseudoPropNames=Object.keys(pseudoSelectors),isImportant=n=>/!(important)?$/.test(n),withoutImportant=n=>typeof n=="string"?n.replace(/!(important)?$/,"").trim():n,tokenToCSSVar=(n,e)=>s=>{const o=String(e),a=isImportant(o),c=withoutImportant(o),f=n?`${n}.${c}`:c;let h=isObject$1(s.__cssMap)&&f in s.__cssMap?s.__cssMap[f].varRef:e;return h=withoutImportant(h),a?`${h} !important`:h};function createTransform(n){const{scale:e,transform:s,compose:o}=n;return(c,f)=>{const h=tokenToCSSVar(e,c)(f);let m=s?.(h,f)??h;return o&&(m=o(m,f)),m}}const pipe$1=(...n)=>e=>n.reduce((s,o)=>o(s),e);function toConfig(n,e){return s=>{const o={property:s,scale:n};return o.transform=createTransform({scale:n,transform:e}),o}}const getRtl=({rtl:n,ltr:e})=>s=>s.direction==="rtl"?n:e;function logical(n){const{property:e,scale:s,transform:o}=n;return{scale:s,property:getRtl(e),transform:s?createTransform({scale:s,compose:o}):o}}const transformTemplate=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];function getTransformTemplate(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))",...transformTemplate].join(" ")}function getTransformGpuTemplate(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)",...transformTemplate].join(" ")}const filterTemplate={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},backdropFilterTemplate={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};function getRingTemplate(n){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":n,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}const flexDirectionTemplate={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},directionMap={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},valueSet=new Set(Object.values(directionMap)),globalSet=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),trimSpace=n=>n.trim();function parseGradient(n,e){if(n==null||globalSet.has(n))return n;if(!(isCSSFunction(n)||globalSet.has(n)))return`url('${n}')`;const a=/(^[a-z-A-Z]+)\((.*)\)/g.exec(n),c=a?.[1],f=a?.[2];if(!c||!f)return n;const h=c.includes("-gradient")?c:`${c}-gradient`,[m,...g]=f.split(",").map(trimSpace).filter(Boolean);if(g?.length===0)return n;const _=m in directionMap?directionMap[m]:m;g.unshift(_);const E=g.map(T=>{if(valueSet.has(T))return T;const w=T.indexOf(" "),[A,R]=w!==-1?[T.substr(0,w),T.substr(w+1)]:[T],V=isCSSFunction(R)?R:R&&R.split(" "),te=`colors.${A}`,se=te in e.__cssMap?e.__cssMap[te].varRef:A;return V?[se,...Array.isArray(V)?V:[V]].join(" "):se});return`${h}(${E.join(", ")})`}const isCSSFunction=n=>typeof n=="string"&&n.includes("(")&&n.includes(")"),gradientTransform=(n,e)=>parseGradient(n,e??{});function isCssVar$1(n){return/^var\(--.+\)$/.test(n)}const analyzeCSSValue=n=>{const e=parseFloat(n.toString()),s=n.toString().replace(String(e),"");return{unitless:!s,value:e,unit:s}},wrap=n=>e=>`${n}(${e})`,transformFunctions={filter(n){return n!=="auto"?n:filterTemplate},backdropFilter(n){return n!=="auto"?n:backdropFilterTemplate},ring(n){return getRingTemplate(transformFunctions.px(n))},bgClip(n){return n==="text"?{color:"transparent",backgroundClip:"text"}:{backgroundClip:n}},transform(n){return n==="auto"?getTransformTemplate():n==="auto-gpu"?getTransformGpuTemplate():n},vh(n){return n==="$100vh"?"var(--chakra-vh)":n},px(n){if(n==null)return n;const{unitless:e}=analyzeCSSValue(n);return e||typeof n=="number"?`${n}px`:n},fraction(n){return typeof n!="number"||n>1?n:`${n*100}%`},float(n,e){const s={left:"right",right:"left"};return e.direction==="rtl"?s[n]:n},degree(n){if(isCssVar$1(n)||n==null)return n;const e=typeof n=="string"&&!n.endsWith("deg");return typeof n=="number"||e?`${n}deg`:n},gradient:gradientTransform,blur:wrap("blur"),opacity:wrap("opacity"),brightness:wrap("brightness"),contrast:wrap("contrast"),dropShadow:wrap("drop-shadow"),grayscale:wrap("grayscale"),hueRotate:n=>wrap("hue-rotate")(transformFunctions.degree(n)),invert:wrap("invert"),saturate:wrap("saturate"),sepia:wrap("sepia"),bgImage(n){return n==null||isCSSFunction(n)||globalSet.has(n)?n:`url(${n})`},outline(n){const e=String(n)==="0"||String(n)==="none";return n!==null&&e?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:n}},flexDirection(n){const{space:e,divide:s}=flexDirectionTemplate[n]??{},o={flexDirection:n};return e&&(o[e]=1),s&&(o[s]=1),o}},t={borderWidths:toConfig("borderWidths"),borderStyles:toConfig("borderStyles"),colors:toConfig("colors"),borders:toConfig("borders"),gradients:toConfig("gradients",transformFunctions.gradient),radii:toConfig("radii",transformFunctions.px),space:toConfig("space",pipe$1(transformFunctions.vh,transformFunctions.px)),spaceT:toConfig("space",pipe$1(transformFunctions.vh,transformFunctions.px)),degreeT(n){return{property:n,transform:transformFunctions.degree}},prop(n,e,s){return{property:n,scale:e,...e&&{transform:createTransform({scale:e,transform:s})}}},propT(n,e){return{property:n,transform:e}},sizes:toConfig("sizes",pipe$1(transformFunctions.vh,transformFunctions.px)),sizesT:toConfig("sizes",pipe$1(transformFunctions.vh,transformFunctions.fraction)),shadows:toConfig("shadows"),logical,blur:toConfig("blur",transformFunctions.blur)},background={background:t.colors("background"),backgroundColor:t.colors("backgroundColor"),backgroundImage:t.gradients("backgroundImage"),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:transformFunctions.bgClip},bgSize:t.prop("backgroundSize"),bgPosition:t.prop("backgroundPosition"),bg:t.colors("background"),bgColor:t.colors("backgroundColor"),bgPos:t.prop("backgroundPosition"),bgRepeat:t.prop("backgroundRepeat"),bgAttachment:t.prop("backgroundAttachment"),bgGradient:t.gradients("backgroundImage"),bgClip:{transform:transformFunctions.bgClip}};Object.assign(background,{bgImage:background.backgroundImage,bgImg:background.backgroundImage});const border={border:t.borders("border"),borderWidth:t.borderWidths("borderWidth"),borderStyle:t.borderStyles("borderStyle"),borderColor:t.colors("borderColor"),borderRadius:t.radii("borderRadius"),borderTop:t.borders("borderTop"),borderBlockStart:t.borders("borderBlockStart"),borderTopLeftRadius:t.radii("borderTopLeftRadius"),borderStartStartRadius:t.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:t.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:t.radii("borderTopRightRadius"),borderStartEndRadius:t.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:t.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:t.borders("borderRight"),borderInlineEnd:t.borders("borderInlineEnd"),borderBottom:t.borders("borderBottom"),borderBlockEnd:t.borders("borderBlockEnd"),borderBottomLeftRadius:t.radii("borderBottomLeftRadius"),borderBottomRightRadius:t.radii("borderBottomRightRadius"),borderLeft:t.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:t.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:t.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:t.borders(["borderLeft","borderRight"]),borderInline:t.borders("borderInline"),borderY:t.borders(["borderTop","borderBottom"]),borderBlock:t.borders("borderBlock"),borderTopWidth:t.borderWidths("borderTopWidth"),borderBlockStartWidth:t.borderWidths("borderBlockStartWidth"),borderTopColor:t.colors("borderTopColor"),borderBlockStartColor:t.colors("borderBlockStartColor"),borderTopStyle:t.borderStyles("borderTopStyle"),borderBlockStartStyle:t.borderStyles("borderBlockStartStyle"),borderBottomWidth:t.borderWidths("borderBottomWidth"),borderBlockEndWidth:t.borderWidths("borderBlockEndWidth"),borderBottomColor:t.colors("borderBottomColor"),borderBlockEndColor:t.colors("borderBlockEndColor"),borderBottomStyle:t.borderStyles("borderBottomStyle"),borderBlockEndStyle:t.borderStyles("borderBlockEndStyle"),borderLeftWidth:t.borderWidths("borderLeftWidth"),borderInlineStartWidth:t.borderWidths("borderInlineStartWidth"),borderLeftColor:t.colors("borderLeftColor"),borderInlineStartColor:t.colors("borderInlineStartColor"),borderLeftStyle:t.borderStyles("borderLeftStyle"),borderInlineStartStyle:t.borderStyles("borderInlineStartStyle"),borderRightWidth:t.borderWidths("borderRightWidth"),borderInlineEndWidth:t.borderWidths("borderInlineEndWidth"),borderRightColor:t.colors("borderRightColor"),borderInlineEndColor:t.colors("borderInlineEndColor"),borderRightStyle:t.borderStyles("borderRightStyle"),borderInlineEndStyle:t.borderStyles("borderInlineEndStyle"),borderTopRadius:t.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:t.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:t.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:t.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(border,{rounded:border.borderRadius,roundedTop:border.borderTopRadius,roundedTopLeft:border.borderTopLeftRadius,roundedTopRight:border.borderTopRightRadius,roundedTopStart:border.borderStartStartRadius,roundedTopEnd:border.borderStartEndRadius,roundedBottom:border.borderBottomRadius,roundedBottomLeft:border.borderBottomLeftRadius,roundedBottomRight:border.borderBottomRightRadius,roundedBottomStart:border.borderEndStartRadius,roundedBottomEnd:border.borderEndEndRadius,roundedLeft:border.borderLeftRadius,roundedRight:border.borderRightRadius,roundedStart:border.borderInlineStartRadius,roundedEnd:border.borderInlineEndRadius,borderStart:border.borderInlineStart,borderEnd:border.borderInlineEnd,borderTopStartRadius:border.borderStartStartRadius,borderTopEndRadius:border.borderStartEndRadius,borderBottomStartRadius:border.borderEndStartRadius,borderBottomEndRadius:border.borderEndEndRadius,borderStartRadius:border.borderInlineStartRadius,borderEndRadius:border.borderInlineEndRadius,borderStartWidth:border.borderInlineStartWidth,borderEndWidth:border.borderInlineEndWidth,borderStartColor:border.borderInlineStartColor,borderEndColor:border.borderInlineEndColor,borderStartStyle:border.borderInlineStartStyle,borderEndStyle:border.borderInlineEndStyle});const color$1={color:t.colors("color"),textColor:t.colors("color"),fill:t.colors("fill"),stroke:t.colors("stroke"),accentColor:t.colors("accentColor"),textFillColor:t.colors("textFillColor")},flexbox={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:transformFunctions.flexDirection},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:t.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:t.space("gap"),rowGap:t.space("rowGap"),columnGap:t.space("columnGap")};Object.assign(flexbox,{flexDir:flexbox.flexDirection});const layout$1={width:t.sizesT("width"),inlineSize:t.sizesT("inlineSize"),height:t.sizes("height"),blockSize:t.sizes("blockSize"),boxSize:t.sizes(["width","height"]),minWidth:t.sizes("minWidth"),minInlineSize:t.sizes("minInlineSize"),minHeight:t.sizes("minHeight"),minBlockSize:t.sizes("minBlockSize"),maxWidth:t.sizes("maxWidth"),maxInlineSize:t.sizes("maxInlineSize"),maxHeight:t.sizes("maxHeight"),maxBlockSize:t.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,aspectRatio:!0,hideFrom:{scale:"breakpoints",transform:(n,e)=>({[`@media screen and (min-width: ${e.__breakpoints?.get(n)?.minW??n})`]:{display:"none"}})},hideBelow:{scale:"breakpoints",transform:(n,e)=>({[`@media screen and (max-width: ${e.__breakpoints?.get(n)?._minW??n})`]:{display:"none"}})},verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:t.propT("float",transformFunctions.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign(layout$1,{w:layout$1.width,h:layout$1.height,minW:layout$1.minWidth,maxW:layout$1.maxWidth,minH:layout$1.minHeight,maxH:layout$1.maxHeight,overscroll:layout$1.overscrollBehavior,overscrollX:layout$1.overscrollBehaviorX,overscrollY:layout$1.overscrollBehaviorY});const filter$1={filter:{transform:transformFunctions.filter},blur:t.blur("--chakra-blur"),brightness:t.propT("--chakra-brightness",transformFunctions.brightness),contrast:t.propT("--chakra-contrast",transformFunctions.contrast),hueRotate:t.propT("--chakra-hue-rotate",transformFunctions.hueRotate),invert:t.propT("--chakra-invert",transformFunctions.invert),saturate:t.propT("--chakra-saturate",transformFunctions.saturate),dropShadow:t.propT("--chakra-drop-shadow",transformFunctions.dropShadow),backdropFilter:{transform:transformFunctions.backdropFilter},backdropBlur:t.blur("--chakra-backdrop-blur"),backdropBrightness:t.propT("--chakra-backdrop-brightness",transformFunctions.brightness),backdropContrast:t.propT("--chakra-backdrop-contrast",transformFunctions.contrast),backdropHueRotate:t.propT("--chakra-backdrop-hue-rotate",transformFunctions.hueRotate),backdropInvert:t.propT("--chakra-backdrop-invert",transformFunctions.invert),backdropSaturate:t.propT("--chakra-backdrop-saturate",transformFunctions.saturate)},ring={ring:{transform:transformFunctions.ring},ringColor:t.colors("--chakra-ring-color"),ringOffset:t.prop("--chakra-ring-offset-width"),ringOffsetColor:t.colors("--chakra-ring-offset-color"),ringInset:t.prop("--chakra-ring-inset")},interactivity={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:transformFunctions.outline},outlineOffset:!0,outlineColor:t.colors("outlineColor")},grid={gridGap:t.space("gridGap"),gridColumnGap:t.space("gridColumnGap"),gridRowGap:t.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0};function get$1(n,e,s,o){const a=typeof e=="string"?e.split("."):[e];for(o=0;o<a.length&&n;o+=1)n=n[a[o]];return n===void 0?s:n}const memoize$1=n=>{const e=new WeakMap;return(o,a,c,f)=>{if(typeof o>"u")return n(o,a,c);e.has(o)||e.set(o,new Map);const h=e.get(o);if(h.has(a))return h.get(a);const m=n(o,a,c,f);return h.set(a,m),m}},memoizedGet=memoize$1(get$1),srOnly={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},srFocusable={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},getWithPriority=(n,e,s)=>{const o={},a=memoizedGet(n,e,{});for(const c in a)c in s&&s[c]!=null||(o[c]=a[c]);return o},others={srOnly:{transform(n){return n===!0?srOnly:n==="focusable"?srFocusable:{}}},layerStyle:{processResult:!0,transform:(n,e,s)=>getWithPriority(e,`layerStyles.${n}`,s)},textStyle:{processResult:!0,transform:(n,e,s)=>getWithPriority(e,`textStyles.${n}`,s)},apply:{processResult:!0,transform:(n,e,s)=>getWithPriority(e,n,s)}},position$1={position:!0,pos:t.prop("position"),zIndex:t.prop("zIndex","zIndices"),inset:t.spaceT("inset"),insetX:t.spaceT(["left","right"]),insetInline:t.spaceT("insetInline"),insetY:t.spaceT(["top","bottom"]),insetBlock:t.spaceT("insetBlock"),top:t.spaceT("top"),insetBlockStart:t.spaceT("insetBlockStart"),bottom:t.spaceT("bottom"),insetBlockEnd:t.spaceT("insetBlockEnd"),left:t.spaceT("left"),insetInlineStart:t.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:t.spaceT("right"),insetInlineEnd:t.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(position$1,{insetStart:position$1.insetInlineStart,insetEnd:position$1.insetInlineEnd});const effect={boxShadow:t.shadows("boxShadow"),mixBlendMode:!0,blendMode:t.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:t.prop("backgroundBlendMode"),opacity:!0};Object.assign(effect,{shadow:effect.boxShadow});const space={margin:t.spaceT("margin"),marginTop:t.spaceT("marginTop"),marginBlockStart:t.spaceT("marginBlockStart"),marginRight:t.spaceT("marginRight"),marginInlineEnd:t.spaceT("marginInlineEnd"),marginBottom:t.spaceT("marginBottom"),marginBlockEnd:t.spaceT("marginBlockEnd"),marginLeft:t.spaceT("marginLeft"),marginInlineStart:t.spaceT("marginInlineStart"),marginX:t.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:t.spaceT("marginInline"),marginY:t.spaceT(["marginTop","marginBottom"]),marginBlock:t.spaceT("marginBlock"),padding:t.space("padding"),paddingTop:t.space("paddingTop"),paddingBlockStart:t.space("paddingBlockStart"),paddingRight:t.space("paddingRight"),paddingBottom:t.space("paddingBottom"),paddingBlockEnd:t.space("paddingBlockEnd"),paddingLeft:t.space("paddingLeft"),paddingInlineStart:t.space("paddingInlineStart"),paddingInlineEnd:t.space("paddingInlineEnd"),paddingX:t.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:t.space("paddingInline"),paddingY:t.space(["paddingTop","paddingBottom"]),paddingBlock:t.space("paddingBlock")};Object.assign(space,{m:space.margin,mt:space.marginTop,mr:space.marginRight,me:space.marginInlineEnd,marginEnd:space.marginInlineEnd,mb:space.marginBottom,ml:space.marginLeft,ms:space.marginInlineStart,marginStart:space.marginInlineStart,mx:space.marginX,my:space.marginY,p:space.padding,pt:space.paddingTop,py:space.paddingY,px:space.paddingX,pb:space.paddingBottom,pl:space.paddingLeft,ps:space.paddingInlineStart,paddingStart:space.paddingInlineStart,pr:space.paddingRight,pe:space.paddingInlineEnd,paddingEnd:space.paddingInlineEnd});const scroll={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:t.spaceT("scrollMargin"),scrollMarginTop:t.spaceT("scrollMarginTop"),scrollMarginBottom:t.spaceT("scrollMarginBottom"),scrollMarginLeft:t.spaceT("scrollMarginLeft"),scrollMarginRight:t.spaceT("scrollMarginRight"),scrollMarginX:t.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:t.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:t.spaceT("scrollPadding"),scrollPaddingTop:t.spaceT("scrollPaddingTop"),scrollPaddingBottom:t.spaceT("scrollPaddingBottom"),scrollPaddingLeft:t.spaceT("scrollPaddingLeft"),scrollPaddingRight:t.spaceT("scrollPaddingRight"),scrollPaddingX:t.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:t.spaceT(["scrollPaddingTop","scrollPaddingBottom"])},typography$1={fontFamily:t.prop("fontFamily","fonts"),fontSize:t.prop("fontSize","fontSizes",transformFunctions.px),fontWeight:t.prop("fontWeight","fontWeights"),lineHeight:t.prop("lineHeight","lineHeights"),letterSpacing:t.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,textIndent:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,isTruncated:{transform(n){if(n===!0)return{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}}},noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},textDecoration={textDecorationColor:t.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:t.shadows("textShadow")},transform={clipPath:!0,transform:t.propT("transform",transformFunctions.transform),transformOrigin:!0,translateX:t.spaceT("--chakra-translate-x"),translateY:t.spaceT("--chakra-translate-y"),skewX:t.degreeT("--chakra-skew-x"),skewY:t.degreeT("--chakra-skew-y"),scaleX:t.prop("--chakra-scale-x"),scaleY:t.prop("--chakra-scale-y"),scale:t.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:t.degreeT("--chakra-rotate")},list={listStyleType:!0,listStylePosition:!0,listStylePos:t.prop("listStylePosition"),listStyleImage:!0,listStyleImg:t.prop("listStyleImage")},transition$1={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:t.prop("transitionDuration","transition.duration"),transitionProperty:t.prop("transitionProperty","transition.property"),transitionTimingFunction:t.prop("transitionTimingFunction","transition.easing")},systemProps=mergeWith({},background,border,color$1,flexbox,layout$1,filter$1,ring,interactivity,grid,others,position$1,effect,space,scroll,typography$1,textDecoration,transform,list,transition$1),layoutSystem=Object.assign({},space,layout$1,flexbox,grid,position$1),layoutPropNames=Object.keys(layoutSystem),propNames=[...Object.keys(systemProps),...pseudoPropNames],styleProps={...systemProps,...pseudoSelectors},isStyleProp=n=>n in styleProps,expandResponsive=n=>e=>{if(!e.__breakpoints)return n;const{isResponsive:s,toArrayValue:o,media:a}=e.__breakpoints,c={};for(const f in n){let h=runIfFn$1(n[f],e);if(h==null)continue;if(h=isObject$1(h)&&s(h)?o(h):h,!Array.isArray(h)){c[f]=h;continue}const m=h.slice(0,a.length).length;for(let g=0;g<m;g+=1){const _=a?.[g];if(!_){c[f]=h[g];continue}c[_]=c[_]||{},h[g]!=null&&(c[_][f]=h[g])}}return c};function splitByComma(n){const e=[];let s="",o=!1;for(let a=0;a<n.length;a++){const c=n[a];c==="("?(o=!0,s+=c):c===")"?(o=!1,s+=c):c===","&&!o?(e.push(s),s=""):s+=c}return s=s.trim(),s&&e.push(s),e}function isCssVar(n){return/^var\(--.+\)$/.test(n)}const isCSSVariableTokenValue=(n,e)=>n.startsWith("--")&&typeof e=="string"&&!isCssVar(e),resolveTokenValue=(n,e)=>{if(e==null)return e;const s=f=>n.__cssMap?.[f]?.varRef,o=f=>s(f)??f,[a,c]=splitByComma(e);return e=s(a)??o(c)??o(e),e};function getCss(n){const{configs:e={},pseudos:s={},theme:o}=n,a=(c,f=!1)=>{const h=runIfFn$1(c,o),m=expandResponsive(h)(o);let g={};for(let _ in m){const E=m[_];let T=runIfFn$1(E,o);_ in s&&(_=s[_]),isCSSVariableTokenValue(_,T)&&(T=resolveTokenValue(o,T));let w=e[_];if(w===!0&&(w={property:_}),isObject$1(T)){g[_]=g[_]??{},g[_]=mergeWith({},g[_],a(T,!0));continue}let A=w?.transform?.(T,o,h)??T;A=w?.processResult?a(A,!0):A;const R=runIfFn$1(w?.property,o);if(!f&&w?.static){const V=runIfFn$1(w.static,o);g=mergeWith({},g,V)}if(R&&Array.isArray(R)){for(const V of R)g[V]=A;continue}if(R){R==="&"&&isObject$1(A)?g=mergeWith({},g,A):g[R]=A;continue}if(isObject$1(A)){g=mergeWith({},g,A);continue}g[_]=A}return g};return a}const css$2=n=>e=>getCss({theme:e,pseudos:pseudoSelectors,configs:systemProps})(n);function defineStyle(n){return n}function defineStyleConfig(n){return n}function createMultiStyleConfigHelpers(n){return{definePartsStyle(e){return e},defineMultiStyleConfig(e){return{parts:n,...e}}}}function normalize$2(n,e){if(Array.isArray(n))return n;if(isObject$1(n))return e(n);if(n!=null)return[n]}function getNextIndex(n,e){for(let s=e+1;s<n.length;s++)if(n[s]!=null)return s;return-1}function createResolver(n){const e=n.__breakpoints;return function(o,a,c,f){if(!e)return;const h={},m=normalize$2(c,e.toArrayValue);if(!m)return h;const g=m.length,_=g===1,E=!!o.parts;for(let T=0;T<g;T++){const w=e.details[T],A=e.details[getNextIndex(m,T)],R=toMediaQueryString(w.minW,A?._minW),V=runIfFn$1(o[a]?.[m[T]],f);if(V){if(E){o.parts?.forEach(te=>{mergeWith(h,{[te]:_?V[te]:{[R]:V[te]}})});continue}if(!E){_?mergeWith(h,V):h[R]=V;continue}h[R]=V}}return h}}function resolveStyleConfig(n){return e=>{const{variant:s,size:o,theme:a}=e,c=createResolver(a);return mergeWith({},runIfFn$1(n.baseStyle??{},e),c(n,"sizes",o,e),c(n,"variants",s,e))}}function omitThemingProps(n){return omit(n,["styleConfig","size","variant","colorScheme"])}function resolveReference(n){return isObject$1(n)&&n.reference?n.reference:String(n)}const toExpression=(n,...e)=>e.map(resolveReference).join(` ${n} `).replace(/calc/g,""),add$1=(...n)=>`calc(${toExpression("+",...n)})`,subtract$1=(...n)=>`calc(${toExpression("-",...n)})`,multiply$1=(...n)=>`calc(${toExpression("*",...n)})`,divide$1=(...n)=>`calc(${toExpression("/",...n)})`,negate$1=n=>{const e=resolveReference(n);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:multiply$1(e,-1)},calc$1=Object.assign(n=>({add:(...e)=>calc$1(add$1(n,...e)),subtract:(...e)=>calc$1(subtract$1(n,...e)),multiply:(...e)=>calc$1(multiply$1(n,...e)),divide:(...e)=>calc$1(divide$1(n,...e)),negate:()=>calc$1(negate$1(n)),toString:()=>n.toString()}),{add:add$1,subtract:subtract$1,multiply:multiply$1,divide:divide$1,negate:negate$1});function replaceWhiteSpace$1(n,e="-"){return n.replace(/\s+/g,e)}function escape$1(n){const e=replaceWhiteSpace$1(n.toString());return escapeSymbol(escapeDot(e))}function escapeDot(n){return n.includes("\\.")?n:!Number.isInteger(parseFloat(n.toString()))?n.replace(".","\\."):n}function escapeSymbol(n){return n.replace(/[!-,/:-@[-^`{-~]/g,"\\$&")}function addPrefix$1(n,e=""){return[e,n].filter(Boolean).join("-")}function toVarReference(n,e){return`var(${n}${e?`, ${e}`:""})`}function toVarDefinition(n,e=""){return escape$1(`--${addPrefix$1(n,e)}`)}function cssVar$1(n,e,s){const o=toVarDefinition(n,s);return{variable:o,reference:toVarReference(o,e)}}function defineCssVars(n,e){const s={};for(const o of e){if(Array.isArray(o)){const[a,c]=o;s[a]=cssVar$1(`${n}-${a}`,c);continue}s[o]=cssVar$1(`${n}-${o}`)}return s}const tokens=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","gradients","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur","breakpoints"];function extractTokens(n){return pick(n,tokens)}function extractSemanticTokens(n){return n.semanticTokens}function omitVars(n){const{__cssMap:e,__cssVars:s,__breakpoints:o,...a}=n;return a}function flattenTokens(n){const e=extractTokens(n),s=extractSemanticTokens(n),o=c=>pseudoPropNames.includes(c)||c==="default",a={};return walkObject(e,(c,f)=>{c!=null&&(a[f.join(".")]={isSemantic:!1,value:c})}),walkObject(s,(c,f)=>{c!=null&&(a[f.join(".")]={isSemantic:!0,value:c})},{stop:c=>Object.keys(c).every(o)}),a}function tokenToCssVar(n,e){return cssVar$1(String(n).replace(/\./g,"-"),void 0,e)}function createThemeVars(n){const e=flattenTokens(n),s=n.config?.cssVarPrefix;let o={};const a={};function c(f,h){const g=[String(f).split(".")[0],h].join(".");if(!e[g])return h;const{reference:E}=tokenToCssVar(g,s);return E}for(const[f,h]of Object.entries(e)){const{isSemantic:m,value:g}=h,{variable:_,reference:E}=tokenToCssVar(f,s);if(!m){if(f.startsWith("space")){const w=f.split("."),[A,...R]=w,V=`${A}.-${R.join(".")}`,te=calc$1.negate(g),se=calc$1.negate(E);a[V]={value:te,var:_,varRef:se}}o[_]=g,a[f]={value:g,var:_,varRef:E};continue}const T=isObject$1(g)?g:{default:g};o=mergeWith(o,Object.entries(T).reduce((w,[A,R])=>{if(!R)return w;const V=c(f,`${R}`);if(A==="default")return w[_]=V,w;const te=pseudoSelectors?.[A]??A;return w[te]={[_]:V},w},{})),a[f]={value:E,var:_,varRef:E}}return{cssVars:o,cssMap:a}}function toCSSVar(n){const e=omitVars(n),{cssMap:s,cssVars:o}=createThemeVars(e);return Object.assign(e,{__cssVars:{...{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},...o},__cssMap:s,__breakpoints:analyzeBreakpoints(e.breakpoints)}),e}function anatomy(n,e={}){let s=!1;function o(){if(!s){s=!0;return}throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?")}function a(..._){o();for(const E of _)e[E]=m(E);return anatomy(n,e)}function c(..._){for(const E of _)E in e||(e[E]=m(E));return anatomy(n,e)}function f(){return Object.fromEntries(Object.entries(e).map(([E,T])=>[E,T.selector]))}function h(){return Object.fromEntries(Object.entries(e).map(([E,T])=>[E,T.className]))}function m(_){const w=`chakra-${(["container","root"].includes(_??"")?[n]:[n,_]).filter(Boolean).join("__")}`;return{className:w,selector:`.${w}`,toString:()=>_}}return{parts:a,toPart:m,extend:c,selectors:f,classnames:h,get keys(){return Object.keys(e)},__type:{}}}const accordionAnatomy=anatomy("accordion").parts("root","container","button","panel","icon"),alertAnatomy=anatomy("alert").parts("title","description","container","icon","spinner"),avatarAnatomy=anatomy("avatar").parts("label","badge","container","excessLabel","group"),breadcrumbAnatomy=anatomy("breadcrumb").parts("link","item","container","separator");anatomy("button").parts();const checkboxAnatomy=anatomy("checkbox").parts("control","icon","container","label");anatomy("progress").parts("track","filledTrack","label");const drawerAnatomy=anatomy("drawer").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),editableAnatomy=anatomy("editable").parts("preview","input","textarea"),formAnatomy=anatomy("form").parts("container","requiredIndicator","helperText"),formErrorAnatomy=anatomy("formError").parts("text","icon"),inputAnatomy=anatomy("input").parts("addon","field","element","group"),listAnatomy=anatomy("list").parts("container","item","icon"),menuAnatomy=anatomy("menu").parts("button","list","item","groupTitle","icon","command","divider"),modalAnatomy=anatomy("modal").parts("overlay","dialogContainer","dialog","header","closeButton","body","footer"),numberInputAnatomy=anatomy("numberinput").parts("root","field","stepperGroup","stepper");anatomy("pininput").parts("field");const popoverAnatomy=anatomy("popover").parts("content","header","body","footer","popper","arrow","closeButton"),progressAnatomy=anatomy("progress").parts("label","filledTrack","track"),radioAnatomy=anatomy("radio").parts("container","control","label"),selectAnatomy=anatomy("select").parts("field","icon"),sliderAnatomy=anatomy("slider").parts("container","track","thumb","filledTrack","mark"),statAnatomy=anatomy("stat").parts("container","label","helpText","number","icon"),switchAnatomy=anatomy("switch").parts("container","track","thumb","label"),tableAnatomy=anatomy("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),tabsAnatomy=anatomy("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),tagAnatomy=anatomy("tag").parts("container","label","closeButton"),cardAnatomy=anatomy("card").parts("container","header","body","footer");anatomy("stepper").parts("stepper","step","title","description","indicator","separator","icon","number");const{definePartsStyle:definePartsStyle$p,defineMultiStyleConfig:defineMultiStyleConfig$p}=createMultiStyleConfigHelpers(accordionAnatomy.keys),baseStyleContainer$4={borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},baseStyleButton$1={transitionProperty:"common",transitionDuration:"normal",fontSize:"md",_focusVisible:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:"4",py:"2"},baseStylePanel={pt:"2",px:"4",pb:"5"},baseStyleIcon$6={fontSize:"1.25em"},baseStyle$F=definePartsStyle$p({container:baseStyleContainer$4,button:baseStyleButton$1,panel:baseStylePanel,icon:baseStyleIcon$6}),accordionTheme=defineMultiStyleConfig$p({baseStyle:baseStyle$F});function guard(n,e,s){return Math.min(Math.max(n,s),e)}class ColorError extends Error{constructor(e){super(`Failed to parse color: "${e}"`)}}var ColorError$1=ColorError;function parseToRgba(n){if(typeof n!="string")throw new ColorError$1(n);if(n.trim().toLowerCase()==="transparent")return[0,0,0,0];let e=n.trim();e=namedColorRegex.test(n)?nameToHex(n):n;const s=reducedHexRegex.exec(e);if(s){const f=Array.from(s).slice(1);return[...f.slice(0,3).map(h=>parseInt(r(h,2),16)),parseInt(r(f[3]||"f",2),16)/255]}const o=hexRegex.exec(e);if(o){const f=Array.from(o).slice(1);return[...f.slice(0,3).map(h=>parseInt(h,16)),parseInt(f[3]||"ff",16)/255]}const a=rgbaRegex.exec(e);if(a){const f=Array.from(a).slice(1);return[...f.slice(0,3).map(h=>parseInt(h,10)),parseFloat(f[3]||"1")]}const c=hslaRegex.exec(e);if(c){const[f,h,m,g]=Array.from(c).slice(1).map(parseFloat);if(guard(0,100,h)!==h)throw new ColorError$1(n);if(guard(0,100,m)!==m)throw new ColorError$1(n);return[...hslToRgb(f,h,m),Number.isNaN(g)?1:g]}throw new ColorError$1(n)}function hash$3(n){let e=5381,s=n.length;for(;s;)e=e*33^n.charCodeAt(--s);return(e>>>0)%2341}const colorToInt=n=>parseInt(n.replace(/_/g,""),36),compressedColorMap="1q29ehhb 1n09sgk7 1kl1ekf_ _yl4zsno 16z9eiv3 1p29lhp8 _bd9zg04 17u0____ _iw9zhe5 _to73___ _r45e31e _7l6g016 _jh8ouiv _zn3qba8 1jy4zshs 11u87k0u 1ro9yvyo 1aj3xael 1gz9zjz0 _3w8l4xo 1bf1ekf_ _ke3v___ _4rrkb__ 13j776yz _646mbhl _nrjr4__ _le6mbhl 1n37ehkb _m75f91n _qj3bzfz 1939yygw 11i5z6x8 _1k5f8xs 1509441m 15t5lwgf _ae2th1n _tg1ugcv 1lp1ugcv 16e14up_ _h55rw7n _ny9yavn _7a11xb_ 1ih442g9 _pv442g9 1mv16xof 14e6y7tu 1oo9zkds 17d1cisi _4v9y70f _y98m8kc 1019pq0v 12o9zda8 _348j4f4 1et50i2o _8epa8__ _ts6senj 1o350i2o 1mi9eiuo 1259yrp0 1ln80gnw _632xcoy 1cn9zldc _f29edu4 1n490c8q _9f9ziet 1b94vk74 _m49zkct 1kz6s73a 1eu9dtog _q58s1rz 1dy9sjiq __u89jo3 _aj5nkwg _ld89jo3 13h9z6wx _qa9z2ii _l119xgq _bs5arju 1hj4nwk9 1qt4nwk9 1ge6wau6 14j9zlcw 11p1edc_ _ms1zcxe _439shk6 _jt9y70f _754zsow 1la40eju _oq5p___ _x279qkz 1fa5r3rv _yd2d9ip _424tcku _8y1di2_ _zi2uabw _yy7rn9h 12yz980_ __39ljp6 1b59zg0x _n39zfzp 1fy9zest _b33k___ _hp9wq92 1il50hz4 _io472ub _lj9z3eo 19z9ykg0 _8t8iu3a 12b9bl4a 1ak5yw0o _896v4ku _tb8k8lv _s59zi6t _c09ze0p 1lg80oqn 1id9z8wb _238nba5 1kq6wgdi _154zssg _tn3zk49 _da9y6tc 1sg7cv4f _r12jvtt 1gq5fmkz 1cs9rvci _lp9jn1c _xw1tdnb 13f9zje6 16f6973h _vo7ir40 _bt5arjf _rc45e4t _hr4e100 10v4e100 _hc9zke2 _w91egv_ _sj2r1kk 13c87yx8 _vqpds__ _ni8ggk8 _tj9yqfb 1ia2j4r4 _7x9b10u 1fc9ld4j 1eq9zldr _5j9lhpx _ez9zl6o _md61fzm".split(" ").reduce((n,e)=>{const s=colorToInt(e.substring(0,3)),o=colorToInt(e.substring(3)).toString(16);let a="";for(let c=0;c<6-o.length;c++)a+="0";return n[s]=`${a}${o}`,n},{});function nameToHex(n){const e=n.toLowerCase().trim(),s=compressedColorMap[hash$3(e)];if(!s)throw new ColorError$1(n);return`#${s}`}const r=(n,e)=>Array.from(Array(e)).map(()=>n).join(""),reducedHexRegex=new RegExp(`^#${r("([a-f0-9])",3)}([a-f0-9])?$`,"i"),hexRegex=new RegExp(`^#${r("([a-f0-9]{2})",3)}([a-f0-9]{2})?$`,"i"),rgbaRegex=new RegExp(`^rgba?\\(\\s*(\\d+)\\s*${r(",\\s*(\\d+)\\s*",2)}(?:,\\s*([\\d.]+))?\\s*\\)$`,"i"),hslaRegex=/^hsla?\(\s*([\d.]+)\s*,\s*([\d.]+)%\s*,\s*([\d.]+)%(?:\s*,\s*([\d.]+))?\s*\)$/i,namedColorRegex=/^[a-z]+$/i,roundColor=n=>Math.round(n*255),hslToRgb=(n,e,s)=>{let o=s/100;if(e===0)return[o,o,o].map(roundColor);const a=(n%360+360)%360/60,c=(1-Math.abs(2*o-1))*(e/100),f=c*(1-Math.abs(a%2-1));let h=0,m=0,g=0;a>=0&&a<1?(h=c,m=f):a>=1&&a<2?(h=f,m=c):a>=2&&a<3?(m=c,g=f):a>=3&&a<4?(m=f,g=c):a>=4&&a<5?(h=f,g=c):a>=5&&a<6&&(h=c,g=f);const _=o-c/2,E=h+_,T=m+_,w=g+_;return[E,T,w].map(roundColor)};function rgba$1(n,e,s,o){return`rgba(${guard(0,255,n).toFixed()}, ${guard(0,255,e).toFixed()}, ${guard(0,255,s).toFixed()}, ${parseFloat(guard(0,1,o).toFixed(3))})`}function transparentize$1(n,e){const[s,o,a,c]=parseToRgba(n);return rgba$1(s,o,a,c-e)}function toHex(n){const[e,s,o,a]=parseToRgba(n);let c=f=>{const h=guard(0,255,f).toString(16);return h.length===1?`0${h}`:h};return`#${c(e)}${c(s)}${c(o)}${a<1?c(Math.round(a*255)):""}`}const isEmptyObject=n=>Object.keys(n).length===0;function get(n,e,s,o,a){for(e=e.split?e.split("."):e,o=0;o<e.length;o++)n=n?n[e[o]]:a;return n===a?s:n}const getColor=(n,e,s)=>{const o=get(n,`colors.${e}`,e);try{return toHex(o),o}catch{return s??"#000000"}},getBrightness=n=>{const[e,s,o]=parseToRgba(n);return(e*299+s*587+o*114)/1e3},tone=n=>e=>{const s=getColor(e,n);return getBrightness(s)<128?"dark":"light"},isDark=n=>e=>tone(n)(e)==="dark",transparentize=(n,e)=>s=>{const o=getColor(s,n);return transparentize$1(o,1-e)};function generateStripe(n="1rem",e="rgba(255, 255, 255, 0.15)"){return{backgroundImage:`linear-gradient(
    45deg,
    ${e} 25%,
    transparent 25%,
    transparent 50%,
    ${e} 50%,
    ${e} 75%,
    transparent 75%,
    transparent
  )`,backgroundSize:`${n} ${n}`}}const randomHex=()=>`#${Math.floor(Math.random()*16777215).toString(16).padEnd(6,"0")}`;function randomColor(n){const e=randomHex();return!n||isEmptyObject(n)?e:n.string&&n.colors?randomColorFromList(n.string,n.colors):n.string&&!n.colors?randomColorFromString(n.string):n.colors&&!n.string?randomFromList(n.colors):e}function randomColorFromString(n){let e=0;if(n.length===0)return e.toString();for(let o=0;o<n.length;o+=1)e=n.charCodeAt(o)+((e<<5)-e),e=e&e;let s="#";for(let o=0;o<3;o+=1){const a=e>>o*8&255;s+=`00${a.toString(16)}`.substr(-2)}return s}function randomColorFromList(n,e){let s=0;if(n.length===0)return e[0];for(let o=0;o<n.length;o+=1)s=n.charCodeAt(o)+((s<<5)-s),s=s&s;return s=(s%e.length+e.length)%e.length,e[s]}function randomFromList(n){return n[Math.floor(Math.random()*n.length)]}function mode(n,e){return s=>s.colorMode==="dark"?e:n}function orient$2(n){const{orientation:e,vertical:s,horizontal:o}=n;return e?e==="vertical"?s:o:{}}function toRef(n){return isObject$1(n)&&n.reference?n.reference:String(n)}const toExpr=(n,...e)=>e.map(toRef).join(` ${n} `).replace(/calc/g,""),add=(...n)=>`calc(${toExpr("+",...n)})`,subtract=(...n)=>`calc(${toExpr("-",...n)})`,multiply=(...n)=>`calc(${toExpr("*",...n)})`,divide=(...n)=>`calc(${toExpr("/",...n)})`,negate=n=>{const e=toRef(n);return e!=null&&!Number.isNaN(parseFloat(e))?String(e).startsWith("-")?String(e).slice(1):`-${e}`:multiply(e,-1)},calc=Object.assign(n=>({add:(...e)=>calc(add(n,...e)),subtract:(...e)=>calc(subtract(n,...e)),multiply:(...e)=>calc(multiply(n,...e)),divide:(...e)=>calc(divide(n,...e)),negate:()=>calc(negate(n)),toString:()=>n.toString()}),{add,subtract,multiply,divide,negate});function isDecimal(n){return!Number.isInteger(parseFloat(n.toString()))}function replaceWhiteSpace(n,e="-"){return n.replace(/\s+/g,e)}function escape(n){const e=replaceWhiteSpace(n.toString());return e.includes("\\.")?n:isDecimal(n)?e.replace(".","\\."):n}function addPrefix(n,e=""){return[e,escape(n)].filter(Boolean).join("-")}function toVarRef(n,e){return`var(${escape(n)}${e?`, ${e}`:""})`}function toVar(n,e=""){return`--${addPrefix(n,e)}`}function cssVar(n,e){const s=toVar(n,e?.prefix);return{variable:s,reference:toVarRef(s,getFallback(e?.fallback))}}function getFallback(n){return n?.reference}const{definePartsStyle:definePartsStyle$o,defineMultiStyleConfig:defineMultiStyleConfig$o}=createMultiStyleConfigHelpers(alertAnatomy.keys),$fg$5=cssVar$1("alert-fg"),$bg$f=cssVar$1("alert-bg"),baseStyle$E=definePartsStyle$o({container:{bg:$bg$f.reference,px:"4",py:"3"},title:{fontWeight:"bold",lineHeight:"6",marginEnd:"2"},description:{lineHeight:"6"},icon:{color:$fg$5.reference,flexShrink:0,marginEnd:"3",w:"5",h:"6"},spinner:{color:$fg$5.reference,flexShrink:0,marginEnd:"3",w:"5",h:"5"}});function getBg(n){const{theme:e,colorScheme:s}=n,o=transparentize(`${s}.200`,.16)(e);return{light:`colors.${s}.100`,dark:o}}const variantSubtle$1=definePartsStyle$o(n=>{const{colorScheme:e}=n,s=getBg(n);return{container:{[$fg$5.variable]:`colors.${e}.600`,[$bg$f.variable]:s.light,_dark:{[$fg$5.variable]:`colors.${e}.200`,[$bg$f.variable]:s.dark}}}}),variantLeftAccent=definePartsStyle$o(n=>{const{colorScheme:e}=n,s=getBg(n);return{container:{[$fg$5.variable]:`colors.${e}.600`,[$bg$f.variable]:s.light,_dark:{[$fg$5.variable]:`colors.${e}.200`,[$bg$f.variable]:s.dark},paddingStart:"3",borderStartWidth:"4px",borderStartColor:$fg$5.reference}}}),variantTopAccent=definePartsStyle$o(n=>{const{colorScheme:e}=n,s=getBg(n);return{container:{[$fg$5.variable]:`colors.${e}.600`,[$bg$f.variable]:s.light,_dark:{[$fg$5.variable]:`colors.${e}.200`,[$bg$f.variable]:s.dark},pt:"2",borderTopWidth:"4px",borderTopColor:$fg$5.reference}}}),variantSolid$3=definePartsStyle$o(n=>{const{colorScheme:e}=n;return{container:{[$fg$5.variable]:"colors.white",[$bg$f.variable]:`colors.${e}.600`,_dark:{[$fg$5.variable]:"colors.gray.900",[$bg$f.variable]:`colors.${e}.200`},color:$fg$5.reference}}}),variants$d={subtle:variantSubtle$1,"left-accent":variantLeftAccent,"top-accent":variantTopAccent,solid:variantSolid$3},alertTheme=defineMultiStyleConfig$o({baseStyle:baseStyle$E,variants:variants$d,defaultProps:{variant:"subtle",colorScheme:"blue"}}),spacing={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"},largeSizes={max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem",prose:"60ch"},container={sm:"640px",md:"768px",lg:"1024px",xl:"1280px"},sizes$m={...spacing,...largeSizes,container},isFunction=n=>typeof n=="function";function runIfFn(n,...e){return isFunction(n)?n(...e):n}const{definePartsStyle:definePartsStyle$n,defineMultiStyleConfig:defineMultiStyleConfig$n}=createMultiStyleConfigHelpers(avatarAnatomy.keys),$border$3=cssVar$1("avatar-border-color"),$bg$e=cssVar$1("avatar-bg"),$fs=cssVar$1("avatar-font-size"),$size$4=cssVar$1("avatar-size"),baseStyleBadge={borderRadius:"full",border:"0.2em solid",borderColor:$border$3.reference,[$border$3.variable]:"white",_dark:{[$border$3.variable]:"colors.gray.800"}},baseStyleExcessLabel={bg:$bg$e.reference,fontSize:$fs.reference,width:$size$4.reference,height:$size$4.reference,lineHeight:"1",[$bg$e.variable]:"colors.gray.200",_dark:{[$bg$e.variable]:"colors.whiteAlpha.400"}},baseStyleContainer$3=n=>{const{name:e,theme:s}=n,o=e?randomColor({string:e}):"colors.gray.400",a=isDark(o)(s);let c="white";return a||(c="gray.800"),{bg:$bg$e.reference,fontSize:$fs.reference,color:c,borderColor:$border$3.reference,verticalAlign:"top",width:$size$4.reference,height:$size$4.reference,"&:not([data-loaded])":{[$bg$e.variable]:o},[$border$3.variable]:"colors.white",_dark:{[$border$3.variable]:"colors.gray.800"}}},baseStyleLabel$4={fontSize:$fs.reference,lineHeight:"1"},baseStyle$D=definePartsStyle$n(n=>({badge:runIfFn(baseStyleBadge,n),excessLabel:runIfFn(baseStyleExcessLabel,n),container:runIfFn(baseStyleContainer$3,n),label:baseStyleLabel$4}));function getSize$3(n){const e=n!=="100%"?sizes$m[n]:void 0;return definePartsStyle$n({container:{[$size$4.variable]:e??n,[$fs.variable]:`calc(${e??n} / 2.5)`},excessLabel:{[$size$4.variable]:e??n,[$fs.variable]:`calc(${e??n} / 2.5)`}})}const sizes$l={"2xs":getSize$3(4),xs:getSize$3(6),sm:getSize$3(8),md:getSize$3(12),lg:getSize$3(16),xl:getSize$3(24),"2xl":getSize$3(32),full:getSize$3("100%")},avatarTheme=defineMultiStyleConfig$n({baseStyle:baseStyle$D,sizes:sizes$l,defaultProps:{size:"md"}}),vars=defineCssVars("badge",["bg","color","shadow"]),baseStyle$C={px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold",bg:vars.bg.reference,color:vars.color.reference,boxShadow:vars.shadow.reference},variantSolid$2=n=>{const{colorScheme:e,theme:s}=n,o=transparentize(`${e}.500`,.6)(s);return{[vars.bg.variable]:`colors.${e}.500`,[vars.color.variable]:"colors.white",_dark:{[vars.bg.variable]:o,[vars.color.variable]:"colors.whiteAlpha.800"}}},variantSubtle=n=>{const{colorScheme:e,theme:s}=n,o=transparentize(`${e}.200`,.16)(s);return{[vars.bg.variable]:`colors.${e}.100`,[vars.color.variable]:`colors.${e}.800`,_dark:{[vars.bg.variable]:o,[vars.color.variable]:`colors.${e}.200`}}},variantOutline$2=n=>{const{colorScheme:e,theme:s}=n,o=transparentize(`${e}.200`,.8)(s);return{[vars.color.variable]:`colors.${e}.500`,_dark:{[vars.color.variable]:o},[vars.shadow.variable]:`inset 0 0 0px 1px ${vars.color.reference}`}},variants$c={solid:variantSolid$2,subtle:variantSubtle,outline:variantOutline$2},badgeTheme={baseStyle:baseStyle$C,variants:variants$c,defaultProps:{variant:"subtle",colorScheme:"gray"}},{defineMultiStyleConfig:defineMultiStyleConfig$m,definePartsStyle:definePartsStyle$m}=createMultiStyleConfigHelpers(breadcrumbAnatomy.keys),$decor=cssVar$1("breadcrumb-link-decor"),baseStyleLink={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",outline:"none",color:"inherit",textDecoration:$decor.reference,[$decor.variable]:"none","&:not([aria-current=page])":{cursor:"pointer",_hover:{[$decor.variable]:"underline"},_focusVisible:{boxShadow:"outline"}}},baseStyle$B=definePartsStyle$m({link:baseStyleLink}),breadcrumbTheme=defineMultiStyleConfig$m({baseStyle:baseStyle$B}),baseStyle$A={lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variantGhost=n=>{const{colorScheme:e,theme:s}=n;if(e==="gray")return{color:mode("gray.800","whiteAlpha.900")(n),_hover:{bg:mode("gray.100","whiteAlpha.200")(n)},_active:{bg:mode("gray.200","whiteAlpha.300")(n)}};const o=transparentize(`${e}.200`,.12)(s),a=transparentize(`${e}.200`,.24)(s);return{color:mode(`${e}.600`,`${e}.200`)(n),bg:"transparent",_hover:{bg:mode(`${e}.50`,o)(n)},_active:{bg:mode(`${e}.100`,a)(n)}}},variantOutline$1=n=>{const{colorScheme:e}=n,s=mode("gray.200","whiteAlpha.300")(n);return{border:"1px solid",borderColor:e==="gray"?s:"currentColor",".chakra-button__group[data-attached][data-orientation=horizontal] > &:not(:last-of-type)":{marginEnd:"-1px"},".chakra-button__group[data-attached][data-orientation=vertical] > &:not(:last-of-type)":{marginBottom:"-1px"},...runIfFn(variantGhost,n)}},accessibleColorMap={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},variantSolid$1=n=>{const{colorScheme:e}=n;if(e==="gray"){const h=mode("gray.100","whiteAlpha.200")(n);return{bg:h,color:mode("gray.800","whiteAlpha.900")(n),_hover:{bg:mode("gray.200","whiteAlpha.300")(n),_disabled:{bg:h}},_active:{bg:mode("gray.300","whiteAlpha.400")(n)}}}const{bg:s=`${e}.500`,color:o="white",hoverBg:a=`${e}.600`,activeBg:c=`${e}.700`}=accessibleColorMap[e]??{},f=mode(s,`${e}.200`)(n);return{bg:f,color:mode(o,"gray.800")(n),_hover:{bg:mode(a,`${e}.300`)(n),_disabled:{bg:f}},_active:{bg:mode(c,`${e}.400`)(n)}}},variantLink=n=>{const{colorScheme:e}=n;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:mode(`${e}.500`,`${e}.200`)(n),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:mode(`${e}.700`,`${e}.500`)(n)}}},variantUnstyled$2={bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:"0",p:"0"},variants$b={ghost:variantGhost,outline:variantOutline$1,solid:variantSolid$1,link:variantLink,unstyled:variantUnstyled$2},sizes$k={lg:{h:"12",minW:"12",fontSize:"lg",px:"6"},md:{h:"10",minW:"10",fontSize:"md",px:"4"},sm:{h:"8",minW:"8",fontSize:"sm",px:"3"},xs:{h:"6",minW:"6",fontSize:"xs",px:"2"}},buttonTheme={baseStyle:baseStyle$A,variants:variants$b,sizes:sizes$k,defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},{definePartsStyle:definePartsStyle$l,defineMultiStyleConfig:defineMultiStyleConfig$l}=createMultiStyleConfigHelpers(cardAnatomy.keys),$bg$d=cssVar$1("card-bg"),$padding$1=cssVar$1("card-padding"),$shadow$3=cssVar$1("card-shadow"),$radius=cssVar$1("card-radius"),$border$2=cssVar$1("card-border-width","0"),$borderColor=cssVar$1("card-border-color"),baseStyle$z=definePartsStyle$l({container:{[$bg$d.variable]:"colors.chakra-body-bg",backgroundColor:$bg$d.reference,boxShadow:$shadow$3.reference,borderRadius:$radius.reference,color:"chakra-body-text",borderWidth:$border$2.reference,borderColor:$borderColor.reference},body:{padding:$padding$1.reference,flex:"1 1 0%"},header:{padding:$padding$1.reference},footer:{padding:$padding$1.reference}}),sizes$j={sm:definePartsStyle$l({container:{[$radius.variable]:"radii.base",[$padding$1.variable]:"space.3"}}),md:definePartsStyle$l({container:{[$radius.variable]:"radii.md",[$padding$1.variable]:"space.5"}}),lg:definePartsStyle$l({container:{[$radius.variable]:"radii.xl",[$padding$1.variable]:"space.7"}})},variants$a={elevated:definePartsStyle$l({container:{[$shadow$3.variable]:"shadows.base",_dark:{[$bg$d.variable]:"colors.gray.700"}}}),outline:definePartsStyle$l({container:{[$border$2.variable]:"1px",[$borderColor.variable]:"colors.chakra-border-color"}}),filled:definePartsStyle$l({container:{[$bg$d.variable]:"colors.chakra-subtle-bg"}}),unstyled:{body:{[$padding$1.variable]:0},header:{[$padding$1.variable]:0},footer:{[$padding$1.variable]:0}}},cardTheme=defineMultiStyleConfig$l({baseStyle:baseStyle$z,variants:variants$a,sizes:sizes$j,defaultProps:{variant:"elevated",size:"md"}}),{definePartsStyle:definePartsStyle$k,defineMultiStyleConfig:defineMultiStyleConfig$k}=createMultiStyleConfigHelpers(checkboxAnatomy.keys),$size$3=cssVar$1("checkbox-size"),baseStyleControl$1=n=>{const{colorScheme:e}=n;return{w:$size$3.reference,h:$size$3.reference,transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:mode(`${e}.500`,`${e}.200`)(n),borderColor:mode(`${e}.500`,`${e}.200`)(n),color:mode("white","gray.900")(n),_hover:{bg:mode(`${e}.600`,`${e}.300`)(n),borderColor:mode(`${e}.600`,`${e}.300`)(n)},_disabled:{borderColor:mode("gray.200","transparent")(n),bg:mode("gray.200","whiteAlpha.300")(n),color:mode("gray.500","whiteAlpha.500")(n)}},_indeterminate:{bg:mode(`${e}.500`,`${e}.200`)(n),borderColor:mode(`${e}.500`,`${e}.200`)(n),color:mode("white","gray.900")(n)},_disabled:{bg:mode("gray.100","whiteAlpha.100")(n),borderColor:mode("gray.100","transparent")(n)},_focusVisible:{boxShadow:"outline"},_invalid:{borderColor:mode("red.500","red.300")(n)}}},baseStyleContainer$2={_disabled:{cursor:"not-allowed"}},baseStyleLabel$3={userSelect:"none",_disabled:{opacity:.4}},baseStyleIcon$5={transitionProperty:"transform",transitionDuration:"normal"},baseStyle$y=definePartsStyle$k(n=>({icon:baseStyleIcon$5,container:baseStyleContainer$2,control:runIfFn(baseStyleControl$1,n),label:baseStyleLabel$3})),sizes$i={sm:definePartsStyle$k({control:{[$size$3.variable]:"sizes.3"},label:{fontSize:"sm"},icon:{fontSize:"3xs"}}),md:definePartsStyle$k({control:{[$size$3.variable]:"sizes.4"},label:{fontSize:"md"},icon:{fontSize:"2xs"}}),lg:definePartsStyle$k({control:{[$size$3.variable]:"sizes.5"},label:{fontSize:"lg"},icon:{fontSize:"2xs"}})},checkboxTheme=defineMultiStyleConfig$k({baseStyle:baseStyle$y,sizes:sizes$i,defaultProps:{size:"md",colorScheme:"blue"}}),$size$2=cssVar("close-button-size"),$bg$c=cssVar("close-button-bg"),baseStyle$x={w:[$size$2.reference],h:[$size$2.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{[$bg$c.variable]:"colors.blackAlpha.100",_dark:{[$bg$c.variable]:"colors.whiteAlpha.100"}},_active:{[$bg$c.variable]:"colors.blackAlpha.200",_dark:{[$bg$c.variable]:"colors.whiteAlpha.200"}},_focusVisible:{boxShadow:"outline"},bg:$bg$c.reference},sizes$h={lg:{[$size$2.variable]:"sizes.10",fontSize:"md"},md:{[$size$2.variable]:"sizes.8",fontSize:"xs"},sm:{[$size$2.variable]:"sizes.6",fontSize:"2xs"}},closeButtonTheme={baseStyle:baseStyle$x,sizes:sizes$h,defaultProps:{size:"md"}},{variants:variants$9,defaultProps}=badgeTheme,baseStyle$w={fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm",bg:vars.bg.reference,color:vars.color.reference,boxShadow:vars.shadow.reference},codeTheme={baseStyle:baseStyle$w,variants:variants$9,defaultProps},baseStyle$v={w:"100%",mx:"auto",maxW:"prose",px:"4"},containerTheme={baseStyle:baseStyle$v},baseStyle$u={opacity:.6,borderColor:"inherit"},variantSolid={borderStyle:"solid"},variantDashed={borderStyle:"dashed"},variants$8={solid:variantSolid,dashed:variantDashed},dividerTheme={baseStyle:baseStyle$u,variants:variants$8,defaultProps:{variant:"solid"}},{definePartsStyle:definePartsStyle$j,defineMultiStyleConfig:defineMultiStyleConfig$j}=createMultiStyleConfigHelpers(drawerAnatomy.keys),$bg$b=cssVar$1("drawer-bg"),$bs=cssVar$1("drawer-box-shadow");function getSize$2(n){return definePartsStyle$j(n==="full"?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:n}})}const baseStyleOverlay$1={bg:"blackAlpha.600",zIndex:"modal"},baseStyleDialogContainer$1={display:"flex",zIndex:"modal",justifyContent:"center"},baseStyleDialog$1=n=>{const{isFullHeight:e}=n;return{...e&&{height:"100vh"},zIndex:"modal",maxH:"100vh",color:"inherit",[$bg$b.variable]:"colors.white",[$bs.variable]:"shadows.lg",_dark:{[$bg$b.variable]:"colors.gray.700",[$bs.variable]:"shadows.dark-lg"},bg:$bg$b.reference,boxShadow:$bs.reference}},baseStyleHeader$2={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},baseStyleCloseButton$3={position:"absolute",top:"2",insetEnd:"3"},baseStyleBody$2={px:"6",py:"2",flex:"1",overflow:"auto"},baseStyleFooter$2={px:"6",py:"4"},baseStyle$t=definePartsStyle$j(n=>({overlay:baseStyleOverlay$1,dialogContainer:baseStyleDialogContainer$1,dialog:runIfFn(baseStyleDialog$1,n),header:baseStyleHeader$2,closeButton:baseStyleCloseButton$3,body:baseStyleBody$2,footer:baseStyleFooter$2})),sizes$g={xs:getSize$2("xs"),sm:getSize$2("md"),md:getSize$2("lg"),lg:getSize$2("2xl"),xl:getSize$2("4xl"),full:getSize$2("full")},drawerTheme=defineMultiStyleConfig$j({baseStyle:baseStyle$t,sizes:sizes$g,defaultProps:{size:"xs"}}),{definePartsStyle:definePartsStyle$i,defineMultiStyleConfig:defineMultiStyleConfig$i}=createMultiStyleConfigHelpers(editableAnatomy.keys),baseStylePreview={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal"},baseStyleInput={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},baseStyleTextarea={borderRadius:"md",py:"1",transitionProperty:"common",transitionDuration:"normal",width:"full",_focusVisible:{boxShadow:"outline"},_placeholder:{opacity:.6}},baseStyle$s=definePartsStyle$i({preview:baseStylePreview,input:baseStyleInput,textarea:baseStyleTextarea}),editableTheme=defineMultiStyleConfig$i({baseStyle:baseStyle$s}),{definePartsStyle:definePartsStyle$h,defineMultiStyleConfig:defineMultiStyleConfig$h}=createMultiStyleConfigHelpers(formAnatomy.keys),$fg$4=cssVar$1("form-control-color"),baseStyleRequiredIndicator={marginStart:"1",[$fg$4.variable]:"colors.red.500",_dark:{[$fg$4.variable]:"colors.red.300"},color:$fg$4.reference},baseStyleHelperText={mt:"2",[$fg$4.variable]:"colors.gray.600",_dark:{[$fg$4.variable]:"colors.whiteAlpha.600"},color:$fg$4.reference,lineHeight:"normal",fontSize:"sm"},baseStyle$r=definePartsStyle$h({container:{width:"100%",position:"relative"},requiredIndicator:baseStyleRequiredIndicator,helperText:baseStyleHelperText}),formTheme=defineMultiStyleConfig$h({baseStyle:baseStyle$r}),{definePartsStyle:definePartsStyle$g,defineMultiStyleConfig:defineMultiStyleConfig$g}=createMultiStyleConfigHelpers(formErrorAnatomy.keys),$fg$3=cssVar$1("form-error-color"),baseStyleText={[$fg$3.variable]:"colors.red.500",_dark:{[$fg$3.variable]:"colors.red.300"},color:$fg$3.reference,mt:"2",fontSize:"sm",lineHeight:"normal"},baseStyleIcon$4={marginEnd:"0.5em",[$fg$3.variable]:"colors.red.500",_dark:{[$fg$3.variable]:"colors.red.300"},color:$fg$3.reference},baseStyle$q=definePartsStyle$g({text:baseStyleText,icon:baseStyleIcon$4}),formErrorTheme=defineMultiStyleConfig$g({baseStyle:baseStyle$q}),baseStyle$p={fontSize:"md",marginEnd:"3",mb:"2",fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}},formLabelTheme={baseStyle:baseStyle$p},baseStyle$o={fontFamily:"heading",fontWeight:"bold"},sizes$f={"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},headingTheme={baseStyle:baseStyle$o,sizes:sizes$f,defaultProps:{size:"xl"}},{definePartsStyle:definePartsStyle$f,defineMultiStyleConfig:defineMultiStyleConfig$f}=createMultiStyleConfigHelpers(inputAnatomy.keys),$height$1=cssVar$1("input-height"),$fontSize$1=cssVar$1("input-font-size"),$padding=cssVar$1("input-padding"),$borderRadius=cssVar$1("input-border-radius"),baseStyle$n=definePartsStyle$f({addon:{height:$height$1.reference,fontSize:$fontSize$1.reference,px:$padding.reference,borderRadius:$borderRadius.reference},field:{width:"100%",height:$height$1.reference,fontSize:$fontSize$1.reference,px:$padding.reference,borderRadius:$borderRadius.reference,minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed"}}}),size={lg:{[$fontSize$1.variable]:"fontSizes.lg",[$padding.variable]:"space.4",[$borderRadius.variable]:"radii.md",[$height$1.variable]:"sizes.12"},md:{[$fontSize$1.variable]:"fontSizes.md",[$padding.variable]:"space.4",[$borderRadius.variable]:"radii.md",[$height$1.variable]:"sizes.10"},sm:{[$fontSize$1.variable]:"fontSizes.sm",[$padding.variable]:"space.3",[$borderRadius.variable]:"radii.sm",[$height$1.variable]:"sizes.8"},xs:{[$fontSize$1.variable]:"fontSizes.xs",[$padding.variable]:"space.2",[$borderRadius.variable]:"radii.sm",[$height$1.variable]:"sizes.6"}},sizes$e={lg:definePartsStyle$f({field:size.lg,group:size.lg}),md:definePartsStyle$f({field:size.md,group:size.md}),sm:definePartsStyle$f({field:size.sm,group:size.sm}),xs:definePartsStyle$f({field:size.xs,group:size.xs})};function getDefaults(n){const{focusBorderColor:e,errorBorderColor:s}=n;return{focusBorderColor:e||mode("blue.500","blue.300")(n),errorBorderColor:s||mode("red.500","red.300")(n)}}const variantOutline=definePartsStyle$f(n=>{const{theme:e}=n,{focusBorderColor:s,errorBorderColor:o}=getDefaults(n);return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:mode("gray.300","whiteAlpha.400")(n)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:getColor(e,o),boxShadow:`0 0 0 1px ${getColor(e,o)}`},_focusVisible:{zIndex:1,borderColor:getColor(e,s),boxShadow:`0 0 0 1px ${getColor(e,s)}`}},addon:{border:"1px solid",borderColor:mode("inherit","whiteAlpha.50")(n),bg:mode("gray.100","whiteAlpha.300")(n)}}}),variantFilled=definePartsStyle$f(n=>{const{theme:e}=n,{focusBorderColor:s,errorBorderColor:o}=getDefaults(n);return{field:{border:"2px solid",borderColor:"transparent",bg:mode("gray.100","whiteAlpha.50")(n),_hover:{bg:mode("gray.200","whiteAlpha.100")(n)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:getColor(e,o)},_focusVisible:{bg:"transparent",borderColor:getColor(e,s)}},addon:{border:"2px solid",borderColor:"transparent",bg:mode("gray.100","whiteAlpha.50")(n)}}}),variantFlushed=definePartsStyle$f(n=>{const{theme:e}=n,{focusBorderColor:s,errorBorderColor:o}=getDefaults(n);return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:getColor(e,o),boxShadow:`0px 1px 0px 0px ${getColor(e,o)}`},_focusVisible:{borderColor:getColor(e,s),boxShadow:`0px 1px 0px 0px ${getColor(e,s)}`}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:"0",px:"0",bg:"transparent"}}}),variantUnstyled$1=definePartsStyle$f({field:{bg:"transparent",px:"0",height:"auto"},addon:{bg:"transparent",px:"0",height:"auto"}}),variants$7={outline:variantOutline,filled:variantFilled,flushed:variantFlushed,unstyled:variantUnstyled$1},inputTheme=defineMultiStyleConfig$f({baseStyle:baseStyle$n,sizes:sizes$e,variants:variants$7,defaultProps:{size:"md",variant:"outline"}}),$bg$a=cssVar$1("kbd-bg"),baseStyle$m={[$bg$a.variable]:"colors.gray.100",_dark:{[$bg$a.variable]:"colors.whiteAlpha.100"},bg:$bg$a.reference,borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"},kbdTheme={baseStyle:baseStyle$m},baseStyle$l={transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focusVisible:{boxShadow:"outline"}},linkTheme={baseStyle:baseStyle$l},{defineMultiStyleConfig:defineMultiStyleConfig$e,definePartsStyle:definePartsStyle$e}=createMultiStyleConfigHelpers(listAnatomy.keys),baseStyleIcon$3={marginEnd:"2",display:"inline",verticalAlign:"text-bottom"},baseStyle$k=definePartsStyle$e({icon:baseStyleIcon$3}),listTheme=defineMultiStyleConfig$e({baseStyle:baseStyle$k}),{defineMultiStyleConfig:defineMultiStyleConfig$d,definePartsStyle:definePartsStyle$d}=createMultiStyleConfigHelpers(menuAnatomy.keys),$bg$9=cssVar$1("menu-bg"),$shadow$2=cssVar$1("menu-shadow"),baseStyleList={[$bg$9.variable]:"#fff",[$shadow$2.variable]:"shadows.sm",_dark:{[$bg$9.variable]:"colors.gray.700",[$shadow$2.variable]:"shadows.dark-lg"},color:"inherit",minW:"3xs",py:"2",zIndex:"dropdown",borderRadius:"md",borderWidth:"1px",bg:$bg$9.reference,boxShadow:$shadow$2.reference},baseStyleItem={py:"1.5",px:"3",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{[$bg$9.variable]:"colors.gray.100",_dark:{[$bg$9.variable]:"colors.whiteAlpha.100"}},_active:{[$bg$9.variable]:"colors.gray.200",_dark:{[$bg$9.variable]:"colors.whiteAlpha.200"}},_expanded:{[$bg$9.variable]:"colors.gray.100",_dark:{[$bg$9.variable]:"colors.whiteAlpha.100"}},_disabled:{opacity:.4,cursor:"not-allowed"},bg:$bg$9.reference},baseStyleGroupTitle={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},baseStyleIcon$2={display:"inline-flex",alignItems:"center",justifyContent:"center",flexShrink:0},baseStyleCommand={opacity:.6},baseStyleDivider={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"2",opacity:.6},baseStyleButton={transitionProperty:"common",transitionDuration:"normal"},baseStyle$j=definePartsStyle$d({button:baseStyleButton,list:baseStyleList,item:baseStyleItem,groupTitle:baseStyleGroupTitle,icon:baseStyleIcon$2,command:baseStyleCommand,divider:baseStyleDivider}),menuTheme=defineMultiStyleConfig$d({baseStyle:baseStyle$j}),{defineMultiStyleConfig:defineMultiStyleConfig$c,definePartsStyle:definePartsStyle$c}=createMultiStyleConfigHelpers(modalAnatomy.keys),$bg$8=cssVar$1("modal-bg"),$shadow$1=cssVar$1("modal-shadow"),baseStyleOverlay={bg:"blackAlpha.600",zIndex:"modal"},baseStyleDialogContainer=n=>{const{isCentered:e,scrollBehavior:s}=n;return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:e?"center":"flex-start",overflow:s==="inside"?"hidden":"auto",overscrollBehaviorY:"none"}},baseStyleDialog=n=>{const{isCentered:e,scrollBehavior:s}=n;return{borderRadius:"md",color:"inherit",my:e?"auto":"16",mx:e?"auto":void 0,zIndex:"modal",maxH:s==="inside"?"calc(100% - 7.5rem)":void 0,[$bg$8.variable]:"colors.white",[$shadow$1.variable]:"shadows.lg",_dark:{[$bg$8.variable]:"colors.gray.700",[$shadow$1.variable]:"shadows.dark-lg"},bg:$bg$8.reference,boxShadow:$shadow$1.reference}},baseStyleHeader$1={px:"6",py:"4",fontSize:"xl",fontWeight:"semibold"},baseStyleCloseButton$2={position:"absolute",top:"2",insetEnd:"3"},baseStyleBody$1=n=>{const{scrollBehavior:e}=n;return{px:"6",py:"2",flex:"1",overflow:e==="inside"?"auto":void 0}},baseStyleFooter$1={px:"6",py:"4"},baseStyle$i=definePartsStyle$c(n=>({overlay:baseStyleOverlay,dialogContainer:runIfFn(baseStyleDialogContainer,n),dialog:runIfFn(baseStyleDialog,n),header:baseStyleHeader$1,closeButton:baseStyleCloseButton$2,body:runIfFn(baseStyleBody$1,n),footer:baseStyleFooter$1}));function getSize$1(n){return definePartsStyle$c(n==="full"?{dialog:{maxW:"100vw",minH:"$100vh",my:"0",borderRadius:"0"}}:{dialog:{maxW:n}})}const sizes$d={xs:getSize$1("xs"),sm:getSize$1("sm"),md:getSize$1("md"),lg:getSize$1("lg"),xl:getSize$1("xl"),"2xl":getSize$1("2xl"),"3xl":getSize$1("3xl"),"4xl":getSize$1("4xl"),"5xl":getSize$1("5xl"),"6xl":getSize$1("6xl"),full:getSize$1("full")},modalTheme=defineMultiStyleConfig$c({baseStyle:baseStyle$i,sizes:sizes$d,defaultProps:{size:"md"}}),typography={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{"3xs":"0.45rem","2xs":"0.625rem",xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},{defineMultiStyleConfig:defineMultiStyleConfig$b,definePartsStyle:definePartsStyle$b}=createMultiStyleConfigHelpers(numberInputAnatomy.keys),$stepperWidth=cssVar("number-input-stepper-width"),$inputPadding=cssVar("number-input-input-padding"),inputPaddingValue=calc($stepperWidth).add("0.5rem").toString(),$bg$7=cssVar("number-input-bg"),$fg$2=cssVar("number-input-color"),$border$1=cssVar("number-input-border-color"),baseStyleRoot$1={[$stepperWidth.variable]:"sizes.6",[$inputPadding.variable]:inputPaddingValue},baseStyleField$1=n=>runIfFn(inputTheme.baseStyle,n)?.field??{},baseStyleStepperGroup={width:$stepperWidth.reference},baseStyleStepper={borderStart:"1px solid",borderStartColor:$border$1.reference,color:$fg$2.reference,bg:$bg$7.reference,[$fg$2.variable]:"colors.chakra-body-text",[$border$1.variable]:"colors.chakra-border-color",_dark:{[$fg$2.variable]:"colors.whiteAlpha.800",[$border$1.variable]:"colors.whiteAlpha.300"},_active:{[$bg$7.variable]:"colors.gray.200",_dark:{[$bg$7.variable]:"colors.whiteAlpha.300"}},_disabled:{opacity:.4,cursor:"not-allowed"}},baseStyle$h=definePartsStyle$b(n=>({root:baseStyleRoot$1,field:runIfFn(baseStyleField$1,n)??{},stepperGroup:baseStyleStepperGroup,stepper:baseStyleStepper}));function getSize(n){const e=inputTheme.sizes?.[n],s={lg:"md",md:"md",sm:"sm",xs:"sm"},o=e.field?.fontSize??"md",a=typography.fontSizes[o];return definePartsStyle$b({field:{...e.field,paddingInlineEnd:$inputPadding.reference,verticalAlign:"top"},stepper:{fontSize:calc(a).multiply(.75).toString(),_first:{borderTopEndRadius:s[n]},_last:{borderBottomEndRadius:s[n],mt:"-1px",borderTopWidth:1}}})}const sizes$c={xs:getSize("xs"),sm:getSize("sm"),md:getSize("md"),lg:getSize("lg")},numberInputTheme=defineMultiStyleConfig$b({baseStyle:baseStyle$h,sizes:sizes$c,variants:inputTheme.variants,defaultProps:inputTheme.defaultProps}),baseStyle$g={...inputTheme.baseStyle?.field,textAlign:"center"},sizes$b={lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},variants$6={outline:n=>runIfFn(inputTheme.variants?.outline,n)?.field??{},flushed:n=>runIfFn(inputTheme.variants?.flushed,n)?.field??{},filled:n=>runIfFn(inputTheme.variants?.filled,n)?.field??{},unstyled:inputTheme.variants?.unstyled.field??{}},pinInputTheme={baseStyle:baseStyle$g,sizes:sizes$b,variants:variants$6,defaultProps:inputTheme.defaultProps},{defineMultiStyleConfig:defineMultiStyleConfig$a,definePartsStyle:definePartsStyle$a}=createMultiStyleConfigHelpers(popoverAnatomy.keys),$popperBg=cssVar("popper-bg"),$arrowBg$1=cssVar("popper-arrow-bg"),$arrowShadowColor=cssVar("popper-arrow-shadow-color"),baseStylePopper={zIndex:"popover"},baseStyleContent={[$popperBg.variable]:"colors.white",bg:$popperBg.reference,[$arrowBg$1.variable]:$popperBg.reference,[$arrowShadowColor.variable]:"colors.gray.200",_dark:{[$popperBg.variable]:"colors.gray.700",[$arrowShadowColor.variable]:"colors.whiteAlpha.300"},width:"xs",border:"1px solid",borderColor:"inherit",borderRadius:"md",boxShadow:"sm",zIndex:"inherit",_focusVisible:{outline:0,boxShadow:"outline"}},baseStyleHeader={px:3,py:2,borderBottomWidth:"1px"},baseStyleBody={px:3,py:2},baseStyleFooter={px:3,py:2,borderTopWidth:"1px"},baseStyleCloseButton$1={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},baseStyle$f=definePartsStyle$a({popper:baseStylePopper,content:baseStyleContent,header:baseStyleHeader,body:baseStyleBody,footer:baseStyleFooter,closeButton:baseStyleCloseButton$1}),popoverTheme=defineMultiStyleConfig$a({baseStyle:baseStyle$f}),{defineMultiStyleConfig:defineMultiStyleConfig$9,definePartsStyle:definePartsStyle$9}=createMultiStyleConfigHelpers(progressAnatomy.keys),filledStyle=n=>{const{colorScheme:e,theme:s,isIndeterminate:o,hasStripe:a}=n,c=mode(generateStripe(),generateStripe("1rem","rgba(0,0,0,0.1)"))(n),f=mode(`${e}.500`,`${e}.200`)(n),h=`linear-gradient(
    to right,
    transparent 0%,
    ${getColor(s,f)} 50%,
    transparent 100%
  )`;return{...!o&&a&&c,...o?{bgImage:h}:{bgColor:f}}},baseStyleLabel$2={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},baseStyleTrack$2=n=>({bg:mode("gray.100","whiteAlpha.300")(n)}),baseStyleFilledTrack$1=n=>({transitionProperty:"common",transitionDuration:"slow",...filledStyle(n)}),baseStyle$e=definePartsStyle$9(n=>({label:baseStyleLabel$2,filledTrack:baseStyleFilledTrack$1(n),track:baseStyleTrack$2(n)})),sizes$a={xs:definePartsStyle$9({track:{h:"1"}}),sm:definePartsStyle$9({track:{h:"2"}}),md:definePartsStyle$9({track:{h:"3"}}),lg:definePartsStyle$9({track:{h:"4"}})},progressTheme=defineMultiStyleConfig$9({sizes:sizes$a,baseStyle:baseStyle$e,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:defineMultiStyleConfig$8,definePartsStyle:definePartsStyle$8}=createMultiStyleConfigHelpers(radioAnatomy.keys),baseStyleControl=n=>{const e=runIfFn(checkboxTheme.baseStyle,n)?.control;return{...e,borderRadius:"full",_checked:{...e?._checked,_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}}}},baseStyle$d=definePartsStyle$8(n=>({label:checkboxTheme.baseStyle?.(n).label,container:checkboxTheme.baseStyle?.(n).container,control:baseStyleControl(n)})),sizes$9={md:definePartsStyle$8({control:{w:"4",h:"4"},label:{fontSize:"md"}}),lg:definePartsStyle$8({control:{w:"5",h:"5"},label:{fontSize:"lg"}}),sm:definePartsStyle$8({control:{width:"3",height:"3"},label:{fontSize:"sm"}})},radioTheme=defineMultiStyleConfig$8({baseStyle:baseStyle$d,sizes:sizes$9,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:defineMultiStyleConfig$7,definePartsStyle:definePartsStyle$7}=createMultiStyleConfigHelpers(selectAnatomy.keys),$bg$6=cssVar$1("select-bg"),baseStyleField={...inputTheme.baseStyle?.field,appearance:"none",paddingBottom:"1px",lineHeight:"normal",bg:$bg$6.reference,[$bg$6.variable]:"colors.white",_dark:{[$bg$6.variable]:"colors.gray.700"},"> option, > optgroup":{bg:$bg$6.reference}},baseStyleIcon$1={width:"6",height:"100%",insetEnd:"2",position:"relative",color:"currentColor",fontSize:"xl",_disabled:{opacity:.5}},baseStyle$c=definePartsStyle$7({field:baseStyleField,icon:baseStyleIcon$1}),iconSpacing={paddingInlineEnd:"8"},sizes$8={lg:{...inputTheme.sizes?.lg,field:{...inputTheme.sizes?.lg.field,...iconSpacing}},md:{...inputTheme.sizes?.md,field:{...inputTheme.sizes?.md.field,...iconSpacing}},sm:{...inputTheme.sizes?.sm,field:{...inputTheme.sizes?.sm.field,...iconSpacing}},xs:{...inputTheme.sizes?.xs,field:{...inputTheme.sizes?.xs.field,...iconSpacing},icon:{insetEnd:"1"}}},selectTheme=defineMultiStyleConfig$7({baseStyle:baseStyle$c,sizes:sizes$8,variants:inputTheme.variants,defaultProps:inputTheme.defaultProps}),$startColor=cssVar$1("skeleton-start-color"),$endColor=cssVar$1("skeleton-end-color"),baseStyle$b={[$startColor.variable]:"colors.gray.100",[$endColor.variable]:"colors.gray.400",_dark:{[$startColor.variable]:"colors.gray.800",[$endColor.variable]:"colors.gray.600"},background:$startColor.reference,borderColor:$endColor.reference,opacity:.7,borderRadius:"sm"},skeletonTheme={baseStyle:baseStyle$b},$bg$5=cssVar$1("skip-link-bg"),baseStyle$a={borderRadius:"md",fontWeight:"semibold",_focusVisible:{boxShadow:"outline",padding:"4",position:"fixed",top:"6",insetStart:"6",[$bg$5.variable]:"colors.white",_dark:{[$bg$5.variable]:"colors.gray.700"},bg:$bg$5.reference}},skipLinkTheme={baseStyle:baseStyle$a},{defineMultiStyleConfig:defineMultiStyleConfig$6,definePartsStyle:definePartsStyle$6}=createMultiStyleConfigHelpers(sliderAnatomy.keys),$thumbSize=cssVar$1("slider-thumb-size"),$trackSize=cssVar$1("slider-track-size"),$bg$4=cssVar$1("slider-bg"),baseStyleContainer$1=n=>{const{orientation:e}=n;return{display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"},...orient$2({orientation:e,vertical:{h:"100%",px:calc$1($thumbSize.reference).divide(2).toString()},horizontal:{w:"100%",py:calc$1($thumbSize.reference).divide(2).toString()}})}},baseStyleTrack$1=n=>({...orient$2({orientation:n.orientation,horizontal:{h:$trackSize.reference},vertical:{w:$trackSize.reference}}),overflow:"hidden",borderRadius:"sm",[$bg$4.variable]:"colors.gray.200",_dark:{[$bg$4.variable]:"colors.whiteAlpha.200"},_disabled:{[$bg$4.variable]:"colors.gray.300",_dark:{[$bg$4.variable]:"colors.whiteAlpha.300"}},bg:$bg$4.reference}),baseStyleThumb$1=n=>{const{orientation:e}=n;return{...orient$2({orientation:e,vertical:{left:"50%"},horizontal:{top:"50%"}}),w:$thumbSize.reference,h:$thumbSize.reference,display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focusVisible:{boxShadow:"outline"},_active:{"--slider-thumb-scale":"1.15"},_disabled:{bg:"gray.300"}}},baseStyleFilledTrack=n=>{const{colorScheme:e}=n;return{width:"inherit",height:"inherit",[$bg$4.variable]:`colors.${e}.500`,_dark:{[$bg$4.variable]:`colors.${e}.200`},bg:$bg$4.reference}},baseStyle$9=definePartsStyle$6(n=>({container:baseStyleContainer$1(n),track:baseStyleTrack$1(n),thumb:baseStyleThumb$1(n),filledTrack:baseStyleFilledTrack(n)})),sizeLg=definePartsStyle$6({container:{[$thumbSize.variable]:"sizes.4",[$trackSize.variable]:"sizes.1"}}),sizeMd=definePartsStyle$6({container:{[$thumbSize.variable]:"sizes.3.5",[$trackSize.variable]:"sizes.1"}}),sizeSm=definePartsStyle$6({container:{[$thumbSize.variable]:"sizes.2.5",[$trackSize.variable]:"sizes.0.5"}}),sizes$7={lg:sizeLg,md:sizeMd,sm:sizeSm},sliderTheme=defineMultiStyleConfig$6({baseStyle:baseStyle$9,sizes:sizes$7,defaultProps:{size:"md",colorScheme:"blue"}}),$size$1=cssVar("spinner-size"),baseStyle$8={width:[$size$1.reference],height:[$size$1.reference]},sizes$6={xs:{[$size$1.variable]:"sizes.3"},sm:{[$size$1.variable]:"sizes.4"},md:{[$size$1.variable]:"sizes.6"},lg:{[$size$1.variable]:"sizes.8"},xl:{[$size$1.variable]:"sizes.12"}},spinnerTheme={baseStyle:baseStyle$8,sizes:sizes$6,defaultProps:{size:"md"}},{defineMultiStyleConfig:defineMultiStyleConfig$5,definePartsStyle:definePartsStyle$5}=createMultiStyleConfigHelpers(statAnatomy.keys),baseStyleLabel$1={fontWeight:"medium"},baseStyleHelpText={opacity:.8,marginBottom:"2"},baseStyleNumber={verticalAlign:"baseline",fontWeight:"semibold"},baseStyleIcon={marginEnd:1,w:"3.5",h:"3.5",verticalAlign:"middle"},baseStyle$7=definePartsStyle$5({container:{},label:baseStyleLabel$1,helpText:baseStyleHelpText,number:baseStyleNumber,icon:baseStyleIcon}),sizes$5={md:definePartsStyle$5({label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}})},statTheme=defineMultiStyleConfig$5({baseStyle:baseStyle$7,sizes:sizes$5,defaultProps:{size:"md"}}),{defineMultiStyleConfig:defineMultiStyleConfig$4,definePartsStyle:definePartsStyle$4}=createMultiStyleConfigHelpers(["stepper","step","title","description","indicator","separator","icon","number"]),$size=cssVar$1("stepper-indicator-size"),$iconSize=cssVar$1("stepper-icon-size"),$titleFontSize=cssVar$1("stepper-title-font-size"),$descFontSize=cssVar$1("stepper-description-font-size"),$accentColor=cssVar$1("stepper-accent-color"),baseStyle$6=definePartsStyle$4(({colorScheme:n})=>({stepper:{display:"flex",justifyContent:"space-between",gap:"4","&[data-orientation=vertical]":{flexDirection:"column",alignItems:"flex-start"},"&[data-orientation=horizontal]":{flexDirection:"row",alignItems:"center"},[$accentColor.variable]:`colors.${n}.500`,_dark:{[$accentColor.variable]:`colors.${n}.200`}},title:{fontSize:$titleFontSize.reference,fontWeight:"medium"},description:{fontSize:$descFontSize.reference,color:"chakra-subtle-text"},number:{fontSize:$titleFontSize.reference},step:{flexShrink:0,position:"relative",display:"flex",gap:"2","&[data-orientation=horizontal]":{alignItems:"center"},flex:"1","&:last-of-type:not([data-stretch])":{flex:"initial"}},icon:{flexShrink:0,width:$iconSize.reference,height:$iconSize.reference},indicator:{flexShrink:0,borderRadius:"full",width:$size.reference,height:$size.reference,display:"flex",justifyContent:"center",alignItems:"center","&[data-status=active]":{borderWidth:"2px",borderColor:$accentColor.reference},"&[data-status=complete]":{bg:$accentColor.reference,color:"chakra-inverse-text"},"&[data-status=incomplete]":{borderWidth:"2px"}},separator:{bg:"chakra-border-color",flex:"1","&[data-status=complete]":{bg:$accentColor.reference},"&[data-orientation=horizontal]":{width:"100%",height:"2px",marginStart:"2"},"&[data-orientation=vertical]":{width:"2px",position:"absolute",height:"100%",maxHeight:`calc(100% - ${$size.reference} - 8px)`,top:`calc(${$size.reference} + 4px)`,insetStart:`calc(${$size.reference} / 2 - 1px)`}}})),stepperTheme=defineMultiStyleConfig$4({baseStyle:baseStyle$6,sizes:{xs:definePartsStyle$4({stepper:{[$size.variable]:"sizes.4",[$iconSize.variable]:"sizes.3",[$titleFontSize.variable]:"fontSizes.xs",[$descFontSize.variable]:"fontSizes.xs"}}),sm:definePartsStyle$4({stepper:{[$size.variable]:"sizes.6",[$iconSize.variable]:"sizes.4",[$titleFontSize.variable]:"fontSizes.sm",[$descFontSize.variable]:"fontSizes.xs"}}),md:definePartsStyle$4({stepper:{[$size.variable]:"sizes.8",[$iconSize.variable]:"sizes.5",[$titleFontSize.variable]:"fontSizes.md",[$descFontSize.variable]:"fontSizes.sm"}}),lg:definePartsStyle$4({stepper:{[$size.variable]:"sizes.10",[$iconSize.variable]:"sizes.6",[$titleFontSize.variable]:"fontSizes.lg",[$descFontSize.variable]:"fontSizes.md"}})},defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:defineMultiStyleConfig$3,definePartsStyle:definePartsStyle$3}=createMultiStyleConfigHelpers(switchAnatomy.keys),$width=cssVar("switch-track-width"),$height=cssVar("switch-track-height"),$diff=cssVar("switch-track-diff"),diffValue=calc.subtract($width,$height),$translateX=cssVar("switch-thumb-x"),$bg$3=cssVar("switch-bg"),baseStyleTrack=n=>{const{colorScheme:e}=n;return{borderRadius:"full",p:"0.5",width:[$width.reference],height:[$height.reference],transitionProperty:"common",transitionDuration:"fast",[$bg$3.variable]:"colors.gray.300",_dark:{[$bg$3.variable]:"colors.whiteAlpha.400"},_focusVisible:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{[$bg$3.variable]:`colors.${e}.500`,_dark:{[$bg$3.variable]:`colors.${e}.200`}},bg:$bg$3.reference}},baseStyleThumb={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[$height.reference],height:[$height.reference],_checked:{transform:`translateX(${$translateX.reference})`}},baseStyle$5=definePartsStyle$3(n=>({container:{[$diff.variable]:diffValue,[$translateX.variable]:$diff.reference,_rtl:{[$translateX.variable]:calc($diff).negate().toString()}},track:baseStyleTrack(n),thumb:baseStyleThumb})),sizes$4={sm:definePartsStyle$3({container:{[$width.variable]:"1.375rem",[$height.variable]:"sizes.3"}}),md:definePartsStyle$3({container:{[$width.variable]:"1.875rem",[$height.variable]:"sizes.4"}}),lg:definePartsStyle$3({container:{[$width.variable]:"2.875rem",[$height.variable]:"sizes.6"}})},switchTheme=defineMultiStyleConfig$3({baseStyle:baseStyle$5,sizes:sizes$4,defaultProps:{size:"md",colorScheme:"blue"}}),{defineMultiStyleConfig:defineMultiStyleConfig$2,definePartsStyle:definePartsStyle$2}=createMultiStyleConfigHelpers(tableAnatomy.keys),baseStyle$4=definePartsStyle$2({table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}}),numericStyles={"&[data-is-numeric=true]":{textAlign:"end"}},variantSimple=definePartsStyle$2(n=>{const{colorScheme:e}=n;return{th:{color:mode("gray.600","gray.400")(n),borderBottom:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n),...numericStyles},td:{borderBottom:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n),...numericStyles},caption:{color:mode("gray.600","gray.100")(n)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),variantStripe=definePartsStyle$2(n=>{const{colorScheme:e}=n;return{th:{color:mode("gray.600","gray.400")(n),borderBottom:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n),...numericStyles},td:{borderBottom:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n),...numericStyles},caption:{color:mode("gray.600","gray.100")(n)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:mode(`${e}.100`,`${e}.700`)(n)},td:{background:mode(`${e}.100`,`${e}.700`)(n)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}}),variants$5={simple:variantSimple,striped:variantStripe,unstyled:{}},sizes$3={sm:definePartsStyle$2({th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}}),md:definePartsStyle$2({th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}}),lg:definePartsStyle$2({th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}})},tableTheme=defineMultiStyleConfig$2({baseStyle:baseStyle$4,variants:variants$5,sizes:sizes$3,defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}}),$fg$1=cssVar$1("tabs-color"),$bg$2=cssVar$1("tabs-bg"),$border=cssVar$1("tabs-border-color"),{defineMultiStyleConfig:defineMultiStyleConfig$1,definePartsStyle:definePartsStyle$1}=createMultiStyleConfigHelpers(tabsAnatomy.keys),baseStyleRoot=n=>{const{orientation:e}=n;return{display:e==="vertical"?"flex":"block"}},baseStyleTab=n=>{const{isFitted:e}=n;return{flex:e?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focusVisible:{zIndex:1,boxShadow:"outline"},_disabled:{cursor:"not-allowed",opacity:.4}}},baseStyleTablist=n=>{const{align:e="start",orientation:s}=n;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[e],flexDirection:s==="vertical"?"column":"row"}},baseStyleTabpanel={p:4},baseStyle$3=definePartsStyle$1(n=>({root:baseStyleRoot(n),tab:baseStyleTab(n),tablist:baseStyleTablist(n),tabpanel:baseStyleTabpanel})),sizes$2={sm:definePartsStyle$1({tab:{py:1,px:4,fontSize:"sm"}}),md:definePartsStyle$1({tab:{fontSize:"md",py:2,px:4}}),lg:definePartsStyle$1({tab:{fontSize:"lg",py:3,px:4}})},variantLine=definePartsStyle$1(n=>{const{colorScheme:e,orientation:s}=n,o=s==="vertical",a=o?"borderStart":"borderBottom",c=o?"marginStart":"marginBottom";return{tablist:{[a]:"2px solid",borderColor:"inherit"},tab:{[a]:"2px solid",borderColor:"transparent",[c]:"-2px",_selected:{[$fg$1.variable]:`colors.${e}.600`,_dark:{[$fg$1.variable]:`colors.${e}.300`},borderColor:"currentColor"},_active:{[$bg$2.variable]:"colors.gray.200",_dark:{[$bg$2.variable]:"colors.whiteAlpha.300"}},_disabled:{_active:{bg:"none"}},color:$fg$1.reference,bg:$bg$2.reference}}}),variantEnclosed=definePartsStyle$1(n=>{const{colorScheme:e}=n;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",[$border.variable]:"transparent",_selected:{[$fg$1.variable]:`colors.${e}.600`,[$border.variable]:"colors.white",_dark:{[$fg$1.variable]:`colors.${e}.300`,[$border.variable]:"colors.gray.800"},borderColor:"inherit",borderBottomColor:$border.reference},color:$fg$1.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),variantEnclosedColored=definePartsStyle$1(n=>{const{colorScheme:e}=n;return{tab:{border:"1px solid",borderColor:"inherit",[$bg$2.variable]:"colors.gray.50",_dark:{[$bg$2.variable]:"colors.whiteAlpha.50"},mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{[$bg$2.variable]:"colors.white",[$fg$1.variable]:`colors.${e}.600`,_dark:{[$bg$2.variable]:"colors.gray.800",[$fg$1.variable]:`colors.${e}.300`},borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"},color:$fg$1.reference,bg:$bg$2.reference},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}}),variantSoftRounded=definePartsStyle$1(n=>{const{colorScheme:e,theme:s}=n;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:getColor(s,`${e}.700`),bg:getColor(s,`${e}.100`)}}}}),variantSolidRounded=definePartsStyle$1(n=>{const{colorScheme:e}=n;return{tab:{borderRadius:"full",fontWeight:"semibold",[$fg$1.variable]:"colors.gray.600",_dark:{[$fg$1.variable]:"inherit"},_selected:{[$fg$1.variable]:"colors.white",[$bg$2.variable]:`colors.${e}.600`,_dark:{[$fg$1.variable]:"colors.gray.800",[$bg$2.variable]:`colors.${e}.300`}},color:$fg$1.reference,bg:$bg$2.reference}}}),variantUnstyled=definePartsStyle$1({}),variants$4={line:variantLine,enclosed:variantEnclosed,"enclosed-colored":variantEnclosedColored,"soft-rounded":variantSoftRounded,"solid-rounded":variantSolidRounded,unstyled:variantUnstyled},tabsTheme=defineMultiStyleConfig$1({baseStyle:baseStyle$3,sizes:sizes$2,variants:variants$4,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}}),{defineMultiStyleConfig,definePartsStyle}=createMultiStyleConfigHelpers(tagAnatomy.keys),$bg$1=cssVar$1("tag-bg"),$color=cssVar$1("tag-color"),$shadow=cssVar$1("tag-shadow"),$minH=cssVar$1("tag-min-height"),$minW=cssVar$1("tag-min-width"),$fontSize=cssVar$1("tag-font-size"),$paddingX=cssVar$1("tag-padding-inline"),baseStyleContainer={fontWeight:"medium",lineHeight:1.2,outline:0,[$color.variable]:vars.color.reference,[$bg$1.variable]:vars.bg.reference,[$shadow.variable]:vars.shadow.reference,color:$color.reference,bg:$bg$1.reference,boxShadow:$shadow.reference,borderRadius:"md",minH:$minH.reference,minW:$minW.reference,fontSize:$fontSize.reference,px:$paddingX.reference,_focusVisible:{[$shadow.variable]:"shadows.outline"}},baseStyleLabel={lineHeight:1.2,overflow:"visible"},baseStyleCloseButton={fontSize:"lg",w:"5",h:"5",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"1.5",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focusVisible:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}},baseStyle$2=definePartsStyle({container:baseStyleContainer,label:baseStyleLabel,closeButton:baseStyleCloseButton}),sizes$1={sm:definePartsStyle({container:{[$minH.variable]:"sizes.5",[$minW.variable]:"sizes.5",[$fontSize.variable]:"fontSizes.xs",[$paddingX.variable]:"space.2"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}}),md:definePartsStyle({container:{[$minH.variable]:"sizes.6",[$minW.variable]:"sizes.6",[$fontSize.variable]:"fontSizes.sm",[$paddingX.variable]:"space.2"}}),lg:definePartsStyle({container:{[$minH.variable]:"sizes.8",[$minW.variable]:"sizes.8",[$fontSize.variable]:"fontSizes.md",[$paddingX.variable]:"space.3"}})},variants$3={subtle:definePartsStyle(n=>({container:badgeTheme.variants?.subtle(n)})),solid:definePartsStyle(n=>({container:badgeTheme.variants?.solid(n)})),outline:definePartsStyle(n=>({container:badgeTheme.variants?.outline(n)}))},tagTheme=defineMultiStyleConfig({variants:variants$3,baseStyle:baseStyle$2,sizes:sizes$1,defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}}),baseStyle$1={...inputTheme.baseStyle?.field,paddingY:"2",minHeight:"20",lineHeight:"short",verticalAlign:"top"},variants$2={outline:n=>inputTheme.variants?.outline(n).field??{},flushed:n=>inputTheme.variants?.flushed(n).field??{},filled:n=>inputTheme.variants?.filled(n).field??{},unstyled:inputTheme.variants?.unstyled.field??{}},sizes={xs:inputTheme.sizes?.xs.field??{},sm:inputTheme.sizes?.sm.field??{},md:inputTheme.sizes?.md.field??{},lg:inputTheme.sizes?.lg.field??{}},textareaTheme={baseStyle:baseStyle$1,sizes,variants:variants$2,defaultProps:{size:"md",variant:"outline"}},$bg=cssVar("tooltip-bg"),$fg=cssVar("tooltip-fg"),$arrowBg=cssVar("popper-arrow-bg"),baseStyle={bg:$bg.reference,color:$fg.reference,[$bg.variable]:"colors.gray.700",[$fg.variable]:"colors.whiteAlpha.900",_dark:{[$bg.variable]:"colors.gray.300",[$fg.variable]:"colors.gray.900"},[$arrowBg.variable]:$bg.reference,px:"2",py:"0.5",borderRadius:"sm",fontWeight:"medium",fontSize:"sm",boxShadow:"md",maxW:"xs",zIndex:"tooltip"},tooltipTheme={baseStyle},components={Accordion:accordionTheme,Alert:alertTheme,Avatar:avatarTheme,Badge:badgeTheme,Breadcrumb:breadcrumbTheme,Button:buttonTheme,Checkbox:checkboxTheme,CloseButton:closeButtonTheme,Code:codeTheme,Container:containerTheme,Divider:dividerTheme,Drawer:drawerTheme,Editable:editableTheme,Form:formTheme,FormError:formErrorTheme,FormLabel:formLabelTheme,Heading:headingTheme,Input:inputTheme,Kbd:kbdTheme,Link:linkTheme,List:listTheme,Menu:menuTheme,Modal:modalTheme,NumberInput:numberInputTheme,PinInput:pinInputTheme,Popover:popoverTheme,Progress:progressTheme,Radio:radioTheme,Select:selectTheme,Skeleton:skeletonTheme,SkipLink:skipLinkTheme,Slider:sliderTheme,Spinner:spinnerTheme,Stat:statTheme,Switch:switchTheme,Table:tableTheme,Tabs:tabsTheme,Tag:tagTheme,Textarea:textareaTheme,Tooltip:tooltipTheme,Card:cardTheme,Stepper:stepperTheme},borders$1={none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},breakpoints={base:"0em",sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"},colors={transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"}},radii={none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},shadows={xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},transitionProperty={common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},transitionTimingFunction={"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},transitionDuration={"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"},transition={property:transitionProperty,easing:transitionTimingFunction,duration:transitionDuration},zIndices={hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},blur={none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},foundations={breakpoints,zIndices,radii,blur,colors,...typography,sizes:sizes$m,shadows,space:spacing,borders:borders$1,transition},semanticTokens={colors:{"chakra-body-text":{_light:"gray.800",_dark:"whiteAlpha.900"},"chakra-body-bg":{_light:"white",_dark:"gray.800"},"chakra-border-color":{_light:"gray.200",_dark:"whiteAlpha.300"},"chakra-inverse-text":{_light:"white",_dark:"gray.800"},"chakra-subtle-bg":{_light:"gray.100",_dark:"gray.700"},"chakra-subtle-text":{_light:"gray.600",_dark:"gray.400"},"chakra-placeholder-color":{_light:"gray.500",_dark:"whiteAlpha.400"}}},styles={global:{body:{fontFamily:"body",color:"chakra-body-text",bg:"chakra-body-bg",transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:"chakra-placeholder-color"},"*, *::before, &::after":{borderColor:"chakra-border-color"}}},direction="ltr",config={useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"},theme={semanticTokens,direction,...foundations,components,styles,config};function sheetForTag(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function createStyleElement(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var StyleSheet=(function(){function n(s){var o=this;this._insertTag=function(a){var c;o.tags.length===0?o.insertionPoint?c=o.insertionPoint.nextSibling:o.prepend?c=o.container.firstChild:c=o.before:c=o.tags[o.tags.length-1].nextSibling,o.container.insertBefore(a,c),o.tags.push(a)},this.isSpeedy=s.speedy===void 0?!0:s.speedy,this.tags=[],this.ctr=0,this.nonce=s.nonce,this.key=s.key,this.container=s.container,this.prepend=s.prepend,this.insertionPoint=s.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(o){o.forEach(this._insertTag)},e.insert=function(o){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(createStyleElement(this));var a=this.tags[this.tags.length-1];if(this.isSpeedy){var c=sheetForTag(a);try{c.insertRule(o,c.cssRules.length)}catch{}}else a.appendChild(document.createTextNode(o));this.ctr++},e.flush=function(){this.tags.forEach(function(o){var a;return(a=o.parentNode)==null?void 0:a.removeChild(o)}),this.tags=[],this.ctr=0},n})(),MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash$2(n,e){return charat(n,0)^45?(((e<<2^charat(n,0))<<2^charat(n,1))<<2^charat(n,2))<<2^charat(n,3):0}function trim(n){return n.trim()}function match(n,e){return(n=e.exec(n))?n[0]:n}function replace(n,e,s){return n.replace(e,s)}function indexof(n,e){return n.indexOf(e)}function charat(n,e){return n.charCodeAt(e)|0}function substr(n,e,s){return n.slice(e,s)}function strlen(n){return n.length}function sizeof(n){return n.length}function append(n,e){return e.push(n),n}function combine(n,e){return n.map(e).join("")}var line=1,column=1,length=0,position=0,character=0,characters="";function node(n,e,s,o,a,c,f){return{value:n,root:e,parent:s,type:o,props:a,children:c,line,column,length:f,return:""}}function copy(n,e){return assign(node("",null,null,"",null,null,0),n,{length:-n.length},e)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(n,e){return substr(characters,n,e)}function token(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(n){return line=column=1,length=strlen(characters=n),position=0,[]}function dealloc(n){return characters="",n}function delimit(n){return trim(slice(position-1,delimiter(n===91?n+2:n===40?n+1:n)))}function whitespace(n){for(;(character=peek())&&character<33;)next();return token(n)>2||token(character)>3?"":" "}function escaping(n,e){for(;--e&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(n,caret()+(e<6&&peek()==32&&next()==32))}function delimiter(n){for(;next();)switch(character){case n:return position;case 34:case 39:n!==34&&n!==39&&delimiter(character);break;case 40:n===41&&delimiter(n);break;case 92:next();break}return position}function commenter(n,e){for(;next()&&n+character!==57;)if(n+character===84&&peek()===47)break;return"/*"+slice(e,position-1)+"*"+from(n===47?n:next())}function identifier(n){for(;!token(peek());)next();return slice(n,position)}function compile(n){return dealloc(parse$2("",null,null,null,[""],n=alloc(n),0,[0],n))}function parse$2(n,e,s,o,a,c,f,h,m){for(var g=0,_=0,E=f,T=0,w=0,A=0,R=1,V=1,te=1,se=0,re="",ye=a,D=c,ae=o,z=re;V;)switch(A=se,se=next()){case 40:if(A!=108&&charat(z,E-1)==58){indexof(z+=replace(delimit(se),"&","&\f"),"&\f")!=-1&&(te=-1);break}case 34:case 39:case 91:z+=delimit(se);break;case 9:case 10:case 13:case 32:z+=whitespace(A);break;case 92:z+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),e,s),m);break;default:z+="/"}break;case 123*R:h[g++]=strlen(z)*te;case 125*R:case 59:case 0:switch(se){case 0:case 125:V=0;case 59+_:te==-1&&(z=replace(z,/\f/g,"")),w>0&&strlen(z)-E&&append(w>32?declaration(z+";",o,s,E-1):declaration(replace(z," ","")+";",o,s,E-2),m);break;case 59:z+=";";default:if(append(ae=ruleset(z,e,s,g,_,a,h,re,ye=[],D=[],E),c),se===123)if(_===0)parse$2(z,e,ae,ae,ye,c,E,h,D);else switch(T===99&&charat(z,3)===110?100:T){case 100:case 108:case 109:case 115:parse$2(n,ae,ae,o&&append(ruleset(n,ae,ae,0,0,a,h,re,a,ye=[],E),D),a,D,E,h,o?ye:D);break;default:parse$2(z,ae,ae,ae,[""],D,0,h,D)}}g=_=w=0,R=te=1,re=z="",E=f;break;case 58:E=1+strlen(z),w=A;default:if(R<1){if(se==123)--R;else if(se==125&&R++==0&&prev()==125)continue}switch(z+=from(se),se*R){case 38:te=_>0?1:(z+="\f",-1);break;case 44:h[g++]=(strlen(z)-1)*te,te=1;break;case 64:peek()===45&&(z+=delimit(next())),T=peek(),_=E=strlen(re=z+=identifier(caret())),se++;break;case 45:A===45&&strlen(z)==2&&(R=0)}}return c}function ruleset(n,e,s,o,a,c,f,h,m,g,_){for(var E=a-1,T=a===0?c:[""],w=sizeof(T),A=0,R=0,V=0;A<o;++A)for(var te=0,se=substr(n,E+1,E=abs(R=f[A])),re=n;te<w;++te)(re=trim(R>0?T[te]+" "+se:replace(se,/&\f/g,T[te])))&&(m[V++]=re);return node(n,e,s,a===0?RULESET:h,m,g,_)}function comment(n,e,s){return node(n,e,s,COMMENT,from(char()),substr(n,2,-2),0)}function declaration(n,e,s,o){return node(n,e,s,DECLARATION,substr(n,0,o),substr(n,o+1,-1),o)}function serialize$1(n,e){for(var s="",o=sizeof(n),a=0;a<o;a++)s+=e(n[a],a,n,e)||"";return s}function stringify(n,e,s,o){switch(n.type){case LAYER:if(n.children.length)break;case IMPORT:case DECLARATION:return n.return=n.return||n.value;case COMMENT:return"";case KEYFRAMES:return n.return=n.value+"{"+serialize$1(n.children,o)+"}";case RULESET:n.value=n.props.join(",")}return strlen(s=serialize$1(n.children,o))?n.return=n.value+"{"+s+"}":""}function middleware(n){var e=sizeof(n);return function(s,o,a,c){for(var f="",h=0;h<e;h++)f+=n[h](s,o,a,c)||"";return f}}function rulesheet(n){return function(e){e.root||(e=e.return)&&n(e)}}var weakMemoize=function(e){var s=new WeakMap;return function(o){if(s.has(o))return s.get(o);var a=e(o);return s.set(o,a),a}};function memoize(n){var e=Object.create(null);return function(s){return e[s]===void 0&&(e[s]=n(s)),e[s]}}var identifierWithPointTracking=function(e,s,o){for(var a=0,c=0;a=c,c=peek(),a===38&&c===12&&(s[o]=1),!token(c);)next();return slice(e,position)},toRules=function(e,s){var o=-1,a=44;do switch(token(a)){case 0:a===38&&peek()===12&&(s[o]=1),e[o]+=identifierWithPointTracking(position-1,s,o);break;case 2:e[o]+=delimit(a);break;case 4:if(a===44){e[++o]=peek()===58?"&\f":"",s[o]=e[o].length;break}default:e[o]+=from(a)}while(a=next());return e},getRules=function(e,s){return dealloc(toRules(alloc(e),s))},fixedElements=new WeakMap,compat=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var s=e.value,o=e.parent,a=e.column===o.column&&e.line===o.line;o.type!=="rule";)if(o=o.parent,!o)return;if(!(e.props.length===1&&s.charCodeAt(0)!==58&&!fixedElements.get(o))&&!a){fixedElements.set(e,!0);for(var c=[],f=getRules(s,c),h=o.props,m=0,g=0;m<f.length;m++)for(var _=0;_<h.length;_++,g++)e.props[g]=c[m]?f[m].replace(/&\f/g,h[_]):h[_]+" "+f[m]}}},removeLabel=function(e){if(e.type==="decl"){var s=e.value;s.charCodeAt(0)===108&&s.charCodeAt(2)===98&&(e.return="",e.value="")}};function prefix(n,e){switch(hash$2(n,e)){case 5103:return WEBKIT+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+n+MOZ+n+MS+n+n;case 6828:case 4268:return WEBKIT+n+MS+n+n;case 6165:return WEBKIT+n+MS+"flex-"+n+n;case 5187:return WEBKIT+n+replace(n,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+n;case 5443:return WEBKIT+n+MS+"flex-item-"+replace(n,/flex-|-self/,"")+n;case 4675:return WEBKIT+n+MS+"flex-line-pack"+replace(n,/align-content|flex-|-self/,"")+n;case 5548:return WEBKIT+n+MS+replace(n,"shrink","negative")+n;case 5292:return WEBKIT+n+MS+replace(n,"basis","preferred-size")+n;case 6060:return WEBKIT+"box-"+replace(n,"-grow","")+WEBKIT+n+MS+replace(n,"grow","positive")+n;case 4554:return WEBKIT+replace(n,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+n;case 6187:return replace(replace(replace(n,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),n,"")+n;case 5495:case 3959:return replace(n,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(n,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+n+n;case 4095:case 3583:case 4068:case 2532:return replace(n,/(.+)-inline(.+)/,WEBKIT+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(n)-1-e>6)switch(charat(n,e+1)){case 109:if(charat(n,e+4)!==45)break;case 102:return replace(n,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~indexof(n,"stretch")?prefix(replace(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(charat(n,e+1)!==115)break;case 6444:switch(charat(n,strlen(n)-3-(~indexof(n,"!important")&&10))){case 107:return replace(n,":",":"+WEBKIT)+n;case 101:return replace(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+WEBKIT+(charat(n,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+n}break;case 5936:switch(charat(n,e+11)){case 114:return WEBKIT+n+MS+replace(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return WEBKIT+n+MS+replace(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return WEBKIT+n+MS+replace(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return WEBKIT+n+MS+n+n}return n}var prefixer=function(e,s,o,a){if(e.length>-1&&!e.return)switch(e.type){case DECLARATION:e.return=prefix(e.value,e.length);break;case KEYFRAMES:return serialize$1([copy(e,{value:replace(e.value,"@","@"+WEBKIT)})],a);case RULESET:if(e.length)return combine(e.props,function(c){switch(match(c,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize$1([copy(e,{props:[replace(c,/:(read-\w+)/,":"+MOZ+"$1")]})],a);case"::placeholder":return serialize$1([copy(e,{props:[replace(c,/:(plac\w+)/,":"+WEBKIT+"input-$1")]}),copy(e,{props:[replace(c,/:(plac\w+)/,":"+MOZ+"$1")]}),copy(e,{props:[replace(c,/:(plac\w+)/,MS+"input-$1")]})],a)}return""})}},defaultStylisPlugins=[prefixer],createCache=function(e){var s=e.key;if(s==="css"){var o=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(o,function(R){var V=R.getAttribute("data-emotion");V.indexOf(" ")!==-1&&(document.head.appendChild(R),R.setAttribute("data-s",""))})}var a=e.stylisPlugins||defaultStylisPlugins,c={},f,h=[];f=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+s+' "]'),function(R){for(var V=R.getAttribute("data-emotion").split(" "),te=1;te<V.length;te++)c[V[te]]=!0;h.push(R)});var m,g=[compat,removeLabel];{var _,E=[stringify,rulesheet(function(R){_.insert(R)})],T=middleware(g.concat(a,E)),w=function(V){return serialize$1(compile(V),T)};m=function(V,te,se,re){_=se,w(V?V+"{"+te.styles+"}":te.styles),re&&(A.inserted[te.name]=!0)}}var A={key:s,sheet:new StyleSheet({key:s,container:f,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:c,registered:{},insert:m};return A.sheet.hydrate(h),A};function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)({}).hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},_extends$1.apply(null,arguments)}var reactIs={exports:{}},reactIs_production_min={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hasRequiredReactIs_production_min;function requireReactIs_production_min(){if(hasRequiredReactIs_production_min)return reactIs_production_min;hasRequiredReactIs_production_min=1;var n=typeof Symbol=="function"&&Symbol.for,e=n?Symbol.for("react.element"):60103,s=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,c=n?Symbol.for("react.profiler"):60114,f=n?Symbol.for("react.provider"):60109,h=n?Symbol.for("react.context"):60110,m=n?Symbol.for("react.async_mode"):60111,g=n?Symbol.for("react.concurrent_mode"):60111,_=n?Symbol.for("react.forward_ref"):60112,E=n?Symbol.for("react.suspense"):60113,T=n?Symbol.for("react.suspense_list"):60120,w=n?Symbol.for("react.memo"):60115,A=n?Symbol.for("react.lazy"):60116,R=n?Symbol.for("react.block"):60121,V=n?Symbol.for("react.fundamental"):60117,te=n?Symbol.for("react.responder"):60118,se=n?Symbol.for("react.scope"):60119;function re(D){if(typeof D=="object"&&D!==null){var ae=D.$$typeof;switch(ae){case e:switch(D=D.type,D){case m:case g:case o:case c:case a:case E:return D;default:switch(D=D&&D.$$typeof,D){case h:case _:case A:case w:case f:return D;default:return ae}}case s:return ae}}}function ye(D){return re(D)===g}return reactIs_production_min.AsyncMode=m,reactIs_production_min.ConcurrentMode=g,reactIs_production_min.ContextConsumer=h,reactIs_production_min.ContextProvider=f,reactIs_production_min.Element=e,reactIs_production_min.ForwardRef=_,reactIs_production_min.Fragment=o,reactIs_production_min.Lazy=A,reactIs_production_min.Memo=w,reactIs_production_min.Portal=s,reactIs_production_min.Profiler=c,reactIs_production_min.StrictMode=a,reactIs_production_min.Suspense=E,reactIs_production_min.isAsyncMode=function(D){return ye(D)||re(D)===m},reactIs_production_min.isConcurrentMode=ye,reactIs_production_min.isContextConsumer=function(D){return re(D)===h},reactIs_production_min.isContextProvider=function(D){return re(D)===f},reactIs_production_min.isElement=function(D){return typeof D=="object"&&D!==null&&D.$$typeof===e},reactIs_production_min.isForwardRef=function(D){return re(D)===_},reactIs_production_min.isFragment=function(D){return re(D)===o},reactIs_production_min.isLazy=function(D){return re(D)===A},reactIs_production_min.isMemo=function(D){return re(D)===w},reactIs_production_min.isPortal=function(D){return re(D)===s},reactIs_production_min.isProfiler=function(D){return re(D)===c},reactIs_production_min.isStrictMode=function(D){return re(D)===a},reactIs_production_min.isSuspense=function(D){return re(D)===E},reactIs_production_min.isValidElementType=function(D){return typeof D=="string"||typeof D=="function"||D===o||D===g||D===c||D===a||D===E||D===T||typeof D=="object"&&D!==null&&(D.$$typeof===A||D.$$typeof===w||D.$$typeof===f||D.$$typeof===h||D.$$typeof===_||D.$$typeof===V||D.$$typeof===te||D.$$typeof===se||D.$$typeof===R)},reactIs_production_min.typeOf=re,reactIs_production_min}var hasRequiredReactIs;function requireReactIs(){return hasRequiredReactIs||(hasRequiredReactIs=1,reactIs.exports=requireReactIs_production_min()),reactIs.exports}var hoistNonReactStatics_cjs,hasRequiredHoistNonReactStatics_cjs;function requireHoistNonReactStatics_cjs(){if(hasRequiredHoistNonReactStatics_cjs)return hoistNonReactStatics_cjs;hasRequiredHoistNonReactStatics_cjs=1;var n=requireReactIs(),e={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},s={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},a={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},c={};c[n.ForwardRef]=o,c[n.Memo]=a;function f(A){return n.isMemo(A)?a:c[A.$$typeof]||e}var h=Object.defineProperty,m=Object.getOwnPropertyNames,g=Object.getOwnPropertySymbols,_=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,T=Object.prototype;function w(A,R,V){if(typeof R!="string"){if(T){var te=E(R);te&&te!==T&&w(A,te,V)}var se=m(R);g&&(se=se.concat(g(R)));for(var re=f(A),ye=f(R),D=0;D<se.length;++D){var ae=se[D];if(!s[ae]&&!(V&&V[ae])&&!(ye&&ye[ae])&&!(re&&re[ae])){var z=_(R,ae);try{h(A,ae,z)}catch{}}}}return A}return hoistNonReactStatics_cjs=w,hoistNonReactStatics_cjs}requireHoistNonReactStatics_cjs();var isBrowser$1=!0;function getRegisteredStyles(n,e,s){var o="";return s.split(" ").forEach(function(a){n[a]!==void 0?e.push(n[a]+";"):a&&(o+=a+" ")}),o}var registerStyles=function(e,s,o){var a=e.key+"-"+s.name;(o===!1||isBrowser$1===!1)&&e.registered[a]===void 0&&(e.registered[a]=s.styles)},insertStyles=function(e,s,o){registerStyles(e,s,o);var a=e.key+"-"+s.name;if(e.inserted[s.name]===void 0){var c=s;do e.insert(s===c?"."+a:"",c,e.sheet,!0),c=c.next;while(c!==void 0)}};function murmur2(n){for(var e=0,s,o=0,a=n.length;a>=4;++o,a-=4)s=n.charCodeAt(o)&255|(n.charCodeAt(++o)&255)<<8|(n.charCodeAt(++o)&255)<<16|(n.charCodeAt(++o)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,e=(s&65535)*1540483477+((s>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(a){case 3:e^=(n.charCodeAt(o+2)&255)<<16;case 2:e^=(n.charCodeAt(o+1)&255)<<8;case 1:e^=n.charCodeAt(o)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var unitlessKeys={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},hyphenateRegex=/[A-Z]|^ms/g,animationRegex=/_EMO_([^_]+?)_([^]*?)_EMO_/g,isCustomProperty=function(e){return e.charCodeAt(1)===45},isProcessableValue=function(e){return e!=null&&typeof e!="boolean"},processStyleName=memoize(function(n){return isCustomProperty(n)?n:n.replace(hyphenateRegex,"-$&").toLowerCase()}),processStyleValue=function(e,s){switch(e){case"animation":case"animationName":if(typeof s=="string")return s.replace(animationRegex,function(o,a,c){return cursor={name:a,styles:c,next:cursor},a})}return unitlessKeys[e]!==1&&!isCustomProperty(e)&&typeof s=="number"&&s!==0?s+"px":s};function handleInterpolation(n,e,s){if(s==null)return"";var o=s;if(o.__emotion_styles!==void 0)return o;switch(typeof s){case"boolean":return"";case"object":{var a=s;if(a.anim===1)return cursor={name:a.name,styles:a.styles,next:cursor},a.name;var c=s;if(c.styles!==void 0){var f=c.next;if(f!==void 0)for(;f!==void 0;)cursor={name:f.name,styles:f.styles,next:cursor},f=f.next;var h=c.styles+";";return h}return createStringFromObject(n,e,s)}case"function":{if(n!==void 0){var m=cursor,g=s(n);return cursor=m,handleInterpolation(n,e,g)}break}}var _=s;if(e==null)return _;var E=e[_];return E!==void 0?E:_}function createStringFromObject(n,e,s){var o="";if(Array.isArray(s))for(var a=0;a<s.length;a++)o+=handleInterpolation(n,e,s[a])+";";else for(var c in s){var f=s[c];if(typeof f!="object"){var h=f;e!=null&&e[h]!==void 0?o+=c+"{"+e[h]+"}":isProcessableValue(h)&&(o+=processStyleName(c)+":"+processStyleValue(c,h)+";")}else if(Array.isArray(f)&&typeof f[0]=="string"&&(e==null||e[f[0]]===void 0))for(var m=0;m<f.length;m++)isProcessableValue(f[m])&&(o+=processStyleName(c)+":"+processStyleValue(c,f[m])+";");else{var g=handleInterpolation(n,e,f);switch(c){case"animation":case"animationName":{o+=processStyleName(c)+":"+g+";";break}default:o+=c+"{"+g+"}"}}}return o}var labelPattern=/label:\s*([^\s;{]+)\s*(;|$)/g,cursor;function serializeStyles(n,e,s){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var o=!0,a="";cursor=void 0;var c=n[0];if(c==null||c.raw===void 0)o=!1,a+=handleInterpolation(s,e,c);else{var f=c;a+=f[0]}for(var h=1;h<n.length;h++)if(a+=handleInterpolation(s,e,n[h]),o){var m=c;a+=m[h]}labelPattern.lastIndex=0;for(var g="",_;(_=labelPattern.exec(a))!==null;)g+="-"+_[1];var E=murmur2(a)+g;return{name:E,styles:a,next:cursor}}var syncFallback=function(e){return e()},useInsertionEffect=React$1.useInsertionEffect?React$1.useInsertionEffect:!1,useInsertionEffectAlwaysWithSyncFallback=useInsertionEffect||syncFallback,useInsertionEffectWithLayoutFallback=useInsertionEffect||reactExports.useLayoutEffect,EmotionCacheContext=reactExports.createContext(typeof HTMLElement<"u"?createCache({key:"css"}):null);EmotionCacheContext.Provider;var __unsafe_useEmotionCache=function(){return reactExports.useContext(EmotionCacheContext)},withEmotionCache=function(e){return reactExports.forwardRef(function(s,o){var a=reactExports.useContext(EmotionCacheContext);return e(s,a,o)})},ThemeContext=reactExports.createContext({}),getTheme$1=function(e,s){if(typeof s=="function"){var o=s(e);return o}return _extends$1({},e,s)},createCacheWithTheme=weakMemoize(function(n){return weakMemoize(function(e){return getTheme$1(n,e)})}),ThemeProvider$1=function(e){var s=reactExports.useContext(ThemeContext);return e.theme!==s&&(s=createCacheWithTheme(s)(e.theme)),reactExports.createElement(ThemeContext.Provider,{value:s},e.children)},hasOwn={}.hasOwnProperty,typePropName="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",createEmotionProps=function(e,s){var o={};for(var a in s)hasOwn.call(s,a)&&(o[a]=s[a]);return o[typePropName]=e,o},Insertion$1=function(e){var s=e.cache,o=e.serialized,a=e.isStringTag;return registerStyles(s,o,a),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(s,o,a)}),null},Emotion=withEmotionCache(function(n,e,s){var o=n.css;typeof o=="string"&&e.registered[o]!==void 0&&(o=e.registered[o]);var a=n[typePropName],c=[o],f="";typeof n.className=="string"?f=getRegisteredStyles(e.registered,c,n.className):n.className!=null&&(f=n.className+" ");var h=serializeStyles(c,void 0,reactExports.useContext(ThemeContext));f+=e.key+"-"+h.name;var m={};for(var g in n)hasOwn.call(n,g)&&g!=="css"&&g!==typePropName&&(m[g]=n[g]);return m.className=f,s&&(m.ref=s),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion$1,{cache:e,serialized:h,isStringTag:typeof a=="string"}),reactExports.createElement(a,m))}),Emotion$1=Emotion,jsx=function(e,s){var o=arguments;if(s==null||!hasOwn.call(s,"css"))return reactExports.createElement.apply(void 0,o);var a=o.length,c=new Array(a);c[0]=Emotion$1,c[1]=createEmotionProps(e,s);for(var f=2;f<a;f++)c[f]=o[f];return reactExports.createElement.apply(null,c)};(function(n){var e;e||(e=n.JSX||(n.JSX={}))})(jsx||(jsx={}));var Global=withEmotionCache(function(n,e){var s=n.styles,o=serializeStyles([s],void 0,reactExports.useContext(ThemeContext)),a=reactExports.useRef();return useInsertionEffectWithLayoutFallback(function(){var c=e.key+"-global",f=new e.sheet.constructor({key:c,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),h=!1,m=document.querySelector('style[data-emotion="'+c+" "+o.name+'"]');return e.sheet.tags.length&&(f.before=e.sheet.tags[0]),m!==null&&(h=!0,m.setAttribute("data-emotion",c),f.hydrate([m])),a.current=[f,h],function(){f.flush()}},[e]),useInsertionEffectWithLayoutFallback(function(){var c=a.current,f=c[0],h=c[1];if(h){c[1]=!1;return}if(o.next!==void 0&&insertStyles(e,o.next,!0),f.tags.length){var m=f.tags[f.tags.length-1].nextElementSibling;f.before=m,f.flush()}e.insert("",o,f,!1)},[e,o.name]),null});function css$1(){for(var n=arguments.length,e=new Array(n),s=0;s<n;s++)e[s]=arguments[s];return serializeStyles(e)}function keyframes$1(){var n=css$1.apply(void 0,arguments),e="animation-"+n.name;return{name:e,styles:"@keyframes "+e+"{"+n.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}const ColorModeContext=reactExports.createContext({});ColorModeContext.displayName="ColorModeContext";function useColorMode(){const n=reactExports.useContext(ColorModeContext);if(n===void 0)throw new Error("useColorMode must be used within a ColorModeProvider");return n}const classNames={light:"chakra-ui-light",dark:"chakra-ui-dark"};function getColorModeUtils(n={}){const{preventTransition:e=!0,nonce:s}=n,o={setDataset:a=>{const c=e?o.preventTransition():void 0;document.documentElement.dataset.theme=a,document.documentElement.style.colorScheme=a,c?.()},setClassName(a){document.body.classList.add(a?classNames.dark:classNames.light),document.body.classList.remove(a?classNames.light:classNames.dark)},query(){return window.matchMedia("(prefers-color-scheme: dark)")},getSystemTheme(a){return o.query().matches??a==="dark"?"dark":"light"},addListener(a){const c=o.query(),f=h=>{a(h.matches?"dark":"light")};return typeof c.addListener=="function"?c.addListener(f):c.addEventListener("change",f),()=>{typeof c.removeListener=="function"?c.removeListener(f):c.removeEventListener("change",f)}},preventTransition(){const a=document.createElement("style");return a.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),s!==void 0&&(a.nonce=s),document.head.appendChild(a),()=>{window.getComputedStyle(document.body),requestAnimationFrame(()=>{requestAnimationFrame(()=>{document.head.removeChild(a)})})}}};return o}const STORAGE_KEY="chakra-ui-color-mode";function createLocalStorageManager(n){return{ssr:!1,type:"localStorage",get(e){if(!globalThis?.document)return e;let s;try{s=localStorage.getItem(n)||e}catch{}return s||e},set(e){try{localStorage.setItem(n,e)}catch{}}}}const localStorageManager=createLocalStorageManager(STORAGE_KEY),noop$1=()=>{},useSafeLayoutEffect=isBrowser$2()?reactExports.useLayoutEffect:reactExports.useEffect;function getTheme(n,e){return n.type==="cookie"&&n.ssr?n.get(e):e}const ColorModeProvider=function(e){const{value:s,children:o,options:{useSystemColorMode:a,initialColorMode:c,disableTransitionOnChange:f}={},colorModeManager:h=localStorageManager}=e,m=__unsafe_useEmotionCache(),g=c==="dark"?"dark":"light",[_,E]=reactExports.useState(()=>getTheme(h,g)),[T,w]=reactExports.useState(()=>getTheme(h)),{getSystemTheme:A,setClassName:R,setDataset:V,addListener:te}=reactExports.useMemo(()=>getColorModeUtils({preventTransition:f,nonce:m?.nonce}),[f,m?.nonce]),se=c==="system"&&!_?T:_,re=reactExports.useCallback(ae=>{const z=ae==="system"?A():ae;E(z),R(z==="dark"),V(z),h.set(z)},[h,A,R,V]);useSafeLayoutEffect(()=>{c==="system"&&w(A())},[]),reactExports.useEffect(()=>{const ae=h.get();if(ae){re(ae);return}if(c==="system"){re("system");return}re(g)},[h,g,c,re]);const ye=reactExports.useCallback(()=>{re(se==="dark"?"light":"dark")},[se,re]);reactExports.useEffect(()=>{if(a)return te(re)},[a,te,re]);const D=reactExports.useMemo(()=>({colorMode:s??se,toggleColorMode:s?noop$1:ye,setColorMode:s?noop$1:re,forced:s!==void 0}),[se,ye,re,s]);return jsxRuntimeExports.jsx(ColorModeContext.Provider,{value:D,children:o})};ColorModeProvider.displayName="ColorModeProvider";const css=String.raw,vhPolyfill=css`
  :root,
  :host {
    --chakra-vh: 100vh;
  }

  @supports (height: -webkit-fill-available) {
    :root,
    :host {
      --chakra-vh: -webkit-fill-available;
    }
  }

  @supports (height: -moz-fill-available) {
    :root,
    :host {
      --chakra-vh: -moz-fill-available;
    }
  }

  @supports (height: 100dvh) {
    :root,
    :host {
      --chakra-vh: 100dvh;
    }
  }
`,CSSPolyfill=()=>jsxRuntimeExports.jsx(Global,{styles:vhPolyfill}),CSSReset=({scope:n=""})=>jsxRuntimeExports.jsx(Global,{styles:css`
      html {
        line-height: 1.5;
        -webkit-text-size-adjust: 100%;
        font-family: system-ui, sans-serif;
        -webkit-font-smoothing: antialiased;
        text-rendering: optimizeLegibility;
        -moz-osx-font-smoothing: grayscale;
        touch-action: manipulation;
      }

      body {
        position: relative;
        min-height: 100%;
        margin: 0;
        font-feature-settings: "kern";
      }

      ${n} :where(*, *::before, *::after) {
        border-width: 0;
        border-style: solid;
        box-sizing: border-box;
        word-wrap: break-word;
      }

      main {
        display: block;
      }

      ${n} hr {
        border-top-width: 1px;
        box-sizing: content-box;
        height: 0;
        overflow: visible;
      }

      ${n} :where(pre, code, kbd,samp) {
        font-family: SFMono-Regular, Menlo, Monaco, Consolas, monospace;
        font-size: 1em;
      }

      ${n} a {
        background-color: transparent;
        color: inherit;
        text-decoration: inherit;
      }

      ${n} abbr[title] {
        border-bottom: none;
        text-decoration: underline;
        -webkit-text-decoration: underline dotted;
        text-decoration: underline dotted;
      }

      ${n} :where(b, strong) {
        font-weight: bold;
      }

      ${n} small {
        font-size: 80%;
      }

      ${n} :where(sub,sup) {
        font-size: 75%;
        line-height: 0;
        position: relative;
        vertical-align: baseline;
      }

      ${n} sub {
        bottom: -0.25em;
      }

      ${n} sup {
        top: -0.5em;
      }

      ${n} img {
        border-style: none;
      }

      ${n} :where(button, input, optgroup, select, textarea) {
        font-family: inherit;
        font-size: 100%;
        line-height: 1.15;
        margin: 0;
      }

      ${n} :where(button, input) {
        overflow: visible;
      }

      ${n} :where(button, select) {
        text-transform: none;
      }

      ${n} :where(
          button::-moz-focus-inner,
          [type="button"]::-moz-focus-inner,
          [type="reset"]::-moz-focus-inner,
          [type="submit"]::-moz-focus-inner
        ) {
        border-style: none;
        padding: 0;
      }

      ${n} fieldset {
        padding: 0.35em 0.75em 0.625em;
      }

      ${n} legend {
        box-sizing: border-box;
        color: inherit;
        display: table;
        max-width: 100%;
        padding: 0;
        white-space: normal;
      }

      ${n} progress {
        vertical-align: baseline;
      }

      ${n} textarea {
        overflow: auto;
      }

      ${n} :where([type="checkbox"], [type="radio"]) {
        box-sizing: border-box;
        padding: 0;
      }

      ${n} input[type="number"]::-webkit-inner-spin-button,
      ${n} input[type="number"]::-webkit-outer-spin-button {
        -webkit-appearance: none !important;
      }

      ${n} input[type="number"] {
        -moz-appearance: textfield;
      }

      ${n} input[type="search"] {
        -webkit-appearance: textfield;
        outline-offset: -2px;
      }

      ${n} input[type="search"]::-webkit-search-decoration {
        -webkit-appearance: none !important;
      }

      ${n} ::-webkit-file-upload-button {
        -webkit-appearance: button;
        font: inherit;
      }

      ${n} details {
        display: block;
      }

      ${n} summary {
        display: list-item;
      }

      template {
        display: none;
      }

      [hidden] {
        display: none !important;
      }

      ${n} :where(
          blockquote,
          dl,
          dd,
          h1,
          h2,
          h3,
          h4,
          h5,
          h6,
          hr,
          figure,
          p,
          pre
        ) {
        margin: 0;
      }

      ${n} button {
        background: transparent;
        padding: 0;
      }

      ${n} fieldset {
        margin: 0;
        padding: 0;
      }

      ${n} :where(ol, ul) {
        margin: 0;
        padding: 0;
      }

      ${n} textarea {
        resize: vertical;
      }

      ${n} :where(button, [role="button"]) {
        cursor: pointer;
      }

      ${n} button::-moz-focus-inner {
        border: 0 !important;
      }

      ${n} table {
        border-collapse: collapse;
      }

      ${n} :where(h1, h2, h3, h4, h5, h6) {
        font-size: inherit;
        font-weight: inherit;
      }

      ${n} :where(button, input, optgroup, select, textarea) {
        padding: 0;
        line-height: inherit;
        color: inherit;
      }

      ${n} :where(img, svg, video, canvas, audio, iframe, embed, object) {
        display: block;
      }

      ${n} :where(img, video) {
        max-width: 100%;
        height: auto;
      }

      [data-js-focus-visible]
        :focus:not([data-focus-visible-added]):not(
          [data-focus-visible-disabled]
        ) {
        outline: none;
        box-shadow: none;
      }

      ${n} select::-ms-expand {
        display: none;
      }

      ${vhPolyfill}
    `});function ThemeProvider(n){const{cssVarsRoot:e,theme:s,children:o}=n,a=reactExports.useMemo(()=>toCSSVar(s),[s]);return jsxRuntimeExports.jsxs(ThemeProvider$1,{theme:a,children:[jsxRuntimeExports.jsx(CSSVars,{root:e}),o]})}function CSSVars({root:n=":host, :root"}){const e=[n,"[data-theme]"].join(",");return jsxRuntimeExports.jsx(Global,{styles:s=>({[e]:s.__cssVars})})}createContext({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "});function GlobalStyle(){const{colorMode:n}=useColorMode();return jsxRuntimeExports.jsx(Global,{styles:e=>{const s=memoizedGet$1(e,"styles.global"),o=runIfFn$1(s,{theme:e,colorMode:n});return o?css$2(o)(e):void 0}})}const[PortalManagerContextProvider,usePortalManager]=createContext({strict:!1,name:"PortalManagerContext"});function PortalManager(n){const{children:e,zIndex:s}=n;return jsxRuntimeExports.jsx(PortalManagerContextProvider,{value:{zIndex:s},children:e})}PortalManager.displayName="PortalManager";const EnvironmentContext=reactExports.createContext({getDocument(){return document},getWindow(){return window}});EnvironmentContext.displayName="EnvironmentContext";function EnvironmentProvider(n){const{children:e,environment:s,disabled:o}=n,a=reactExports.useRef(null),c=reactExports.useMemo(()=>s||{getDocument:()=>a.current?.ownerDocument??document,getWindow:()=>a.current?.ownerDocument.defaultView??window},[s]),f=!o||!s;return jsxRuntimeExports.jsxs(EnvironmentContext.Provider,{value:c,children:[e,f&&jsxRuntimeExports.jsx("span",{id:"__chakra_env",hidden:!0,ref:a})]})}EnvironmentProvider.displayName="EnvironmentProvider";const Provider=n=>{const{children:e,colorModeManager:s,portalZIndex:o,resetScope:a,resetCSS:c=!0,theme:f={},environment:h,cssVarsRoot:m,disableEnvironment:g,disableGlobalStyle:_}=n,E=jsxRuntimeExports.jsx(EnvironmentProvider,{environment:h,disabled:g,children:e});return jsxRuntimeExports.jsx(ThemeProvider,{theme:f,cssVarsRoot:m,children:jsxRuntimeExports.jsxs(ColorModeProvider,{colorModeManager:s,options:f.config,children:[c?jsxRuntimeExports.jsx(CSSReset,{scope:a}):jsxRuntimeExports.jsx(CSSPolyfill,{}),!_&&jsxRuntimeExports.jsx(GlobalStyle,{}),o?jsxRuntimeExports.jsx(PortalManager,{zIndex:o,children:E}):E]})})},LayoutGroupContext=reactExports.createContext({});function useConstant(n){const e=reactExports.useRef(null);return e.current===null&&(e.current=n()),e.current}const isBrowser=typeof window<"u",useIsomorphicLayoutEffect$1=isBrowser?reactExports.useLayoutEffect:reactExports.useEffect,PresenceContext=reactExports.createContext(null);function addUniqueItem(n,e){n.indexOf(e)===-1&&n.push(e)}function removeItem(n,e){const s=n.indexOf(e);s>-1&&n.splice(s,1)}const clamp=(n,e,s)=>s>e?e:s<n?n:s;let invariant=()=>{};const MotionGlobalConfig={},isNumericalString=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n);function isObject(n){return typeof n=="object"&&n!==null}const isZeroValueString=n=>/^0[^.\s]+$/u.test(n);function memo(n){let e;return()=>(e===void 0&&(e=n()),e)}const noop=n=>n,combineFunctions=(n,e)=>s=>e(n(s)),pipe=(...n)=>n.reduce(combineFunctions),progress$1=(n,e,s)=>{const o=e-n;return o===0?1:(s-n)/o};class SubscriptionManager{constructor(){this.subscriptions=[]}add(e){return addUniqueItem(this.subscriptions,e),()=>removeItem(this.subscriptions,e)}notify(e,s,o){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](e,s,o);else for(let c=0;c<a;c++){const f=this.subscriptions[c];f&&f(e,s,o)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const secondsToMilliseconds=n=>n*1e3,millisecondsToSeconds=n=>n/1e3;function velocityPerSecond(n,e){return e?n*(1e3/e):0}const calcBezier=(n,e,s)=>(((1-3*s+3*e)*n+(3*s-6*e))*n+3*e)*n,subdivisionPrecision=1e-7,subdivisionMaxIterations=12;function binarySubdivide(n,e,s,o,a){let c,f,h=0;do f=e+(s-e)/2,c=calcBezier(f,o,a)-n,c>0?s=f:e=f;while(Math.abs(c)>subdivisionPrecision&&++h<subdivisionMaxIterations);return f}function cubicBezier(n,e,s,o){if(n===e&&s===o)return noop;const a=c=>binarySubdivide(c,0,1,n,s);return c=>c===0||c===1?c:calcBezier(a(c),e,o)}const mirrorEasing=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,reverseEasing=n=>e=>1-n(1-e),backOut=cubicBezier(.33,1.53,.69,.99),backIn=reverseEasing(backOut),backInOut=mirrorEasing(backIn),anticipate=n=>(n*=2)<1?.5*backIn(n):.5*(2-Math.pow(2,-10*(n-1))),circIn=n=>1-Math.sin(Math.acos(n)),circOut=reverseEasing(circIn),circInOut=mirrorEasing(circIn),easeIn=cubicBezier(.42,0,1,1),easeOut=cubicBezier(0,0,.58,1),easeInOut=cubicBezier(.42,0,.58,1),isEasingArray=n=>Array.isArray(n)&&typeof n[0]!="number",isBezierDefinition=n=>Array.isArray(n)&&typeof n[0]=="number",easingLookup={linear:noop,easeIn,easeInOut,easeOut,circIn,circInOut,circOut,backIn,backInOut,backOut,anticipate},isValidEasing=n=>typeof n=="string",easingDefinitionToFunction=n=>{if(isBezierDefinition(n)){invariant(n.length===4);const[e,s,o,a]=n;return cubicBezier(e,s,o,a)}else if(isValidEasing(n))return easingLookup[n];return n},stepsOrder=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function createRenderStep(n,e){let s=new Set,o=new Set,a=!1,c=!1;const f=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function m(_){f.has(_)&&(g.schedule(_),n()),_(h)}const g={schedule:(_,E=!1,T=!1)=>{const A=T&&a?s:o;return E&&f.add(_),A.has(_)||A.add(_),_},cancel:_=>{o.delete(_),f.delete(_)},process:_=>{if(h=_,a){c=!0;return}a=!0,[s,o]=[o,s],s.forEach(m),s.clear(),a=!1,c&&(c=!1,g.process(_))}};return g}const maxElapsed=40;function createRenderBatcher(n,e){let s=!1,o=!0;const a={delta:0,timestamp:0,isProcessing:!1},c=()=>s=!0,f=stepsOrder.reduce((re,ye)=>(re[ye]=createRenderStep(c),re),{}),{setup:h,read:m,resolveKeyframes:g,preUpdate:_,update:E,preRender:T,render:w,postRender:A}=f,R=()=>{const re=MotionGlobalConfig.useManualTiming?a.timestamp:performance.now();s=!1,MotionGlobalConfig.useManualTiming||(a.delta=o?1e3/60:Math.max(Math.min(re-a.timestamp,maxElapsed),1)),a.timestamp=re,a.isProcessing=!0,h.process(a),m.process(a),g.process(a),_.process(a),E.process(a),T.process(a),w.process(a),A.process(a),a.isProcessing=!1,s&&e&&(o=!1,n(R))},V=()=>{s=!0,o=!0,a.isProcessing||n(R)};return{schedule:stepsOrder.reduce((re,ye)=>{const D=f[ye];return re[ye]=(ae,z=!1,H=!1)=>(s||V(),D.schedule(ae,z,H)),re},{}),cancel:re=>{for(let ye=0;ye<stepsOrder.length;ye++)f[stepsOrder[ye]].cancel(re)},state:a,steps:f}}const{schedule:frame,cancel:cancelFrame,state:frameData,steps:frameSteps}=createRenderBatcher(typeof requestAnimationFrame<"u"?requestAnimationFrame:noop,!0);let now$1;function clearTime(){now$1=void 0}const time={now:()=>(now$1===void 0&&time.set(frameData.isProcessing||MotionGlobalConfig.useManualTiming?frameData.timestamp:performance.now()),now$1),set:n=>{now$1=n,queueMicrotask(clearTime)}},checkStringStartsWith=n=>e=>typeof e=="string"&&e.startsWith(n),isCSSVariableName=checkStringStartsWith("--"),startsAsVariableToken=checkStringStartsWith("var(--"),isCSSVariableToken=n=>startsAsVariableToken(n)?singleCssVariableRegex.test(n.split("/*")[0].trim()):!1,singleCssVariableRegex=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,number$3={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},alpha={...number$3,transform:n=>clamp(0,1,n)},scale={...number$3,default:1},sanitize=n=>Math.round(n*1e5)/1e5,floatRegex=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function isNullish(n){return n==null}const singleColorRegex=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,isColorString=(n,e)=>s=>!!(typeof s=="string"&&singleColorRegex.test(s)&&s.startsWith(n)||e&&!isNullish(s)&&Object.prototype.hasOwnProperty.call(s,e)),splitColor=(n,e,s)=>o=>{if(typeof o!="string")return o;const[a,c,f,h]=o.match(floatRegex);return{[n]:parseFloat(a),[e]:parseFloat(c),[s]:parseFloat(f),alpha:h!==void 0?parseFloat(h):1}},clampRgbUnit=n=>clamp(0,255,n),rgbUnit={...number$3,transform:n=>Math.round(clampRgbUnit(n))},rgba={test:isColorString("rgb","red"),parse:splitColor("red","green","blue"),transform:({red:n,green:e,blue:s,alpha:o=1})=>"rgba("+rgbUnit.transform(n)+", "+rgbUnit.transform(e)+", "+rgbUnit.transform(s)+", "+sanitize(alpha.transform(o))+")"};function parseHex(n){let e="",s="",o="",a="";return n.length>5?(e=n.substring(1,3),s=n.substring(3,5),o=n.substring(5,7),a=n.substring(7,9)):(e=n.substring(1,2),s=n.substring(2,3),o=n.substring(3,4),a=n.substring(4,5),e+=e,s+=s,o+=o,a+=a),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(o,16),alpha:a?parseInt(a,16)/255:1}}const hex$1={test:isColorString("#"),parse:parseHex,transform:rgba.transform},createUnitType=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),degrees=createUnitType("deg"),percent=createUnitType("%"),px=createUnitType("px"),vh=createUnitType("vh"),vw=createUnitType("vw"),progressPercentage={...percent,parse:n=>percent.parse(n)/100,transform:n=>percent.transform(n*100)},hsla={test:isColorString("hsl","hue"),parse:splitColor("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:s,alpha:o=1})=>"hsla("+Math.round(n)+", "+percent.transform(sanitize(e))+", "+percent.transform(sanitize(s))+", "+sanitize(alpha.transform(o))+")"},color={test:n=>rgba.test(n)||hex$1.test(n)||hsla.test(n),parse:n=>rgba.test(n)?rgba.parse(n):hsla.test(n)?hsla.parse(n):hex$1.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?rgba.transform(n):hsla.transform(n),getAnimatableNone:n=>{const e=color.parse(n);return e.alpha=0,color.transform(e)}},colorRegex=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function test$1(n){return isNaN(n)&&typeof n=="string"&&(n.match(floatRegex)?.length||0)+(n.match(colorRegex)?.length||0)>0}const NUMBER_TOKEN="number",COLOR_TOKEN="color",VAR_TOKEN="var",VAR_FUNCTION_TOKEN="var(",SPLIT_TOKEN="${}",complexRegex=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function analyseComplexValue(n){const e=n.toString(),s=[],o={color:[],number:[],var:[]},a=[];let c=0;const h=e.replace(complexRegex,m=>(color.test(m)?(o.color.push(c),a.push(COLOR_TOKEN),s.push(color.parse(m))):m.startsWith(VAR_FUNCTION_TOKEN)?(o.var.push(c),a.push(VAR_TOKEN),s.push(m)):(o.number.push(c),a.push(NUMBER_TOKEN),s.push(parseFloat(m))),++c,SPLIT_TOKEN)).split(SPLIT_TOKEN);return{values:s,split:h,indexes:o,types:a}}function parseComplexValue(n){return analyseComplexValue(n).values}function createTransformer(n){const{split:e,types:s}=analyseComplexValue(n),o=e.length;return a=>{let c="";for(let f=0;f<o;f++)if(c+=e[f],a[f]!==void 0){const h=s[f];h===NUMBER_TOKEN?c+=sanitize(a[f]):h===COLOR_TOKEN?c+=color.transform(a[f]):c+=a[f]}return c}}const convertNumbersToZero=n=>typeof n=="number"?0:color.test(n)?color.getAnimatableNone(n):n;function getAnimatableNone$1(n){const e=parseComplexValue(n);return createTransformer(n)(e.map(convertNumbersToZero))}const complex={test:test$1,parse:parseComplexValue,createTransformer,getAnimatableNone:getAnimatableNone$1};function hueToRgb(n,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?n+(e-n)*6*s:s<1/2?e:s<2/3?n+(e-n)*(2/3-s)*6:n}function hslaToRgba({hue:n,saturation:e,lightness:s,alpha:o}){n/=360,e/=100,s/=100;let a=0,c=0,f=0;if(!e)a=c=f=s;else{const h=s<.5?s*(1+e):s+e-s*e,m=2*s-h;a=hueToRgb(m,h,n+1/3),c=hueToRgb(m,h,n),f=hueToRgb(m,h,n-1/3)}return{red:Math.round(a*255),green:Math.round(c*255),blue:Math.round(f*255),alpha:o}}function mixImmediate(n,e){return s=>s>0?e:n}const mixNumber$1=(n,e,s)=>n+(e-n)*s,mixLinearColor=(n,e,s)=>{const o=n*n,a=s*(e*e-o)+o;return a<0?0:Math.sqrt(a)},colorTypes=[hex$1,rgba,hsla],getColorType=n=>colorTypes.find(e=>e.test(n));function asRGBA(n){const e=getColorType(n);if(!e)return!1;let s=e.parse(n);return e===hsla&&(s=hslaToRgba(s)),s}const mixColor=(n,e)=>{const s=asRGBA(n),o=asRGBA(e);if(!s||!o)return mixImmediate(n,e);const a={...s};return c=>(a.red=mixLinearColor(s.red,o.red,c),a.green=mixLinearColor(s.green,o.green,c),a.blue=mixLinearColor(s.blue,o.blue,c),a.alpha=mixNumber$1(s.alpha,o.alpha,c),rgba.transform(a))},invisibleValues=new Set(["none","hidden"]);function mixVisibility(n,e){return invisibleValues.has(n)?s=>s<=0?n:e:s=>s>=1?e:n}function mixNumber(n,e){return s=>mixNumber$1(n,e,s)}function getMixer(n){return typeof n=="number"?mixNumber:typeof n=="string"?isCSSVariableToken(n)?mixImmediate:color.test(n)?mixColor:mixComplex:Array.isArray(n)?mixArray:typeof n=="object"?color.test(n)?mixColor:mixObject:mixImmediate}function mixArray(n,e){const s=[...n],o=s.length,a=n.map((c,f)=>getMixer(c)(c,e[f]));return c=>{for(let f=0;f<o;f++)s[f]=a[f](c);return s}}function mixObject(n,e){const s={...n,...e},o={};for(const a in s)n[a]!==void 0&&e[a]!==void 0&&(o[a]=getMixer(n[a])(n[a],e[a]));return a=>{for(const c in o)s[c]=o[c](a);return s}}function matchOrder(n,e){const s=[],o={color:0,var:0,number:0};for(let a=0;a<e.values.length;a++){const c=e.types[a],f=n.indexes[c][o[c]],h=n.values[f]??0;s[a]=h,o[c]++}return s}const mixComplex=(n,e)=>{const s=complex.createTransformer(e),o=analyseComplexValue(n),a=analyseComplexValue(e);return o.indexes.var.length===a.indexes.var.length&&o.indexes.color.length===a.indexes.color.length&&o.indexes.number.length>=a.indexes.number.length?invisibleValues.has(n)&&!a.values.length||invisibleValues.has(e)&&!o.values.length?mixVisibility(n,e):pipe(mixArray(matchOrder(o,a),a.values),s):mixImmediate(n,e)};function mix(n,e,s){return typeof n=="number"&&typeof e=="number"&&typeof s=="number"?mixNumber$1(n,e,s):getMixer(n)(n,e)}const frameloopDriver=n=>{const e=({timestamp:s})=>n(s);return{start:(s=!0)=>frame.update(e,s),stop:()=>cancelFrame(e),now:()=>frameData.isProcessing?frameData.timestamp:time.now()}},generateLinearEasing=(n,e,s=10)=>{let o="";const a=Math.max(Math.round(e/s),2);for(let c=0;c<a;c++)o+=Math.round(n(c/(a-1))*1e4)/1e4+", ";return`linear(${o.substring(0,o.length-2)})`},maxGeneratorDuration=2e4;function calcGeneratorDuration(n){let e=0;const s=50;let o=n.next(e);for(;!o.done&&e<maxGeneratorDuration;)e+=s,o=n.next(e);return e>=maxGeneratorDuration?1/0:e}function createGeneratorEasing(n,e=100,s){const o=s({...n,keyframes:[0,e]}),a=Math.min(calcGeneratorDuration(o),maxGeneratorDuration);return{type:"keyframes",ease:c=>o.next(a*c).value/e,duration:millisecondsToSeconds(a)}}const velocitySampleDuration=5;function calcGeneratorVelocity(n,e,s){const o=Math.max(e-velocitySampleDuration,0);return velocityPerSecond(s-n(o),e-o)}const springDefaults={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},safeMin=.001;function findSpring({duration:n=springDefaults.duration,bounce:e=springDefaults.bounce,velocity:s=springDefaults.velocity,mass:o=springDefaults.mass}){let a,c,f=1-e;f=clamp(springDefaults.minDamping,springDefaults.maxDamping,f),n=clamp(springDefaults.minDuration,springDefaults.maxDuration,millisecondsToSeconds(n)),f<1?(a=g=>{const _=g*f,E=_*n,T=_-s,w=calcAngularFreq(g,f),A=Math.exp(-E);return safeMin-T/w*A},c=g=>{const E=g*f*n,T=E*s+s,w=Math.pow(f,2)*Math.pow(g,2)*n,A=Math.exp(-E),R=calcAngularFreq(Math.pow(g,2),f);return(-a(g)+safeMin>0?-1:1)*((T-w)*A)/R}):(a=g=>{const _=Math.exp(-g*n),E=(g-s)*n+1;return-safeMin+_*E},c=g=>{const _=Math.exp(-g*n),E=(s-g)*(n*n);return _*E});const h=5/n,m=approximateRoot(a,c,h);if(n=secondsToMilliseconds(n),isNaN(m))return{stiffness:springDefaults.stiffness,damping:springDefaults.damping,duration:n};{const g=Math.pow(m,2)*o;return{stiffness:g,damping:f*2*Math.sqrt(o*g),duration:n}}}const rootIterations=12;function approximateRoot(n,e,s){let o=s;for(let a=1;a<rootIterations;a++)o=o-n(o)/e(o);return o}function calcAngularFreq(n,e){return n*Math.sqrt(1-e*e)}const durationKeys=["duration","bounce"],physicsKeys=["stiffness","damping","mass"];function isSpringType(n,e){return e.some(s=>n[s]!==void 0)}function getSpringOptions(n){let e={velocity:springDefaults.velocity,stiffness:springDefaults.stiffness,damping:springDefaults.damping,mass:springDefaults.mass,isResolvedFromDuration:!1,...n};if(!isSpringType(n,physicsKeys)&&isSpringType(n,durationKeys))if(n.visualDuration){const s=n.visualDuration,o=2*Math.PI/(s*1.2),a=o*o,c=2*clamp(.05,1,1-(n.bounce||0))*Math.sqrt(a);e={...e,mass:springDefaults.mass,stiffness:a,damping:c}}else{const s=findSpring(n);e={...e,...s,mass:springDefaults.mass},e.isResolvedFromDuration=!0}return e}function spring(n=springDefaults.visualDuration,e=springDefaults.bounce){const s=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:o,restDelta:a}=s;const c=s.keyframes[0],f=s.keyframes[s.keyframes.length-1],h={done:!1,value:c},{stiffness:m,damping:g,mass:_,duration:E,velocity:T,isResolvedFromDuration:w}=getSpringOptions({...s,velocity:-millisecondsToSeconds(s.velocity||0)}),A=T||0,R=g/(2*Math.sqrt(m*_)),V=f-c,te=millisecondsToSeconds(Math.sqrt(m/_)),se=Math.abs(V)<5;o||(o=se?springDefaults.restSpeed.granular:springDefaults.restSpeed.default),a||(a=se?springDefaults.restDelta.granular:springDefaults.restDelta.default);let re;if(R<1){const D=calcAngularFreq(te,R);re=ae=>{const z=Math.exp(-R*te*ae);return f-z*((A+R*te*V)/D*Math.sin(D*ae)+V*Math.cos(D*ae))}}else if(R===1)re=D=>f-Math.exp(-te*D)*(V+(A+te*V)*D);else{const D=te*Math.sqrt(R*R-1);re=ae=>{const z=Math.exp(-R*te*ae),H=Math.min(D*ae,300);return f-z*((A+R*te*V)*Math.sinh(H)+D*V*Math.cosh(H))/D}}const ye={calculatedDuration:w&&E||null,next:D=>{const ae=re(D);if(w)h.done=D>=E;else{let z=D===0?A:0;R<1&&(z=D===0?secondsToMilliseconds(A):calcGeneratorVelocity(re,D,ae));const H=Math.abs(z)<=o,X=Math.abs(f-ae)<=a;h.done=H&&X}return h.value=h.done?f:ae,h},toString:()=>{const D=Math.min(calcGeneratorDuration(ye),maxGeneratorDuration),ae=generateLinearEasing(z=>ye.next(D*z).value,D,30);return D+"ms "+ae},toTransition:()=>{}};return ye}spring.applyToOptions=n=>{const e=createGeneratorEasing(n,100,spring);return n.ease=e.ease,n.duration=secondsToMilliseconds(e.duration),n.type="keyframes",n};function inertia({keyframes:n,velocity:e=0,power:s=.8,timeConstant:o=325,bounceDamping:a=10,bounceStiffness:c=500,modifyTarget:f,min:h,max:m,restDelta:g=.5,restSpeed:_}){const E=n[0],T={done:!1,value:E},w=H=>h!==void 0&&H<h||m!==void 0&&H>m,A=H=>h===void 0?m:m===void 0||Math.abs(h-H)<Math.abs(m-H)?h:m;let R=s*e;const V=E+R,te=f===void 0?V:f(V);te!==V&&(R=te-E);const se=H=>-R*Math.exp(-H/o),re=H=>te+se(H),ye=H=>{const X=se(H),le=re(H);T.done=Math.abs(X)<=g,T.value=T.done?te:le};let D,ae;const z=H=>{w(T.value)&&(D=H,ae=spring({keyframes:[T.value,A(T.value)],velocity:calcGeneratorVelocity(re,H,T.value),damping:a,stiffness:c,restDelta:g,restSpeed:_}))};return z(0),{calculatedDuration:null,next:H=>{let X=!1;return!ae&&D===void 0&&(X=!0,ye(H),z(H)),D!==void 0&&H>=D?ae.next(H-D):(!X&&ye(H),T)}}}function createMixers(n,e,s){const o=[],a=s||MotionGlobalConfig.mix||mix,c=n.length-1;for(let f=0;f<c;f++){let h=a(n[f],n[f+1]);if(e){const m=Array.isArray(e)?e[f]||noop:e;h=pipe(m,h)}o.push(h)}return o}function interpolate(n,e,{clamp:s=!0,ease:o,mixer:a}={}){const c=n.length;if(invariant(c===e.length),c===1)return()=>e[0];if(c===2&&e[0]===e[1])return()=>e[1];const f=n[0]===n[1];n[0]>n[c-1]&&(n=[...n].reverse(),e=[...e].reverse());const h=createMixers(e,o,a),m=h.length,g=_=>{if(f&&_<n[0])return e[0];let E=0;if(m>1)for(;E<n.length-2&&!(_<n[E+1]);E++);const T=progress$1(n[E],n[E+1],_);return h[E](T)};return s?_=>g(clamp(n[0],n[c-1],_)):g}function fillOffset(n,e){const s=n[n.length-1];for(let o=1;o<=e;o++){const a=progress$1(0,e,o);n.push(mixNumber$1(s,1,a))}}function defaultOffset(n){const e=[0];return fillOffset(e,n.length-1),e}function convertOffsetToTimes(n,e){return n.map(s=>s*e)}function defaultEasing(n,e){return n.map(()=>e||easeInOut).splice(0,n.length-1)}function keyframes({duration:n=300,keyframes:e,times:s,ease:o="easeInOut"}){const a=isEasingArray(o)?o.map(easingDefinitionToFunction):easingDefinitionToFunction(o),c={done:!1,value:e[0]},f=convertOffsetToTimes(s&&s.length===e.length?s:defaultOffset(e),n),h=interpolate(f,e,{ease:Array.isArray(a)?a:defaultEasing(e,a)});return{calculatedDuration:n,next:m=>(c.value=h(m),c.done=m>=n,c)}}const isNotNull$1=n=>n!==null;function getFinalKeyframe$1(n,{repeat:e,repeatType:s="loop"},o,a=1){const c=n.filter(isNotNull$1),h=a<0||e&&s!=="loop"&&e%2===1?0:c.length-1;return!h||o===void 0?c[h]:o}const transitionTypeMap={decay:inertia,inertia,tween:keyframes,keyframes,spring};function replaceTransitionType(n){typeof n.type=="string"&&(n.type=transitionTypeMap[n.type])}class WithPromise{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,s){return this.finished.then(e,s)}}const percentToProgress=n=>n/100;class JSAnimation extends WithPromise{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:s}=this.options;s&&s.updatedAt!==time.now()&&this.tick(time.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;replaceTransitionType(e);const{type:s=keyframes,repeat:o=0,repeatDelay:a=0,repeatType:c,velocity:f=0}=e;let{keyframes:h}=e;const m=s||keyframes;m!==keyframes&&typeof h[0]!="number"&&(this.mixKeyframes=pipe(percentToProgress,mix(h[0],h[1])),h=[0,100]);const g=m({...e,keyframes:h});c==="mirror"&&(this.mirroredGenerator=m({...e,keyframes:[...h].reverse(),velocity:-f})),g.calculatedDuration===null&&(g.calculatedDuration=calcGeneratorDuration(g));const{calculatedDuration:_}=g;this.calculatedDuration=_,this.resolvedDuration=_+a,this.totalDuration=this.resolvedDuration*(o+1)-a,this.generator=g}updateTime(e){const s=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=s}tick(e,s=!1){const{generator:o,totalDuration:a,mixKeyframes:c,mirroredGenerator:f,resolvedDuration:h,calculatedDuration:m}=this;if(this.startTime===null)return o.next(0);const{delay:g=0,keyframes:_,repeat:E,repeatType:T,repeatDelay:w,type:A,onUpdate:R,finalKeyframe:V}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-a/this.speed,this.startTime)),s?this.currentTime=e:this.updateTime(e);const te=this.currentTime-g*(this.playbackSpeed>=0?1:-1),se=this.playbackSpeed>=0?te<0:te>a;this.currentTime=Math.max(te,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let re=this.currentTime,ye=o;if(E){const H=Math.min(this.currentTime,a)/h;let X=Math.floor(H),le=H%1;!le&&H>=1&&(le=1),le===1&&X--,X=Math.min(X,E+1),!!(X%2)&&(T==="reverse"?(le=1-le,w&&(le-=w/h)):T==="mirror"&&(ye=f)),re=clamp(0,1,le)*h}const D=se?{done:!1,value:_[0]}:ye.next(re);c&&(D.value=c(D.value));let{done:ae}=D;!se&&m!==null&&(ae=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const z=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ae);return z&&A!==inertia&&(D.value=getFinalKeyframe$1(_,this.options,V,this.speed)),R&&R(D.value),z&&this.finish(),D}then(e,s){return this.finished.then(e,s)}get duration(){return millisecondsToSeconds(this.calculatedDuration)}get time(){return millisecondsToSeconds(this.currentTime)}set time(e){e=secondsToMilliseconds(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(time.now());const s=this.playbackSpeed!==e;this.playbackSpeed=e,s&&(this.time=millisecondsToSeconds(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=frameloopDriver,startTime:s}=this.options;this.driver||(this.driver=e(a=>this.tick(a))),this.options.onPlay?.();const o=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=o):this.holdTime!==null?this.startTime=o-this.holdTime:this.startTime||(this.startTime=s??o),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(time.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function fillWildcards(n){for(let e=1;e<n.length;e++)n[e]??(n[e]=n[e-1])}const radToDeg=n=>n*180/Math.PI,rotate=n=>{const e=radToDeg(Math.atan2(n[1],n[0]));return rebaseAngle(e)},matrix2dParsers={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:n=>(Math.abs(n[0])+Math.abs(n[3]))/2,rotate,rotateZ:rotate,skewX:n=>radToDeg(Math.atan(n[1])),skewY:n=>radToDeg(Math.atan(n[2])),skew:n=>(Math.abs(n[1])+Math.abs(n[2]))/2},rebaseAngle=n=>(n=n%360,n<0&&(n+=360),n),rotateZ=rotate,scaleX=n=>Math.sqrt(n[0]*n[0]+n[1]*n[1]),scaleY=n=>Math.sqrt(n[4]*n[4]+n[5]*n[5]),matrix3dParsers={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX,scaleY,scale:n=>(scaleX(n)+scaleY(n))/2,rotateX:n=>rebaseAngle(radToDeg(Math.atan2(n[6],n[5]))),rotateY:n=>rebaseAngle(radToDeg(Math.atan2(-n[2],n[0]))),rotateZ,rotate:rotateZ,skewX:n=>radToDeg(Math.atan(n[4])),skewY:n=>radToDeg(Math.atan(n[1])),skew:n=>(Math.abs(n[1])+Math.abs(n[4]))/2};function defaultTransformValue(n){return n.includes("scale")?1:0}function parseValueFromTransform(n,e){if(!n||n==="none")return defaultTransformValue(e);const s=n.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let o,a;if(s)o=matrix3dParsers,a=s;else{const h=n.match(/^matrix\(([-\d.e\s,]+)\)$/u);o=matrix2dParsers,a=h}if(!a)return defaultTransformValue(e);const c=o[e],f=a[1].split(",").map(convertTransformToNumber);return typeof c=="function"?c(f):f[c]}const readTransformValue=(n,e)=>{const{transform:s="none"}=getComputedStyle(n);return parseValueFromTransform(s,e)};function convertTransformToNumber(n){return parseFloat(n.trim())}const transformPropOrder=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],transformProps=new Set(transformPropOrder),isNumOrPxType=n=>n===number$3||n===px,transformKeys=new Set(["x","y","z"]),nonTranslationalTransformKeys=transformPropOrder.filter(n=>!transformKeys.has(n));function removeNonTranslationalTransform(n){const e=[];return nonTranslationalTransformKeys.forEach(s=>{const o=n.getValue(s);o!==void 0&&(e.push([s,o.get()]),o.set(s.startsWith("scale")?1:0))}),e}const positionalValues={width:({x:n},{paddingLeft:e="0",paddingRight:s="0"})=>n.max-n.min-parseFloat(e)-parseFloat(s),height:({y:n},{paddingTop:e="0",paddingBottom:s="0"})=>n.max-n.min-parseFloat(e)-parseFloat(s),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:(n,{transform:e})=>parseValueFromTransform(e,"x"),y:(n,{transform:e})=>parseValueFromTransform(e,"y")};positionalValues.translateX=positionalValues.x;positionalValues.translateY=positionalValues.y;const toResolve=new Set;let isScheduled=!1,anyNeedsMeasurement=!1,isForced=!1;function measureAllKeyframes(){if(anyNeedsMeasurement){const n=Array.from(toResolve).filter(o=>o.needsMeasurement),e=new Set(n.map(o=>o.element)),s=new Map;e.forEach(o=>{const a=removeNonTranslationalTransform(o);a.length&&(s.set(o,a),o.render())}),n.forEach(o=>o.measureInitialState()),e.forEach(o=>{o.render();const a=s.get(o);a&&a.forEach(([c,f])=>{o.getValue(c)?.set(f)})}),n.forEach(o=>o.measureEndState()),n.forEach(o=>{o.suspendedScrollY!==void 0&&window.scrollTo(0,o.suspendedScrollY)})}anyNeedsMeasurement=!1,isScheduled=!1,toResolve.forEach(n=>n.complete(isForced)),toResolve.clear()}function readAllKeyframes(){toResolve.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(anyNeedsMeasurement=!0)})}function flushKeyframeResolvers(){isForced=!0,readAllKeyframes(),measureAllKeyframes(),isForced=!1}class KeyframeResolver{constructor(e,s,o,a,c,f=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=s,this.name=o,this.motionValue=a,this.element=c,this.isAsync=f}scheduleResolve(){this.state="scheduled",this.isAsync?(toResolve.add(this),isScheduled||(isScheduled=!0,frame.read(readAllKeyframes),frame.resolveKeyframes(measureAllKeyframes))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:s,element:o,motionValue:a}=this;if(e[0]===null){const c=a?.get(),f=e[e.length-1];if(c!==void 0)e[0]=c;else if(o&&s){const h=o.readValue(s,f);h!=null&&(e[0]=h)}e[0]===void 0&&(e[0]=f),a&&c===void 0&&a.set(e[0])}fillWildcards(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),toResolve.delete(this)}cancel(){this.state==="scheduled"&&(toResolve.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const isCSSVar=n=>n.startsWith("--");function setStyle(n,e,s){isCSSVar(e)?n.style.setProperty(e,s):n.style[e]=s}const supportsScrollTimeline=memo(()=>window.ScrollTimeline!==void 0),supportsFlags={};function memoSupports(n,e){const s=memo(n);return()=>supportsFlags[e]??s()}const supportsLinearEasing=memoSupports(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),cubicBezierAsString=([n,e,s,o])=>`cubic-bezier(${n}, ${e}, ${s}, ${o})`,supportedWaapiEasing={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:cubicBezierAsString([0,.65,.55,1]),circOut:cubicBezierAsString([.55,0,1,.45]),backIn:cubicBezierAsString([.31,.01,.66,-.59]),backOut:cubicBezierAsString([.33,1.53,.69,.99])};function mapEasingToNativeEasing(n,e){if(n)return typeof n=="function"?supportsLinearEasing()?generateLinearEasing(n,e):"ease-out":isBezierDefinition(n)?cubicBezierAsString(n):Array.isArray(n)?n.map(s=>mapEasingToNativeEasing(s,e)||supportedWaapiEasing.easeOut):supportedWaapiEasing[n]}function startWaapiAnimation(n,e,s,{delay:o=0,duration:a=300,repeat:c=0,repeatType:f="loop",ease:h="easeOut",times:m}={},g=void 0){const _={[e]:s};m&&(_.offset=m);const E=mapEasingToNativeEasing(h,a);Array.isArray(E)&&(_.easing=E);const T={delay:o,duration:a,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:c+1,direction:f==="reverse"?"alternate":"normal"};return g&&(T.pseudoElement=g),n.animate(_,T)}function isGenerator(n){return typeof n=="function"&&"applyToOptions"in n}function applyGeneratorOptions({type:n,...e}){return isGenerator(n)&&supportsLinearEasing()?n.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class NativeAnimation extends WithPromise{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:s,name:o,keyframes:a,pseudoElement:c,allowFlatten:f=!1,finalKeyframe:h,onComplete:m}=e;this.isPseudoElement=!!c,this.allowFlatten=f,this.options=e,invariant(typeof e.type!="string");const g=applyGeneratorOptions(e);this.animation=startWaapiAnimation(s,o,a,g,c),g.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!c){const _=getFinalKeyframe$1(a,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(_):setStyle(s,o,_),this.animation.cancel()}m?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return millisecondsToSeconds(Number(e))}get time(){return millisecondsToSeconds(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=secondsToMilliseconds(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:s}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&supportsScrollTimeline()?(this.animation.timeline=e,noop):s(this)}}const unsupportedEasingFunctions={anticipate,backInOut,circInOut};function isUnsupportedEase(n){return n in unsupportedEasingFunctions}function replaceStringEasing(n){typeof n.ease=="string"&&isUnsupportedEase(n.ease)&&(n.ease=unsupportedEasingFunctions[n.ease])}const sampleDelta=10;class NativeAnimationExtended extends NativeAnimation{constructor(e){replaceStringEasing(e),replaceTransitionType(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:s,onUpdate:o,onComplete:a,element:c,...f}=this.options;if(!s)return;if(e!==void 0){s.set(e);return}const h=new JSAnimation({...f,autoplay:!1}),m=secondsToMilliseconds(this.finishedTime??this.time);s.setWithVelocity(h.sample(m-sampleDelta).value,h.sample(m).value,sampleDelta),h.stop()}}const isAnimatable=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(complex.test(n)||n==="0")&&!n.startsWith("url("));function hasKeyframesChanged(n){const e=n[0];if(n.length===1)return!0;for(let s=0;s<n.length;s++)if(n[s]!==e)return!0}function canAnimate(n,e,s,o){const a=n[0];if(a===null)return!1;if(e==="display"||e==="visibility")return!0;const c=n[n.length-1],f=isAnimatable(a,e),h=isAnimatable(c,e);return!f||!h?!1:hasKeyframesChanged(n)||(s==="spring"||isGenerator(s))&&o}function makeAnimationInstant(n){n.duration=0,n.type}const acceleratedValues=new Set(["opacity","clipPath","filter","transform"]),supportsWaapi=memo(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function supportsBrowserAnimation(n){const{motionValue:e,name:s,repeatDelay:o,repeatType:a,damping:c,type:f}=n;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:m,transformTemplate:g}=e.owner.getProps();return supportsWaapi()&&s&&acceleratedValues.has(s)&&(s!=="transform"||!g)&&!m&&!o&&a!=="mirror"&&c!==0&&f!=="inertia"}const MAX_RESOLVE_DELAY=40;class AsyncMotionValueAnimation extends WithPromise{constructor({autoplay:e=!0,delay:s=0,type:o="keyframes",repeat:a=0,repeatDelay:c=0,repeatType:f="loop",keyframes:h,name:m,motionValue:g,element:_,...E}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=time.now();const T={autoplay:e,delay:s,type:o,repeat:a,repeatDelay:c,repeatType:f,name:m,motionValue:g,element:_,...E},w=_?.KeyframeResolver||KeyframeResolver;this.keyframeResolver=new w(h,(A,R,V)=>this.onKeyframesResolved(A,R,T,!V),m,g,_),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,s,o,a){this.keyframeResolver=void 0;const{name:c,type:f,velocity:h,delay:m,isHandoff:g,onUpdate:_}=o;this.resolvedAt=time.now(),canAnimate(e,c,f,h)||((MotionGlobalConfig.instantAnimations||!m)&&_?.(getFinalKeyframe$1(e,o,s)),e[0]=e[e.length-1],makeAnimationInstant(o),o.repeat=0);const T={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>MAX_RESOLVE_DELAY?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:s,...o,keyframes:e},w=!g&&supportsBrowserAnimation(T)?new NativeAnimationExtended({...T,element:T.motionValue.owner.current}):new JSAnimation(T);w.finished.then(()=>this.notifyFinished()).catch(noop),this.pendingTimeline&&(this.stopTimeline=w.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=w}get finished(){return this._animation?this.animation.finished:this._finished}then(e,s){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),flushKeyframeResolvers()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const splitCSSVariableRegex=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function parseCSSVariable(n){const e=splitCSSVariableRegex.exec(n);if(!e)return[,];const[,s,o,a]=e;return[`--${s??o}`,a]}function getVariableValue(n,e,s=1){const[o,a]=parseCSSVariable(n);if(!o)return;const c=window.getComputedStyle(e).getPropertyValue(o);if(c){const f=c.trim();return isNumericalString(f)?parseFloat(f):f}return isCSSVariableToken(a)?getVariableValue(a,e,s+1):a}function getValueTransition(n,e){return n?.[e]??n?.default??n}const positionalKeys=new Set(["width","height","top","left","right","bottom",...transformPropOrder]),auto={test:n=>n==="auto",parse:n=>n},testValueType=n=>e=>e.test(n),dimensionValueTypes=[number$3,px,percent,degrees,vw,vh,auto],findDimensionValueType=n=>dimensionValueTypes.find(testValueType(n));function isNone(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||isZeroValueString(n):!0}const maxDefaults=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(n){const[e,s]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[o]=s.match(floatRegex)||[];if(!o)return n;const a=s.replace(o,"");let c=maxDefaults.has(e)?1:0;return o!==s&&(c*=100),e+"("+c+a+")"}const functionRegex=/\b([a-z-]*)\(.*?\)/gu,filter={...complex,getAnimatableNone:n=>{const e=n.match(functionRegex);return e?e.map(applyDefaultFilter).join(" "):n}},int={...number$3,transform:Math.round},transformValueTypes={rotate:degrees,rotateX:degrees,rotateY:degrees,rotateZ:degrees,scale,scaleX:scale,scaleY:scale,scaleZ:scale,skew:degrees,skewX:degrees,skewY:degrees,distance:px,translateX:px,translateY:px,translateZ:px,x:px,y:px,z:px,perspective:px,transformPerspective:px,opacity:alpha,originX:progressPercentage,originY:progressPercentage,originZ:px},numberValueTypes={borderWidth:px,borderTopWidth:px,borderRightWidth:px,borderBottomWidth:px,borderLeftWidth:px,borderRadius:px,radius:px,borderTopLeftRadius:px,borderTopRightRadius:px,borderBottomRightRadius:px,borderBottomLeftRadius:px,width:px,maxWidth:px,height:px,maxHeight:px,top:px,right:px,bottom:px,left:px,padding:px,paddingTop:px,paddingRight:px,paddingBottom:px,paddingLeft:px,margin:px,marginTop:px,marginRight:px,marginBottom:px,marginLeft:px,backgroundPositionX:px,backgroundPositionY:px,...transformValueTypes,zIndex:int,fillOpacity:alpha,strokeOpacity:alpha,numOctaves:int},defaultValueTypes={...numberValueTypes,color,backgroundColor:color,outlineColor:color,fill:color,stroke:color,borderColor:color,borderTopColor:color,borderRightColor:color,borderBottomColor:color,borderLeftColor:color,filter,WebkitFilter:filter},getDefaultValueType=n=>defaultValueTypes[n];function getAnimatableNone(n,e){let s=getDefaultValueType(n);return s!==filter&&(s=complex),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const invalidTemplates=new Set(["auto","none","0"]);function makeNoneKeyframesAnimatable(n,e,s){let o=0,a;for(;o<n.length&&!a;){const c=n[o];typeof c=="string"&&!invalidTemplates.has(c)&&analyseComplexValue(c).values.length&&(a=n[o]),o++}if(a&&s)for(const c of e)n[c]=getAnimatableNone(s,a)}class DOMKeyframesResolver extends KeyframeResolver{constructor(e,s,o,a,c){super(e,s,o,a,c,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:s,name:o}=this;if(!s||!s.current)return;super.readKeyframes();for(let m=0;m<e.length;m++){let g=e[m];if(typeof g=="string"&&(g=g.trim(),isCSSVariableToken(g))){const _=getVariableValue(g,s.current);_!==void 0&&(e[m]=_),m===e.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!positionalKeys.has(o)||e.length!==2)return;const[a,c]=e,f=findDimensionValueType(a),h=findDimensionValueType(c);if(f!==h)if(isNumOrPxType(f)&&isNumOrPxType(h))for(let m=0;m<e.length;m++){const g=e[m];typeof g=="string"&&(e[m]=parseFloat(g))}else positionalValues[o]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:s}=this,o=[];for(let a=0;a<e.length;a++)(e[a]===null||isNone(e[a]))&&o.push(a);o.length&&makeNoneKeyframesAnimatable(e,o,s)}measureInitialState(){const{element:e,unresolvedKeyframes:s,name:o}=this;if(!e||!e.current)return;o==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=positionalValues[o](e.measureViewportBox(),window.getComputedStyle(e.current)),s[0]=this.measuredOrigin;const a=s[s.length-1];a!==void 0&&e.getValue(o,a).jump(a,!1)}measureEndState(){const{element:e,name:s,unresolvedKeyframes:o}=this;if(!e||!e.current)return;const a=e.getValue(s);a&&a.jump(this.measuredOrigin,!1);const c=o.length-1,f=o[c];o[c]=positionalValues[s](e.measureViewportBox(),window.getComputedStyle(e.current)),f!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=f),this.removedTransforms?.length&&this.removedTransforms.forEach(([h,m])=>{e.getValue(h).set(m)}),this.resolveNoneKeyframes()}}function resolveElements(n,e,s){if(n instanceof EventTarget)return[n];if(typeof n=="string"){let o=document;const a=s?.[n]??o.querySelectorAll(n);return a?Array.from(a):[]}return Array.from(n)}const getValueAsType=(n,e)=>e&&typeof n=="number"?e.transform(n):n;function isHTMLElement(n){return isObject(n)&&"offsetHeight"in n}const MAX_VELOCITY_DELTA=30,isFloat=n=>!isNaN(parseFloat(n));class MotionValue{constructor(e,s={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=o=>{const a=time.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(o),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=s.owner}setCurrent(e){this.current=e,this.updatedAt=time.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=isFloat(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new SubscriptionManager);const o=this.events[e].add(s);return e==="change"?()=>{o(),frame.read(()=>{this.events.change.getSize()||this.stop()})}:o}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,s,o){this.set(s),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-o}jump(e,s=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,s&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=time.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>MAX_VELOCITY_DELTA)return 0;const s=Math.min(this.updatedAt-this.prevUpdatedAt,MAX_VELOCITY_DELTA);return velocityPerSecond(parseFloat(this.current)-parseFloat(this.prevFrameValue),s)}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function motionValue(n,e){return new MotionValue(n,e)}const{schedule:microtask}=createRenderBatcher(queueMicrotask,!1),isDragging={x:!1,y:!1};function isDragActive(){return isDragging.x||isDragging.y}function setDragLock(n){return n==="x"||n==="y"?isDragging[n]?null:(isDragging[n]=!0,()=>{isDragging[n]=!1}):isDragging.x||isDragging.y?null:(isDragging.x=isDragging.y=!0,()=>{isDragging.x=isDragging.y=!1})}function setupGesture(n,e){const s=resolveElements(n),o=new AbortController,a={passive:!0,...e,signal:o.signal};return[s,a,()=>o.abort()]}function isValidHover(n){return!(n.pointerType==="touch"||isDragActive())}function hover(n,e,s={}){const[o,a,c]=setupGesture(n,s),f=h=>{if(!isValidHover(h))return;const{target:m}=h,g=e(m,h);if(typeof g!="function"||!m)return;const _=E=>{isValidHover(E)&&(g(E),m.removeEventListener("pointerleave",_))};m.addEventListener("pointerleave",_,a)};return o.forEach(h=>{h.addEventListener("pointerenter",f,a)}),c}const isNodeOrChild=(n,e)=>e?n===e?!0:isNodeOrChild(n,e.parentElement):!1,isPrimaryPointer=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,focusableElements=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function isElementKeyboardAccessible(n){return focusableElements.has(n.tagName)||n.tabIndex!==-1}const isPressing=new WeakSet;function filterEvents(n){return e=>{e.key==="Enter"&&n(e)}}function firePointerEvent(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const enableKeyboardPress=(n,e)=>{const s=n.currentTarget;if(!s)return;const o=filterEvents(()=>{if(isPressing.has(s))return;firePointerEvent(s,"down");const a=filterEvents(()=>{firePointerEvent(s,"up")}),c=()=>firePointerEvent(s,"cancel");s.addEventListener("keyup",a,e),s.addEventListener("blur",c,e)});s.addEventListener("keydown",o,e),s.addEventListener("blur",()=>s.removeEventListener("keydown",o),e)};function isValidPressEvent(n){return isPrimaryPointer(n)&&!isDragActive()}function press(n,e,s={}){const[o,a,c]=setupGesture(n,s),f=h=>{const m=h.currentTarget;if(!isValidPressEvent(h))return;isPressing.add(m);const g=e(m,h),_=(w,A)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",T),isPressing.has(m)&&isPressing.delete(m),isValidPressEvent(w)&&typeof g=="function"&&g(w,{success:A})},E=w=>{_(w,m===window||m===document||s.useGlobalTarget||isNodeOrChild(m,w.target))},T=w=>{_(w,!1)};window.addEventListener("pointerup",E,a),window.addEventListener("pointercancel",T,a)};return o.forEach(h=>{(s.useGlobalTarget?window:h).addEventListener("pointerdown",f,a),isHTMLElement(h)&&(h.addEventListener("focus",g=>enableKeyboardPress(g,a)),!isElementKeyboardAccessible(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),c}function isSVGElement(n){return isObject(n)&&"ownerSVGElement"in n}function isSVGSVGElement(n){return isSVGElement(n)&&n.tagName==="svg"}const isMotionValue=n=>!!(n&&n.getVelocity),valueTypes=[...dimensionValueTypes,color,complex],findValueType=n=>valueTypes.find(testValueType(n)),MotionConfigContext=reactExports.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});class PopChildMeasure extends reactExports.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const o=s.offsetParent,a=isHTMLElement(o)&&o.offsetWidth||0,c=this.props.sizeRef.current;c.height=s.offsetHeight||0,c.width=s.offsetWidth||0,c.top=s.offsetTop,c.left=s.offsetLeft,c.right=a-c.width-c.left}return null}componentDidUpdate(){}render(){return this.props.children}}function PopChild({children:n,isPresent:e,anchorX:s,root:o}){const a=reactExports.useId(),c=reactExports.useRef(null),f=reactExports.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=reactExports.useContext(MotionConfigContext);return reactExports.useInsertionEffect(()=>{const{width:m,height:g,top:_,left:E,right:T}=f.current;if(e||!c.current||!m||!g)return;const w=s==="left"?`left: ${E}`:`right: ${T}`;c.current.dataset.motionPopId=a;const A=document.createElement("style");h&&(A.nonce=h);const R=o??document.head;return R.appendChild(A),A.sheet&&A.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${m}px !important;
            height: ${g}px !important;
            ${w}px !important;
            top: ${_}px !important;
          }
        `),()=>{R.contains(A)&&R.removeChild(A)}},[e]),jsxRuntimeExports.jsx(PopChildMeasure,{isPresent:e,childRef:c,sizeRef:f,children:reactExports.cloneElement(n,{ref:c})})}const PresenceChild=({children:n,initial:e,isPresent:s,onExitComplete:o,custom:a,presenceAffectsLayout:c,mode:f,anchorX:h,root:m})=>{const g=useConstant(newChildrenMap),_=reactExports.useId();let E=!0,T=reactExports.useMemo(()=>(E=!1,{id:_,initial:e,isPresent:s,custom:a,onExitComplete:w=>{g.set(w,!0);for(const A of g.values())if(!A)return;o&&o()},register:w=>(g.set(w,!1),()=>g.delete(w))}),[s,g,o]);return c&&E&&(T={...T}),reactExports.useMemo(()=>{g.forEach((w,A)=>g.set(A,!1))},[s]),reactExports.useEffect(()=>{!s&&!g.size&&o&&o()},[s]),f==="popLayout"&&(n=jsxRuntimeExports.jsx(PopChild,{isPresent:s,anchorX:h,root:m,children:n})),jsxRuntimeExports.jsx(PresenceContext.Provider,{value:T,children:n})};function newChildrenMap(){return new Map}function usePresence(n=!0){const e=reactExports.useContext(PresenceContext);if(e===null)return[!0,null];const{isPresent:s,onExitComplete:o,register:a}=e,c=reactExports.useId();reactExports.useEffect(()=>{if(n)return a(c)},[n]);const f=reactExports.useCallback(()=>n&&o&&o(c),[c,o,n]);return!s&&o?[!1,f]:[!0]}function useIsPresent(){return isPresent(reactExports.useContext(PresenceContext))}function isPresent(n){return n===null?!0:n.isPresent}const getChildKey=n=>n.key||"";function onlyElements(n){const e=[];return reactExports.Children.forEach(n,s=>{reactExports.isValidElement(s)&&e.push(s)}),e}const AnimatePresence=({children:n,custom:e,initial:s=!0,onExitComplete:o,presenceAffectsLayout:a=!0,mode:c="sync",propagate:f=!1,anchorX:h="left",root:m})=>{const[g,_]=usePresence(f),E=reactExports.useMemo(()=>onlyElements(n),[n]),T=f&&!g?[]:E.map(getChildKey),w=reactExports.useRef(!0),A=reactExports.useRef(E),R=useConstant(()=>new Map),[V,te]=reactExports.useState(E),[se,re]=reactExports.useState(E);useIsomorphicLayoutEffect$1(()=>{w.current=!1,A.current=E;for(let ae=0;ae<se.length;ae++){const z=getChildKey(se[ae]);T.includes(z)?R.delete(z):R.get(z)!==!0&&R.set(z,!1)}},[se,T.length,T.join("-")]);const ye=[];if(E!==V){let ae=[...E];for(let z=0;z<se.length;z++){const H=se[z],X=getChildKey(H);T.includes(X)||(ae.splice(z,0,H),ye.push(H))}return c==="wait"&&ye.length&&(ae=ye),re(onlyElements(ae)),te(E),null}const{forceRender:D}=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:se.map(ae=>{const z=getChildKey(ae),H=f&&!g?!1:E===se||T.includes(z),X=()=>{if(R.has(z))R.set(z,!0);else return;let le=!0;R.forEach(Z=>{Z||(le=!1)}),le&&(D?.(),re(A.current),f&&_?.(),o&&o())};return jsxRuntimeExports.jsx(PresenceChild,{isPresent:H,initial:!w.current||s?void 0:!1,custom:e,presenceAffectsLayout:a,mode:c,root:m,onExitComplete:H?void 0:X,anchorX:h,children:ae},z)})})},LazyContext=reactExports.createContext({strict:!1}),featureProps={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},featureDefinitions={};for(const n in featureProps)featureDefinitions[n]={isEnabled:e=>featureProps[n].some(s=>!!e[s])};function loadFeatures(n){for(const e in n)featureDefinitions[e]={...featureDefinitions[e],...n[e]}}const validMotionProps=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function isValidMotionProp(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||validMotionProps.has(n)}let shouldForward=n=>!isValidMotionProp(n);function loadExternalIsValidProp(n){typeof n=="function"&&(shouldForward=e=>e.startsWith("on")?!isValidMotionProp(e):n(e))}try{loadExternalIsValidProp(require("@emotion/is-prop-valid").default)}catch{}function filterProps(n,e,s){const o={};for(const a in n)a==="values"&&typeof n.values=="object"||(shouldForward(a)||s===!0&&isValidMotionProp(a)||!e&&!isValidMotionProp(a)||n.draggable&&a.startsWith("onDrag"))&&(o[a]=n[a]);return o}const MotionContext=reactExports.createContext({});function isAnimationControls(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}function isVariantLabel(n){return typeof n=="string"||Array.isArray(n)}const variantPriorityOrder=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],variantProps=["initial",...variantPriorityOrder];function isControllingVariants(n){return isAnimationControls(n.animate)||variantProps.some(e=>isVariantLabel(n[e]))}function isVariantNode(n){return!!(isControllingVariants(n)||n.variants)}function getCurrentTreeVariants(n,e){if(isControllingVariants(n)){const{initial:s,animate:o}=n;return{initial:s===!1||isVariantLabel(s)?s:void 0,animate:isVariantLabel(o)?o:void 0}}return n.inherit!==!1?e:{}}function useCreateMotionContext(n){const{initial:e,animate:s}=getCurrentTreeVariants(n,reactExports.useContext(MotionContext));return reactExports.useMemo(()=>({initial:e,animate:s}),[variantLabelsAsDependency(e),variantLabelsAsDependency(s)])}function variantLabelsAsDependency(n){return Array.isArray(n)?n.join(" "):n}const scaleCorrectors={};function addScaleCorrector(n){for(const e in n)scaleCorrectors[e]=n[e],isCSSVariableName(e)&&(scaleCorrectors[e].isCSSVariable=!0)}function isForcedMotionValue(n,{layout:e,layoutId:s}){return transformProps.has(n)||n.startsWith("origin")||(e||s!==void 0)&&(!!scaleCorrectors[n]||n==="opacity")}const translateAlias={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},numTransforms=transformPropOrder.length;function buildTransform(n,e,s){let o="",a=!0;for(let c=0;c<numTransforms;c++){const f=transformPropOrder[c],h=n[f];if(h===void 0)continue;let m=!0;if(typeof h=="number"?m=h===(f.startsWith("scale")?1:0):m=parseFloat(h)===0,!m||s){const g=getValueAsType(h,numberValueTypes[f]);if(!m){a=!1;const _=translateAlias[f]||f;o+=`${_}(${g}) `}s&&(e[f]=g)}}return o=o.trim(),s?o=s(e,a?"":o):a&&(o="none"),o}function buildHTMLStyles(n,e,s){const{style:o,vars:a,transformOrigin:c}=n;let f=!1,h=!1;for(const m in e){const g=e[m];if(transformProps.has(m)){f=!0;continue}else if(isCSSVariableName(m)){a[m]=g;continue}else{const _=getValueAsType(g,numberValueTypes[m]);m.startsWith("origin")?(h=!0,c[m]=_):o[m]=_}}if(e.transform||(f||s?o.transform=buildTransform(e,n.transform,s):o.transform&&(o.transform="none")),h){const{originX:m="50%",originY:g="50%",originZ:_=0}=c;o.transformOrigin=`${m} ${g} ${_}`}}const createHtmlRenderState=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function copyRawValuesOnly(n,e,s){for(const o in e)!isMotionValue(e[o])&&!isForcedMotionValue(o,s)&&(n[o]=e[o])}function useInitialMotionValues({transformTemplate:n},e){return reactExports.useMemo(()=>{const s=createHtmlRenderState();return buildHTMLStyles(s,e,n),Object.assign({},s.vars,s.style)},[e])}function useStyle(n,e){const s=n.style||{},o={};return copyRawValuesOnly(o,s,n),Object.assign(o,useInitialMotionValues(n,e)),o}function useHTMLProps(n,e){const s={},o=useStyle(n,e);return n.drag&&n.dragListener!==!1&&(s.draggable=!1,o.userSelect=o.WebkitUserSelect=o.WebkitTouchCallout="none",o.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(s.tabIndex=0),s.style=o,s}const dashKeys={offset:"stroke-dashoffset",array:"stroke-dasharray"},camelKeys={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGPath(n,e,s=1,o=0,a=!0){n.pathLength=1;const c=a?dashKeys:camelKeys;n[c.offset]=px.transform(-o);const f=px.transform(e),h=px.transform(s);n[c.array]=`${f} ${h}`}function buildSVGAttrs(n,{attrX:e,attrY:s,attrScale:o,pathLength:a,pathSpacing:c=1,pathOffset:f=0,...h},m,g,_){if(buildHTMLStyles(n,h,g),m){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:E,style:T}=n;E.transform&&(T.transform=E.transform,delete E.transform),(T.transform||E.transformOrigin)&&(T.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),T.transform&&(T.transformBox=_?.transformBox??"fill-box",delete E.transformBox),e!==void 0&&(E.x=e),s!==void 0&&(E.y=s),o!==void 0&&(E.scale=o),a!==void 0&&buildSVGPath(E,a,c,f,!1)}const createSvgRenderState=()=>({...createHtmlRenderState(),attrs:{}}),isSVGTag=n=>typeof n=="string"&&n.toLowerCase()==="svg";function useSVGProps(n,e,s,o){const a=reactExports.useMemo(()=>{const c=createSvgRenderState();return buildSVGAttrs(c,e,isSVGTag(o),n.transformTemplate,n.style),{...c.attrs,style:{...c.style}}},[e]);if(n.style){const c={};copyRawValuesOnly(c,n.style,n),a.style={...c,...a.style}}return a}const lowercaseSVGElements=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function isSVGComponent(n){return typeof n!="string"||n.includes("-")?!1:!!(lowercaseSVGElements.indexOf(n)>-1||/[A-Z]/u.test(n))}function useRender(n,e,s,{latestValues:o},a,c=!1){const h=(isSVGComponent(n)?useSVGProps:useHTMLProps)(e,o,a,n),m=filterProps(e,typeof n=="string",c),g=n!==reactExports.Fragment?{...m,...h,ref:s}:{},{children:_}=e,E=reactExports.useMemo(()=>isMotionValue(_)?_.get():_,[_]);return reactExports.createElement(n,{...g,children:E})}function getValueState(n){const e=[{},{}];return n?.values.forEach((s,o)=>{e[0][o]=s.get(),e[1][o]=s.getVelocity()}),e}function resolveVariantFromProps(n,e,s,o){if(typeof e=="function"){const[a,c]=getValueState(o);e=e(s!==void 0?s:n.custom,a,c)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[a,c]=getValueState(o);e=e(s!==void 0?s:n.custom,a,c)}return e}function resolveMotionValue(n){return isMotionValue(n)?n.get():n}function makeState({scrapeMotionValuesFromProps:n,createRenderState:e},s,o,a){return{latestValues:makeLatestValues(s,o,a,n),renderState:e()}}function makeLatestValues(n,e,s,o){const a={},c=o(n,{});for(const T in c)a[T]=resolveMotionValue(c[T]);let{initial:f,animate:h}=n;const m=isControllingVariants(n),g=isVariantNode(n);e&&g&&!m&&n.inherit!==!1&&(f===void 0&&(f=e.initial),h===void 0&&(h=e.animate));let _=s?s.initial===!1:!1;_=_||f===!1;const E=_?h:f;if(E&&typeof E!="boolean"&&!isAnimationControls(E)){const T=Array.isArray(E)?E:[E];for(let w=0;w<T.length;w++){const A=resolveVariantFromProps(n,T[w]);if(A){const{transitionEnd:R,transition:V,...te}=A;for(const se in te){let re=te[se];if(Array.isArray(re)){const ye=_?re.length-1:0;re=re[ye]}re!==null&&(a[se]=re)}for(const se in R)a[se]=R[se]}}}return a}const makeUseVisualState=n=>(e,s)=>{const o=reactExports.useContext(MotionContext),a=reactExports.useContext(PresenceContext),c=()=>makeState(n,e,o,a);return s?c():useConstant(c)};function scrapeMotionValuesFromProps$1(n,e,s){const{style:o}=n,a={};for(const c in o)(isMotionValue(o[c])||e.style&&isMotionValue(e.style[c])||isForcedMotionValue(c,n)||s?.getValue(c)?.liveStyle!==void 0)&&(a[c]=o[c]);return a}const useHTMLVisualState=makeUseVisualState({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps$1,createRenderState:createHtmlRenderState});function scrapeMotionValuesFromProps(n,e,s){const o=scrapeMotionValuesFromProps$1(n,e,s);for(const a in n)if(isMotionValue(n[a])||isMotionValue(e[a])){const c=transformPropOrder.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;o[c]=n[a]}return o}const useSVGVisualState=makeUseVisualState({scrapeMotionValuesFromProps,createRenderState:createSvgRenderState}),motionComponentSymbol=Symbol.for("motionComponentSymbol");function isRefObject(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function useMotionRef(n,e,s){return reactExports.useCallback(o=>{o&&n.onMount&&n.onMount(o),e&&(o?e.mount(o):e.unmount()),s&&(typeof s=="function"?s(o):isRefObject(s)&&(s.current=o))},[e])}const camelToDash=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),optimizedAppearDataId="framerAppearId",optimizedAppearDataAttribute="data-"+camelToDash(optimizedAppearDataId),SwitchLayoutGroupContext=reactExports.createContext({});function useVisualElement(n,e,s,o,a){const{visualElement:c}=reactExports.useContext(MotionContext),f=reactExports.useContext(LazyContext),h=reactExports.useContext(PresenceContext),m=reactExports.useContext(MotionConfigContext).reducedMotion,g=reactExports.useRef(null);o=o||f.renderer,!g.current&&o&&(g.current=o(n,{visualState:e,parent:c,props:s,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:m}));const _=g.current,E=reactExports.useContext(SwitchLayoutGroupContext);_&&!_.projection&&a&&(_.type==="html"||_.type==="svg")&&createProjectionNode$1(g.current,s,a,E);const T=reactExports.useRef(!1);reactExports.useInsertionEffect(()=>{_&&T.current&&_.update(s,h)});const w=s[optimizedAppearDataAttribute],A=reactExports.useRef(!!w&&!window.MotionHandoffIsComplete?.(w)&&window.MotionHasOptimisedAnimation?.(w));return useIsomorphicLayoutEffect$1(()=>{_&&(T.current=!0,window.MotionIsMounted=!0,_.updateFeatures(),_.scheduleRenderMicrotask(),A.current&&_.animationState&&_.animationState.animateChanges())}),reactExports.useEffect(()=>{_&&(!A.current&&_.animationState&&_.animationState.animateChanges(),A.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(w)}),A.current=!1),_.enteringChildren=void 0)}),_}function createProjectionNode$1(n,e,s,o){const{layoutId:a,layout:c,drag:f,dragConstraints:h,layoutScroll:m,layoutRoot:g,layoutCrossfade:_}=e;n.projection=new s(n.latestValues,e["data-framer-portal-id"]?void 0:getClosestProjectingNode(n.parent)),n.projection.setOptions({layoutId:a,layout:c,alwaysMeasureLayout:!!f||h&&isRefObject(h),visualElement:n,animationType:typeof c=="string"?c:"both",initialPromotionConfig:o,crossfade:_,layoutScroll:m,layoutRoot:g})}function getClosestProjectingNode(n){if(n)return n.options.allowProjection!==!1?n.projection:getClosestProjectingNode(n.parent)}function createMotionComponent(n,{forwardMotionProps:e=!1}={},s,o){s&&loadFeatures(s);const a=isSVGComponent(n)?useSVGVisualState:useHTMLVisualState;function c(h,m){let g;const _={...reactExports.useContext(MotionConfigContext),...h,layoutId:useLayoutId(h)},{isStatic:E}=_,T=useCreateMotionContext(h),w=a(h,E);if(!E&&isBrowser){useStrictMode();const A=getProjectionFunctionality(_);g=A.MeasureLayout,T.visualElement=useVisualElement(n,w,_,o,A.ProjectionNode)}return jsxRuntimeExports.jsxs(MotionContext.Provider,{value:T,children:[g&&T.visualElement?jsxRuntimeExports.jsx(g,{visualElement:T.visualElement,..._}):null,useRender(n,h,useMotionRef(w,T.visualElement,m),w,E,e)]})}c.displayName=`motion.${typeof n=="string"?n:`create(${n.displayName??n.name??""})`}`;const f=reactExports.forwardRef(c);return f[motionComponentSymbol]=n,f}function useLayoutId({layoutId:n}){const e=reactExports.useContext(LayoutGroupContext).id;return e&&n!==void 0?e+"-"+n:n}function useStrictMode(n,e){reactExports.useContext(LazyContext).strict}function getProjectionFunctionality(n){const{drag:e,layout:s}=featureDefinitions;if(!e&&!s)return{};const o={...e,...s};return{MeasureLayout:e?.isEnabled(n)||s?.isEnabled(n)?o.MeasureLayout:void 0,ProjectionNode:o.ProjectionNode}}function createMotionProxy(n,e){if(typeof Proxy>"u")return createMotionComponent;const s=new Map,o=(c,f)=>createMotionComponent(c,f,n,e),a=(c,f)=>o(c,f);return new Proxy(a,{get:(c,f)=>f==="create"?o:(s.has(f)||s.set(f,createMotionComponent(f,void 0,n,e)),s.get(f))})}function convertBoundingBoxToBox({top:n,left:e,right:s,bottom:o}){return{x:{min:e,max:s},y:{min:n,max:o}}}function convertBoxToBoundingBox({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function transformBoxPoints(n,e){if(!e)return n;const s=e({x:n.left,y:n.top}),o=e({x:n.right,y:n.bottom});return{top:s.y,left:s.x,bottom:o.y,right:o.x}}function isIdentityScale(n){return n===void 0||n===1}function hasScale({scale:n,scaleX:e,scaleY:s}){return!isIdentityScale(n)||!isIdentityScale(e)||!isIdentityScale(s)}function hasTransform(n){return hasScale(n)||has2DTranslate(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function has2DTranslate(n){return is2DTranslate(n.x)||is2DTranslate(n.y)}function is2DTranslate(n){return n&&n!=="0%"}function scalePoint(n,e,s){const o=n-s,a=e*o;return s+a}function applyPointDelta(n,e,s,o,a){return a!==void 0&&(n=scalePoint(n,a,o)),scalePoint(n,s,o)+e}function applyAxisDelta(n,e=0,s=1,o,a){n.min=applyPointDelta(n.min,e,s,o,a),n.max=applyPointDelta(n.max,e,s,o,a)}function applyBoxDelta(n,{x:e,y:s}){applyAxisDelta(n.x,e.translate,e.scale,e.originPoint),applyAxisDelta(n.y,s.translate,s.scale,s.originPoint)}const TREE_SCALE_SNAP_MIN=.999999999999,TREE_SCALE_SNAP_MAX=1.0000000000001;function applyTreeDeltas(n,e,s,o=!1){const a=s.length;if(!a)return;e.x=e.y=1;let c,f;for(let h=0;h<a;h++){c=s[h],f=c.projectionDelta;const{visualElement:m}=c.options;m&&m.props.style&&m.props.style.display==="contents"||(o&&c.options.layoutScroll&&c.scroll&&c!==c.root&&transformBox(n,{x:-c.scroll.offset.x,y:-c.scroll.offset.y}),f&&(e.x*=f.x.scale,e.y*=f.y.scale,applyBoxDelta(n,f)),o&&hasTransform(c.latestValues)&&transformBox(n,c.latestValues))}e.x<TREE_SCALE_SNAP_MAX&&e.x>TREE_SCALE_SNAP_MIN&&(e.x=1),e.y<TREE_SCALE_SNAP_MAX&&e.y>TREE_SCALE_SNAP_MIN&&(e.y=1)}function translateAxis(n,e){n.min=n.min+e,n.max=n.max+e}function transformAxis(n,e,s,o,a=.5){const c=mixNumber$1(n.min,n.max,a);applyAxisDelta(n,e,s,c,o)}function transformBox(n,e){transformAxis(n.x,e.x,e.scaleX,e.scale,e.originX),transformAxis(n.y,e.y,e.scaleY,e.scale,e.originY)}function measureViewportBox(n,e){return convertBoundingBoxToBox(transformBoxPoints(n.getBoundingClientRect(),e))}function measurePageBox(n,e,s){const o=measureViewportBox(n,s),{scroll:a}=e;return a&&(translateAxis(o.x,a.offset.x),translateAxis(o.y,a.offset.y)),o}const createAxisDelta=()=>({translate:0,scale:1,origin:0,originPoint:0}),createDelta=()=>({x:createAxisDelta(),y:createAxisDelta()}),createAxis=()=>({min:0,max:0}),createBox=()=>({x:createAxis(),y:createAxis()}),prefersReducedMotion={current:null},hasReducedMotionListener={current:!1};function initPrefersReducedMotion(){if(hasReducedMotionListener.current=!0,!!isBrowser)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>prefersReducedMotion.current=n.matches;n.addEventListener("change",e),e()}else prefersReducedMotion.current=!1}const visualElementStore=new WeakMap;function updateMotionValuesFromProps(n,e,s){for(const o in e){const a=e[o],c=s[o];if(isMotionValue(a))n.addValue(o,a);else if(isMotionValue(c))n.addValue(o,motionValue(a,{owner:n}));else if(c!==a)if(n.hasValue(o)){const f=n.getValue(o);f.liveStyle===!0?f.jump(a):f.hasAnimated||f.set(a)}else{const f=n.getStaticValue(o);n.addValue(o,motionValue(f!==void 0?f:a,{owner:n}))}}for(const o in s)e[o]===void 0&&n.removeValue(o);return e}const propEventHandlers=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class VisualElement{scrapeMotionValuesFromProps(e,s,o){return{}}constructor({parent:e,props:s,presenceContext:o,reducedMotionConfig:a,blockInitialAnimation:c,visualState:f},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=KeyframeResolver,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const T=time.now();this.renderScheduledAt<T&&(this.renderScheduledAt=T,frame.render(this.render,!1,!0))};const{latestValues:m,renderState:g}=f;this.latestValues=m,this.baseTarget={...m},this.initialValues=s.initial?{...m}:{},this.renderState=g,this.parent=e,this.props=s,this.presenceContext=o,this.depth=e?e.depth+1:0,this.reducedMotionConfig=a,this.options=h,this.blockInitialAnimation=!!c,this.isControllingVariants=isControllingVariants(s),this.isVariantNode=isVariantNode(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:_,...E}=this.scrapeMotionValuesFromProps(s,{},this);for(const T in E){const w=E[T];m[T]!==void 0&&isMotionValue(w)&&w.set(m[T])}}mount(e){this.current=e,visualElementStore.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,o)=>this.bindToMotionValue(o,s)),hasReducedMotionListener.current||initPrefersReducedMotion(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:prefersReducedMotion.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),cancelFrame(this.notifyUpdate),cancelFrame(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const s=this.features[e];s&&(s.unmount(),s.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,s){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const o=transformProps.has(e);o&&this.onBindTransform&&this.onBindTransform();const a=s.on("change",f=>{this.latestValues[e]=f,this.props.onUpdate&&frame.preRender(this.notifyUpdate),o&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,e,s)),this.valueSubscriptions.set(e,()=>{a(),c&&c(),s.owner&&s.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in featureDefinitions){const s=featureDefinitions[e];if(!s)continue;const{isEnabled:o,Feature:a}=s;if(!this.features[e]&&a&&o(this.props)&&(this.features[e]=new a(this)),this.features[e]){const c=this.features[e];c.isMounted?c.update():(c.mount(),c.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):createBox()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let o=0;o<propEventHandlers.length;o++){const a=propEventHandlers[o];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const c="on"+a,f=e[c];f&&(this.propEventSubscriptions[a]=this.on(a,f))}this.prevMotionValues=updateMotionValuesFromProps(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){const o=this.values.get(e);s!==o&&(o&&this.removeValue(e),this.bindToMotionValue(e,s),this.values.set(e,s),this.latestValues[e]=s.get())}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let o=this.values.get(e);return o===void 0&&s!==void 0&&(o=motionValue(s===null?void 0:s,{owner:this}),this.addValue(e,o)),o}readValue(e,s){let o=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return o!=null&&(typeof o=="string"&&(isNumericalString(o)||isZeroValueString(o))?o=parseFloat(o):!findValueType(o)&&complex.test(s)&&(o=getAnimatableNone(e,s)),this.setBaseTarget(e,isMotionValue(o)?o.get():o)),isMotionValue(o)?o.get():o}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){const{initial:s}=this.props;let o;if(typeof s=="string"||typeof s=="object"){const c=resolveVariantFromProps(this.props,s,this.presenceContext?.custom);c&&(o=c[e])}if(s&&o!==void 0)return o;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!isMotionValue(a)?a:this.initialValues[e]!==void 0&&o===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new SubscriptionManager),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}scheduleRenderMicrotask(){microtask.render(this.render)}}class DOMVisualElement extends VisualElement{constructor(){super(...arguments),this.KeyframeResolver=DOMKeyframesResolver}sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:o}){delete s[e],delete o[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;isMotionValue(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}}function renderHTML(n,{style:e,vars:s},o,a){const c=n.style;let f;for(f in e)c[f]=e[f];a?.applyProjectionStyles(c,o);for(f in s)c.setProperty(f,s[f])}function getComputedStyle$1(n){return window.getComputedStyle(n)}class HTMLVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="html",this.renderInstance=renderHTML}readValueFromInstance(e,s){if(transformProps.has(s))return this.projection?.isProjecting?defaultTransformValue(s):readTransformValue(e,s);{const o=getComputedStyle$1(e),a=(isCSSVariableName(s)?o.getPropertyValue(s):o[s])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(e,{transformPagePoint:s}){return measureViewportBox(e,s)}build(e,s,o){buildHTMLStyles(e,s,o.transformTemplate)}scrapeMotionValuesFromProps(e,s,o){return scrapeMotionValuesFromProps$1(e,s,o)}}const camelCaseAttributes=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function renderSVG(n,e,s,o){renderHTML(n,e,void 0,o);for(const a in e.attrs)n.setAttribute(camelCaseAttributes.has(a)?a:camelToDash(a),e.attrs[a])}class SVGVisualElement extends DOMVisualElement{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=createBox}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(transformProps.has(s)){const o=getDefaultValueType(s);return o&&o.default||0}return s=camelCaseAttributes.has(s)?s:camelToDash(s),e.getAttribute(s)}scrapeMotionValuesFromProps(e,s,o){return scrapeMotionValuesFromProps(e,s,o)}build(e,s,o){buildSVGAttrs(e,s,this.isSVGTag,o.transformTemplate,o.style)}renderInstance(e,s,o,a){renderSVG(e,s,o,a)}mount(e){this.isSVGTag=isSVGTag(e.tagName),super.mount(e)}}const createDomVisualElement=(n,e)=>isSVGComponent(n)?new SVGVisualElement(e):new HTMLVisualElement(e,{allowProjection:n!==reactExports.Fragment});function resolveVariant(n,e,s){const o=n.getProps();return resolveVariantFromProps(o,e,s!==void 0?s:o.custom,n)}const isKeyframesTarget=n=>Array.isArray(n);function setMotionValue(n,e,s){n.hasValue(e)?n.getValue(e).set(s):n.addValue(e,motionValue(s))}function resolveFinalValueInKeyframes(n){return isKeyframesTarget(n)?n[n.length-1]||0:n}function setTarget(n,e){const s=resolveVariant(n,e);let{transitionEnd:o={},transition:a={},...c}=s||{};c={...c,...o};for(const f in c){const h=resolveFinalValueInKeyframes(c[f]);setMotionValue(n,f,h)}}function isWillChangeMotionValue(n){return!!(isMotionValue(n)&&n.add)}function addValueToWillChange(n,e){const s=n.getValue("willChange");if(isWillChangeMotionValue(s))return s.add(e);if(!s&&MotionGlobalConfig.WillChange){const o=new MotionGlobalConfig.WillChange("auto");n.addValue("willChange",o),o.add(e)}}function getOptimisedAppearId(n){return n.props[optimizedAppearDataAttribute]}const isNotNull=n=>n!==null;function getFinalKeyframe(n,{repeat:e,repeatType:s="loop"},o){const a=n.filter(isNotNull),c=e&&s!=="loop"&&e%2===1?0:a.length-1;return a[c]}const underDampedSpring={type:"spring",stiffness:500,damping:25,restSpeed:10},criticallyDampedSpring=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),keyframesTransition={type:"keyframes",duration:.8},ease={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},getDefaultTransition=(n,{keyframes:e})=>e.length>2?keyframesTransition:transformProps.has(n)?n.startsWith("scale")?criticallyDampedSpring(e[1]):underDampedSpring:ease;function isTransitionDefined({when:n,delay:e,delayChildren:s,staggerChildren:o,staggerDirection:a,repeat:c,repeatType:f,repeatDelay:h,from:m,elapsed:g,..._}){return!!Object.keys(_).length}const animateMotionValue=(n,e,s,o={},a,c)=>f=>{const h=getValueTransition(o,n)||{},m=h.delay||o.delay||0;let{elapsed:g=0}=o;g=g-secondsToMilliseconds(m);const _={keyframes:Array.isArray(s)?s:[null,s],ease:"easeOut",velocity:e.getVelocity(),...h,delay:-g,onUpdate:T=>{e.set(T),h.onUpdate&&h.onUpdate(T)},onComplete:()=>{f(),h.onComplete&&h.onComplete()},name:n,motionValue:e,element:c?void 0:a};isTransitionDefined(h)||Object.assign(_,getDefaultTransition(n,_)),_.duration&&(_.duration=secondsToMilliseconds(_.duration)),_.repeatDelay&&(_.repeatDelay=secondsToMilliseconds(_.repeatDelay)),_.from!==void 0&&(_.keyframes[0]=_.from);let E=!1;if((_.type===!1||_.duration===0&&!_.repeatDelay)&&(makeAnimationInstant(_),_.delay===0&&(E=!0)),(MotionGlobalConfig.instantAnimations||MotionGlobalConfig.skipAnimations)&&(E=!0,makeAnimationInstant(_),_.delay=0),_.allowFlatten=!h.type&&!h.ease,E&&!c&&e.get()!==void 0){const T=getFinalKeyframe(_.keyframes,h);if(T!==void 0){frame.update(()=>{_.onUpdate(T),_.onComplete()});return}}return h.isSync?new JSAnimation(_):new AsyncMotionValueAnimation(_)};function shouldBlockAnimation({protectedKeys:n,needsAnimating:e},s){const o=n.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,o}function animateTarget(n,e,{delay:s=0,transitionOverride:o,type:a}={}){let{transition:c=n.getDefaultTransition(),transitionEnd:f,...h}=e;o&&(c=o);const m=[],g=a&&n.animationState&&n.animationState.getState()[a];for(const _ in h){const E=n.getValue(_,n.latestValues[_]??null),T=h[_];if(T===void 0||g&&shouldBlockAnimation(g,_))continue;const w={delay:s,...getValueTransition(c||{},_)},A=E.get();if(A!==void 0&&!E.isAnimating&&!Array.isArray(T)&&T===A&&!w.velocity)continue;let R=!1;if(window.MotionHandoffAnimation){const te=getOptimisedAppearId(n);if(te){const se=window.MotionHandoffAnimation(te,_,frame);se!==null&&(w.startTime=se,R=!0)}}addValueToWillChange(n,_),E.start(animateMotionValue(_,E,T,n.shouldReduceMotion&&positionalKeys.has(_)?{type:!1}:w,n,R));const V=E.animation;V&&m.push(V)}return f&&Promise.all(m).then(()=>{frame.update(()=>{f&&setTarget(n,f)})}),m}function calcChildStagger(n,e,s,o=0,a=1){const c=Array.from(n).sort((g,_)=>g.sortNodePosition(_)).indexOf(e),f=n.size,h=(f-1)*o;return typeof s=="function"?s(c,f):a===1?c*o:h-c*o}function animateVariant(n,e,s={}){const o=resolveVariant(n,e,s.type==="exit"?n.presenceContext?.custom:void 0);let{transition:a=n.getDefaultTransition()||{}}=o||{};s.transitionOverride&&(a=s.transitionOverride);const c=o?()=>Promise.all(animateTarget(n,o,s)):()=>Promise.resolve(),f=n.variantChildren&&n.variantChildren.size?(m=0)=>{const{delayChildren:g=0,staggerChildren:_,staggerDirection:E}=a;return animateChildren(n,e,m,g,_,E,s)}:()=>Promise.resolve(),{when:h}=a;if(h){const[m,g]=h==="beforeChildren"?[c,f]:[f,c];return m().then(()=>g())}else return Promise.all([c(),f(s.delay)])}function animateChildren(n,e,s=0,o=0,a=0,c=1,f){const h=[];for(const m of n.variantChildren)m.notify("AnimationStart",e),h.push(animateVariant(m,e,{...f,delay:s+(typeof o=="function"?0:o)+calcChildStagger(n.variantChildren,m,o,a,c)}).then(()=>m.notify("AnimationComplete",e)));return Promise.all(h)}function animateVisualElement(n,e,s={}){n.notify("AnimationStart",e);let o;if(Array.isArray(e)){const a=e.map(c=>animateVariant(n,c,s));o=Promise.all(a)}else if(typeof e=="string")o=animateVariant(n,e,s);else{const a=typeof e=="function"?resolveVariant(n,e,s.custom):e;o=Promise.all(animateTarget(n,a,s))}return o.then(()=>{n.notify("AnimationComplete",e)})}function shallowCompare(n,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==n.length)return!1;for(let o=0;o<s;o++)if(e[o]!==n[o])return!1;return!0}const numVariantProps=variantProps.length;function getVariantContext(n){if(!n)return;if(!n.isControllingVariants){const s=n.parent?getVariantContext(n.parent)||{}:{};return n.props.initial!==void 0&&(s.initial=n.props.initial),s}const e={};for(let s=0;s<numVariantProps;s++){const o=variantProps[s],a=n.props[o];(isVariantLabel(a)||a===!1)&&(e[o]=a)}return e}const reversePriorityOrder=[...variantPriorityOrder].reverse(),numAnimationTypes=variantPriorityOrder.length;function animateList(n){return e=>Promise.all(e.map(({animation:s,options:o})=>animateVisualElement(n,s,o)))}function createAnimationState(n){let e=animateList(n),s=createState(),o=!0;const a=m=>(g,_)=>{const E=resolveVariant(n,_,m==="exit"?n.presenceContext?.custom:void 0);if(E){const{transition:T,transitionEnd:w,...A}=E;g={...g,...A,...w}}return g};function c(m){e=m(n)}function f(m){const{props:g}=n,_=getVariantContext(n.parent)||{},E=[],T=new Set;let w={},A=1/0;for(let V=0;V<numAnimationTypes;V++){const te=reversePriorityOrder[V],se=s[te],re=g[te]!==void 0?g[te]:_[te],ye=isVariantLabel(re),D=te===m?se.isActive:null;D===!1&&(A=V);let ae=re===_[te]&&re!==g[te]&&ye;if(ae&&o&&n.manuallyAnimateOnMount&&(ae=!1),se.protectedKeys={...w},!se.isActive&&D===null||!re&&!se.prevProp||isAnimationControls(re)||typeof re=="boolean")continue;const z=checkVariantsDidChange(se.prevProp,re);let H=z||te===m&&se.isActive&&!ae&&ye||V>A&&ye,X=!1;const le=Array.isArray(re)?re:[re];let Z=le.reduce(a(te),{});D===!1&&(Z={});const{prevResolvedValues:ne={}}=se,W={...ne,...Z},xe=_e=>{H=!0,T.has(_e)&&(X=!0,T.delete(_e)),se.needsAnimating[_e]=!0;const Re=n.getValue(_e);Re&&(Re.liveStyle=!1)};for(const _e in W){const Re=Z[_e],Ie=ne[_e];if(w.hasOwnProperty(_e))continue;let he=!1;isKeyframesTarget(Re)&&isKeyframesTarget(Ie)?he=!shallowCompare(Re,Ie):he=Re!==Ie,he?Re!=null?xe(_e):T.add(_e):Re!==void 0&&T.has(_e)?xe(_e):se.protectedKeys[_e]=!0}se.prevProp=re,se.prevResolvedValues=Z,se.isActive&&(w={...w,...Z}),o&&n.blockInitialAnimation&&(H=!1);const de=ae&&z;H&&(!de||X)&&E.push(...le.map(_e=>{const Re={type:te};if(typeof _e=="string"&&o&&!de&&n.manuallyAnimateOnMount&&n.parent){const{parent:Ie}=n,he=resolveVariant(Ie,_e);if(Ie.enteringChildren&&he){const{delayChildren:be}=he.transition||{};Re.delay=calcChildStagger(Ie.enteringChildren,n,be)}}return{animation:_e,options:Re}}))}if(T.size){const V={};if(typeof g.initial!="boolean"){const te=resolveVariant(n,Array.isArray(g.initial)?g.initial[0]:g.initial);te&&te.transition&&(V.transition=te.transition)}T.forEach(te=>{const se=n.getBaseTarget(te),re=n.getValue(te);re&&(re.liveStyle=!0),V[te]=se??null}),E.push({animation:V})}let R=!!E.length;return o&&(g.initial===!1||g.initial===g.animate)&&!n.manuallyAnimateOnMount&&(R=!1),o=!1,R?e(E):Promise.resolve()}function h(m,g){if(s[m].isActive===g)return Promise.resolve();n.variantChildren?.forEach(E=>E.animationState?.setActive(m,g)),s[m].isActive=g;const _=f(m);for(const E in s)s[E].protectedKeys={};return _}return{animateChanges:f,setActive:h,setAnimateFunction:c,getState:()=>s,reset:()=>{s=createState(),o=!0}}}function checkVariantsDidChange(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!shallowCompare(e,n):!1}function createTypeState(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function createState(){return{animate:createTypeState(!0),whileInView:createTypeState(),whileHover:createTypeState(),whileTap:createTypeState(),whileDrag:createTypeState(),whileFocus:createTypeState(),exit:createTypeState()}}class Feature{constructor(e){this.isMounted=!1,this.node=e}update(){}}class AnimationFeature extends Feature{constructor(e){super(e),e.animationState||(e.animationState=createAnimationState(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();isAnimationControls(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let id$1=0;class ExitAnimationFeature extends Feature{constructor(){super(...arguments),this.id=id$1++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s}=this.node.presenceContext,{isPresent:o}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===o)return;const a=this.node.animationState.setActive("exit",!e);s&&!e&&a.then(()=>{s(this.id)})}mount(){const{register:e,onExitComplete:s}=this.node.presenceContext||{};s&&s(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const animations={animation:{Feature:AnimationFeature},exit:{Feature:ExitAnimationFeature}};function addDomEvent(n,e,s,o={passive:!0}){return n.addEventListener(e,s,o),()=>n.removeEventListener(e,s)}function extractEventInfo(n){return{point:{x:n.pageX,y:n.pageY}}}const addPointerInfo=n=>e=>isPrimaryPointer(e)&&n(e,extractEventInfo(e));function addPointerEvent(n,e,s,o){return addDomEvent(n,e,addPointerInfo(s),o)}const SCALE_PRECISION=1e-4,SCALE_MIN=1-SCALE_PRECISION,SCALE_MAX=1+SCALE_PRECISION,TRANSLATE_PRECISION=.01,TRANSLATE_MIN=0-TRANSLATE_PRECISION,TRANSLATE_MAX=0+TRANSLATE_PRECISION;function calcLength(n){return n.max-n.min}function isNear(n,e,s){return Math.abs(n-e)<=s}function calcAxisDelta(n,e,s,o=.5){n.origin=o,n.originPoint=mixNumber$1(e.min,e.max,n.origin),n.scale=calcLength(s)/calcLength(e),n.translate=mixNumber$1(s.min,s.max,n.origin)-n.originPoint,(n.scale>=SCALE_MIN&&n.scale<=SCALE_MAX||isNaN(n.scale))&&(n.scale=1),(n.translate>=TRANSLATE_MIN&&n.translate<=TRANSLATE_MAX||isNaN(n.translate))&&(n.translate=0)}function calcBoxDelta(n,e,s,o){calcAxisDelta(n.x,e.x,s.x,o?o.originX:void 0),calcAxisDelta(n.y,e.y,s.y,o?o.originY:void 0)}function calcRelativeAxis(n,e,s){n.min=s.min+e.min,n.max=n.min+calcLength(e)}function calcRelativeBox(n,e,s){calcRelativeAxis(n.x,e.x,s.x),calcRelativeAxis(n.y,e.y,s.y)}function calcRelativeAxisPosition(n,e,s){n.min=e.min-s.min,n.max=n.min+calcLength(e)}function calcRelativePosition(n,e,s){calcRelativeAxisPosition(n.x,e.x,s.x),calcRelativeAxisPosition(n.y,e.y,s.y)}function eachAxis(n){return[n("x"),n("y")]}const getContextWindow=({current:n})=>n?n.ownerDocument.defaultView:null,distance=(n,e)=>Math.abs(n-e);function distance2D(n,e){const s=distance(n.x,e.x),o=distance(n.y,e.y);return Math.sqrt(s**2+o**2)}class PanSession{constructor(e,s,{transformPagePoint:o,contextWindow:a=window,dragSnapToOrigin:c=!1,distanceThreshold:f=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=getPanInfo(this.lastMoveEventInfo,this.history),w=this.startEvent!==null,A=distance2D(T.offset,{x:0,y:0})>=this.distanceThreshold;if(!w&&!A)return;const{point:R}=T,{timestamp:V}=frameData;this.history.push({...R,timestamp:V});const{onStart:te,onMove:se}=this.handlers;w||(te&&te(this.lastMoveEvent,T),this.startEvent=this.lastMoveEvent),se&&se(this.lastMoveEvent,T)},this.handlePointerMove=(T,w)=>{this.lastMoveEvent=T,this.lastMoveEventInfo=transformPoint(w,this.transformPagePoint),frame.update(this.updatePoint,!0)},this.handlePointerUp=(T,w)=>{this.end();const{onEnd:A,onSessionEnd:R,resumeAnimation:V}=this.handlers;if(this.dragSnapToOrigin&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const te=getPanInfo(T.type==="pointercancel"?this.lastMoveEventInfo:transformPoint(w,this.transformPagePoint),this.history);this.startEvent&&A&&A(T,te),R&&R(T,te)},!isPrimaryPointer(e))return;this.dragSnapToOrigin=c,this.handlers=s,this.transformPagePoint=o,this.distanceThreshold=f,this.contextWindow=a||window;const h=extractEventInfo(e),m=transformPoint(h,this.transformPagePoint),{point:g}=m,{timestamp:_}=frameData;this.history=[{...g,timestamp:_}];const{onSessionStart:E}=s;E&&E(e,getPanInfo(m,this.history)),this.removeListeners=pipe(addPointerEvent(this.contextWindow,"pointermove",this.handlePointerMove),addPointerEvent(this.contextWindow,"pointerup",this.handlePointerUp),addPointerEvent(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cancelFrame(this.updatePoint)}}function transformPoint(n,e){return e?{point:e(n.point)}:n}function subtractPoint(n,e){return{x:n.x-e.x,y:n.y-e.y}}function getPanInfo({point:n},e){return{point:n,delta:subtractPoint(n,lastDevicePoint(e)),offset:subtractPoint(n,startDevicePoint(e)),velocity:getVelocity(e,.1)}}function startDevicePoint(n){return n[0]}function lastDevicePoint(n){return n[n.length-1]}function getVelocity(n,e){if(n.length<2)return{x:0,y:0};let s=n.length-1,o=null;const a=lastDevicePoint(n);for(;s>=0&&(o=n[s],!(a.timestamp-o.timestamp>secondsToMilliseconds(e)));)s--;if(!o)return{x:0,y:0};const c=millisecondsToSeconds(a.timestamp-o.timestamp);if(c===0)return{x:0,y:0};const f={x:(a.x-o.x)/c,y:(a.y-o.y)/c};return f.x===1/0&&(f.x=0),f.y===1/0&&(f.y=0),f}function applyConstraints(n,{min:e,max:s},o){return e!==void 0&&n<e?n=o?mixNumber$1(e,n,o.min):Math.max(n,e):s!==void 0&&n>s&&(n=o?mixNumber$1(s,n,o.max):Math.min(n,s)),n}function calcRelativeAxisConstraints(n,e,s){return{min:e!==void 0?n.min+e:void 0,max:s!==void 0?n.max+s-(n.max-n.min):void 0}}function calcRelativeConstraints(n,{top:e,left:s,bottom:o,right:a}){return{x:calcRelativeAxisConstraints(n.x,s,a),y:calcRelativeAxisConstraints(n.y,e,o)}}function calcViewportAxisConstraints(n,e){let s=e.min-n.min,o=e.max-n.max;return e.max-e.min<n.max-n.min&&([s,o]=[o,s]),{min:s,max:o}}function calcViewportConstraints(n,e){return{x:calcViewportAxisConstraints(n.x,e.x),y:calcViewportAxisConstraints(n.y,e.y)}}function calcOrigin(n,e){let s=.5;const o=calcLength(n),a=calcLength(e);return a>o?s=progress$1(e.min,e.max-o,n.min):o>a&&(s=progress$1(n.min,n.max-a,e.min)),clamp(0,1,s)}function rebaseAxisConstraints(n,e){const s={};return e.min!==void 0&&(s.min=e.min-n.min),e.max!==void 0&&(s.max=e.max-n.min),s}const defaultElastic=.35;function resolveDragElastic(n=defaultElastic){return n===!1?n=0:n===!0&&(n=defaultElastic),{x:resolveAxisElastic(n,"left","right"),y:resolveAxisElastic(n,"top","bottom")}}function resolveAxisElastic(n,e,s){return{min:resolvePointElastic(n,e),max:resolvePointElastic(n,s)}}function resolvePointElastic(n,e){return typeof n=="number"?n:n[e]||0}const elementDragControls=new WeakMap;class VisualElementDragControls{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=createBox(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:s=!1,distanceThreshold:o}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const c=E=>{const{dragSnapToOrigin:T}=this.getProps();T?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(extractEventInfo(E).point)},f=(E,T)=>{const{drag:w,dragPropagation:A,onDragStart:R}=this.getProps();if(w&&!A&&(this.openDragLock&&this.openDragLock(),this.openDragLock=setDragLock(w),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=T,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),eachAxis(te=>{let se=this.getAxisMotionValue(te).get()||0;if(percent.test(se)){const{projection:re}=this.visualElement;if(re&&re.layout){const ye=re.layout.layoutBox[te];ye&&(se=calcLength(ye)*(parseFloat(se)/100))}}this.originPoint[te]=se}),R&&frame.postRender(()=>R(E,T)),addValueToWillChange(this.visualElement,"transform");const{animationState:V}=this.visualElement;V&&V.setActive("whileDrag",!0)},h=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T;const{dragPropagation:w,dragDirectionLock:A,onDirectionLock:R,onDrag:V}=this.getProps();if(!w&&!this.openDragLock)return;const{offset:te}=T;if(A&&this.currentDirection===null){this.currentDirection=getCurrentDirection(te),this.currentDirection!==null&&R&&R(this.currentDirection);return}this.updateAxis("x",T.point,te),this.updateAxis("y",T.point,te),this.visualElement.render(),V&&V(E,T)},m=(E,T)=>{this.latestPointerEvent=E,this.latestPanInfo=T,this.stop(E,T),this.latestPointerEvent=null,this.latestPanInfo=null},g=()=>eachAxis(E=>this.getAnimationState(E)==="paused"&&this.getAxisMotionValue(E).animation?.play()),{dragSnapToOrigin:_}=this.getProps();this.panSession=new PanSession(e,{onSessionStart:c,onStart:f,onMove:h,onSessionEnd:m,resumeAnimation:g},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:_,distanceThreshold:o,contextWindow:getContextWindow(this.visualElement)})}stop(e,s){const o=e||this.latestPointerEvent,a=s||this.latestPanInfo,c=this.isDragging;if(this.cancel(),!c||!a||!o)return;const{velocity:f}=a;this.startAnimation(f);const{onDragEnd:h}=this.getProps();h&&frame.postRender(()=>h(o,a))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:o}=this.getProps();!o&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,o){const{drag:a}=this.getProps();if(!o||!shouldDrag(e,a,this.currentDirection))return;const c=this.getAxisMotionValue(e);let f=this.originPoint[e]+o[e];this.constraints&&this.constraints[e]&&(f=applyConstraints(f,this.constraints[e],this.elastic[e])),c.set(f)}resolveConstraints(){const{dragConstraints:e,dragElastic:s}=this.getProps(),o=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,a=this.constraints;e&&isRefObject(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&o?this.constraints=calcRelativeConstraints(o.layoutBox,e):this.constraints=!1,this.elastic=resolveDragElastic(s),a!==this.constraints&&o&&this.constraints&&!this.hasMutatedConstraints&&eachAxis(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=rebaseAxisConstraints(o.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!isRefObject(e))return!1;const o=e.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const c=measurePageBox(o,a.root,this.visualElement.getTransformPagePoint());let f=calcViewportConstraints(a.layout.layoutBox,c);if(s){const h=s(convertBoxToBoundingBox(f));this.hasMutatedConstraints=!!h,h&&(f=convertBoundingBoxToBox(h))}return f}startAnimation(e){const{drag:s,dragMomentum:o,dragElastic:a,dragTransition:c,dragSnapToOrigin:f,onDragTransitionEnd:h}=this.getProps(),m=this.constraints||{},g=eachAxis(_=>{if(!shouldDrag(_,s,this.currentDirection))return;let E=m&&m[_]||{};f&&(E={min:0,max:0});const T=a?200:1e6,w=a?40:1e7,A={type:"inertia",velocity:o?e[_]:0,bounceStiffness:T,bounceDamping:w,timeConstant:750,restDelta:1,restSpeed:10,...c,...E};return this.startAxisValueAnimation(_,A)});return Promise.all(g).then(h)}startAxisValueAnimation(e,s){const o=this.getAxisMotionValue(e);return addValueToWillChange(this.visualElement,e),o.start(animateMotionValue(e,o,0,s,this.visualElement,!1))}stopAnimation(){eachAxis(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){eachAxis(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const s=`_drag${e.toUpperCase()}`,o=this.visualElement.getProps(),a=o[s];return a||this.visualElement.getValue(e,(o.initial?o.initial[e]:void 0)||0)}snapToCursor(e){eachAxis(s=>{const{drag:o}=this.getProps();if(!shouldDrag(s,o,this.currentDirection))return;const{projection:a}=this.visualElement,c=this.getAxisMotionValue(s);if(a&&a.layout){const{min:f,max:h}=a.layout.layoutBox[s];c.set(e[s]-mixNumber$1(f,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:o}=this.visualElement;if(!isRefObject(s)||!o||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};eachAxis(f=>{const h=this.getAxisMotionValue(f);if(h&&this.constraints!==!1){const m=h.get();a[f]=calcOrigin({min:m,max:m},this.constraints[f])}});const{transformTemplate:c}=this.visualElement.getProps();this.visualElement.current.style.transform=c?c({},""):"none",o.root&&o.root.updateScroll(),o.updateLayout(),this.resolveConstraints(),eachAxis(f=>{if(!shouldDrag(f,e,null))return;const h=this.getAxisMotionValue(f),{min:m,max:g}=this.constraints[f];h.set(mixNumber$1(m,g,a[f]))})}addListeners(){if(!this.visualElement.current)return;elementDragControls.set(this.visualElement,this);const e=this.visualElement.current,s=addPointerEvent(e,"pointerdown",m=>{const{drag:g,dragListener:_=!0}=this.getProps();g&&_&&this.start(m)}),o=()=>{const{dragConstraints:m}=this.getProps();isRefObject(m)&&m.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,c=a.addEventListener("measure",o);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),frame.read(o);const f=addDomEvent(window,"resize",()=>this.scalePositionWithinConstraints()),h=a.addEventListener("didUpdate",(({delta:m,hasLayoutChanged:g})=>{this.isDragging&&g&&(eachAxis(_=>{const E=this.getAxisMotionValue(_);E&&(this.originPoint[_]+=m[_].translate,E.set(E.get()+m[_].translate))}),this.visualElement.render())}));return()=>{f(),s(),c(),h&&h()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:o=!1,dragPropagation:a=!1,dragConstraints:c=!1,dragElastic:f=defaultElastic,dragMomentum:h=!0}=e;return{...e,drag:s,dragDirectionLock:o,dragPropagation:a,dragConstraints:c,dragElastic:f,dragMomentum:h}}}function shouldDrag(n,e,s){return(e===!0||e===n)&&(s===null||s===n)}function getCurrentDirection(n,e=10){let s=null;return Math.abs(n.y)>e?s="y":Math.abs(n.x)>e&&(s="x"),s}class DragGesture extends Feature{constructor(e){super(e),this.removeGroupControls=noop,this.removeListeners=noop,this.controls=new VisualElementDragControls(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||noop}unmount(){this.removeGroupControls(),this.removeListeners()}}const asyncHandler=n=>(e,s)=>{n&&frame.postRender(()=>n(e,s))};class PanGesture extends Feature{constructor(){super(...arguments),this.removePointerDownListener=noop}onPointerDown(e){this.session=new PanSession(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:getContextWindow(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:o,onPanEnd:a}=this.node.getProps();return{onSessionStart:asyncHandler(e),onStart:asyncHandler(s),onMove:o,onEnd:(c,f)=>{delete this.session,a&&frame.postRender(()=>a(c,f))}}}mount(){this.removePointerDownListener=addPointerEvent(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const globalProjectionState={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function pixelsToPercent(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const correctBorderRadius={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(px.test(n))n=parseFloat(n);else return n;const s=pixelsToPercent(n,e.target.x),o=pixelsToPercent(n,e.target.y);return`${s}% ${o}%`}},correctBoxShadow={correct:(n,{treeScale:e,projectionDelta:s})=>{const o=n,a=complex.parse(n);if(a.length>5)return o;const c=complex.createTransformer(n),f=typeof a[0]!="number"?1:0,h=s.x.scale*e.x,m=s.y.scale*e.y;a[0+f]/=h,a[1+f]/=m;const g=mixNumber$1(h,m,.5);return typeof a[2+f]=="number"&&(a[2+f]/=g),typeof a[3+f]=="number"&&(a[3+f]/=g),c(a)}};let hasTakenAnySnapshot=!1;class MeasureLayoutWithContext extends reactExports.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:o,layoutId:a}=this.props,{projection:c}=e;addScaleCorrector(defaultScaleCorrectors),c&&(s.group&&s.group.add(c),o&&o.register&&a&&o.register(c),hasTakenAnySnapshot&&c.root.didUpdate(),c.addEventListener("animationComplete",()=>{this.safeToRemove()}),c.setOptions({...c.options,onExitComplete:()=>this.safeToRemove()})),globalProjectionState.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:o,drag:a,isPresent:c}=this.props,{projection:f}=o;return f&&(f.isPresent=c,hasTakenAnySnapshot=!0,a||e.layoutDependency!==s||s===void 0||e.isPresent!==c?f.willUpdate():this.safeToRemove(),e.isPresent!==c&&(c?f.promote():f.relegate()||frame.postRender(()=>{const h=f.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),microtask.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:o}=this.props,{projection:a}=e;hasTakenAnySnapshot=!0,a&&(a.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(a),o&&o.deregister&&o.deregister(a))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function MeasureLayout(n){const[e,s]=usePresence(),o=reactExports.useContext(LayoutGroupContext);return jsxRuntimeExports.jsx(MeasureLayoutWithContext,{...n,layoutGroup:o,switchLayoutGroup:reactExports.useContext(SwitchLayoutGroupContext),isPresent:e,safeToRemove:s})}const defaultScaleCorrectors={borderRadius:{...correctBorderRadius,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:correctBorderRadius,borderTopRightRadius:correctBorderRadius,borderBottomLeftRadius:correctBorderRadius,borderBottomRightRadius:correctBorderRadius,boxShadow:correctBoxShadow};function animateSingleValue(n,e,s){const o=isMotionValue(n)?n:motionValue(n);return o.start(animateMotionValue("",o,e,s)),o.animation}const compareByDepth=(n,e)=>n.depth-e.depth;class FlatTree{constructor(){this.children=[],this.isDirty=!1}add(e){addUniqueItem(this.children,e),this.isDirty=!0}remove(e){removeItem(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(compareByDepth),this.isDirty=!1,this.children.forEach(e)}}function delay(n,e){const s=time.now(),o=({timestamp:a})=>{const c=a-s;c>=e&&(cancelFrame(o),n(c-e))};return frame.setup(o,!0),()=>cancelFrame(o)}const borders=["TopLeft","TopRight","BottomLeft","BottomRight"],numBorders=borders.length,asNumber=n=>typeof n=="string"?parseFloat(n):n,isPx=n=>typeof n=="number"||px.test(n);function mixValues(n,e,s,o,a,c){a?(n.opacity=mixNumber$1(0,s.opacity??1,easeCrossfadeIn(o)),n.opacityExit=mixNumber$1(e.opacity??1,0,easeCrossfadeOut(o))):c&&(n.opacity=mixNumber$1(e.opacity??1,s.opacity??1,o));for(let f=0;f<numBorders;f++){const h=`border${borders[f]}Radius`;let m=getRadius(e,h),g=getRadius(s,h);if(m===void 0&&g===void 0)continue;m||(m=0),g||(g=0),m===0||g===0||isPx(m)===isPx(g)?(n[h]=Math.max(mixNumber$1(asNumber(m),asNumber(g),o),0),(percent.test(g)||percent.test(m))&&(n[h]+="%")):n[h]=g}(e.rotate||s.rotate)&&(n.rotate=mixNumber$1(e.rotate||0,s.rotate||0,o))}function getRadius(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const easeCrossfadeIn=compress(0,.5,circOut),easeCrossfadeOut=compress(.5,.95,noop);function compress(n,e,s){return o=>o<n?0:o>e?1:s(progress$1(n,e,o))}function copyAxisInto(n,e){n.min=e.min,n.max=e.max}function copyBoxInto(n,e){copyAxisInto(n.x,e.x),copyAxisInto(n.y,e.y)}function copyAxisDeltaInto(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function removePointDelta(n,e,s,o,a){return n-=e,n=scalePoint(n,1/s,o),a!==void 0&&(n=scalePoint(n,1/a,o)),n}function removeAxisDelta(n,e=0,s=1,o=.5,a,c=n,f=n){if(percent.test(e)&&(e=parseFloat(e),e=mixNumber$1(f.min,f.max,e/100)-f.min),typeof e!="number")return;let h=mixNumber$1(c.min,c.max,o);n===c&&(h-=e),n.min=removePointDelta(n.min,e,s,h,a),n.max=removePointDelta(n.max,e,s,h,a)}function removeAxisTransforms(n,e,[s,o,a],c,f){removeAxisDelta(n,e[s],e[o],e[a],e.scale,c,f)}const xKeys=["x","scaleX","originX"],yKeys=["y","scaleY","originY"];function removeBoxTransforms(n,e,s,o){removeAxisTransforms(n.x,e,xKeys,s?s.x:void 0,o?o.x:void 0),removeAxisTransforms(n.y,e,yKeys,s?s.y:void 0,o?o.y:void 0)}function isAxisDeltaZero(n){return n.translate===0&&n.scale===1}function isDeltaZero(n){return isAxisDeltaZero(n.x)&&isAxisDeltaZero(n.y)}function axisEquals(n,e){return n.min===e.min&&n.max===e.max}function boxEquals(n,e){return axisEquals(n.x,e.x)&&axisEquals(n.y,e.y)}function axisEqualsRounded(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function boxEqualsRounded(n,e){return axisEqualsRounded(n.x,e.x)&&axisEqualsRounded(n.y,e.y)}function aspectRatio(n){return calcLength(n.x)/calcLength(n.y)}function axisDeltaEquals(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class NodeStack{constructor(){this.members=[]}add(e){addUniqueItem(this.members,e),e.scheduleRender()}remove(e){if(removeItem(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(a=>e===a);if(s===0)return!1;let o;for(let a=s;a>=0;a--){const c=this.members[a];if(c.isPresent!==!1){o=c;break}}return o?(this.promote(o),!0):!1}promote(e,s){const o=this.lead;if(e!==o&&(this.prevLead=o,this.lead=e,e.show(),o)){o.instance&&o.scheduleRender(),e.scheduleRender(),e.resumeFrom=o,s&&(e.resumeFrom.preserveOpacity=!0),o.snapshot&&(e.snapshot=o.snapshot,e.snapshot.latestValues=o.animationValues||o.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:a}=e.options;a===!1&&o.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:o}=e;s.onExitComplete&&s.onExitComplete(),o&&o.options.onExitComplete&&o.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function buildProjectionTransform(n,e,s){let o="";const a=n.x.translate/e.x,c=n.y.translate/e.y,f=s?.z||0;if((a||c||f)&&(o=`translate3d(${a}px, ${c}px, ${f}px) `),(e.x!==1||e.y!==1)&&(o+=`scale(${1/e.x}, ${1/e.y}) `),s){const{transformPerspective:g,rotate:_,rotateX:E,rotateY:T,skewX:w,skewY:A}=s;g&&(o=`perspective(${g}px) ${o}`),_&&(o+=`rotate(${_}deg) `),E&&(o+=`rotateX(${E}deg) `),T&&(o+=`rotateY(${T}deg) `),w&&(o+=`skewX(${w}deg) `),A&&(o+=`skewY(${A}deg) `)}const h=n.x.scale*e.x,m=n.y.scale*e.y;return(h!==1||m!==1)&&(o+=`scale(${h}, ${m})`),o||"none"}const transformAxes=["","X","Y","Z"],animationTarget=1e3;let id=0;function resetDistortingTransform(n,e,s,o){const{latestValues:a}=e;a[n]&&(s[n]=a[n],e.setStaticValue(n,0),o&&(o[n]=0))}function cancelTreeOptimisedTransformAnimations(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const s=getOptimisedAppearId(e);if(window.MotionHasOptimisedAnimation(s,"transform")){const{layout:a,layoutId:c}=n.options;window.MotionCancelOptimisedAnimation(s,"transform",frame,!(a||c))}const{parent:o}=n;o&&!o.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(o)}function createProjectionNode({attachResizeListener:n,defaultParent:e,measureScroll:s,checkIsScrollRoot:o,resetTransform:a}){return class{constructor(f={},h=e?.()){this.id=id++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(propagateDirtyNodes),this.nodes.forEach(resolveTargetDelta),this.nodes.forEach(calcProjection),this.nodes.forEach(cleanDirtyNodes)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=f,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let m=0;m<this.path.length;m++)this.path[m].shouldResetTransform=!0;this.root===this&&(this.nodes=new FlatTree)}addEventListener(f,h){return this.eventHandlers.has(f)||this.eventHandlers.set(f,new SubscriptionManager),this.eventHandlers.get(f).add(h)}notifyListeners(f,...h){const m=this.eventHandlers.get(f);m&&m.notify(...h)}hasListeners(f){return this.eventHandlers.has(f)}mount(f){if(this.instance)return;this.isSVG=isSVGElement(f)&&!isSVGSVGElement(f),this.instance=f;const{layoutId:h,layout:m,visualElement:g}=this.options;if(g&&!g.current&&g.mount(f),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(m||h)&&(this.isLayoutDirty=!0),n){let _,E=0;const T=()=>this.root.updateBlockedByResize=!1;frame.read(()=>{E=window.innerWidth}),n(f,()=>{const w=window.innerWidth;w!==E&&(E=w,this.root.updateBlockedByResize=!0,_&&_(),_=delay(T,250),globalProjectionState.hasAnimatedSinceResize&&(globalProjectionState.hasAnimatedSinceResize=!1,this.nodes.forEach(finishAnimation)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&g&&(h||m)&&this.addEventListener("didUpdate",({delta:_,hasLayoutChanged:E,hasRelativeLayoutChanged:T,layout:w})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const A=this.options.transition||g.getDefaultTransition()||defaultLayoutTransition,{onLayoutAnimationStart:R,onLayoutAnimationComplete:V}=g.getProps(),te=!this.targetLayout||!boxEqualsRounded(this.targetLayout,w),se=!E&&T;if(this.options.layoutRoot||this.resumeFrom||se||E&&(te||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const re={...getValueTransition(A,"layout"),onPlay:R,onComplete:V};(g.shouldReduceMotion||this.options.layoutRoot)&&(re.delay=0,re.type=!1),this.startAnimation(re),this.setAnimationOrigin(_,se)}else E||finishAnimation(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=w})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const f=this.getStack();f&&f.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),cancelFrame(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(resetSkewAndRotation),this.animationId++)}getTransformTemplate(){const{visualElement:f}=this.options;return f&&f.getProps().transformTemplate}willUpdate(f=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&cancelTreeOptimisedTransformAnimations(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let _=0;_<this.path.length;_++){const E=this.path[_];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:h,layout:m}=this.options;if(h===void 0&&!m)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),f&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(clearMeasurements);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(clearIsLayoutDirty);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate)):this.nodes.forEach(clearIsLayoutDirty),this.clearAllSnapshots();const h=time.now();frameData.delta=clamp(0,1e3/60,h-frameData.timestamp),frameData.timestamp=h,frameData.isProcessing=!0,frameSteps.update.process(frameData),frameSteps.preRender.process(frameData),frameSteps.render.process(frameData),frameData.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,microtask.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,frame.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){frame.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!calcLength(this.snapshot.measuredBox.x)&&!calcLength(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let m=0;m<this.path.length;m++)this.path[m].updateScroll();const f=this.layout;this.layout=this.measure(!1),this.layoutCorrected=createBox(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,f?f.layoutBox:void 0)}updateScroll(f="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===f&&(h=!1),h&&this.instance){const m=o(this.instance);this.scroll={animationId:this.root.animationId,phase:f,isRoot:m,offset:s(this.instance),wasRoot:this.scroll?this.scroll.isRoot:m}}}resetTransform(){if(!a)return;const f=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!isDeltaZero(this.projectionDelta),m=this.getTransformTemplate(),g=m?m(this.latestValues,""):void 0,_=g!==this.prevTransformTemplateValue;f&&this.instance&&(h||hasTransform(this.latestValues)||_)&&(a(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(f=!0){const h=this.measurePageBox();let m=this.removeElementScroll(h);return f&&(m=this.removeTransform(m)),roundBox(m),{animationId:this.root.animationId,measuredBox:h,layoutBox:m,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:f}=this.options;if(!f)return createBox();const h=f.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(checkNodeWasScrollRoot))){const{scroll:g}=this.root;g&&(translateAxis(h.x,g.offset.x),translateAxis(h.y,g.offset.y))}return h}removeElementScroll(f){const h=createBox();if(copyBoxInto(h,f),this.scroll?.wasRoot)return h;for(let m=0;m<this.path.length;m++){const g=this.path[m],{scroll:_,options:E}=g;g!==this.root&&_&&E.layoutScroll&&(_.wasRoot&&copyBoxInto(h,f),translateAxis(h.x,_.offset.x),translateAxis(h.y,_.offset.y))}return h}applyTransform(f,h=!1){const m=createBox();copyBoxInto(m,f);for(let g=0;g<this.path.length;g++){const _=this.path[g];!h&&_.options.layoutScroll&&_.scroll&&_!==_.root&&transformBox(m,{x:-_.scroll.offset.x,y:-_.scroll.offset.y}),hasTransform(_.latestValues)&&transformBox(m,_.latestValues)}return hasTransform(this.latestValues)&&transformBox(m,this.latestValues),m}removeTransform(f){const h=createBox();copyBoxInto(h,f);for(let m=0;m<this.path.length;m++){const g=this.path[m];if(!g.instance||!hasTransform(g.latestValues))continue;hasScale(g.latestValues)&&g.updateSnapshot();const _=createBox(),E=g.measurePageBox();copyBoxInto(_,E),removeBoxTransforms(h,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,_)}return hasTransform(this.latestValues)&&removeBoxTransforms(h,this.latestValues),h}setTargetDelta(f){this.targetDelta=f,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(f){this.options={...this.options,...f,crossfade:f.crossfade!==void 0?f.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==frameData.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(f=!1){const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const m=!!this.resumingFrom||this!==h;if(!(f||m&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:_,layoutId:E}=this.options;if(!(!this.layout||!(_||E))){if(this.resolvedRelativeTargetAt=frameData.timestamp,!this.targetDelta&&!this.relativeTarget){const T=this.getClosestProjectingParent();T&&T.layout&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.layout.layoutBox,T.layout.layoutBox),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=createBox(),this.targetWithTransforms=createBox()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),calcRelativeBox(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):copyBoxInto(this.target,this.layout.layoutBox),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const T=this.getClosestProjectingParent();T&&!!T.resumingFrom==!!this.resumingFrom&&!T.options.layoutScroll&&T.target&&this.animationProgress!==1?(this.relativeParent=T,this.forceRelativeParentToResolveTarget(),this.relativeTarget=createBox(),this.relativeTargetOrigin=createBox(),calcRelativePosition(this.relativeTargetOrigin,this.target,T.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||hasScale(this.parent.latestValues)||has2DTranslate(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const f=this.getLead(),h=!!this.resumingFrom||this!==f;let m=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(m=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(m=!1),this.resolvedRelativeTargetAt===frameData.timestamp&&(m=!1),m)return;const{layout:g,layoutId:_}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||_))return;copyBoxInto(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,T=this.treeScale.y;applyTreeDeltas(this.layoutCorrected,this.treeScale,this.path,h),f.layout&&!f.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(f.target=f.layout.layoutBox,f.targetWithTransforms=createBox());const{target:w}=f;if(!w){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(copyAxisDeltaInto(this.prevProjectionDelta.x,this.projectionDelta.x),copyAxisDeltaInto(this.prevProjectionDelta.y,this.projectionDelta.y)),calcBoxDelta(this.projectionDelta,this.layoutCorrected,w,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==T||!axisDeltaEquals(this.projectionDelta.x,this.prevProjectionDelta.x)||!axisDeltaEquals(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",w))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(f=!0){if(this.options.visualElement?.scheduleRender(),f){const h=this.getStack();h&&h.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=createDelta(),this.projectionDelta=createDelta(),this.projectionDeltaWithTransform=createDelta()}setAnimationOrigin(f,h=!1){const m=this.snapshot,g=m?m.latestValues:{},_={...this.latestValues},E=createDelta();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const T=createBox(),w=m?m.source:void 0,A=this.layout?this.layout.source:void 0,R=w!==A,V=this.getStack(),te=!V||V.members.length<=1,se=!!(R&&!te&&this.options.crossfade===!0&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0;let re;this.mixTargetDelta=ye=>{const D=ye/1e3;mixAxisDelta(E.x,f.x,D),mixAxisDelta(E.y,f.y,D),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(calcRelativePosition(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),mixBox(this.relativeTarget,this.relativeTargetOrigin,T,D),re&&boxEquals(this.relativeTarget,re)&&(this.isProjectionDirty=!1),re||(re=createBox()),copyBoxInto(re,this.relativeTarget)),R&&(this.animationValues=_,mixValues(_,g,this.latestValues,D,se,te)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(f){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(cancelFrame(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=frame.update(()=>{globalProjectionState.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=motionValue(0)),this.currentAnimation=animateSingleValue(this.motionValue,[0,1e3],{...f,velocity:0,isSync:!0,onUpdate:h=>{this.mixTargetDelta(h),f.onUpdate&&f.onUpdate(h)},onStop:()=>{},onComplete:()=>{f.onComplete&&f.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const f=this.getStack();f&&f.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(animationTarget),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const f=this.getLead();let{targetWithTransforms:h,target:m,layout:g,latestValues:_}=f;if(!(!h||!m||!g)){if(this!==f&&this.layout&&g&&shouldAnimatePositionOnly(this.options.animationType,this.layout.layoutBox,g.layoutBox)){m=this.target||createBox();const E=calcLength(this.layout.layoutBox.x);m.x.min=f.target.x.min,m.x.max=m.x.min+E;const T=calcLength(this.layout.layoutBox.y);m.y.min=f.target.y.min,m.y.max=m.y.min+T}copyBoxInto(h,m),transformBox(h,_),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,h,_)}}registerSharedNode(f,h){this.sharedNodes.has(f)||this.sharedNodes.set(f,new NodeStack),this.sharedNodes.get(f).add(h);const g=h.options.initialPromotionConfig;h.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(h):void 0})}isLead(){const f=this.getStack();return f?f.lead===this:!0}getLead(){const{layoutId:f}=this.options;return f?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:f}=this.options;return f?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:f}=this.options;if(f)return this.root.sharedNodes.get(f)}promote({needsReset:f,transition:h,preserveFollowOpacity:m}={}){const g=this.getStack();g&&g.promote(this,m),f&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const f=this.getStack();return f?f.relegate(this):!1}resetSkewAndRotation(){const{visualElement:f}=this.options;if(!f)return;let h=!1;const{latestValues:m}=f;if((m.z||m.rotate||m.rotateX||m.rotateY||m.rotateZ||m.skewX||m.skewY)&&(h=!0),!h)return;const g={};m.z&&resetDistortingTransform("z",f,g,this.animationValues);for(let _=0;_<transformAxes.length;_++)resetDistortingTransform(`rotate${transformAxes[_]}`,f,g,this.animationValues),resetDistortingTransform(`skew${transformAxes[_]}`,f,g,this.animationValues);f.render();for(const _ in g)f.setStaticValue(_,g[_]),this.animationValues&&(this.animationValues[_]=g[_]);f.scheduleRender()}applyProjectionStyles(f,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){f.visibility="hidden";return}const m=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,f.visibility="",f.opacity="",f.pointerEvents=resolveMotionValue(h?.pointerEvents)||"",f.transform=m?m(this.latestValues,""):"none";return}const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){this.options.layoutId&&(f.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,f.pointerEvents=resolveMotionValue(h?.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(f.transform=m?m({},""):"none",this.hasProjected=!1);return}f.visibility="";const _=g.animationValues||g.latestValues;this.applyTransformsToTarget();let E=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,_);m&&(E=m(_,E)),f.transform=E;const{x:T,y:w}=this.projectionDelta;f.transformOrigin=`${T.origin*100}% ${w.origin*100}% 0`,g.animationValues?f.opacity=g===this?_.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:_.opacityExit:f.opacity=g===this?_.opacity!==void 0?_.opacity:"":_.opacityExit!==void 0?_.opacityExit:0;for(const A in scaleCorrectors){if(_[A]===void 0)continue;const{correct:R,applyTo:V,isCSSVariable:te}=scaleCorrectors[A],se=E==="none"?_[A]:R(_[A],g);if(V){const re=V.length;for(let ye=0;ye<re;ye++)f[V[ye]]=se}else te?this.options.visualElement.renderState.vars[A]=se:f[A]=se}this.options.layoutId&&(f.pointerEvents=g===this?resolveMotionValue(h?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(f=>f.currentAnimation?.stop()),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()}}}function updateLayout(n){n.updateLayout()}function notifyLayoutUpdate(n){const e=n.resumeFrom?.snapshot||n.snapshot;if(n.isLead()&&n.layout&&e&&n.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:o}=n.layout,{animationType:a}=n.options,c=e.source!==n.layout.source;a==="size"?eachAxis(_=>{const E=c?e.measuredBox[_]:e.layoutBox[_],T=calcLength(E);E.min=s[_].min,E.max=E.min+T}):shouldAnimatePositionOnly(a,e.layoutBox,s)&&eachAxis(_=>{const E=c?e.measuredBox[_]:e.layoutBox[_],T=calcLength(s[_]);E.max=E.min+T,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[_].max=n.relativeTarget[_].min+T)});const f=createDelta();calcBoxDelta(f,s,e.layoutBox);const h=createDelta();c?calcBoxDelta(h,n.applyTransform(o,!0),e.measuredBox):calcBoxDelta(h,s,e.layoutBox);const m=!isDeltaZero(f);let g=!1;if(!n.resumeFrom){const _=n.getClosestProjectingParent();if(_&&!_.resumeFrom){const{snapshot:E,layout:T}=_;if(E&&T){const w=createBox();calcRelativePosition(w,e.layoutBox,E.layoutBox);const A=createBox();calcRelativePosition(A,s,T.layoutBox),boxEqualsRounded(w,A)||(g=!0),_.options.layoutRoot&&(n.relativeTarget=A,n.relativeTargetOrigin=w,n.relativeParent=_)}}}n.notifyListeners("didUpdate",{layout:s,snapshot:e,delta:h,layoutDelta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:g})}else if(n.isLead()){const{onExitComplete:s}=n.options;s&&s()}n.options.transition=void 0}function propagateDirtyNodes(n){n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function cleanDirtyNodes(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function clearSnapshot(n){n.clearSnapshot()}function clearMeasurements(n){n.clearMeasurements()}function clearIsLayoutDirty(n){n.isLayoutDirty=!1}function resetTransformStyle(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function finishAnimation(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function resolveTargetDelta(n){n.resolveTargetDelta()}function calcProjection(n){n.calcProjection()}function resetSkewAndRotation(n){n.resetSkewAndRotation()}function removeLeadSnapshots(n){n.removeLeadSnapshot()}function mixAxisDelta(n,e,s){n.translate=mixNumber$1(e.translate,0,s),n.scale=mixNumber$1(e.scale,1,s),n.origin=e.origin,n.originPoint=e.originPoint}function mixAxis(n,e,s,o){n.min=mixNumber$1(e.min,s.min,o),n.max=mixNumber$1(e.max,s.max,o)}function mixBox(n,e,s,o){mixAxis(n.x,e.x,s.x,o),mixAxis(n.y,e.y,s.y,o)}function hasOpacityCrossfade(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const defaultLayoutTransition={duration:.45,ease:[.4,0,.1,1]},userAgentContains=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),roundPoint=userAgentContains("applewebkit/")&&!userAgentContains("chrome/")?Math.round:noop;function roundAxis(n){n.min=roundPoint(n.min),n.max=roundPoint(n.max)}function roundBox(n){roundAxis(n.x),roundAxis(n.y)}function shouldAnimatePositionOnly(n,e,s){return n==="position"||n==="preserve-aspect"&&!isNear(aspectRatio(e),aspectRatio(s),.2)}function checkNodeWasScrollRoot(n){return n!==n.root&&n.scroll?.wasRoot}const DocumentProjectionNode=createProjectionNode({attachResizeListener:(n,e)=>addDomEvent(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rootProjectionNode={current:void 0},HTMLProjectionNode=createProjectionNode({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!rootProjectionNode.current){const n=new DocumentProjectionNode({});n.mount(window),n.setOptions({layoutScroll:!0}),rootProjectionNode.current=n}return rootProjectionNode.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),drag={pan:{Feature:PanGesture},drag:{Feature:DragGesture,ProjectionNode:HTMLProjectionNode,MeasureLayout}};function handleHoverEvent(n,e,s){const{props:o}=n;n.animationState&&o.whileHover&&n.animationState.setActive("whileHover",s==="Start");const a="onHover"+s,c=o[a];c&&frame.postRender(()=>c(e,extractEventInfo(e)))}class HoverGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=hover(e,(s,o)=>(handleHoverEvent(this.node,o,"Start"),a=>handleHoverEvent(this.node,a,"End"))))}unmount(){}}class FocusGesture extends Feature{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pipe(addDomEvent(this.node.current,"focus",()=>this.onFocus()),addDomEvent(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function handlePressEvent(n,e,s){const{props:o}=n;if(n.current instanceof HTMLButtonElement&&n.current.disabled)return;n.animationState&&o.whileTap&&n.animationState.setActive("whileTap",s==="Start");const a="onTap"+(s==="End"?"":s),c=o[a];c&&frame.postRender(()=>c(e,extractEventInfo(e)))}class PressGesture extends Feature{mount(){const{current:e}=this.node;e&&(this.unmount=press(e,(s,o)=>(handlePressEvent(this.node,o,"Start"),(a,{success:c})=>handlePressEvent(this.node,a,c?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const observerCallbacks=new WeakMap,observers=new WeakMap,fireObserverCallback=n=>{const e=observerCallbacks.get(n.target);e&&e(n)},fireAllObserverCallbacks=n=>{n.forEach(fireObserverCallback)};function initIntersectionObserver({root:n,...e}){const s=n||document;observers.has(s)||observers.set(s,{});const o=observers.get(s),a=JSON.stringify(e);return o[a]||(o[a]=new IntersectionObserver(fireAllObserverCallbacks,{root:n,...e})),o[a]}function observeIntersection(n,e,s){const o=initIntersectionObserver(e);return observerCallbacks.set(n,s),o.observe(n),()=>{observerCallbacks.delete(n),o.unobserve(n)}}const thresholdNames={some:0,all:1};class InViewFeature extends Feature{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:o,amount:a="some",once:c}=e,f={root:s?s.current:void 0,rootMargin:o,threshold:typeof a=="number"?a:thresholdNames[a]},h=m=>{const{isIntersecting:g}=m;if(this.isInView===g||(this.isInView=g,c&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:_,onViewportLeave:E}=this.node.getProps(),T=g?_:E;T&&T(m)};return observeIntersection(this.node.current,f,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(hasViewportOptionChanged(e,s))&&this.startObserver()}unmount(){}}function hasViewportOptionChanged({viewport:n={}},{viewport:e={}}={}){return s=>n[s]!==e[s]}const gestureAnimations={inView:{Feature:InViewFeature},tap:{Feature:PressGesture},focus:{Feature:FocusGesture},hover:{Feature:HoverGesture}},layout={layout:{ProjectionNode:HTMLProjectionNode,MeasureLayout}},featureBundle={...animations,...gestureAnimations,...drag,...layout},motion=createMotionProxy(featureBundle,createDomVisualElement),findById=(n,e)=>n.find(s=>s.id===e);function findToast(n,e){const s=getToastPosition(n,e),o=s?n[s].findIndex(a=>a.id===e):-1;return{position:s,index:o}}function getToastPosition(n,e){for(const[s,o]of Object.entries(n))if(findById(o,e))return s}function getToastStyle(n){const e=n.includes("right"),s=n.includes("left");let o="center";return e&&(o="flex-end"),s&&(o="flex-start"),{display:"flex",flexDirection:"column",alignItems:o}}function getToastListStyle(n){const s=n==="top"||n==="bottom"?"0 auto":void 0,o=n.includes("top")?"env(safe-area-inset-top, 0px)":void 0,a=n.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,c=n.includes("left")?void 0:"env(safe-area-inset-right, 0px)",f=n.includes("right")?void 0:"env(safe-area-inset-left, 0px)";return{position:"fixed",zIndex:"var(--toast-z-index, 5500)",pointerEvents:"none",display:"flex",flexDirection:"column",margin:s,top:o,bottom:a,right:c,left:f}}var reactPropsRegex=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,isPropValid=memoize(function(n){return reactPropsRegex.test(n)||n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)<91}),testOmitPropsOnStringTag=isPropValid,testOmitPropsOnComponent=function(e){return e!=="theme"},getDefaultShouldForwardProp=function(e){return typeof e=="string"&&e.charCodeAt(0)>96?testOmitPropsOnStringTag:testOmitPropsOnComponent},composeShouldForwardProps=function(e,s,o){var a;if(s){var c=s.shouldForwardProp;a=e.__emotion_forwardProp&&c?function(f){return e.__emotion_forwardProp(f)&&c(f)}:c}return typeof a!="function"&&o&&(a=e.__emotion_forwardProp),a},Insertion=function(e){var s=e.cache,o=e.serialized,a=e.isStringTag;return registerStyles(s,o,a),useInsertionEffectAlwaysWithSyncFallback(function(){return insertStyles(s,o,a)}),null},createStyled=function n(e,s){var o=e.__emotion_real===e,a=o&&e.__emotion_base||e,c,f;s!==void 0&&(c=s.label,f=s.target);var h=composeShouldForwardProps(e,s,o),m=h||getDefaultShouldForwardProp(a),g=!m("as");return function(){var _=arguments,E=o&&e.__emotion_styles!==void 0?e.__emotion_styles.slice(0):[];if(c!==void 0&&E.push("label:"+c+";"),_[0]==null||_[0].raw===void 0)E.push.apply(E,_);else{var T=_[0];E.push(T[0]);for(var w=_.length,A=1;A<w;A++)E.push(_[A],T[A])}var R=withEmotionCache(function(V,te,se){var re=g&&V.as||a,ye="",D=[],ae=V;if(V.theme==null){ae={};for(var z in V)ae[z]=V[z];ae.theme=reactExports.useContext(ThemeContext)}typeof V.className=="string"?ye=getRegisteredStyles(te.registered,D,V.className):V.className!=null&&(ye=V.className+" ");var H=serializeStyles(E.concat(D),te.registered,ae);ye+=te.key+"-"+H.name,f!==void 0&&(ye+=" "+f);var X=g&&h===void 0?getDefaultShouldForwardProp(re):m,le={};for(var Z in V)g&&Z==="as"||X(Z)&&(le[Z]=V[Z]);return le.className=ye,se&&(le.ref=se),reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(Insertion,{cache:te,serialized:H,isStringTag:typeof re=="string"}),reactExports.createElement(re,le))});return R.displayName=c!==void 0?c:"Styled("+(typeof a=="string"?a:a.displayName||a.name||"Component")+")",R.defaultProps=e.defaultProps,R.__emotion_real=R,R.__emotion_base=a,R.__emotion_styles=E,R.__emotion_forwardProp=h,Object.defineProperty(R,"toString",{value:function(){return"."+f}}),R.withComponent=function(V,te){var se=n(V,_extends$1({},s,te,{shouldForwardProp:composeShouldForwardProps(R,te,!0)}));return se.apply(void 0,E)},R}},tags=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],styled$1=createStyled.bind(null);tags.forEach(function(n){styled$1[n]=styled$1(n)});const allPropNames=new Set([...propNames,"textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"]),validHTMLProps=new Set(["htmlWidth","htmlHeight","htmlSize","htmlTranslate"]);function shouldForwardProp(n){return(validHTMLProps.has(n)||!allPropNames.has(n))&&n[0]!=="_"}const emotion_styled=interopDefault(styled$1),toCSSObject=({baseStyle:n})=>e=>{const{theme:s,css:o,__css:a,sx:c,...f}=e,[h]=splitProps(f,isStyleProp),m=runIfFn$1(n,e),g=assignAfter({},a,m,compact(h),c),_=css$2(g)(e.theme);return o?[_,o]:_};function styled(n,e){const{baseStyle:s,...o}=e??{};o.shouldForwardProp||(o.shouldForwardProp=shouldForwardProp);const a=toCSSObject({baseStyle:s}),c=emotion_styled(n,o)(a);return reactExports.forwardRef(function(m,g){const{children:_,...E}=m,{colorMode:T,forced:w}=useColorMode(),A=w?T:void 0;return reactExports.createElement(c,{ref:g,"data-theme":A,...E},_)})}function factory(){const n=new Map;return new Proxy(styled,{apply(e,s,o){return styled(...o)},get(e,s){return n.has(s)||n.set(s,styled(s)),n.get(s)}})}const chakra=factory(),toastMotionVariants={initial:n=>{const{position:e}=n,s=["top","bottom"].includes(e)?"y":"x";let o=["top-right","bottom-right"].includes(e)?1:-1;return e==="bottom"&&(o=1),{opacity:0,[s]:o*24}},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},ToastComponent=reactExports.memo(n=>{const{id:e,message:s,onCloseComplete:o,onRequestRemove:a,requestClose:c=!1,position:f="bottom",duration:h=5e3,containerStyle:m,motionVariants:g=toastMotionVariants,toastSpacing:_="0.5rem"}=n,[E,T]=reactExports.useState(h),w=useIsPresent();useUpdateEffect(()=>{w||o?.()},[w]),useUpdateEffect(()=>{T(h)},[h]);const A=()=>T(null),R=()=>T(h),V=()=>{w&&a()};reactExports.useEffect(()=>{w&&c&&a()},[w,c,a]),useTimeout(V,E);const te=reactExports.useMemo(()=>({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:_,...m}),[m,_]),se=reactExports.useMemo(()=>getToastStyle(f),[f]);return jsxRuntimeExports.jsx(motion.div,{layout:!0,className:"chakra-toast",variants:g,initial:"initial",animate:"animate",exit:"exit",onHoverStart:A,onHoverEnd:R,custom:{position:f},style:se,children:jsxRuntimeExports.jsx(chakra.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:te,children:runIfFn$1(s,{id:e,onClose:V})})})});ToastComponent.displayName="ToastComponent";function forwardRef(n){return reactExports.forwardRef(n)}var reactFastCompare,hasRequiredReactFastCompare;function requireReactFastCompare(){if(hasRequiredReactFastCompare)return reactFastCompare;hasRequiredReactFastCompare=1;var n=typeof Element<"u",e=typeof Map=="function",s=typeof Set=="function",o=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function a(c,f){if(c===f)return!0;if(c&&f&&typeof c=="object"&&typeof f=="object"){if(c.constructor!==f.constructor)return!1;var h,m,g;if(Array.isArray(c)){if(h=c.length,h!=f.length)return!1;for(m=h;m--!==0;)if(!a(c[m],f[m]))return!1;return!0}var _;if(e&&c instanceof Map&&f instanceof Map){if(c.size!==f.size)return!1;for(_=c.entries();!(m=_.next()).done;)if(!f.has(m.value[0]))return!1;for(_=c.entries();!(m=_.next()).done;)if(!a(m.value[1],f.get(m.value[0])))return!1;return!0}if(s&&c instanceof Set&&f instanceof Set){if(c.size!==f.size)return!1;for(_=c.entries();!(m=_.next()).done;)if(!f.has(m.value[0]))return!1;return!0}if(o&&ArrayBuffer.isView(c)&&ArrayBuffer.isView(f)){if(h=c.length,h!=f.length)return!1;for(m=h;m--!==0;)if(c[m]!==f[m])return!1;return!0}if(c.constructor===RegExp)return c.source===f.source&&c.flags===f.flags;if(c.valueOf!==Object.prototype.valueOf&&typeof c.valueOf=="function"&&typeof f.valueOf=="function")return c.valueOf()===f.valueOf();if(c.toString!==Object.prototype.toString&&typeof c.toString=="function"&&typeof f.toString=="function")return c.toString()===f.toString();if(g=Object.keys(c),h=g.length,h!==Object.keys(f).length)return!1;for(m=h;m--!==0;)if(!Object.prototype.hasOwnProperty.call(f,g[m]))return!1;if(n&&c instanceof Element)return!1;for(m=h;m--!==0;)if(!((g[m]==="_owner"||g[m]==="__v"||g[m]==="__o")&&c.$$typeof)&&!a(c[g[m]],f[g[m]]))return!1;return!0}return c!==c&&f!==f}return reactFastCompare=function(f,h){try{return a(f,h)}catch(m){if((m.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw m}},reactFastCompare}var reactFastCompareExports=requireReactFastCompare();const isEqual=getDefaultExportFromCjs(reactFastCompareExports);function useTheme(){const n=reactExports.useContext(ThemeContext);if(!n)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return n}function useChakra(){const n=useColorMode(),e=useTheme();return{...n,theme:e}}function omitReactElements(n){return Object.fromEntries(Object.entries(n).filter(([e,s])=>s!==void 0&&e!=="children"&&!reactExports.isValidElement(s)))}function useStyleConfigImpl(n,e={}){const{styleConfig:s,...o}=e,{theme:a,colorMode:c}=useChakra(),f=n?memoizedGet$1(a,`components.${n}`):void 0,h=s||f,m=mergeWith({theme:a,colorMode:c},h?.defaultProps??{},omitReactElements(o),(_,E)=>_?void 0:E),g=reactExports.useRef({});if(h){const E=resolveStyleConfig(h)(m);isEqual(g.current,E)||(g.current=E)}return g.current}function useStyleConfig(n,e={}){return useStyleConfigImpl(n,e)}function useMultiStyleConfig(n,e={}){return useStyleConfigImpl(n,e)}const fallbackIcon={path:jsxRuntimeExports.jsxs("g",{stroke:"currentColor",strokeWidth:"1.5",children:[jsxRuntimeExports.jsx("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),jsxRuntimeExports.jsx("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),jsxRuntimeExports.jsx("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})]}),viewBox:"0 0 24 24"},Icon=forwardRef((n,e)=>{const{as:s,viewBox:o,color:a="currentColor",focusable:c=!1,children:f,className:h,__css:m,...g}=n,_=cx("chakra-icon",h),E=useStyleConfig("Icon",n),T={w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:a,...m,...E},w={ref:e,focusable:c,className:_,__css:T},A=o??fallbackIcon.viewBox;if(s&&typeof s!="string")return jsxRuntimeExports.jsx(chakra.svg,{as:s,...w,...g});const R=f??fallbackIcon.path;return jsxRuntimeExports.jsx(chakra.svg,{verticalAlign:"middle",viewBox:A,...w,...g,children:R})});Icon.displayName="Icon";function CheckIcon(n){return jsxRuntimeExports.jsx(Icon,{viewBox:"0 0 24 24",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.014,12.014,0,0,0,12,0Zm6.927,8.2-6.845,9.289a1.011,1.011,0,0,1-1.43.188L5.764,13.769a1,1,0,1,1,1.25-1.562l4.076,3.261,6.227-8.451A1,1,0,1,1,18.927,8.2Z"})})}function InfoIcon(n){return jsxRuntimeExports.jsx(Icon,{viewBox:"0 0 24 24",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm.25,5a1.5,1.5,0,1,1-1.5,1.5A1.5,1.5,0,0,1,12.25,5ZM14.5,18.5h-4a1,1,0,0,1,0-2h.75a.25.25,0,0,0,.25-.25v-4.5a.25.25,0,0,0-.25-.25H10.5a1,1,0,0,1,0-2h1a2,2,0,0,1,2,2v4.75a.25.25,0,0,0,.25.25h.75a1,1,0,1,1,0,2Z"})})}function WarningIcon(n){return jsxRuntimeExports.jsx(Icon,{viewBox:"0 0 24 24",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M11.983,0a12.206,12.206,0,0,0-8.51,3.653A11.8,11.8,0,0,0,0,12.207,11.779,11.779,0,0,0,11.8,24h.214A12.111,12.111,0,0,0,24,11.791h0A11.766,11.766,0,0,0,11.983,0ZM10.5,16.542a1.476,1.476,0,0,1,1.449-1.53h.027a1.527,1.527,0,0,1,1.523,1.47,1.475,1.475,0,0,1-1.449,1.53h-.027A1.529,1.529,0,0,1,10.5,16.542ZM11,12.5v-6a1,1,0,0,1,2,0v6a1,1,0,1,1-2,0Z"})})}const spin=keyframes$1({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Spinner=forwardRef((n,e)=>{const s=useStyleConfig("Spinner",n),{label:o="Loading...",thickness:a="2px",speed:c="0.45s",emptyColor:f="transparent",className:h,...m}=omitThemingProps(n),g=cx("chakra-spinner",h),_={display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:a,borderBottomColor:f,borderLeftColor:f,animation:`${spin} ${c} linear infinite`,...s};return jsxRuntimeExports.jsx(chakra.div,{ref:e,__css:_,className:g,...m,children:o&&jsxRuntimeExports.jsx(chakra.span,{srOnly:!0,children:o})})});Spinner.displayName="Spinner";const[AlertProvider,useAlertContext]=createContext({name:"AlertContext",hookName:"useAlertContext",providerName:"<Alert />"}),[AlertStylesProvider,useAlertStyles]=createContext({name:"AlertStylesContext",hookName:"useAlertStyles",providerName:"<Alert />"}),STATUSES={info:{icon:InfoIcon,colorScheme:"blue"},warning:{icon:WarningIcon,colorScheme:"orange"},success:{icon:CheckIcon,colorScheme:"green"},error:{icon:WarningIcon,colorScheme:"red"},loading:{icon:Spinner,colorScheme:"blue"}};function getStatusColorScheme(n){return STATUSES[n].colorScheme}function getStatusIcon(n){return STATUSES[n].icon}const Alert=forwardRef(function(e,s){const{status:o="info",addRole:a=!0,...c}=omitThemingProps(e),f=e.colorScheme??getStatusColorScheme(o),h=useMultiStyleConfig("Alert",{...e,colorScheme:f}),m={width:"100%",display:"flex",alignItems:"center",position:"relative",overflow:"hidden",...h.container};return jsxRuntimeExports.jsx(AlertProvider,{value:{status:o},children:jsxRuntimeExports.jsx(AlertStylesProvider,{value:h,children:jsxRuntimeExports.jsx(chakra.div,{"data-status":o,role:a?"alert":void 0,ref:s,...c,className:cx("chakra-alert",e.className),__css:m})})})});Alert.displayName="Alert";function AlertIcon(n){const{status:e}=useAlertContext(),s=getStatusIcon(e),o=useAlertStyles(),a=e==="loading"?o.spinner:o.icon;return jsxRuntimeExports.jsx(chakra.span,{display:"inherit","data-status":e,...n,className:cx("chakra-alert__icon",n.className),__css:a,children:n.children||jsxRuntimeExports.jsx(s,{h:"100%",w:"100%"})})}AlertIcon.displayName="AlertIcon";const AlertTitle=forwardRef(function(e,s){const o=useAlertStyles(),{status:a}=useAlertContext();return jsxRuntimeExports.jsx(chakra.div,{ref:s,"data-status":a,...e,className:cx("chakra-alert__title",e.className),__css:o.title})});AlertTitle.displayName="AlertTitle";const AlertDescription=forwardRef(function(e,s){const{status:o}=useAlertContext(),a=useAlertStyles(),c={display:"inline",...a.description};return jsxRuntimeExports.jsx(chakra.div,{ref:s,"data-status":o,...e,className:cx("chakra-alert__desc",e.className),__css:c})});AlertDescription.displayName="AlertDescription";function CloseIcon(n){return jsxRuntimeExports.jsx(Icon,{focusable:"false","aria-hidden":!0,...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M.439,21.44a1.5,1.5,0,0,0,2.122,2.121L11.823,14.3a.25.25,0,0,1,.354,0l9.262,9.263a1.5,1.5,0,1,0,2.122-2.121L14.3,12.177a.25.25,0,0,1,0-.354l9.263-9.262A1.5,1.5,0,0,0,21.439.44L12.177,9.7a.25.25,0,0,1-.354,0L2.561.44A1.5,1.5,0,0,0,.439,2.561L9.7,11.823a.25.25,0,0,1,0,.354Z"})})}const CloseButton=forwardRef(function(e,s){const o=useStyleConfig("CloseButton",e),{children:a,isDisabled:c,__css:f,...h}=omitThemingProps(e),m={outline:0,display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0};return jsxRuntimeExports.jsx(chakra.button,{type:"button","aria-label":"Close",ref:s,disabled:c,__css:{...m,...o,...f},...h,children:a||jsxRuntimeExports.jsx(CloseIcon,{width:"1em",height:"1em"})})});CloseButton.displayName="CloseButton";const Toast=n=>{const{status:e,variant:s="solid",id:o,title:a,isClosable:c,onClose:f,description:h,colorScheme:m,icon:g}=n,_=o?{root:`toast-${o}`,title:`toast-${o}-title`,description:`toast-${o}-description`}:void 0;return jsxRuntimeExports.jsxs(Alert,{addRole:!1,status:e,variant:s,id:_?.root,alignItems:"start",borderRadius:"md",boxShadow:"lg",paddingEnd:8,textAlign:"start",width:"auto",colorScheme:m,children:[jsxRuntimeExports.jsx(AlertIcon,{children:g}),jsxRuntimeExports.jsxs(chakra.div,{flex:"1",maxWidth:"100%",children:[a&&jsxRuntimeExports.jsx(AlertTitle,{id:_?.title,children:a}),h&&jsxRuntimeExports.jsx(AlertDescription,{id:_?.description,display:"block",children:h})]}),c&&jsxRuntimeExports.jsx(CloseButton,{size:"sm",onClick:f,position:"absolute",insetEnd:1,top:1})]})};function createRenderToast(n={}){const{render:e,toastComponent:s=Toast}=n;return a=>typeof e=="function"?e({...a,...n}):jsxRuntimeExports.jsx(s,{...a,...n})}const initialState={top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]},toastStore=createStore$1(initialState);function createStore$1(n){let e=n;const s=new Set,o=a=>{e=a(e),s.forEach(c=>c())};return{getState:()=>e,subscribe:a=>(s.add(a),()=>{o(()=>n),s.delete(a)}),removeToast:(a,c)=>{o(f=>({...f,[c]:f[c].filter(h=>h.id!=a)}))},notify:(a,c)=>{const f=createToast(a,c),{position:h,id:m}=f;return o(g=>{const E=h.includes("top")?[f,...g[h]??[]]:[...g[h]??[],f];return{...g,[h]:E}}),m},update:(a,c)=>{a&&o(f=>{const h={...f},{position:m,index:g}=findToast(h,a);return m&&g!==-1&&(h[m][g]={...h[m][g],...c,message:createRenderToast(c)}),h})},closeAll:({positions:a}={})=>{o(c=>(a??["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((m,g)=>(m[g]=c[g].map(_=>({..._,requestClose:!0})),m),{...c}))},close:a=>{o(c=>{const f=getToastPosition(c,a);return f?{...c,[f]:c[f].map(h=>h.id==a?{...h,requestClose:!0}:h)}:c})},isActive:a=>!!findToast(toastStore.getState(),a).position}}let counter=0;function createToast(n,e={}){counter+=1;const s=e.id??counter,o=e.position??"bottom";return{id:s,message:n,position:o,duration:e.duration,onCloseComplete:e.onCloseComplete,onRequestRemove:()=>toastStore.removeToast(String(s),o),status:e.status,requestClose:!1,containerStyle:e.containerStyle}}var reactDomExports=requireReactDom();const[PortalContextProvider,usePortalContext]=createContext({strict:!1,name:"PortalContext"}),PORTAL_CLASSNAME="chakra-portal",PORTAL_SELECTOR=".chakra-portal",Container=n=>jsxRuntimeExports.jsx("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:n.zIndex,top:0,left:0,right:0},children:n.children}),DefaultPortal=n=>{const{appendToParentPortal:e,children:s}=n,[o,a]=reactExports.useState(null),c=reactExports.useRef(null),[,f]=reactExports.useState({});reactExports.useEffect(()=>f({}),[]);const h=usePortalContext(),m=usePortalManager();useSafeLayoutEffect$1(()=>{if(!o)return;const _=o.ownerDocument,E=e?h??_.body:_.body;if(!E)return;c.current=_.createElement("div"),c.current.className=PORTAL_CLASSNAME,E.appendChild(c.current),f({});const T=c.current;return()=>{E.contains(T)&&E.removeChild(T)}},[o]);const g=m?.zIndex?jsxRuntimeExports.jsx(Container,{zIndex:m?.zIndex,children:s}):s;return c.current?reactDomExports.createPortal(jsxRuntimeExports.jsx(PortalContextProvider,{value:c.current,children:g}),c.current):jsxRuntimeExports.jsx("span",{ref:_=>{_&&a(_)}})},ContainerPortal=n=>{const{children:e,containerRef:s,appendToParentPortal:o}=n,a=s.current,c=a??(typeof window<"u"?document.body:void 0),f=reactExports.useMemo(()=>{const m=a?.ownerDocument.createElement("div");return m&&(m.className=PORTAL_CLASSNAME),m},[a]),[,h]=reactExports.useState({});return useSafeLayoutEffect$1(()=>h({}),[]),useSafeLayoutEffect$1(()=>{if(!(!f||!c))return c.appendChild(f),()=>{c.removeChild(f)}},[f,c]),c&&f?reactDomExports.createPortal(jsxRuntimeExports.jsx(PortalContextProvider,{value:o?f:null,children:e}),f):null};function Portal(n){const e={appendToParentPortal:!0,...n},{containerRef:s,...o}=e;return s?jsxRuntimeExports.jsx(ContainerPortal,{containerRef:s,...o}):jsxRuntimeExports.jsx(DefaultPortal,{...o})}Portal.className=PORTAL_CLASSNAME;Portal.selector=PORTAL_SELECTOR;Portal.displayName="Portal";const[ToastOptionProvider,useToastOptionContext]=createContext({name:"ToastOptionsContext",strict:!1}),ToastProvider=n=>{const e=reactExports.useSyncExternalStore(toastStore.subscribe,toastStore.getState,toastStore.getState),{motionVariants:s,component:o=ToastComponent,portalProps:a,animatePresenceProps:c}=n,h=Object.keys(e).map(m=>{const g=e[m];return jsxRuntimeExports.jsx("div",{role:"region","aria-live":"polite","aria-label":`Notifications-${m}`,id:`chakra-toast-manager-${m}`,style:getToastListStyle(m),children:jsxRuntimeExports.jsx(AnimatePresence,{...c,initial:!1,children:g.map(_=>jsxRuntimeExports.jsx(o,{motionVariants:s,..._},_.id))})},m)});return jsxRuntimeExports.jsx(Portal,{...a,children:h})},createProvider=n=>function({children:s,theme:o=n,toastOptions:a,...c}){return jsxRuntimeExports.jsxs(Provider,{theme:o,...c,children:[jsxRuntimeExports.jsx(ToastOptionProvider,{value:a?.defaultOptions,children:s}),jsxRuntimeExports.jsx(ToastProvider,{...a})]})},ChakraProvider=createProvider(theme),TRANSITION_EASINGS={easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},TRANSITION_VARIANTS={slideLeft:{position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},slideRight:{position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},slideUp:{position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},slideDown:{position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}}};function getSlideTransition(n){switch(n?.direction??"right"){case"right":return TRANSITION_VARIANTS.slideRight;case"left":return TRANSITION_VARIANTS.slideLeft;case"bottom":return TRANSITION_VARIANTS.slideDown;case"top":return TRANSITION_VARIANTS.slideUp;default:return TRANSITION_VARIANTS.slideRight}}const TRANSITION_DEFAULTS={enter:{duration:.2,ease:TRANSITION_EASINGS.easeOut},exit:{duration:.1,ease:TRANSITION_EASINGS.easeIn}},withDelay={enter:(n,e)=>({...n,delay:typeof e=="number"?e:e?.enter}),exit:(n,e)=>({...n,delay:typeof e=="number"?e:e?.exit})},Badge=forwardRef(function(e,s){const o=useStyleConfig("Badge",e),{className:a,...c}=omitThemingProps(e);return jsxRuntimeExports.jsx(chakra.span,{ref:s,className:cx("chakra-badge",e.className),...c,__css:{display:"inline-block",whiteSpace:"nowrap",verticalAlign:"middle",...o}})});Badge.displayName="Badge";const Box=chakra("div");Box.displayName="Box";const[ButtonGroupProvider,useButtonGroup]=createContext({strict:!1,name:"ButtonGroupContext"});function ButtonIcon(n){const{children:e,className:s,...o}=n,a=reactExports.isValidElement(e)?reactExports.cloneElement(e,{"aria-hidden":!0,focusable:!1}):e,c=cx("chakra-button__icon",s);return jsxRuntimeExports.jsx(chakra.span,{display:"inline-flex",alignSelf:"center",flexShrink:0,...o,className:c,children:a})}ButtonIcon.displayName="ButtonIcon";function ButtonSpinner(n){const{label:e,placement:s,spacing:o="0.5rem",children:a=jsxRuntimeExports.jsx(Spinner,{color:"currentColor",width:"1em",height:"1em"}),className:c,__css:f,...h}=n,m=cx("chakra-button__spinner",c),g=s==="start"?"marginEnd":"marginStart",_=reactExports.useMemo(()=>({display:"flex",alignItems:"center",position:e?"relative":"absolute",[g]:e?o:0,fontSize:"1em",lineHeight:"normal",...f}),[f,e,g,o]);return jsxRuntimeExports.jsx(chakra.div,{className:m,...h,__css:_,children:a})}ButtonSpinner.displayName="ButtonSpinner";function useButtonType(n){const[e,s]=reactExports.useState(!n);return{ref:reactExports.useCallback(c=>{c&&s(c.tagName==="BUTTON")},[]),type:e?"button":void 0}}const Button=forwardRef((n,e)=>{const s=useButtonGroup(),o=useStyleConfig("Button",{...s,...n}),{isDisabled:a=s?.isDisabled,isLoading:c,isActive:f,children:h,leftIcon:m,rightIcon:g,loadingText:_,iconSpacing:E="0.5rem",type:T,spinner:w,spinnerPlacement:A="start",className:R,as:V,shouldWrapChildren:te,...se}=omitThemingProps(n),re=reactExports.useMemo(()=>{const z={...o?._focus,zIndex:1};return{display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none",...o,...!!s&&{_focus:z}}},[o,s]),{ref:ye,type:D}=useButtonType(V),ae={rightIcon:g,leftIcon:m,iconSpacing:E,children:h,shouldWrapChildren:te};return jsxRuntimeExports.jsxs(chakra.button,{disabled:a||c,ref:useMergeRefs$1(e,ye),as:V,type:T??D,"data-active":dataAttr(f),"data-loading":dataAttr(c),__css:re,className:cx("chakra-button",R),...se,children:[c&&A==="start"&&jsxRuntimeExports.jsx(ButtonSpinner,{className:"chakra-button__spinner--start",label:_,placement:"start",spacing:E,children:w}),c?_||jsxRuntimeExports.jsx(chakra.span,{opacity:0,children:jsxRuntimeExports.jsx(ButtonContent,{...ae})}):jsxRuntimeExports.jsx(ButtonContent,{...ae}),c&&A==="end"&&jsxRuntimeExports.jsx(ButtonSpinner,{className:"chakra-button__spinner--end",label:_,placement:"end",spacing:E,children:w})]})});Button.displayName="Button";function ButtonContent(n){const{leftIcon:e,rightIcon:s,children:o,iconSpacing:a,shouldWrapChildren:c}=n;return c?jsxRuntimeExports.jsxs("span",{style:{display:"contents"},children:[e&&jsxRuntimeExports.jsx(ButtonIcon,{marginEnd:a,children:e}),o,s&&jsxRuntimeExports.jsx(ButtonIcon,{marginStart:a,children:s})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[e&&jsxRuntimeExports.jsx(ButtonIcon,{marginEnd:a,children:e}),o,s&&jsxRuntimeExports.jsx(ButtonIcon,{marginStart:a,children:s})]})}const IconButton=forwardRef((n,e)=>{const{icon:s,children:o,isRound:a,"aria-label":c,...f}=n,h=s||o,m=reactExports.isValidElement(h)?reactExports.cloneElement(h,{"aria-hidden":!0,focusable:!1}):null;return jsxRuntimeExports.jsx(Button,{px:"0",py:"0",borderRadius:a?"full":void 0,ref:e,"aria-label":c,...f,children:m})});IconButton.displayName="IconButton";const Center=chakra("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center"}});Center.displayName="Center";const centerStyles={horizontal:{insetStart:"50%",transform:"translateX(-50%)"},vertical:{top:"50%",transform:"translateY(-50%)"},both:{insetStart:"50%",top:"50%",transform:"translate(-50%, -50%)"}};forwardRef(function(e,s){const{axis:o="both",...a}=e;return jsxRuntimeExports.jsx(chakra.div,{ref:s,__css:centerStyles[o],...a,position:"absolute"})});var isDom=()=>typeof document<"u",hasSetup=!1,modality=null,hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1,handlers=new Set;function trigger(n,e){handlers.forEach(s=>s(n,e))}var isMac=typeof window<"u"&&window.navigator!=null?/^Mac/.test(window.navigator.platform):!1;function isValidKey(n){return!(n.metaKey||!isMac&&n.altKey||n.ctrlKey||n.key==="Control"||n.key==="Shift"||n.key==="Meta")}function onKeyboardEvent(n){hasEventBeforeFocus=!0,isValidKey(n)&&(modality="keyboard",trigger("keyboard",n))}function onPointerEvent(n){if(modality="pointer",n.type==="mousedown"||n.type==="pointerdown"){hasEventBeforeFocus=!0;const e=n.composedPath?n.composedPath()[0]:n.target;let s=!1;try{s=e.matches(":focus-visible")}catch{}if(s)return;trigger("pointer",n)}}function isVirtualClick(n){return n.mozInputSource===0&&n.isTrusted?!0:n.detail===0&&!n.pointerType}function onClickEvent(n){isVirtualClick(n)&&(hasEventBeforeFocus=!0,modality="virtual")}function onWindowFocus$1(n){n.target===window||n.target===document||n.target instanceof Element&&n.target.hasAttribute("tabindex")||(!hasEventBeforeFocus&&!hasBlurredWindowRecently&&(modality="virtual",trigger("virtual",n)),hasEventBeforeFocus=!1,hasBlurredWindowRecently=!1)}function onWindowBlur$1(){hasEventBeforeFocus=!1,hasBlurredWindowRecently=!0}function isFocusVisible(){return modality!=="pointer"}function setupGlobalFocusEvents(){if(!isDom()||hasSetup)return;const{focus:n}=HTMLElement.prototype;HTMLElement.prototype.focus=function(...s){hasEventBeforeFocus=!0,n.apply(this,s)},document.addEventListener("keydown",onKeyboardEvent,!0),document.addEventListener("keyup",onKeyboardEvent,!0),document.addEventListener("click",onClickEvent,!0),window.addEventListener("focus",onWindowFocus$1,!0),window.addEventListener("blur",onWindowBlur$1,!1),typeof PointerEvent<"u"?(document.addEventListener("pointerdown",onPointerEvent,!0),document.addEventListener("pointermove",onPointerEvent,!0),document.addEventListener("pointerup",onPointerEvent,!0)):(document.addEventListener("mousedown",onPointerEvent,!0),document.addEventListener("mousemove",onPointerEvent,!0),document.addEventListener("mouseup",onPointerEvent,!0)),hasSetup=!0}function trackFocusVisible(n){setupGlobalFocusEvents(),n(isFocusVisible());const e=()=>n(isFocusVisible());return handlers.add(e),()=>{handlers.delete(e)}}const[FormControlStylesProvider,useFormControlStyles]=createContext({name:"FormControlStylesContext",errorMessage:`useFormControlStyles returned is 'undefined'. Seems you forgot to wrap the components in "<FormControl />" `}),[FormControlProvider,useFormControlContext]=createContext({strict:!1,name:"FormControlContext"});function useFormControlProvider(n){const{id:e,isRequired:s,isInvalid:o,isDisabled:a,isReadOnly:c,...f}=n,h=reactExports.useId(),m=e||`field-${h}`,g=`${m}-label`,_=`${m}-feedback`,E=`${m}-helptext`,[T,w]=reactExports.useState(!1),[A,R]=reactExports.useState(!1),[V,te]=reactExports.useState(!1),se=reactExports.useCallback((z={},H=null)=>({id:E,...z,ref:mergeRefs(H,X=>{X&&R(!0)})}),[E]),re=reactExports.useCallback((z={},H=null)=>({...z,ref:H,"data-focus":dataAttr(V),"data-disabled":dataAttr(a),"data-invalid":dataAttr(o),"data-readonly":dataAttr(c),id:z.id!==void 0?z.id:g,htmlFor:z.htmlFor!==void 0?z.htmlFor:m}),[m,a,V,o,c,g]),ye=reactExports.useCallback((z={},H=null)=>({id:_,...z,ref:mergeRefs(H,X=>{X&&w(!0)}),"aria-live":"polite"}),[_]),D=reactExports.useCallback((z={},H=null)=>({...z,...f,ref:H,role:"group","data-focus":dataAttr(V),"data-disabled":dataAttr(a),"data-invalid":dataAttr(o),"data-readonly":dataAttr(c)}),[f,a,V,o,c]),ae=reactExports.useCallback((z={},H=null)=>({...z,ref:H,role:"presentation","aria-hidden":!0,children:z.children||"*"}),[]);return{isRequired:!!s,isInvalid:!!o,isReadOnly:!!c,isDisabled:!!a,isFocused:!!V,onFocus:()=>te(!0),onBlur:()=>te(!1),hasFeedbackText:T,setHasFeedbackText:w,hasHelpText:A,setHasHelpText:R,id:m,labelId:g,feedbackId:_,helpTextId:E,htmlProps:f,getHelpTextProps:se,getErrorMessageProps:ye,getRootProps:D,getLabelProps:re,getRequiredIndicatorProps:ae}}const FormControl=forwardRef(function(e,s){const o=useMultiStyleConfig("Form",e),a=omitThemingProps(e),{getRootProps:c,htmlProps:f,...h}=useFormControlProvider(a),m=cx("chakra-form-control",e.className);return jsxRuntimeExports.jsx(FormControlProvider,{value:h,children:jsxRuntimeExports.jsx(FormControlStylesProvider,{value:o,children:jsxRuntimeExports.jsx(chakra.div,{...c({},s),className:m,__css:o.container})})})});FormControl.displayName="FormControl";const FormHelperText=forwardRef(function(e,s){const o=useFormControlContext(),a=useFormControlStyles(),c=cx("chakra-form__helper-text",e.className);return jsxRuntimeExports.jsx(chakra.div,{...o?.getHelpTextProps(e,s),__css:a.helperText,className:c})});FormHelperText.displayName="FormHelperText";function useFormControl(n){const{isDisabled:e,isInvalid:s,isReadOnly:o,isRequired:a,...c}=useFormControlProps(n);return{...c,disabled:e,readOnly:o,required:a,"aria-invalid":ariaAttr(s),"aria-required":ariaAttr(a),"aria-readonly":ariaAttr(o)}}function useFormControlProps(n){const e=useFormControlContext(),{id:s,disabled:o,readOnly:a,required:c,isRequired:f,isInvalid:h,isReadOnly:m,isDisabled:g,onFocus:_,onBlur:E,...T}=n,w=n["aria-describedby"]?[n["aria-describedby"]]:[];return e?.hasFeedbackText&&e?.isInvalid&&w.push(e.feedbackId),e?.hasHelpText&&w.push(e.helpTextId),{...T,"aria-describedby":w.join(" ")||void 0,id:s??e?.id,isDisabled:o??g??e?.isDisabled,isReadOnly:a??m??e?.isReadOnly,isRequired:c??f??e?.isRequired,isInvalid:h??e?.isInvalid,onFocus:callAllHandlers(e?.onFocus,_),onBlur:callAllHandlers(e?.onBlur,E)}}const visuallyHiddenStyle={border:"0",clip:"rect(0, 0, 0, 0)",height:"1px",width:"1px",margin:"-1px",padding:"0",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"};function useCheckbox(n={}){const e=useFormControlProps(n),{isDisabled:s,isReadOnly:o,isRequired:a,isInvalid:c,id:f,onBlur:h,onFocus:m,"aria-describedby":g}=e,{defaultChecked:_,isChecked:E,isFocusable:T,onChange:w,isIndeterminate:A,name:R,value:V,tabIndex:te=void 0,"aria-label":se,"aria-labelledby":re,"aria-invalid":ye,...D}=n,ae=omit(D,["isDisabled","isReadOnly","isRequired","isInvalid","id","onBlur","onFocus","aria-describedby"]),z=useCallbackRef$1(w),H=useCallbackRef$1(h),X=useCallbackRef$1(m),[le,Z]=reactExports.useState(!1),[ne,W]=reactExports.useState(!1),[xe,de]=reactExports.useState(!1),oe=reactExports.useRef(!1);reactExports.useEffect(()=>trackFocusVisible(Ge=>{oe.current=Ge}),[]);const _e=reactExports.useRef(null),[Re,Ie]=reactExports.useState(!0),[he,be]=reactExports.useState(!!_),Se=E!==void 0,Ae=Se?E:he,Be=reactExports.useCallback(Ge=>{if(o||s){Ge.preventDefault();return}Se||be(Ae?Ge.currentTarget.checked:A?!0:Ge.currentTarget.checked),z?.(Ge)},[o,s,Ae,Se,A,z]);useSafeLayoutEffect$1(()=>{_e.current&&(_e.current.indeterminate=!!A)},[A]),useUpdateEffect(()=>{s&&Z(!1)},[s,Z]),useSafeLayoutEffect$1(()=>{const Ge=_e.current;if(!Ge?.form)return;const ln=()=>{be(!!_)};return Ge.form.addEventListener("reset",ln),()=>Ge.form?.removeEventListener("reset",ln)},[]);const Ue=s&&!T,qe=reactExports.useCallback(Ge=>{Ge.key===" "&&de(!0)},[de]),Xe=reactExports.useCallback(Ge=>{Ge.key===" "&&de(!1)},[de]);useSafeLayoutEffect$1(()=>{if(!_e.current)return;_e.current.checked!==Ae&&be(_e.current.checked)},[_e.current]);const Ke=reactExports.useCallback((Ge={},ln=null)=>{const kt=Ft=>{le&&Ft.preventDefault(),de(!0)};return{...Ge,ref:ln,"data-active":dataAttr(xe),"data-hover":dataAttr(ne),"data-checked":dataAttr(Ae),"data-focus":dataAttr(le),"data-focus-visible":dataAttr(le&&oe.current),"data-indeterminate":dataAttr(A),"data-disabled":dataAttr(s),"data-invalid":dataAttr(c),"data-readonly":dataAttr(o),"aria-hidden":!0,onMouseDown:callAllHandlers(Ge.onMouseDown,kt),onMouseUp:callAllHandlers(Ge.onMouseUp,()=>de(!1)),onMouseEnter:callAllHandlers(Ge.onMouseEnter,()=>W(!0)),onMouseLeave:callAllHandlers(Ge.onMouseLeave,()=>W(!1))}},[xe,Ae,s,le,ne,A,c,o]),Ze=reactExports.useCallback((Ge={},ln=null)=>({...Ge,ref:ln,"data-active":dataAttr(xe),"data-hover":dataAttr(ne),"data-checked":dataAttr(Ae),"data-focus":dataAttr(le),"data-focus-visible":dataAttr(le&&oe.current),"data-indeterminate":dataAttr(A),"data-disabled":dataAttr(s),"data-invalid":dataAttr(c),"data-readonly":dataAttr(o)}),[xe,Ae,s,le,ne,A,c,o]),it=reactExports.useCallback((Ge={},ln=null)=>({...ae,...Ge,ref:mergeRefs(ln,kt=>{kt&&Ie(kt.tagName==="LABEL")}),onClick:callAllHandlers(Ge.onClick,()=>{Re||(_e.current?.click(),requestAnimationFrame(()=>{_e.current?.focus({preventScroll:!0})}))}),"data-disabled":dataAttr(s),"data-checked":dataAttr(Ae),"data-invalid":dataAttr(c)}),[ae,s,Ae,c,Re]),wn=reactExports.useCallback((Ge={},ln=null)=>({...Ge,ref:mergeRefs(_e,ln),type:"checkbox",name:R,value:V,id:f,tabIndex:te,onChange:callAllHandlers(Ge.onChange,Be),onBlur:callAllHandlers(Ge.onBlur,H,()=>Z(!1)),onFocus:callAllHandlers(Ge.onFocus,X,()=>Z(!0)),onKeyDown:callAllHandlers(Ge.onKeyDown,qe),onKeyUp:callAllHandlers(Ge.onKeyUp,Xe),required:a,checked:Ae,disabled:Ue,readOnly:o,"aria-label":se,"aria-labelledby":re,"aria-invalid":ye?!!ye:c,"aria-describedby":g,"aria-disabled":s,"aria-checked":A?"mixed":Ae,style:visuallyHiddenStyle}),[R,V,f,te,Be,H,X,qe,Xe,a,Ae,Ue,o,se,re,ye,c,g,s,A]),yn=reactExports.useCallback((Ge={},ln=null)=>({...Ge,ref:ln,onMouseDown:callAllHandlers(Ge.onMouseDown,stopEvent),"data-disabled":dataAttr(s),"data-checked":dataAttr(Ae),"data-invalid":dataAttr(c)}),[Ae,s,c]);return{state:{isInvalid:c,isFocused:le,isChecked:Ae,isActive:xe,isHovered:ne,isIndeterminate:A,isDisabled:s,isReadOnly:o,isRequired:a},getRootProps:it,getCheckboxProps:Ke,getIndicatorProps:Ze,getInputProps:wn,getLabelProps:yn,htmlProps:ae}}function stopEvent(n){n.preventDefault(),n.stopPropagation()}function _objectWithoutPropertiesLoose$1(n,e){if(n==null)return{};var s={};for(var o in n)if({}.hasOwnProperty.call(n,o)){if(e.indexOf(o)!==-1)continue;s[o]=n[o]}return s}var FOCUS_GROUP="data-focus-lock",FOCUS_DISABLED="data-focus-lock-disabled",FOCUS_ALLOW="data-no-focus-lock",FOCUS_AUTO="data-autofocus-inside",FOCUS_NO_AUTOFOCUS="data-no-autofocus";function assignRef(n,e){return typeof n=="function"?n(e):n&&(n.current=e),n}function useCallbackRef(n,e){var s=reactExports.useState(function(){return{value:n,callback:e,facade:{get current(){return s.value},set current(o){var a=s.value;a!==o&&(s.value=o,s.callback(o,a))}}}})[0];return s.callback=e,s.facade}var useIsomorphicLayoutEffect=typeof window<"u"?reactExports.useLayoutEffect:reactExports.useEffect,currentValues=new WeakMap;function useMergeRefs(n,e){var s=useCallbackRef(null,function(o){return n.forEach(function(a){return assignRef(a,o)})});return useIsomorphicLayoutEffect(function(){var o=currentValues.get(s);if(o){var a=new Set(o),c=new Set(n),f=s.current;a.forEach(function(h){c.has(h)||assignRef(h,null)}),c.forEach(function(h){a.has(h)||assignRef(h,f)})}currentValues.set(s,n)},[n]),s}var hiddenGuard={width:"1px",height:"0px",padding:0,overflow:"hidden",position:"fixed",top:"1px",left:"1px"},__assign=function(){return __assign=Object.assign||function(e){for(var s,o=1,a=arguments.length;o<a;o++){s=arguments[o];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c])}return e},__assign.apply(this,arguments)};function __rest(n,e){var s={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&e.indexOf(o)<0&&(s[o]=n[o]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(n);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(n,o[a])&&(s[o[a]]=n[o[a]]);return s}function __spreadArray(n,e,s){if(s||arguments.length===2)for(var o=0,a=e.length,c;o<a;o++)(c||!(o in e))&&(c||(c=Array.prototype.slice.call(e,0,o)),c[o]=e[o]);return n.concat(c||Array.prototype.slice.call(e))}typeof SuppressedError=="function"&&SuppressedError;function ItoI(n){return n}function innerCreateMedium(n,e){e===void 0&&(e=ItoI);var s=[],o=!1,a={read:function(){if(o)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return s.length?s[s.length-1]:n},useMedium:function(c){var f=e(c,o);return s.push(f),function(){s=s.filter(function(h){return h!==f})}},assignSyncMedium:function(c){for(o=!0;s.length;){var f=s;s=[],f.forEach(c)}s={push:function(h){return c(h)},filter:function(){return s}}},assignMedium:function(c){o=!0;var f=[];if(s.length){var h=s;s=[],h.forEach(c),f=s}var m=function(){var _=f;f=[],_.forEach(c)},g=function(){return Promise.resolve().then(m)};g(),s={push:function(_){f.push(_),g()},filter:function(_){return f=f.filter(_),s}}}};return a}function createMedium(n,e){return e===void 0&&(e=ItoI),innerCreateMedium(n,e)}function createSidecarMedium(n){n===void 0&&(n={});var e=innerCreateMedium(null);return e.options=__assign({async:!0,ssr:!1},n),e}var SideCar$1=function(n){var e=n.sideCar,s=__rest(n,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var o=e.read();if(!o)throw new Error("Sidecar medium not found");return reactExports.createElement(o,__assign({},s))};SideCar$1.isSideCarExport=!0;function exportSidecar(n,e){return n.useMedium(e),SideCar$1}var mediumFocus=createMedium({},function(n){var e=n.target,s=n.currentTarget;return{target:e,currentTarget:s}}),mediumBlur=createMedium(),mediumEffect=createMedium(),mediumSidecar=createSidecarMedium({async:!0,ssr:typeof document<"u"}),focusScope=reactExports.createContext(void 0),emptyArray=[],FocusLock$1=reactExports.forwardRef(function(e,s){var o,a=reactExports.useState(),c=a[0],f=a[1],h=reactExports.useRef(),m=reactExports.useRef(!1),g=reactExports.useRef(null),_=reactExports.useState({}),E=_[1],T=e.children,w=e.disabled,A=w===void 0?!1:w,R=e.noFocusGuards,V=R===void 0?!1:R,te=e.persistentFocus,se=te===void 0?!1:te,re=e.crossFrame,ye=re===void 0?!0:re,D=e.autoFocus,ae=D===void 0?!0:D;e.allowTextSelection;var z=e.group,H=e.className,X=e.whiteList,le=e.hasPositiveIndices,Z=e.shards,ne=Z===void 0?emptyArray:Z,W=e.as,xe=W===void 0?"div":W,de=e.lockProps,oe=de===void 0?{}:de,_e=e.sideCar,Re=e.returnFocus,Ie=Re===void 0?!1:Re,he=e.focusOptions,be=e.onActivation,Se=e.onDeactivation,Ae=reactExports.useState({}),Be=Ae[0],Ue=reactExports.useCallback(function(kt){var Ft=kt.captureFocusRestore;if(!g.current){var lr,Fn=(lr=document)==null?void 0:lr.activeElement;g.current=Fn,Fn!==document.body&&(g.current=Ft(Fn))}h.current&&be&&be(h.current),m.current=!0,E()},[be]),qe=reactExports.useCallback(function(){m.current=!1,Se&&Se(h.current),E()},[Se]),Xe=reactExports.useCallback(function(kt){var Ft=g.current;if(Ft){var lr=(typeof Ft=="function"?Ft():Ft)||document.body,Fn=typeof Ie=="function"?Ie(lr):Ie;if(Fn){var Hn=typeof Fn=="object"?Fn:void 0;g.current=null,kt?Promise.resolve().then(function(){return lr.focus(Hn)}):lr.focus(Hn)}}},[Ie]),Ke=reactExports.useCallback(function(kt){m.current&&mediumFocus.useMedium(kt)},[]),Ze=mediumBlur.useMedium,it=reactExports.useCallback(function(kt){h.current!==kt&&(h.current=kt,f(kt))},[]),wn=_extends$1((o={},o[FOCUS_DISABLED]=A&&"disabled",o[FOCUS_GROUP]=z,o),oe),yn=V!==!0,Mt=yn&&V!=="tail",Ge=useMergeRefs([s,it]),ln=reactExports.useMemo(function(){return{observed:h,shards:ne,enabled:!A,active:m.current}},[A,m.current,ne,c]);return React.createElement(reactExports.Fragment,null,yn&&[React.createElement("div",{key:"guard-first","data-focus-guard":!0,tabIndex:A?-1:0,style:hiddenGuard}),le?React.createElement("div",{key:"guard-nearest","data-focus-guard":!0,tabIndex:A?-1:1,style:hiddenGuard}):null],!A&&React.createElement(_e,{id:Be,sideCar:mediumSidecar,observed:c,disabled:A,persistentFocus:se,crossFrame:ye,autoFocus:ae,whiteList:X,shards:ne,onActivation:Ue,onDeactivation:qe,returnFocus:Xe,focusOptions:he,noFocusGuards:V}),React.createElement(xe,_extends$1({ref:Ge},wn,{className:H,onBlur:Ze,onFocus:Ke}),React.createElement(focusScope.Provider,{value:ln},T)),Mt&&React.createElement("div",{"data-focus-guard":!0,tabIndex:A?-1:0,style:hiddenGuard}))});FocusLock$1.propTypes={};function _setPrototypeOf(n,e){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,o){return s.__proto__=o,s},_setPrototypeOf(n,e)}function _inheritsLoose(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,_setPrototypeOf(n,e)}function _typeof(n){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(n)}function toPrimitive(n,e){if(_typeof(n)!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,e);if(_typeof(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function toPropertyKey(n){var e=toPrimitive(n,"string");return _typeof(e)=="symbol"?e:e+""}function _defineProperty$1(n,e,s){return(e=toPropertyKey(e))in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function withSideEffect(n,e){function s(o){return o.displayName||o.name||"Component"}return function(a){var c=[],f;function h(){f=n(c.map(function(g){return g.props})),e(f)}var m=(function(g){_inheritsLoose(_,g);function _(){return g.apply(this,arguments)||this}_.peek=function(){return f};var E=_.prototype;return E.componentDidMount=function(){c.push(this),h()},E.componentDidUpdate=function(){h()},E.componentWillUnmount=function(){var w=c.indexOf(this);c.splice(w,1),h()},E.render=function(){return React.createElement(a,this.props)},_})(reactExports.PureComponent);return _defineProperty$1(m,"displayName","SideEffect("+s(a)+")"),m}}var toArray=function(n){for(var e=Array(n.length),s=0;s<n.length;++s)e[s]=n[s];return e},asArray=function(n){return Array.isArray(n)?n:[n]},getFirst=function(n){return Array.isArray(n)?n[0]:n},isElementHidden=function(n){if(n.nodeType!==Node.ELEMENT_NODE)return!1;var e=window.getComputedStyle(n,null);return!e||!e.getPropertyValue?!1:e.getPropertyValue("display")==="none"||e.getPropertyValue("visibility")==="hidden"},getParentNode=function(n){return n.parentNode&&n.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE?n.parentNode.host:n.parentNode},isTopNode=function(n){return n===document||n&&n.nodeType===Node.DOCUMENT_NODE},isInert=function(n){return n.hasAttribute("inert")},isVisibleUncached=function(n,e){return!n||isTopNode(n)||!isElementHidden(n)&&!isInert(n)&&e(getParentNode(n))},isVisibleCached=function(n,e){var s=n.get(e);if(s!==void 0)return s;var o=isVisibleUncached(e,isVisibleCached.bind(void 0,n));return n.set(e,o),o},isAutoFocusAllowedUncached=function(n,e){return n&&!isTopNode(n)?isAutoFocusAllowed(n)?e(getParentNode(n)):!1:!0},isAutoFocusAllowedCached=function(n,e){var s=n.get(e);if(s!==void 0)return s;var o=isAutoFocusAllowedUncached(e,isAutoFocusAllowedCached.bind(void 0,n));return n.set(e,o),o},getDataset=function(n){return n.dataset},isHTMLButtonElement=function(n){return n.tagName==="BUTTON"},isHTMLInputElement=function(n){return n.tagName==="INPUT"},isRadioElement=function(n){return isHTMLInputElement(n)&&n.type==="radio"},notHiddenInput=function(n){return!((isHTMLInputElement(n)||isHTMLButtonElement(n))&&(n.type==="hidden"||n.disabled))},isAutoFocusAllowed=function(n){var e=n.getAttribute(FOCUS_NO_AUTOFOCUS);return![!0,"true",""].includes(e)},isGuard=function(n){var e;return!!(n&&(!((e=getDataset(n))===null||e===void 0)&&e.focusGuard))},isNotAGuard=function(n){return!isGuard(n)},isDefined=function(n){return!!n},tabSort=function(n,e){var s=Math.max(0,n.tabIndex),o=Math.max(0,e.tabIndex),a=s-o,c=n.index-e.index;if(a){if(!s)return 1;if(!o)return-1}return a||c},getTabIndex=function(n){return n.tabIndex<0&&!n.hasAttribute("tabindex")?0:n.tabIndex},orderByTabIndex=function(n,e,s){return toArray(n).map(function(o,a){var c=getTabIndex(o);return{node:o,index:a,tabIndex:s&&c===-1?(o.dataset||{}).focusGuard?0:-1:c}}).filter(function(o){return!e||o.tabIndex>=0}).sort(tabSort)},tabbables=["button:enabled","select:enabled","textarea:enabled","input:enabled","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[tabindex]","[contenteditable]","[autofocus]"],queryTabbables=tabbables.join(","),queryGuardTabbables="".concat(queryTabbables,", [data-focus-guard]"),getFocusablesWithShadowDom=function(n,e){return toArray((n.shadowRoot||n).children).reduce(function(s,o){return s.concat(o.matches(e?queryGuardTabbables:queryTabbables)?[o]:[],getFocusablesWithShadowDom(o))},[])},getFocusablesWithIFrame=function(n,e){var s;return n instanceof HTMLIFrameElement&&(!((s=n.contentDocument)===null||s===void 0)&&s.body)?getFocusables([n.contentDocument.body],e):[n]},getFocusables=function(n,e){return n.reduce(function(s,o){var a,c=getFocusablesWithShadowDom(o,e),f=(a=[]).concat.apply(a,c.map(function(h){return getFocusablesWithIFrame(h,e)}));return s.concat(f,o.parentNode?toArray(o.parentNode.querySelectorAll(queryTabbables)).filter(function(h){return h===o}):[])},[])},getParentAutofocusables=function(n){var e=n.querySelectorAll("[".concat(FOCUS_AUTO,"]"));return toArray(e).map(function(s){return getFocusables([s])}).reduce(function(s,o){return s.concat(o)},[])},filterFocusable=function(n,e){return toArray(n).filter(function(s){return isVisibleCached(e,s)}).filter(function(s){return notHiddenInput(s)})},filterAutoFocusable=function(n,e){return e===void 0&&(e=new Map),toArray(n).filter(function(s){return isAutoFocusAllowedCached(e,s)})},getTabbableNodes=function(n,e,s){return orderByTabIndex(filterFocusable(getFocusables(n,s),e),!0,s)},getFocusableNodes=function(n,e){return orderByTabIndex(filterFocusable(getFocusables(n),e),!1)},parentAutofocusables=function(n,e){return filterFocusable(getParentAutofocusables(n),e)},contains=function(n,e){return n.shadowRoot?contains(n.shadowRoot,e):Object.getPrototypeOf(n).contains!==void 0&&Object.getPrototypeOf(n).contains.call(n,e)?!0:toArray(n.children).some(function(s){var o;if(s instanceof HTMLIFrameElement){var a=(o=s.contentDocument)===null||o===void 0?void 0:o.body;return a?contains(a,e):!1}return contains(s,e)})},filterNested=function(n){for(var e=new Set,s=n.length,o=0;o<s;o+=1)for(var a=o+1;a<s;a+=1){var c=n[o].compareDocumentPosition(n[a]);(c&Node.DOCUMENT_POSITION_CONTAINED_BY)>0&&e.add(a),(c&Node.DOCUMENT_POSITION_CONTAINS)>0&&e.add(o)}return n.filter(function(f,h){return!e.has(h)})},getTopParent=function(n){return n.parentNode?getTopParent(n.parentNode):n},getAllAffectedNodes=function(n){var e=asArray(n);return e.filter(Boolean).reduce(function(s,o){var a=o.getAttribute(FOCUS_GROUP);return s.push.apply(s,a?filterNested(toArray(getTopParent(o).querySelectorAll("[".concat(FOCUS_GROUP,'="').concat(a,'"]:not([').concat(FOCUS_DISABLED,'="disabled"])')))):[o]),s},[])},safeProbe=function(n){try{return n()}catch{return}},getActiveElement=function(n){if(n===void 0&&(n=document),!(!n||!n.activeElement)){var e=n.activeElement;return e.shadowRoot?getActiveElement(e.shadowRoot):e instanceof HTMLIFrameElement&&safeProbe(function(){return e.contentWindow.document})?getActiveElement(e.contentWindow.document):e}},focusInFrame=function(n,e){return n===e},focusInsideIframe=function(n,e){return!!toArray(n.querySelectorAll("iframe")).some(function(s){return focusInFrame(s,e)})},focusInside=function(n,e){return e===void 0&&(e=getActiveElement(getFirst(n).ownerDocument)),!e||e.dataset&&e.dataset.focusGuard?!1:getAllAffectedNodes(n).some(function(s){return contains(s,e)||focusInsideIframe(s,e)})},focusIsHidden=function(n){n===void 0&&(n=document);var e=getActiveElement(n);return e?toArray(n.querySelectorAll("[".concat(FOCUS_ALLOW,"]"))).some(function(s){return contains(s,e)}):!1},findSelectedRadio=function(n,e){return e.filter(isRadioElement).filter(function(s){return s.name===n.name}).filter(function(s){return s.checked})[0]||n},correctNode=function(n,e){return isRadioElement(n)&&n.name?findSelectedRadio(n,e):n},correctNodes=function(n){var e=new Set;return n.forEach(function(s){return e.add(correctNode(s,n))}),n.filter(function(s){return e.has(s)})},pickFirstFocus=function(n){return n[0]&&n.length>1?correctNode(n[0],n):n[0]},pickFocusable=function(n,e){return n.indexOf(correctNode(e,n))},NEW_FOCUS="NEW_FOCUS",newFocus=function(n,e,s,o,a){var c=n.length,f=n[0],h=n[c-1],m=isGuard(o);if(!(o&&n.indexOf(o)>=0)){var g=o!==void 0?s.indexOf(o):-1,_=a?s.indexOf(a):g,E=a?n.indexOf(a):-1;if(g===-1)return E!==-1?E:NEW_FOCUS;if(E===-1)return NEW_FOCUS;var T=g-_,w=s.indexOf(f),A=s.indexOf(h),R=correctNodes(s),V=o!==void 0?R.indexOf(o):-1,te=a?R.indexOf(a):V,se=R.filter(function(H){return H.tabIndex>=0}),re=o!==void 0?se.indexOf(o):-1,ye=a?se.indexOf(a):re,D=re>=0&&ye>=0?ye-re:te-V;if(!T&&E>=0||e.length===0)return E;var ae=pickFocusable(n,e[0]),z=pickFocusable(n,e[e.length-1]);if(g<=w&&m&&Math.abs(T)>1)return z;if(g>=A&&m&&Math.abs(T)>1)return ae;if(T&&Math.abs(D)>1)return E;if(g<=w)return z;if(g>A)return ae;if(T)return Math.abs(T)>1?E:(c+E+T)%c}},findAutoFocused=function(n){return function(e){var s,o=(s=getDataset(e))===null||s===void 0?void 0:s.autofocus;return e.autofocus||o!==void 0&&o!=="false"||n.indexOf(e)>=0}},pickAutofocus=function(n,e,s){var o=n.map(function(c){var f=c.node;return f}),a=filterAutoFocusable(o.filter(findAutoFocused(s)));return a&&a.length?pickFirstFocus(a):pickFirstFocus(filterAutoFocusable(e))},getParents=function(n,e){return e===void 0&&(e=[]),e.push(n),n.parentNode&&getParents(n.parentNode.host||n.parentNode,e),e},getCommonParent=function(n,e){for(var s=getParents(n),o=getParents(e),a=0;a<s.length;a+=1){var c=s[a];if(o.indexOf(c)>=0)return c}return!1},getTopCommonParent=function(n,e,s){var o=asArray(n),a=asArray(e),c=o[0],f=!1;return a.filter(Boolean).forEach(function(h){f=getCommonParent(f||h,h)||f,s.filter(Boolean).forEach(function(m){var g=getCommonParent(c,m);g&&(!f||contains(g,f)?f=g:f=getCommonParent(g,f))})}),f},allParentAutofocusables=function(n,e){return n.reduce(function(s,o){return s.concat(parentAutofocusables(o,e))},[])},reorderNodes=function(n,e){var s=new Map;return e.forEach(function(o){return s.set(o.node,o)}),n.map(function(o){return s.get(o)}).filter(isDefined)},focusSolver=function(n,e){var s=getActiveElement(asArray(n).length>0?document:getFirst(n).ownerDocument),o=getAllAffectedNodes(n).filter(isNotAGuard),a=getTopCommonParent(s||n,n,o),c=new Map,f=getFocusableNodes(o,c),h=f.filter(function(A){var R=A.node;return isNotAGuard(R)});if(h[0]){var m=getFocusableNodes([a],c).map(function(A){var R=A.node;return R}),g=reorderNodes(m,h),_=g.map(function(A){var R=A.node;return R}),E=g.filter(function(A){var R=A.tabIndex;return R>=0}).map(function(A){var R=A.node;return R}),T=newFocus(_,E,m,s,e);if(T===NEW_FOCUS){var w=pickAutofocus(f,E,allParentAutofocusables(o,c))||pickAutofocus(f,_,allParentAutofocusables(o,c));if(w)return{node:w};console.warn("focus-lock: cannot find any node to move focus into");return}return T===void 0?T:g[T]}},expandFocusableNodes=function(n){var e=getAllAffectedNodes(n).filter(isNotAGuard),s=getTopCommonParent(n,n,e),o=orderByTabIndex(getFocusables([s],!0),!0,!0),a=getFocusables(e,!1);return o.map(function(c){var f=c.node,h=c.index;return{node:f,index:h,lockItem:a.indexOf(f)>=0,guard:isGuard(f)}})},focusOn=function(n,e){n&&("focus"in n&&n.focus(e),"contentWindow"in n&&n.contentWindow&&n.contentWindow.focus())},guardCount=0,lockDisabled=!1,moveFocusInside=function(n,e,s){s===void 0&&(s={});var o=focusSolver(n,e);if(!lockDisabled&&o){if(guardCount>2){console.error("FocusLock: focus-fighting detected. Only one focus management system could be active. See https://github.com/theKashey/focus-lock/#focus-fighting"),lockDisabled=!0,setTimeout(function(){lockDisabled=!1},1);return}guardCount++,focusOn(o.node,s.focusOptions),guardCount--}};function weakRef(n){if(!n)return null;if(typeof WeakRef>"u")return function(){return n||null};var e=n?new WeakRef(n):null;return function(){return e?.deref()||null}}var recordElementLocation=function(n){if(!n)return null;for(var e=[],s=n;s&&s!==document.body;)e.push({current:weakRef(s),parent:weakRef(s.parentElement),left:weakRef(s.previousElementSibling),right:weakRef(s.nextElementSibling)}),s=s.parentElement;return{element:weakRef(n),stack:e,ownerDocument:n.ownerDocument}},restoreFocusTo=function(n){var e,s,o,a,c;if(n)for(var f=n.stack,h=n.ownerDocument,m=new Map,g=0,_=f;g<_.length;g++){var E=_[g],T=(e=E.parent)===null||e===void 0?void 0:e.call(E);if(T&&h.contains(T)){for(var w=(s=E.left)===null||s===void 0?void 0:s.call(E),A=E.current(),R=T.contains(A)?A:void 0,V=(o=E.right)===null||o===void 0?void 0:o.call(E),te=getTabbableNodes([T],m),se=(c=(a=R??w?.nextElementSibling)!==null&&a!==void 0?a:V)!==null&&c!==void 0?c:w;se;){for(var re=0,ye=te;re<ye.length;re++){var D=ye[re];if(se?.contains(D.node))return D.node}se=se.nextElementSibling}if(te.length)return te[0].node}}},captureFocusRestore=function(n){var e=recordElementLocation(n);return function(){return restoreFocusTo(e)}},getRelativeFocusable=function(n,e,s){if(!n||!e)return console.error("no element or scope given"),{};var o=asArray(e);if(o.every(function(f){return!contains(f,n)}))return console.error("Active element is not contained in the scope"),{};var a=s?getTabbableNodes(o,new Map):getFocusableNodes(o,new Map),c=a.findIndex(function(f){var h=f.node;return h===n});if(c!==-1)return{prev:a[c-1],next:a[c+1],first:a[0],last:a[a.length-1]}},getBoundary=function(n,e){var s=e?getTabbableNodes(asArray(n),new Map):getFocusableNodes(asArray(n),new Map);return{first:s[0],last:s[s.length-1]}},defaultOptions=function(n){return Object.assign({scope:document.body,cycle:!0,onlyTabbable:!0},n)},moveFocus=function(n,e,s){e===void 0&&(e={});var o=defaultOptions(e),a=getRelativeFocusable(n,o.scope,o.onlyTabbable);if(a){var c=s(a,o.cycle);c&&focusOn(c.node,o.focusOptions)}},focusNextElement=function(n,e){e===void 0&&(e={}),moveFocus(n,e,function(s,o){var a=s.next,c=s.first;return a||o&&c})},focusPrevElement=function(n,e){e===void 0&&(e={}),moveFocus(n,e,function(s,o){var a=s.prev,c=s.last;return a||o&&c})},pickBoundary=function(n,e,s){var o,a=getBoundary(n,(o=e.onlyTabbable)!==null&&o!==void 0?o:!0),c=a[s];c&&focusOn(c.node,e.focusOptions)},focusFirstElement=function(n,e){e===void 0&&(e={}),pickBoundary(n,e,"first")},focusLastElement=function(n,e){e===void 0&&(e={}),pickBoundary(n,e,"last")};function deferAction(n){setTimeout(n,1)}var extractRef$1=function(e){return e&&"current"in e?e.current:e},focusOnBody=function(){return document&&document.activeElement===document.body},isFreeFocus=function(){return focusOnBody()||focusIsHidden()},lastActiveTrap=null,lastActiveFocus=null,tryRestoreFocus=function(){return null},lastPortaledElement=null,focusWasOutsideWindow=!1,windowFocused=!1,defaultWhitelist=function(){return!0},focusWhitelisted=function(e){return(lastActiveTrap.whiteList||defaultWhitelist)(e)},recordPortal=function(e,s){lastPortaledElement={observerNode:e,portaledElement:s}},focusIsPortaledPair=function(e){return lastPortaledElement&&lastPortaledElement.portaledElement===e};function autoGuard(n,e,s,o){var a=null,c=n;do{var f=o[c];if(f.guard)f.node.dataset.focusAutoGuard&&(a=f);else if(f.lockItem){if(c!==n)return;a=null}else break}while((c+=s)!==e);a&&(a.node.tabIndex=0)}var focusWasOutside=function(e){return e?!!focusWasOutsideWindow:focusWasOutsideWindow==="meanwhile"},checkInHost=function n(e,s,o){return s&&(s.host===e&&(!s.activeElement||o.contains(s.activeElement))||s.parentNode&&n(e,s.parentNode,o))},withinHost=function(e,s){return s.some(function(o){return checkInHost(e,o,o)})},getNodeFocusables=function(e){return getFocusableNodes(e,new Map)},isNotFocusable=function(e){return!getNodeFocusables([e.parentNode]).some(function(s){return s.node===e})},activateTrap=function(){var e=!1;if(lastActiveTrap){var s=lastActiveTrap,o=s.observed,a=s.persistentFocus,c=s.autoFocus,f=s.shards,h=s.crossFrame,m=s.focusOptions,g=s.noFocusGuards,_=o||lastPortaledElement&&lastPortaledElement.portaledElement;if(focusOnBody()&&lastActiveFocus&&lastActiveFocus!==document.body&&(!document.body.contains(lastActiveFocus)||isNotFocusable(lastActiveFocus))){var E=tryRestoreFocus();E&&E.focus()}var T=document&&document.activeElement;if(_){var w=[_].concat(f.map(extractRef$1).filter(Boolean)),A=function(){if(!focusWasOutside(h)||!g||!lastActiveFocus||windowFocused)return!1;var re=getNodeFocusables(w),ye=re.findIndex(function(D){var ae=D.node;return ae===lastActiveFocus});return ye===0||ye===re.length-1};if((!T||focusWhitelisted(T))&&(a||A()||!isFreeFocus()||!lastActiveFocus&&c)&&(_&&!(focusInside(w)||T&&withinHost(T,w)||focusIsPortaledPair(T))&&(document&&!lastActiveFocus&&T&&!c?(T.blur&&T.blur(),document.body.focus()):(e=moveFocusInside(w,lastActiveFocus,{focusOptions:m}),lastPortaledElement={})),lastActiveFocus=document&&document.activeElement,lastActiveFocus!==document.body&&(tryRestoreFocus=captureFocusRestore(lastActiveFocus)),focusWasOutsideWindow=!1),document&&T!==document.activeElement&&document.querySelector("[data-focus-auto-guard]")){var R=document&&document.activeElement,V=expandFocusableNodes(w),te=V.map(function(se){var re=se.node;return re}).indexOf(R);te>-1&&(V.filter(function(se){var re=se.guard,ye=se.node;return re&&ye.dataset.focusAutoGuard}).forEach(function(se){var re=se.node;return re.removeAttribute("tabIndex")}),autoGuard(te,V.length,1,V),autoGuard(te,-1,-1,V))}}}return e},onTrap=function(e){activateTrap()&&e&&(e.stopPropagation(),e.preventDefault())},onBlur=function(){return deferAction(activateTrap)},onFocus=function(e){var s=e.target,o=e.currentTarget;o.contains(s)||recordPortal(o,s)},FocusWatcher=function(){return null},onWindowFocus=function(){windowFocused=!0},onWindowBlur=function(){windowFocused=!1,focusWasOutsideWindow="just",deferAction(function(){focusWasOutsideWindow="meanwhile"})},attachHandler=function(){document.addEventListener("focusin",onTrap),document.addEventListener("focusout",onBlur),window.addEventListener("focus",onWindowFocus),window.addEventListener("blur",onWindowBlur)},detachHandler=function(){document.removeEventListener("focusin",onTrap),document.removeEventListener("focusout",onBlur),window.removeEventListener("focus",onWindowFocus),window.removeEventListener("blur",onWindowBlur)};function reducePropsToState(n){return n.filter(function(e){var s=e.disabled;return!s})}var focusLockAPI={moveFocusInside,focusInside,focusNextElement,focusPrevElement,focusFirstElement,focusLastElement,captureFocusRestore};function handleStateChangeOnClient(n){var e=n.slice(-1)[0];e&&!lastActiveTrap&&attachHandler();var s=lastActiveTrap,o=s&&e&&e.id===s.id;lastActiveTrap=e,s&&!o&&(s.onDeactivation(),n.filter(function(a){var c=a.id;return c===s.id}).length||s.returnFocus(!e)),e?(lastActiveFocus=null,(!o||s.observed!==e.observed)&&e.onActivation(focusLockAPI),activateTrap(),deferAction(activateTrap)):(detachHandler(),lastActiveFocus=null)}mediumFocus.assignSyncMedium(onFocus);mediumBlur.assignMedium(onBlur);mediumEffect.assignMedium(function(n){return n(focusLockAPI)});const FocusTrap$1=withSideEffect(reducePropsToState,handleStateChangeOnClient)(FocusWatcher);var FocusLockCombination=reactExports.forwardRef(function(e,s){return React.createElement(FocusLock$1,_extends$1({sideCar:FocusTrap$1,ref:s},e))}),_ref=FocusLock$1.propTypes||{};_ref.sideCar;_objectWithoutPropertiesLoose$1(_ref,["sideCar"]);FocusLockCombination.propTypes={};const FocusTrap=FocusLockCombination.default??FocusLockCombination,FocusLock=n=>{const{initialFocusRef:e,finalFocusRef:s,contentRef:o,restoreFocus:a,children:c,isDisabled:f,autoFocus:h,persistentFocus:m,lockFocusAcrossFrames:g}=n,_=reactExports.useCallback(()=>{e?.current?e.current.focus():o?.current&&getAllFocusable(o.current).length===0&&requestAnimationFrame(()=>{o.current?.focus()})},[e,o]),E=reactExports.useCallback(()=>{s?.current?.focus()},[s]),T=a&&!s;return jsxRuntimeExports.jsx(FocusTrap,{crossFrame:g,persistentFocus:m,autoFocus:h,disabled:f,onActivation:_,onDeactivation:E,returnFocus:T,children:c})};FocusLock.displayName="FocusLock";function createIcon(n){const{viewBox:e="0 0 24 24",d:s,displayName:o,defaultProps:a={}}=n,c=reactExports.Children.toArray(n.path),f=forwardRef((h,m)=>jsxRuntimeExports.jsx(Icon,{ref:m,viewBox:e,...a,...h,children:c.length?c:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:s})}));return f.displayName=o,f}const Input=forwardRef(function(e,s){const{htmlSize:o,...a}=e,c=useMultiStyleConfig("Input",a),f=omitThemingProps(a),h=useFormControl(f),m=cx("chakra-input",e.className);return jsxRuntimeExports.jsx(chakra.input,{size:o,...h,__css:c.field,ref:s,className:m})});Input.displayName="Input";Input.id="Input";const[InputGroupStylesProvider,useInputGroupStyles]=createContext({name:"InputGroupStylesContext",errorMessage:`useInputGroupStyles returned is 'undefined'. Seems you forgot to wrap the components in "<InputGroup />" `}),InputGroup=forwardRef(function(e,s){const o=useMultiStyleConfig("Input",e),{children:a,className:c,...f}=omitThemingProps(e),h=cx("chakra-input__group",c),m={},g=getValidChildren(a),_=o.field;g.forEach(T=>{o&&(_&&T.type.id==="InputLeftElement"&&(m.paddingStart=_.height??_.h),_&&T.type.id==="InputRightElement"&&(m.paddingEnd=_.height??_.h),T.type.id==="InputRightAddon"&&(m.borderEndRadius=0),T.type.id==="InputLeftAddon"&&(m.borderStartRadius=0))});const E=g.map(T=>{const w=compact({size:T.props?.size||e.size,variant:T.props?.variant||e.variant});return T.type.id!=="Input"?reactExports.cloneElement(T,w):reactExports.cloneElement(T,Object.assign(w,m,T.props))});return jsxRuntimeExports.jsx(chakra.div,{className:h,ref:s,__css:{width:"100%",display:"flex",position:"relative",isolation:"isolate",...o.group},"data-group":!0,...f,children:jsxRuntimeExports.jsx(InputGroupStylesProvider,{value:o,children:E})})});InputGroup.displayName="InputGroup";const StyledInputElement=chakra("div",{baseStyle:{display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",top:"0",zIndex:2}}),InputElement=forwardRef(function(e,s){const{placement:o="left",...a}=e,c=useInputGroupStyles(),f=c.field,m={[o==="left"?"insetStart":"insetEnd"]:"0",width:f?.height??f?.h,height:f?.height??f?.h,fontSize:f?.fontSize,...c.element};return jsxRuntimeExports.jsx(StyledInputElement,{ref:s,__css:m,...a})});InputElement.id="InputElement";InputElement.displayName="InputElement";const InputLeftElement=forwardRef(function(e,s){const{className:o,...a}=e,c=cx("chakra-input__left-element",o);return jsxRuntimeExports.jsx(InputElement,{ref:s,placement:"left",className:c,...a})});InputLeftElement.id="InputLeftElement";InputLeftElement.displayName="InputLeftElement";const InputRightElement=forwardRef(function(e,s){const{className:o,...a}=e,c=cx("chakra-input__right-element",o);return jsxRuntimeExports.jsx(InputElement,{ref:s,placement:"right",className:c,...a})});InputRightElement.id="InputRightElement";InputRightElement.displayName="InputRightElement";var getDefaultParent=function(n){if(typeof document>"u")return null;var e=Array.isArray(n)?n[0]:n;return e.ownerDocument.body},counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={},lockCount=0,unwrapHost=function(n){return n&&(n.host||unwrapHost(n.parentNode))},correctTargets=function(n,e){return e.map(function(s){if(n.contains(s))return s;var o=unwrapHost(s);return o&&n.contains(o)?o:(console.error("aria-hidden",s,"in not contained inside",n,". Doing nothing"),null)}).filter(function(s){return!!s})},applyAttributeToOthers=function(n,e,s,o){var a=correctTargets(e,Array.isArray(n)?n:[n]);markerMap[s]||(markerMap[s]=new WeakMap);var c=markerMap[s],f=[],h=new Set,m=new Set(a),g=function(E){!E||h.has(E)||(h.add(E),g(E.parentNode))};a.forEach(g);var _=function(E){!E||m.has(E)||Array.prototype.forEach.call(E.children,function(T){if(h.has(T))_(T);else try{var w=T.getAttribute(o),A=w!==null&&w!=="false",R=(counterMap.get(T)||0)+1,V=(c.get(T)||0)+1;counterMap.set(T,R),c.set(T,V),f.push(T),R===1&&A&&uncontrolledNodes.set(T,!0),V===1&&T.setAttribute(s,"true"),A||T.setAttribute(o,"true")}catch(te){console.error("aria-hidden: cannot operate on ",T,te)}})};return _(e),h.clear(),lockCount++,function(){f.forEach(function(E){var T=counterMap.get(E)-1,w=c.get(E)-1;counterMap.set(E,T),c.set(E,w),T||(uncontrolledNodes.has(E)||E.removeAttribute(o),uncontrolledNodes.delete(E)),w||E.removeAttribute(s)}),lockCount--,lockCount||(counterMap=new WeakMap,counterMap=new WeakMap,uncontrolledNodes=new WeakMap,markerMap={})}},hideOthers=function(n,e,s){s===void 0&&(s="data-aria-hidden");var o=Array.from(Array.isArray(n)?n:[n]),a=getDefaultParent(n);return a?(o.push.apply(o,Array.from(a.querySelectorAll("[aria-live], script"))),applyAttributeToOthers(o,a,s,"aria-hidden")):function(){return null}},__defProp$1=Object.defineProperty,__defNormalProp=(n,e,s)=>e in n?__defProp$1(n,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):n[e]=s,__publicField=(n,e,s)=>(__defNormalProp(n,e+"",s),s);class ModalManager{constructor(){__publicField(this,"modals"),this.modals=new Set}add(e){return this.modals.add(e),this.modals.size}remove(e){this.modals.delete(e)}isTopModal(e){if(!e)return!1;const s=Array.from(this.modals)[this.modals.size-1];return e===s}}const modalManager=new ModalManager;function useModalManager(n,e){const[s,o]=reactExports.useState(0);return reactExports.useEffect(()=>{const a=n.current;if(a){if(e){const c=modalManager.add(a);o(c)}return()=>{modalManager.remove(a),o(0)}}},[e,n]),s}function useModal(n){const{isOpen:e,onClose:s,id:o,closeOnOverlayClick:a=!0,closeOnEsc:c=!0,useInert:f=!0,onOverlayClick:h,onEsc:m}=n,g=reactExports.useRef(null),_=reactExports.useRef(null),[E,T,w]=useIds(o,"chakra-modal","chakra-modal--header","chakra-modal--body");useAriaHidden(g,e&&f);const A=useModalManager(g,e),R=reactExports.useRef(null),V=reactExports.useCallback(X=>{R.current=X.target},[]),te=reactExports.useCallback(X=>{X.key==="Escape"&&(X.stopPropagation(),c&&s?.(),m?.())},[c,s,m]),[se,re]=reactExports.useState(!1),[ye,D]=reactExports.useState(!1),ae=reactExports.useCallback((X={},le=null)=>({role:"dialog",...X,ref:mergeRefs(le,g),id:E,tabIndex:-1,"aria-modal":!0,"aria-labelledby":se?T:void 0,"aria-describedby":ye?w:void 0,onClick:callAllHandlers(X.onClick,Z=>Z.stopPropagation())}),[w,ye,E,T,se]),z=reactExports.useCallback(X=>{X.stopPropagation(),R.current===X.target&&modalManager.isTopModal(g.current)&&(a&&s?.(),h?.())},[s,a,h]),H=reactExports.useCallback((X={},le=null)=>({...X,ref:mergeRefs(le,_),onClick:callAllHandlers(X.onClick,z),onKeyDown:callAllHandlers(X.onKeyDown,te),onMouseDown:callAllHandlers(X.onMouseDown,V)}),[te,V,z]);return{isOpen:e,onClose:s,headerId:T,bodyId:w,setBodyMounted:D,setHeaderMounted:re,dialogRef:g,overlayRef:_,getDialogProps:ae,getDialogContainerProps:H,index:A}}function useAriaHidden(n,e){const s=n.current;reactExports.useEffect(()=>{if(!(!n.current||!e))return hideOthers(n.current)},[e,n,s])}function useIds(n,...e){const s=reactExports.useId(),o=n||s;return reactExports.useMemo(()=>e.map(a=>`${a}-${o}`),[o,e])}const[ModalStylesProvider,useModalStyles]=createContext({name:"ModalStylesContext",errorMessage:`useModalStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Modal />" `}),[ModalContextProvider,useModalContext]=createContext({strict:!0,name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap modal components in `<Modal />`"}),Modal=n=>{const e={scrollBehavior:"outside",autoFocus:!0,trapFocus:!0,returnFocusOnClose:!0,blockScrollOnMount:!0,allowPinchZoom:!1,preserveScrollBarGap:!0,motionPreset:"scale",...n,lockFocusAcrossFrames:n.lockFocusAcrossFrames??!0},{portalProps:s,children:o,autoFocus:a,trapFocus:c,initialFocusRef:f,finalFocusRef:h,returnFocusOnClose:m,blockScrollOnMount:g,allowPinchZoom:_,preserveScrollBarGap:E,motionPreset:T,lockFocusAcrossFrames:w,animatePresenceProps:A,onCloseComplete:R}=e,V=useMultiStyleConfig("Modal",e),se={...useModal(e),autoFocus:a,trapFocus:c,initialFocusRef:f,finalFocusRef:h,returnFocusOnClose:m,blockScrollOnMount:g,allowPinchZoom:_,preserveScrollBarGap:E,motionPreset:T,lockFocusAcrossFrames:w};return jsxRuntimeExports.jsx(ModalContextProvider,{value:se,children:jsxRuntimeExports.jsx(ModalStylesProvider,{value:V,children:jsxRuntimeExports.jsx(AnimatePresence,{...A,onExitComplete:R,children:se.isOpen&&jsxRuntimeExports.jsx(Portal,{...s,children:o})})})})};Modal.displayName="Modal";var zeroRightClassName="right-scroll-bar-position",fullWidthClassName="width-before-scroll-bar",noScrollbarsClassName="with-scroll-bars-hidden",removedBarSizeVariable="--removed-body-scroll-bar-size",effectCar=createSidecarMedium(),nothing=function(){},RemoveScroll=reactExports.forwardRef(function(n,e){var s=reactExports.useRef(null),o=reactExports.useState({onScrollCapture:nothing,onWheelCapture:nothing,onTouchMoveCapture:nothing}),a=o[0],c=o[1],f=n.forwardProps,h=n.children,m=n.className,g=n.removeScrollBar,_=n.enabled,E=n.shards,T=n.sideCar,w=n.noRelative,A=n.noIsolation,R=n.inert,V=n.allowPinchZoom,te=n.as,se=te===void 0?"div":te,re=n.gapMode,ye=__rest(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=T,ae=useMergeRefs([s,e]),z=__assign(__assign({},ye),a);return reactExports.createElement(reactExports.Fragment,null,_&&reactExports.createElement(D,{sideCar:effectCar,removeScrollBar:g,shards:E,noRelative:w,noIsolation:A,inert:R,setCallbacks:c,allowPinchZoom:!!V,lockRef:s,gapMode:re}),f?reactExports.cloneElement(reactExports.Children.only(h),__assign(__assign({},z),{ref:ae})):reactExports.createElement(se,__assign({},z,{className:m,ref:ae}),h))});RemoveScroll.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};RemoveScroll.classNames={fullWidth:fullWidthClassName,zeroRight:zeroRightClassName};var getNonce=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function makeStyleTag(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var e=getNonce();return e&&n.setAttribute("nonce",e),n}function injectStyles(n,e){n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}function insertStyleTag(n){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(n)}var stylesheetSingleton=function(){var n=0,e=null;return{add:function(s){n==0&&(e=makeStyleTag())&&(injectStyles(e,s),insertStyleTag(e)),n++},remove:function(){n--,!n&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},styleHookSingleton=function(){var n=stylesheetSingleton();return function(e,s){reactExports.useEffect(function(){return n.add(e),function(){n.remove()}},[e&&s])}},styleSingleton=function(){var n=styleHookSingleton(),e=function(s){var o=s.styles,a=s.dynamic;return n(o,a),null};return e},zeroGap={left:0,top:0,right:0,gap:0},parse$1=function(n){return parseInt(n||"",10)||0},getOffset=function(n){var e=window.getComputedStyle(document.body),s=e[n==="padding"?"paddingLeft":"marginLeft"],o=e[n==="padding"?"paddingTop":"marginTop"],a=e[n==="padding"?"paddingRight":"marginRight"];return[parse$1(s),parse$1(o),parse$1(a)]},getGapWidth=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return zeroGap;var e=getOffset(n),s=document.documentElement.clientWidth,o=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,o-s+e[2]-e[0])}},Style=styleSingleton(),lockAttribute="data-scroll-locked",getStyles$1=function(n,e,s,o){var a=n.left,c=n.top,f=n.right,h=n.gap;return s===void 0&&(s="margin"),`
  .`.concat(noScrollbarsClassName,` {
   overflow: hidden `).concat(o,`;
   padding-right: `).concat(h,"px ").concat(o,`;
  }
  body[`).concat(lockAttribute,`] {
    overflow: hidden `).concat(o,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(o,";"),s==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(c,`px;
    padding-right: `).concat(f,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(h,"px ").concat(o,`;
    `),s==="padding"&&"padding-right: ".concat(h,"px ").concat(o,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(zeroRightClassName,` {
    right: `).concat(h,"px ").concat(o,`;
  }
  
  .`).concat(fullWidthClassName,` {
    margin-right: `).concat(h,"px ").concat(o,`;
  }
  
  .`).concat(zeroRightClassName," .").concat(zeroRightClassName,` {
    right: 0 `).concat(o,`;
  }
  
  .`).concat(fullWidthClassName," .").concat(fullWidthClassName,` {
    margin-right: 0 `).concat(o,`;
  }
  
  body[`).concat(lockAttribute,`] {
    `).concat(removedBarSizeVariable,": ").concat(h,`px;
  }
`)},getCurrentUseCounter=function(){var n=parseInt(document.body.getAttribute(lockAttribute)||"0",10);return isFinite(n)?n:0},useLockAttribute=function(){reactExports.useEffect(function(){return document.body.setAttribute(lockAttribute,(getCurrentUseCounter()+1).toString()),function(){var n=getCurrentUseCounter()-1;n<=0?document.body.removeAttribute(lockAttribute):document.body.setAttribute(lockAttribute,n.toString())}},[])},RemoveScrollBar=function(n){var e=n.noRelative,s=n.noImportant,o=n.gapMode,a=o===void 0?"margin":o;useLockAttribute();var c=reactExports.useMemo(function(){return getGapWidth(a)},[a]);return reactExports.createElement(Style,{styles:getStyles$1(c,!e,a,s?"":"!important")})},passiveSupported=!1;if(typeof window<"u")try{var options=Object.defineProperty({},"passive",{get:function(){return passiveSupported=!0,!0}});window.addEventListener("test",options,options),window.removeEventListener("test",options,options)}catch{passiveSupported=!1}var nonPassive=passiveSupported?{passive:!1}:!1,alwaysContainsScroll=function(n){return n.tagName==="TEXTAREA"},elementCanBeScrolled=function(n,e){if(!(n instanceof Element))return!1;var s=window.getComputedStyle(n);return s[e]!=="hidden"&&!(s.overflowY===s.overflowX&&!alwaysContainsScroll(n)&&s[e]==="visible")},elementCouldBeVScrolled=function(n){return elementCanBeScrolled(n,"overflowY")},elementCouldBeHScrolled=function(n){return elementCanBeScrolled(n,"overflowX")},locationCouldBeScrolled=function(n,e){var s=e.ownerDocument,o=e;do{typeof ShadowRoot<"u"&&o instanceof ShadowRoot&&(o=o.host);var a=elementCouldBeScrolled(n,o);if(a){var c=getScrollVariables(n,o),f=c[1],h=c[2];if(f>h)return!0}o=o.parentNode}while(o&&o!==s.body);return!1},getVScrollVariables=function(n){var e=n.scrollTop,s=n.scrollHeight,o=n.clientHeight;return[e,s,o]},getHScrollVariables=function(n){var e=n.scrollLeft,s=n.scrollWidth,o=n.clientWidth;return[e,s,o]},elementCouldBeScrolled=function(n,e){return n==="v"?elementCouldBeVScrolled(e):elementCouldBeHScrolled(e)},getScrollVariables=function(n,e){return n==="v"?getVScrollVariables(e):getHScrollVariables(e)},getDirectionFactor=function(n,e){return n==="h"&&e==="rtl"?-1:1},handleScroll=function(n,e,s,o,a){var c=getDirectionFactor(n,window.getComputedStyle(e).direction),f=c*o,h=s.target,m=e.contains(h),g=!1,_=f>0,E=0,T=0;do{if(!h)break;var w=getScrollVariables(n,h),A=w[0],R=w[1],V=w[2],te=R-V-c*A;(A||te)&&elementCouldBeScrolled(n,h)&&(E+=te,T+=A);var se=h.parentNode;h=se&&se.nodeType===Node.DOCUMENT_FRAGMENT_NODE?se.host:se}while(!m&&h!==document.body||m&&(e.contains(h)||e===h));return(_&&Math.abs(E)<1||!_&&Math.abs(T)<1)&&(g=!0),g},getTouchXY=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},getDeltaXY=function(n){return[n.deltaX,n.deltaY]},extractRef=function(n){return n&&"current"in n?n.current:n},deltaCompare=function(n,e){return n[0]===e[0]&&n[1]===e[1]},generateStyle=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},idCounter=0,lockStack=[];function RemoveScrollSideCar(n){var e=reactExports.useRef([]),s=reactExports.useRef([0,0]),o=reactExports.useRef(),a=reactExports.useState(idCounter++)[0],c=reactExports.useState(styleSingleton)[0],f=reactExports.useRef(n);reactExports.useEffect(function(){f.current=n},[n]),reactExports.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(a));var R=__spreadArray([n.lockRef.current],(n.shards||[]).map(extractRef),!0).filter(Boolean);return R.forEach(function(V){return V.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),R.forEach(function(V){return V.classList.remove("allow-interactivity-".concat(a))})}}},[n.inert,n.lockRef.current,n.shards]);var h=reactExports.useCallback(function(R,V){if("touches"in R&&R.touches.length===2||R.type==="wheel"&&R.ctrlKey)return!f.current.allowPinchZoom;var te=getTouchXY(R),se=s.current,re="deltaX"in R?R.deltaX:se[0]-te[0],ye="deltaY"in R?R.deltaY:se[1]-te[1],D,ae=R.target,z=Math.abs(re)>Math.abs(ye)?"h":"v";if("touches"in R&&z==="h"&&ae.type==="range")return!1;var H=locationCouldBeScrolled(z,ae);if(!H)return!0;if(H?D=z:(D=z==="v"?"h":"v",H=locationCouldBeScrolled(z,ae)),!H)return!1;if(!o.current&&"changedTouches"in R&&(re||ye)&&(o.current=D),!D)return!0;var X=o.current||D;return handleScroll(X,V,R,X==="h"?re:ye)},[]),m=reactExports.useCallback(function(R){var V=R;if(!(!lockStack.length||lockStack[lockStack.length-1]!==c)){var te="deltaY"in V?getDeltaXY(V):getTouchXY(V),se=e.current.filter(function(D){return D.name===V.type&&(D.target===V.target||V.target===D.shadowParent)&&deltaCompare(D.delta,te)})[0];if(se&&se.should){V.cancelable&&V.preventDefault();return}if(!se){var re=(f.current.shards||[]).map(extractRef).filter(Boolean).filter(function(D){return D.contains(V.target)}),ye=re.length>0?h(V,re[0]):!f.current.noIsolation;ye&&V.cancelable&&V.preventDefault()}}},[]),g=reactExports.useCallback(function(R,V,te,se){var re={name:R,delta:V,target:te,should:se,shadowParent:getOutermostShadowParent(te)};e.current.push(re),setTimeout(function(){e.current=e.current.filter(function(ye){return ye!==re})},1)},[]),_=reactExports.useCallback(function(R){s.current=getTouchXY(R),o.current=void 0},[]),E=reactExports.useCallback(function(R){g(R.type,getDeltaXY(R),R.target,h(R,n.lockRef.current))},[]),T=reactExports.useCallback(function(R){g(R.type,getTouchXY(R),R.target,h(R,n.lockRef.current))},[]);reactExports.useEffect(function(){return lockStack.push(c),n.setCallbacks({onScrollCapture:E,onWheelCapture:E,onTouchMoveCapture:T}),document.addEventListener("wheel",m,nonPassive),document.addEventListener("touchmove",m,nonPassive),document.addEventListener("touchstart",_,nonPassive),function(){lockStack=lockStack.filter(function(R){return R!==c}),document.removeEventListener("wheel",m,nonPassive),document.removeEventListener("touchmove",m,nonPassive),document.removeEventListener("touchstart",_,nonPassive)}},[]);var w=n.removeScrollBar,A=n.inert;return reactExports.createElement(reactExports.Fragment,null,A?reactExports.createElement(c,{styles:generateStyle(a)}):null,w?reactExports.createElement(RemoveScrollBar,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function getOutermostShadowParent(n){for(var e=null;n!==null;)n instanceof ShadowRoot&&(e=n.host,n=n.host),n=n.parentNode;return e}const SideCar=exportSidecar(effectCar,RemoveScrollSideCar);var ReactRemoveScroll=reactExports.forwardRef(function(n,e){return reactExports.createElement(RemoveScroll,__assign({},n,{ref:e,sideCar:SideCar}))});ReactRemoveScroll.classNames=RemoveScroll.classNames;function ModalFocusScope(n){const{autoFocus:e,trapFocus:s,dialogRef:o,initialFocusRef:a,blockScrollOnMount:c,allowPinchZoom:f,finalFocusRef:h,returnFocusOnClose:m,preserveScrollBarGap:g,lockFocusAcrossFrames:_,isOpen:E}=useModalContext(),[T,w]=usePresence();reactExports.useEffect(()=>{!T&&w&&setTimeout(w)},[T,w]);const A=useModalManager(o,E);return jsxRuntimeExports.jsx(FocusLock,{autoFocus:e,isDisabled:!s,initialFocusRef:a,finalFocusRef:h,restoreFocus:m,contentRef:o,lockFocusAcrossFrames:_,children:jsxRuntimeExports.jsx(ReactRemoveScroll,{removeScrollBar:!g,allowPinchZoom:f,enabled:A===1&&c,forwardProps:!0,children:n.children})})}const ModalBody=forwardRef((n,e)=>{const{className:s,...o}=n,{bodyId:a,setBodyMounted:c}=useModalContext();reactExports.useEffect(()=>(c(!0),()=>c(!1)),[c]);const f=cx("chakra-modal__body",s),h=useModalStyles();return jsxRuntimeExports.jsx(chakra.div,{ref:e,className:f,id:a,...o,__css:h.body})});ModalBody.displayName="ModalBody";const ModalHeader=forwardRef((n,e)=>{const{className:s,...o}=n,{headerId:a,setHeaderMounted:c}=useModalContext();reactExports.useEffect(()=>(c(!0),()=>c(!1)),[c]);const f=cx("chakra-modal__header",s),h=useModalStyles(),m={flex:0,...h.header};return jsxRuntimeExports.jsx(chakra.header,{ref:e,className:f,id:a,...o,__css:m})});ModalHeader.displayName="ModalHeader";const variants$1={enter:({transition:n,transitionEnd:e,delay:s}={})=>({opacity:1,transition:n?.enter??withDelay.enter(TRANSITION_DEFAULTS.enter,s),transitionEnd:e?.enter}),exit:({transition:n,transitionEnd:e,delay:s}={})=>({opacity:0,transition:n?.exit??withDelay.exit(TRANSITION_DEFAULTS.exit,s),transitionEnd:e?.exit})},fadeConfig={initial:"exit",animate:"enter",exit:"exit",variants:variants$1},Fade=reactExports.forwardRef(function(e,s){const{unmountOnExit:o,in:a,className:c,transition:f,transitionEnd:h,delay:m,animatePresenceProps:g,..._}=e,E=a||o?"enter":"exit",T=o?a&&o:!0,w={transition:f,transitionEnd:h,delay:m};return jsxRuntimeExports.jsx(AnimatePresence,{...g,custom:w,children:T&&jsxRuntimeExports.jsx(motion.div,{ref:s,className:cx("chakra-fade",c),custom:w,...fadeConfig,animate:E,..._})})});Fade.displayName="Fade";const MotionDiv$1=chakra(motion.div),ModalOverlay=forwardRef((n,e)=>{const{className:s,transition:o,motionProps:a,...c}=n,f=cx("chakra-modal__overlay",s),m={pos:"fixed",left:"0",top:"0",w:"100vw",h:"100vh",...useModalStyles().overlay},{motionPreset:g}=useModalContext(),E=a||(g==="none"?{}:fadeConfig);return jsxRuntimeExports.jsx(MotionDiv$1,{...E,__css:m,ref:e,className:f,...c})});ModalOverlay.displayName="ModalOverlay";const[DrawerContextProvider,useDrawerContext]=createContext(),placementMap={start:{ltr:"left",rtl:"right"},end:{ltr:"right",rtl:"left"}};function getDrawerPlacement(n,e){if(n)return placementMap[n]?.[e]??n}function Drawer(n){const{isOpen:e,onClose:s,placement:o="right",children:a,...c}=n,f=useTheme(),h=f.components?.Drawer,m=getDrawerPlacement(o,f.direction);return jsxRuntimeExports.jsx(DrawerContextProvider,{value:{placement:m},children:jsxRuntimeExports.jsx(Modal,{isOpen:e,onClose:s,styleConfig:h,...c,children:a})})}const defaultTransition={exit:{duration:.15,ease:TRANSITION_EASINGS.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},variants={exit:({direction:n,transition:e,transitionEnd:s,delay:o})=>{const{exit:a}=getSlideTransition({direction:n});return{...a,transition:e?.exit??withDelay.exit(defaultTransition.exit,o),transitionEnd:s?.exit}},enter:({direction:n,transitionEnd:e,transition:s,delay:o})=>{const{enter:a}=getSlideTransition({direction:n});return{...a,transition:s?.enter??withDelay.enter(defaultTransition.enter,o),transitionEnd:e?.enter}}},Slide=reactExports.forwardRef(function(e,s){const{direction:o="right",style:a,unmountOnExit:c,in:f,className:h,transition:m,transitionEnd:g,delay:_,motionProps:E,animatePresenceProps:T,...w}=e,A=getSlideTransition({direction:o}),R=Object.assign({position:"fixed"},A.position,a),V=c?f&&c:!0,te=f||c?"enter":"exit",se={transitionEnd:g,transition:m,direction:o,delay:_};return jsxRuntimeExports.jsx(AnimatePresence,{...T,custom:se,children:V&&jsxRuntimeExports.jsx(motion.div,{...w,ref:s,initial:"exit",className:cx("chakra-slide",h),animate:te,exit:"exit",custom:se,variants,style:R,...E})})});Slide.displayName="Slide";const MotionDiv=chakra(Slide),DrawerContent=forwardRef((n,e)=>{const{className:s,children:o,motionProps:a,containerProps:c,...f}=n,{getDialogProps:h,getDialogContainerProps:m,isOpen:g}=useModalContext(),_=h(f,e),E=m(c),T=cx("chakra-modal__content",s),w=useModalStyles(),A={display:"flex",flexDirection:"column",position:"relative",width:"100%",outline:0,...w.dialog},R={display:"flex",width:"100vw",height:"$100vh",position:"fixed",left:0,top:0,...w.dialogContainer},{placement:V}=useDrawerContext();return jsxRuntimeExports.jsx(ModalFocusScope,{children:jsxRuntimeExports.jsx(chakra.div,{...E,className:"chakra-modal__content-container",__css:R,children:jsxRuntimeExports.jsx(MotionDiv,{motionProps:a,direction:V,in:g,className:T,..._,__css:A,children:o})})})});DrawerContent.displayName="DrawerContent";function valueToPercent(n,e,s){return(n-e)*100/(s-e)}keyframes$1({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});keyframes$1({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});const progress=keyframes$1({"0%":{left:"-40%"},"100%":{left:"100%"}}),stripe=keyframes$1({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function getProgressProps(n){const{value:e=0,min:s,max:o,valueText:a,getValueText:c,isIndeterminate:f,role:h="progressbar"}=n,m=valueToPercent(e,s,o);return{bind:{"data-indeterminate":f?"":void 0,"aria-valuemax":o,"aria-valuemin":s,"aria-valuenow":f?void 0:e,"aria-valuetext":(()=>{if(e!=null)return typeof c=="function"?c(e,m):a})(),role:h},percent:m,value:e}}const[ProgressStylesProvider,useProgressStyles]=createContext({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),ProgressFilledTrack=forwardRef((n,e)=>{const{min:s,max:o,value:a,isIndeterminate:c,role:f,...h}=n,m=getProgressProps({value:a,min:s,max:o,isIndeterminate:c,role:f}),_={height:"100%",...useProgressStyles().filledTrack};return jsxRuntimeExports.jsx(chakra.div,{ref:e,style:{width:`${m.percent}%`,...h.style},...m.bind,...h,__css:_})}),Progress=forwardRef((n,e)=>{const{value:s,min:o=0,max:a=100,hasStripe:c,isAnimated:f,children:h,borderRadius:m,isIndeterminate:g,"aria-label":_,"aria-labelledby":E,"aria-valuetext":T,title:w,role:A,...R}=omitThemingProps(n),V=useMultiStyleConfig("Progress",n),te=m??V.track?.borderRadius,se={animation:`${stripe} 1s linear infinite`},D={...!g&&c&&f&&se,...g&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${progress} 1s ease infinite normal none running`}},ae={overflow:"hidden",position:"relative",...V.track};return jsxRuntimeExports.jsx(chakra.div,{ref:e,borderRadius:te,__css:ae,...R,children:jsxRuntimeExports.jsxs(ProgressStylesProvider,{value:V,children:[jsxRuntimeExports.jsx(ProgressFilledTrack,{"aria-label":_,"aria-labelledby":E,"aria-valuetext":T,min:o,max:a,value:s,isIndeterminate:g,css:D,borderRadius:te,title:w,role:A}),h]})})});Progress.displayName="Progress";const SelectField=forwardRef(function(e,s){const{children:o,placeholder:a,className:c,...f}=e;return jsxRuntimeExports.jsxs(chakra.select,{...f,ref:s,className:cx("chakra-select",c),children:[a&&jsxRuntimeExports.jsx("option",{value:"",children:a}),o]})});SelectField.displayName="SelectField";const Select=forwardRef((n,e)=>{const s=useMultiStyleConfig("Select",n),{rootProps:o,placeholder:a,icon:c,color:f,height:h,h:m,minH:g,minHeight:_,iconColor:E,iconSize:T,...w}=omitThemingProps(n),[A,R]=split(w,layoutPropNames),V=useFormControl(R),te={width:"100%",height:"fit-content",position:"relative",color:f},se={paddingEnd:"2rem",...s.field,_focus:{zIndex:"unset",...s.field?._focus}};return jsxRuntimeExports.jsxs(chakra.div,{className:"chakra-select__wrapper",__css:te,...A,...o,children:[jsxRuntimeExports.jsx(SelectField,{ref:e,height:m??h,minH:g??_,placeholder:a,...V,__css:se,children:n.children}),jsxRuntimeExports.jsx(SelectIcon,{"data-disabled":dataAttr(V.disabled),...(E||f)&&{color:E||f},__css:s.icon,...T&&{fontSize:T},children:c})]})});Select.displayName="Select";const DefaultIcon=n=>jsxRuntimeExports.jsx("svg",{viewBox:"0 0 24 24",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M16.59 8.59L12 13.17 7.41 8.59 6 10l6 6 6-6z"})}),IconWrapper=chakra("div",{baseStyle:{position:"absolute",display:"inline-flex",alignItems:"center",justifyContent:"center",pointerEvents:"none",top:"50%",transform:"translateY(-50%)"}}),SelectIcon=n=>{const{children:e=jsxRuntimeExports.jsx(DefaultIcon,{}),...s}=n,o=reactExports.cloneElement(e,{role:"presentation",className:"chakra-select__icon",focusable:!1,"aria-hidden":!0,style:{width:"1em",height:"1em",color:"currentColor"}});return jsxRuntimeExports.jsx(IconWrapper,{...s,className:"chakra-select__icon-wrapper",children:reactExports.isValidElement(e)?o:null})};SelectIcon.displayName="SelectIcon";function orient$1(n){const{orientation:e,vertical:s,horizontal:o}=n;return e==="vertical"?s:o}function getStyles(n){const{orientation:e,thumbPercents:s,isReversed:o}=n,a=w=>({position:"absolute",userSelect:"none",WebkitUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",touchAction:"none",...orient$1({orientation:e,vertical:{bottom:`${s[w]}%`,transform:"translate(-50%, 50%) scale(var(--slider-thumb-scale, 1))"},horizontal:{left:`${s[w]}%`,transform:"translate(-50%, -50%) scale(var(--slider-thumb-scale, 1))"}})}),c={position:"relative",touchAction:"none",WebkitTapHighlightColor:"rgba(0,0,0,0)",userSelect:"none",outline:0},f={position:"absolute",...orient$1({orientation:e,vertical:{left:"50%",transform:"translateX(-50%)",height:"100%"},horizontal:{top:"50%",transform:"translateY(-50%)",width:"100%"}})},h=s.length===1,m=[0,o?100-s[0]:s[0]],g=h?m:s;let _=g[0];!h&&o&&(_=100-_);const E=Math.abs(g[g.length-1]-g[0]),T={...f,...orient$1({orientation:e,vertical:o?{height:`${E}%`,top:`${_}%`}:{height:`${E}%`,bottom:`${_}%`},horizontal:o?{width:`${E}%`,right:`${_}%`}:{width:`${E}%`,left:`${_}%`}})};return{trackStyle:f,innerTrackStyle:T,rootStyle:c,getThumbStyle:a}}function getIsReversed(n){const{isReversed:e,direction:s,orientation:o}=n;return s==="ltr"||o==="vertical"?e:!e}function useSlider(n){const{min:e=0,max:s=100,onChange:o,value:a,defaultValue:c,isReversed:f,direction:h="ltr",orientation:m="horizontal",id:g,isDisabled:_,isReadOnly:E,onChangeStart:T,onChangeEnd:w,step:A=1,getAriaValueText:R,"aria-valuetext":V,"aria-label":te,"aria-labelledby":se,name:re,focusThumbOnChange:ye=!0,...D}=n,ae=useCallbackRef$1(T),z=useCallbackRef$1(w),H=useCallbackRef$1(R),X=getIsReversed({isReversed:f,direction:h,orientation:m}),[le,Z]=useControllableState({value:a,defaultValue:c??getDefaultValue(e,s),onChange:o}),[ne,W]=reactExports.useState(!1),[xe,de]=reactExports.useState(!1),oe=!(_||E),_e=(s-e)/10,Re=A||(s-e)/100,Ie=clampValue(le,e,s),he=s-Ie+e,Se=valueToPercent$1(X?he:Ie,e,s),Ae=m==="vertical",Be=useLatestRef({min:e,max:s,step:A,isDisabled:_,value:Ie,isInteractive:oe,isReversed:X,isVertical:Ae,eventSource:null,focusThumbOnChange:ye,orientation:m}),Ue=reactExports.useRef(null),qe=reactExports.useRef(null),Xe=reactExports.useRef(null),Ke=reactExports.useId(),Ze=g??Ke,[it,wn]=[`slider-thumb-${Ze}`,`slider-track-${Ze}`],yn=reactExports.useCallback(ue=>{if(!Ue.current)return;const Ee=Be.current;Ee.eventSource="pointer";const ke=Ue.current.getBoundingClientRect(),{clientX:Le,clientY:tt}=ue.touches?.[0]??ue,st=Ae?ke.bottom-tt:Le-ke.left,At=Ae?ke.height:ke.width;let Wt=st/At;X&&(Wt=1-Wt);let Fe=percentToValue(Wt,Ee.min,Ee.max);return Ee.step&&(Fe=parseFloat(roundValueToStep(Fe,Ee.min,Ee.step))),Fe=clampValue(Fe,Ee.min,Ee.max),Fe},[Ae,X,Be]),Mt=reactExports.useCallback(ue=>{const Ee=Be.current;Ee.isInteractive&&(ue=parseFloat(roundValueToStep(ue,Ee.min,Re)),ue=clampValue(ue,Ee.min,Ee.max),Z(ue))},[Re,Z,Be]),Ge=reactExports.useMemo(()=>({stepUp(ue=Re){const Ee=X?Ie-ue:Ie+ue;Mt(Ee)},stepDown(ue=Re){const Ee=X?Ie+ue:Ie-ue;Mt(Ee)},reset(){Mt(c||0)},stepTo(ue){Mt(ue)}}),[Mt,X,Ie,Re,c]),ln=reactExports.useCallback(ue=>{const Ee=Be.current,Le={ArrowRight:()=>Ge.stepUp(),ArrowUp:()=>Ge.stepUp(),ArrowLeft:()=>Ge.stepDown(),ArrowDown:()=>Ge.stepDown(),PageUp:()=>Ge.stepUp(_e),PageDown:()=>Ge.stepDown(_e),Home:()=>Mt(Ee.min),End:()=>Mt(Ee.max)}[ue.key];Le&&(ue.preventDefault(),ue.stopPropagation(),Le(ue),Ee.eventSource="keyboard")},[Ge,Mt,_e,Be]),kt=H?.(Ie)??V,{getThumbStyle:Ft,rootStyle:lr,trackStyle:Fn,innerTrackStyle:Hn}=reactExports.useMemo(()=>{const ue=Be.current;return getStyles({isReversed:X,orientation:ue.orientation,thumbPercents:[Se]})},[X,Se,Be]),Qn=reactExports.useCallback(()=>{Be.current.focusThumbOnChange&&setTimeout(()=>qe.current?.focus())},[Be]);useUpdateEffect(()=>{const ue=Be.current;Qn(),ue.eventSource==="keyboard"&&z?.(ue.value)},[Ie,z]);function Nn(ue){const Ee=yn(ue);Ee!=null&&Ee!==Be.current.value&&Z(Ee)}usePanEvent(Xe,{onPanSessionStart(ue){const Ee=Be.current;Ee.isInteractive&&(W(!0),Qn(),Nn(ue),ae?.(Ee.value))},onPanSessionEnd(){const ue=Be.current;ue.isInteractive&&(W(!1),z?.(ue.value))},onPan(ue){Be.current.isInteractive&&Nn(ue)}});const Gn=reactExports.useCallback((ue={},Ee=null)=>({...ue,...D,ref:mergeRefs(Ee,Xe),tabIndex:-1,"aria-disabled":ariaAttr(_),"data-focused":dataAttr(xe),style:{...ue.style,...lr}}),[D,_,xe,lr]),Vr=reactExports.useCallback((ue={},Ee=null)=>({...ue,ref:mergeRefs(Ee,Ue),id:wn,"data-disabled":dataAttr(_),style:{...ue.style,...Fn}}),[_,wn,Fn]),ir=reactExports.useCallback((ue={},Ee=null)=>({...ue,ref:Ee,style:{...ue.style,...Hn}}),[Hn]),Vn=reactExports.useCallback((ue={},Ee=null)=>({...ue,ref:mergeRefs(Ee,qe),role:"slider",tabIndex:oe?0:void 0,id:it,"data-active":dataAttr(ne),"aria-valuetext":kt,"aria-valuemin":e,"aria-valuemax":s,"aria-valuenow":Ie,"aria-orientation":m,"aria-disabled":ariaAttr(_),"aria-readonly":ariaAttr(E),"aria-label":te,"aria-labelledby":te?void 0:se,style:{...ue.style,...Ft(0)},onKeyDown:callAllHandlers(ue.onKeyDown,ln),onFocus:callAllHandlers(ue.onFocus,()=>de(!0)),onBlur:callAllHandlers(ue.onBlur,()=>de(!1))}),[oe,it,ne,kt,e,s,Ie,m,_,E,te,se,Ft,ln]),ie=reactExports.useCallback((ue,Ee=null)=>{const ke=!(ue.value<e||ue.value>s),Le=Ie>=ue.value,tt=valueToPercent$1(ue.value,e,s),st={position:"absolute",pointerEvents:"none",...orient({orientation:m,vertical:{bottom:X?`${100-tt}%`:`${tt}%`},horizontal:{left:X?`${100-tt}%`:`${tt}%`}})};return{...ue,ref:Ee,role:"presentation","aria-hidden":!0,"data-disabled":dataAttr(_),"data-invalid":dataAttr(!ke),"data-highlighted":dataAttr(Le),style:{...ue.style,...st}}},[_,X,s,e,m,Ie]),C=reactExports.useCallback((ue={},Ee=null)=>({...ue,ref:Ee,type:"hidden",value:Ie,name:re}),[re,Ie]);return{state:{value:Ie,isFocused:xe,isDragging:ne},actions:Ge,getRootProps:Gn,getTrackProps:Vr,getInnerTrackProps:ir,getThumbProps:Vn,getMarkerProps:ie,getInputProps:C}}function orient(n){const{orientation:e,vertical:s,horizontal:o}=n;return e==="vertical"?s:o}function getDefaultValue(n,e){return e<n?n:n+(e-n)/2}const[SliderProvider,useSliderContext]=createContext({name:"SliderContext",hookName:"useSliderContext",providerName:"<Slider />"}),[SliderStylesProvider,useSliderStyles]=createContext({name:"SliderStylesContext",hookName:"useSliderStyles",providerName:"<Slider />"}),Slider=forwardRef((n,e)=>{const s={...n,orientation:n?.orientation??"horizontal"},o=useMultiStyleConfig("Slider",s),a=omitThemingProps(s),{direction:c}=useTheme();a.direction=c;const{getInputProps:f,getRootProps:h,...m}=useSlider(a),g=h(),_=f({},e);return jsxRuntimeExports.jsx(SliderProvider,{value:m,children:jsxRuntimeExports.jsx(SliderStylesProvider,{value:o,children:jsxRuntimeExports.jsxs(chakra.div,{...g,className:cx("chakra-slider",s.className),__css:o.container,children:[s.children,jsxRuntimeExports.jsx("input",{..._})]})})})});Slider.displayName="Slider";const SliderThumb=forwardRef((n,e)=>{const{getThumbProps:s}=useSliderContext(),o=useSliderStyles(),a=s(n,e);return jsxRuntimeExports.jsx(chakra.div,{...a,className:cx("chakra-slider__thumb",n.className),__css:o.thumb})});SliderThumb.displayName="SliderThumb";const SliderTrack=forwardRef((n,e)=>{const{getTrackProps:s}=useSliderContext(),o=useSliderStyles(),a=s(n,e);return jsxRuntimeExports.jsx(chakra.div,{...a,className:cx("chakra-slider__track",n.className),__css:o.track})});SliderTrack.displayName="SliderTrack";const SliderFilledTrack=forwardRef((n,e)=>{const{getInnerTrackProps:s}=useSliderContext(),o=useSliderStyles(),a=s(n,e);return jsxRuntimeExports.jsx(chakra.div,{...a,className:cx("chakra-slider__filled-track",n.className),__css:o.filledTrack})});SliderFilledTrack.displayName="SliderFilledTrack";const SliderMark=forwardRef((n,e)=>{const{getMarkerProps:s}=useSliderContext(),o=useSliderStyles(),a=s(n,e);return jsxRuntimeExports.jsx(chakra.div,{...a,className:cx("chakra-slider__marker",n.className),__css:o.mark})});SliderMark.displayName="SliderMark";const StackItem=n=>jsxRuntimeExports.jsx(chakra.div,{className:"chakra-stack__item",...n,__css:{display:"inline-block",flex:"0 0 auto",minWidth:0,...n.__css}});StackItem.displayName="StackItem";function getDividerStyles(n){const{spacing:e,direction:s}=n,o={column:{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},"column-reverse":{my:e,mx:0,borderLeftWidth:0,borderBottomWidth:"1px"},row:{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0},"row-reverse":{mx:e,my:0,borderLeftWidth:"1px",borderBottomWidth:0}};return{"&":mapResponsive(s,a=>o[a])}}const Stack=forwardRef((n,e)=>{const{isInline:s,direction:o,align:a,justify:c,spacing:f="0.5rem",wrap:h,children:m,divider:g,className:_,shouldWrapChildren:E,...T}=n,w=s?"row":o??"column",A=reactExports.useMemo(()=>getDividerStyles({spacing:f,direction:w}),[f,w]),R=!!g,V=!E&&!R,te=reactExports.useMemo(()=>{const re=getValidChildren(m);return V?re:re.map((ye,D)=>{const ae=typeof ye.key<"u"?ye.key:D,z=D+1===re.length,X=E?jsxRuntimeExports.jsx(StackItem,{children:ye},ae):ye;if(!R)return X;const le=reactExports.cloneElement(g,{__css:A}),Z=z?null:le;return jsxRuntimeExports.jsxs(reactExports.Fragment,{children:[X,Z]},ae)})},[g,A,R,V,E,m]),se=cx("chakra-stack",_);return jsxRuntimeExports.jsx(chakra.div,{ref:e,display:"flex",alignItems:a,justifyContent:c,flexDirection:w,flexWrap:h,gap:R?void 0:f,className:se,...T,children:te})});Stack.displayName="Stack";const HStack=forwardRef((n,e)=>jsxRuntimeExports.jsx(Stack,{align:"center",...n,direction:"row",ref:e}));HStack.displayName="HStack";const VStack=forwardRef((n,e)=>jsxRuntimeExports.jsx(Stack,{align:"center",...n,direction:"column",ref:e}));VStack.displayName="VStack";const[StatStylesProvider,useStatStyles]=createContext({name:"StatStylesContext",errorMessage:`useStatStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Stat />" `}),Stat=forwardRef(function(e,s){const o=useMultiStyleConfig("Stat",e),a={position:"relative",flex:"1 1 0%",...o.container},{className:c,children:f,...h}=omitThemingProps(e);return jsxRuntimeExports.jsx(StatStylesProvider,{value:o,children:jsxRuntimeExports.jsx(chakra.div,{ref:s,...h,className:cx("chakra-stat",c),__css:a,children:jsxRuntimeExports.jsx("dl",{children:f})})})});Stat.displayName="Stat";const StatLabel=forwardRef(function(e,s){const o=useStatStyles();return jsxRuntimeExports.jsx(chakra.dt,{ref:s,...e,className:cx("chakra-stat__label",e.className),__css:o.label})});StatLabel.displayName="StatLabel";const StatNumber=forwardRef(function(e,s){const o=useStatStyles();return jsxRuntimeExports.jsx(chakra.dd,{ref:s,...e,className:cx("chakra-stat__number",e.className),__css:{...o.number,fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"}})});StatNumber.displayName="StatNumber";const Switch=forwardRef(function(e,s){const o=useMultiStyleConfig("Switch",e),{spacing:a="0.5rem",children:c,...f}=omitThemingProps(e),{getIndicatorProps:h,getInputProps:m,getCheckboxProps:g,getRootProps:_,getLabelProps:E}=useCheckbox(f),T=reactExports.useMemo(()=>({display:"inline-block",position:"relative",verticalAlign:"middle",lineHeight:0,...o.container}),[o.container]),w=reactExports.useMemo(()=>({display:"inline-flex",flexShrink:0,justifyContent:"flex-start",boxSizing:"content-box",cursor:"pointer",...o.track}),[o.track]),A=reactExports.useMemo(()=>({userSelect:"none",marginStart:a,...o.label}),[a,o.label]);return jsxRuntimeExports.jsxs(chakra.label,{..._(),className:cx("chakra-switch",e.className),__css:T,children:[jsxRuntimeExports.jsx("input",{className:"chakra-switch__input",...m({},s)}),jsxRuntimeExports.jsx(chakra.span,{...g(),className:"chakra-switch__track",__css:w,children:jsxRuntimeExports.jsx(chakra.span,{__css:o.thumb,className:"chakra-switch__thumb",...h()})}),c&&jsxRuntimeExports.jsx(chakra.span,{className:"chakra-switch__label",...E(),__css:A,children:c})]})});Switch.displayName="Switch";const[TagStylesProvider,useTagStyles]=createContext({name:"TagStylesContext",errorMessage:`useTagStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tag />" `}),Tag=forwardRef((n,e)=>{const s=useMultiStyleConfig("Tag",n),o=omitThemingProps(n),a={display:"inline-flex",verticalAlign:"top",alignItems:"center",maxWidth:"100%",...s.container};return jsxRuntimeExports.jsx(TagStylesProvider,{value:s,children:jsxRuntimeExports.jsx(chakra.span,{ref:e,...o,__css:a})})});Tag.displayName="Tag";const TagLabel=forwardRef((n,e)=>{const s=useTagStyles();return jsxRuntimeExports.jsx(chakra.span,{ref:e,noOfLines:1,...n,__css:s.label})});TagLabel.displayName="TagLabel";const TagLeftIcon=forwardRef((n,e)=>jsxRuntimeExports.jsx(Icon,{ref:e,verticalAlign:"top",marginEnd:"0.5rem",...n}));TagLeftIcon.displayName="TagLeftIcon";const TagRightIcon=forwardRef((n,e)=>jsxRuntimeExports.jsx(Icon,{ref:e,verticalAlign:"top",marginStart:"0.5rem",...n}));TagRightIcon.displayName="TagRightIcon";const TagCloseIcon=n=>jsxRuntimeExports.jsx(Icon,{verticalAlign:"inherit",viewBox:"0 0 512 512",...n,children:jsxRuntimeExports.jsx("path",{fill:"currentColor",d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"})});TagCloseIcon.displayName="TagCloseIcon";const TagCloseButton=forwardRef((n,e)=>{const{isDisabled:s,children:o,...a}=n,f={display:"flex",alignItems:"center",justifyContent:"center",outline:"0",...useTagStyles().closeButton};return jsxRuntimeExports.jsx(chakra.button,{ref:e,"aria-label":"close",...a,type:"button",disabled:s,__css:f,children:o||jsxRuntimeExports.jsx(TagCloseIcon,{})})});TagCloseButton.displayName="TagCloseButton";function getToastPlacement(n,e){const s=n??"bottom";return{"top-start":{ltr:"top-left",rtl:"top-right"},"top-end":{ltr:"top-right",rtl:"top-left"},"bottom-start":{ltr:"bottom-left",rtl:"bottom-right"},"bottom-end":{ltr:"bottom-right",rtl:"bottom-left"}}[s]?.[e]??s}function createToastFn(n,e){const s=a=>({...e,...a,position:getToastPlacement(a?.position??e?.position,n)}),o=a=>{const c=s(a),f=createRenderToast(c);return toastStore.notify(f,c)};return o.update=(a,c)=>{toastStore.update(a,s(c))},o.promise=(a,c)=>{const f=o({...c.loading,status:"loading",duration:null});a.then(h=>o.update(f,{status:"success",duration:5e3,...runIfFn$1(c.success,h)})).catch(h=>o.update(f,{status:"error",duration:5e3,...runIfFn$1(c.error,h)}))},o.closeAll=toastStore.closeAll,o.close=toastStore.close,o.isActive=toastStore.isActive,o}function useToast(n){const{theme:e}=useChakra(),s=useToastOptionContext();return reactExports.useMemo(()=>createToastFn(e.direction,{...s,...n}),[n,e.direction,s])}const Text=forwardRef(function(e,s){const o=useStyleConfig("Text",e),{className:a,align:c,decoration:f,casing:h,...m}=omitThemingProps(e),g=compact({textAlign:e.align,textDecoration:e.decoration,textTransform:e.casing});return jsxRuntimeExports.jsx(chakra.p,{ref:s,className:cx("chakra-text",e.className),...g,...m,__css:o})});Text.displayName="Text";const Wrap=forwardRef(function(e,s){const{spacing:o="0.5rem",spacingX:a,spacingY:c,children:f,justify:h,direction:m,align:g,className:_,shouldWrapChildren:E,...T}=e,w=reactExports.useMemo(()=>E?reactExports.Children.map(f,(A,R)=>jsxRuntimeExports.jsx(WrapItem,{children:A},R)):f,[f,E]);return jsxRuntimeExports.jsx(chakra.div,{ref:s,className:cx("chakra-wrap",_),...T,children:jsxRuntimeExports.jsx(chakra.ul,{className:"chakra-wrap__list",__css:{display:"flex",flexWrap:"wrap",justifyContent:h,alignItems:g,flexDirection:m,listStyleType:"none",gap:o,columnGap:a,rowGap:c,padding:"0"},children:w})})});Wrap.displayName="Wrap";const WrapItem=forwardRef(function(e,s){const{className:o,...a}=e;return jsxRuntimeExports.jsx(chakra.li,{ref:s,__css:{display:"flex",alignItems:"flex-start"},className:cx("chakra-wrap__listitem",o),...a})});WrapItem.displayName="WrapItem";const SettingsIcon=createIcon({viewBox:"0 0 14 14",d:"M14,7.77 L14,6.17 L12.06,5.53 L11.61,4.44 L12.49,2.6 L11.36,1.47 L9.55,2.38 L8.46,1.93 L7.77,0.01 L6.17,0.01 L5.54,1.95 L4.43,2.4 L2.59,1.52 L1.46,2.65 L2.37,4.46 L1.92,5.55 L0,6.23 L0,7.82 L1.94,8.46 L2.39,9.55 L1.51,11.39 L2.64,12.52 L4.45,11.61 L5.54,12.06 L6.23,13.98 L7.82,13.98 L8.45,12.04 L9.56,11.59 L11.4,12.47 L12.53,11.34 L11.61,9.53 L12.08,8.44 L14,7.75 L14,7.77 Z M7,10 C5.34,10 4,8.66 4,7 C4,5.34 5.34,4 7,4 C8.66,4 10,5.34 10,7 C10,8.66 8.66,10 7,10 Z",displayName:"SettingsIcon"});var DefaultContext={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},IconContext=React.createContext&&React.createContext(DefaultContext),_excluded=["attr","size","title"];function _objectWithoutProperties(n,e){if(n==null)return{};var s=_objectWithoutPropertiesLoose(n,e),o,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(a=0;a<c.length;a++)o=c[a],!(e.indexOf(o)>=0)&&Object.prototype.propertyIsEnumerable.call(n,o)&&(s[o]=n[o])}return s}function _objectWithoutPropertiesLoose(n,e){if(n==null)return{};var s={};for(var o in n)if(Object.prototype.hasOwnProperty.call(n,o)){if(e.indexOf(o)>=0)continue;s[o]=n[o]}return s}function _extends(){return _extends=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(n[o]=s[o])}return n},_extends.apply(this,arguments)}function ownKeys(n,e){var s=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable})),s.push.apply(s,o)}return s}function _objectSpread(n){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ownKeys(Object(s),!0).forEach(function(o){_defineProperty(n,o,s[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(o){Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(s,o))})}return n}function _defineProperty(n,e,s){return e=_toPropertyKey(e),e in n?Object.defineProperty(n,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[e]=s,n}function _toPropertyKey(n){var e=_toPrimitive(n,"string");return typeof e=="symbol"?e:e+""}function _toPrimitive(n,e){if(typeof n!="object"||!n)return n;var s=n[Symbol.toPrimitive];if(s!==void 0){var o=s.call(n,e);if(typeof o!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function Tree2Element(n){return n&&n.map((e,s)=>React.createElement(e.tag,_objectSpread({key:s},e.attr),Tree2Element(e.child)))}function GenIcon(n){return e=>React.createElement(IconBase,_extends({attr:_objectSpread({},n.attr)},e),Tree2Element(n.child))}function IconBase(n){var e=s=>{var{attr:o,size:a,title:c}=n,f=_objectWithoutProperties(n,_excluded),h=a||s.size||"1em",m;return s.className&&(m=s.className),n.className&&(m=(m?m+" ":"")+n.className),React.createElement("svg",_extends({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,o,f,{className:m,style:_objectSpread(_objectSpread({color:n.color||s.color},s.style),n.style),height:h,width:h,xmlns:"http://www.w3.org/2000/svg"}),c&&React.createElement("title",null,c),n.children)};return IconContext!==void 0?React.createElement(IconContext.Consumer,null,s=>e(s)):e(DefaultContext)}function CiRepeat(n){return GenIcon({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"Repeat"},child:[{tag:"path",attr:{d:"M2.078,17.562c-0.01,-0.039 -0.016,-0.08 -0.016,-0.123c0,-0.138 0.056,-0.263 0.147,-0.353c0.008,-0.009 1.416,-1.417 2,-2c0.198,-0.198 0.507,-0.183 0.707,-0c0.199,0.183 0.185,0.522 -0,0.707l-1.147,1.146l15.669,0c0.828,0 1.5,-0.671 1.5,-1.5l0,-3.439c0,-0.276 0.224,-0.5 0.5,-0.5c0.276,0 0.5,0.224 0.5,0.5l0,3.439c0,1.381 -1.12,2.5 -2.5,2.5l-15.669,0l1.147,1.147c0.198,0.198 0.183,0.507 -0,0.707c-0.183,0.199 -0.522,0.185 -0.707,-0l-2,-2c-0.066,-0.063 -0.11,-0.143 -0.131,-0.231Zm19.845,-11.105c0.01,0.039 0.015,0.08 0.015,0.122c0,0.138 -0.056,0.263 -0.147,0.354c-0.008,0.008 -1.416,1.417 -2,2c-0.197,0.198 -0.507,0.183 -0.707,-0c-0.199,-0.183 -0.185,-0.522 0,-0.707l1.147,-1.147l-15.669,0c-0.828,0 -1.5,0.672 -1.5,1.5l0,3.439c-0,0.276 -0.224,0.5 -0.5,0.5c-0.276,0 -0.5,-0.224 -0.5,-0.5l0,-3.439c0,-1.381 1.12,-2.5 2.5,-2.5l15.669,0l-1.146,-1.146c-0.198,-0.198 -0.183,-0.507 -0,-0.707c0.183,-0.199 0.522,-0.185 0.707,-0l2,2c0.065,0.063 0.11,0.143 0.131,0.231Z"},child:[]}]}]})(n)}function CiUser(n){return GenIcon({attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{id:"User"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{d:"M17.438,21.937H6.562a2.5,2.5,0,0,1-2.5-2.5V18.61c0-3.969,3.561-7.2,7.938-7.2s7.938,3.229,7.938,7.2v.827A2.5,2.5,0,0,1,17.438,21.937ZM12,12.412c-3.826,0-6.938,2.78-6.938,6.2v.827a1.5,1.5,0,0,0,1.5,1.5H17.438a1.5,1.5,0,0,0,1.5-1.5V18.61C18.938,15.192,15.826,12.412,12,12.412Z"},child:[]},{tag:"path",attr:{d:"M12,9.911a3.924,3.924,0,1,1,3.923-3.924A3.927,3.927,0,0,1,12,9.911Zm0-6.847a2.924,2.924,0,1,0,2.923,2.923A2.926,2.926,0,0,0,12,3.064Z"},child:[]}]}]}]})(n)}var name$3="firebase",version$3="12.1.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$3,version$3,"app");const name$2="@firebase/installations",version$2="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_TIMEOUT_MS=1e4,PACKAGE_VERSION=`w:${version$2}`,INTERNAL_AUTH_VERSION="FIS_v2",INSTALLATIONS_API_URL="https://firebaseinstallations.googleapis.com/v1",TOKEN_EXPIRATION_BUFFER=3600*1e3,SERVICE="installations",SERVICE_NAME="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_DESCRIPTION_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ERROR_FACTORY$1=new ErrorFactory(SERVICE,SERVICE_NAME,ERROR_DESCRIPTION_MAP);function isServerError(n){return n instanceof FirebaseError&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getInstallationsEndpoint({projectId:n}){return`${INSTALLATIONS_API_URL}/projects/${n}/installations`}function extractAuthTokenInfoFromResponse(n){return{token:n.token,requestStatus:2,expiresIn:getExpiresInFromResponseExpiresIn(n.expiresIn),creationTime:Date.now()}}async function getErrorFromResponse(n,e){const o=(await e.json()).error;return ERROR_FACTORY$1.create("request-failed",{requestName:n,serverCode:o.code,serverMessage:o.message,serverStatus:o.status})}function getHeaders$1({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function getHeadersWithAuth(n,{refreshToken:e}){const s=getHeaders$1(n);return s.append("Authorization",getAuthorizationHeader(e)),s}async function retryIfServerError(n){const e=await n();return e.status>=500&&e.status<600?n():e}function getExpiresInFromResponseExpiresIn(n){return Number(n.replace("s","000"))}function getAuthorizationHeader(n){return`${INTERNAL_AUTH_VERSION} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function createInstallationRequest({appConfig:n,heartbeatServiceProvider:e},{fid:s}){const o=getInstallationsEndpoint(n),a=getHeaders$1(n),c=e.getImmediate({optional:!0});if(c){const g=await c.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const f={fid:s,authVersion:INTERNAL_AUTH_VERSION,appId:n.appId,sdkVersion:PACKAGE_VERSION},h={method:"POST",headers:a,body:JSON.stringify(f)},m=await retryIfServerError(()=>fetch(o,h));if(m.ok){const g=await m.json();return{fid:g.fid||s,registrationStatus:2,refreshToken:g.refreshToken,authToken:extractAuthTokenInfoFromResponse(g.authToken)}}else throw await getErrorFromResponse("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sleep(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bufferToBase64UrlSafe(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VALID_FID_PATTERN=/^[cdef][\w-]{21}$/,INVALID_FID="";function generateFid(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const s=encode$1(n);return VALID_FID_PATTERN.test(s)?s:INVALID_FID}catch{return INVALID_FID}}function encode$1(n){return bufferToBase64UrlSafe(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getKey$1(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fidChangeCallbacks=new Map;function fidChanged(n,e){const s=getKey$1(n);callFidChangeCallbacks(s,e),broadcastFidChange(s,e)}function callFidChangeCallbacks(n,e){const s=fidChangeCallbacks.get(n);if(s)for(const o of s)o(e)}function broadcastFidChange(n,e){const s=getBroadcastChannel();s&&s.postMessage({key:n,fid:e}),closeBroadcastChannel()}let broadcastChannel=null;function getBroadcastChannel(){return!broadcastChannel&&"BroadcastChannel"in self&&(broadcastChannel=new BroadcastChannel("[Firebase] FID Change"),broadcastChannel.onmessage=n=>{callFidChangeCallbacks(n.data.key,n.data.fid)}),broadcastChannel}function closeBroadcastChannel(){fidChangeCallbacks.size===0&&broadcastChannel&&(broadcastChannel.close(),broadcastChannel=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME$1="firebase-installations-database",DATABASE_VERSION$1=1,OBJECT_STORE_NAME$1="firebase-installations-store";let dbPromise$1=null;function getDbPromise$1(){return dbPromise$1||(dbPromise$1=openDB(DATABASE_NAME$1,DATABASE_VERSION$1,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(OBJECT_STORE_NAME$1)}}})),dbPromise$1}async function set(n,e){const s=getKey$1(n),a=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite"),c=a.objectStore(OBJECT_STORE_NAME$1),f=await c.get(s);return await c.put(e,s),await a.done,(!f||f.fid!==e.fid)&&fidChanged(n,e.fid),e}async function remove(n){const e=getKey$1(n),o=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite");await o.objectStore(OBJECT_STORE_NAME$1).delete(e),await o.done}async function update(n,e){const s=getKey$1(n),a=(await getDbPromise$1()).transaction(OBJECT_STORE_NAME$1,"readwrite"),c=a.objectStore(OBJECT_STORE_NAME$1),f=await c.get(s),h=e(f);return h===void 0?await c.delete(s):await c.put(h,s),await a.done,h&&(!f||f.fid!==h.fid)&&fidChanged(n,h.fid),h}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getInstallationEntry(n){let e;const s=await update(n.appConfig,o=>{const a=updateOrCreateInstallationEntry(o),c=triggerRegistrationIfNecessary(n,a);return e=c.registrationPromise,c.installationEntry});return s.fid===INVALID_FID?{installationEntry:await e}:{installationEntry:s,registrationPromise:e}}function updateOrCreateInstallationEntry(n){const e=n||{fid:generateFid(),registrationStatus:0};return clearTimedOutRequest(e)}function triggerRegistrationIfNecessary(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ERROR_FACTORY$1.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const s={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},o=registerInstallation(n,s);return{installationEntry:s,registrationPromise:o}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:waitUntilFidRegistration(n)}:{installationEntry:e}}async function registerInstallation(n,e){try{const s=await createInstallationRequest(n,e);return set(n.appConfig,s)}catch(s){throw isServerError(s)&&s.customData.serverCode===409?await remove(n.appConfig):await set(n.appConfig,{fid:e.fid,registrationStatus:0}),s}}async function waitUntilFidRegistration(n){let e=await updateInstallationRequest(n.appConfig);for(;e.registrationStatus===1;)await sleep(100),e=await updateInstallationRequest(n.appConfig);if(e.registrationStatus===0){const{installationEntry:s,registrationPromise:o}=await getInstallationEntry(n);return o||s}return e}function updateInstallationRequest(n){return update(n,e=>{if(!e)throw ERROR_FACTORY$1.create("installation-not-found");return clearTimedOutRequest(e)})}function clearTimedOutRequest(n){return hasInstallationRequestTimedOut(n)?{fid:n.fid,registrationStatus:0}:n}function hasInstallationRequestTimedOut(n){return n.registrationStatus===1&&n.registrationTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function generateAuthTokenRequest({appConfig:n,heartbeatServiceProvider:e},s){const o=getGenerateAuthTokenEndpoint(n,s),a=getHeadersWithAuth(n,s),c=e.getImmediate({optional:!0});if(c){const g=await c.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const f={installation:{sdkVersion:PACKAGE_VERSION,appId:n.appId}},h={method:"POST",headers:a,body:JSON.stringify(f)},m=await retryIfServerError(()=>fetch(o,h));if(m.ok){const g=await m.json();return extractAuthTokenInfoFromResponse(g)}else throw await getErrorFromResponse("Generate Auth Token",m)}function getGenerateAuthTokenEndpoint(n,{fid:e}){return`${getInstallationsEndpoint(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function refreshAuthToken(n,e=!1){let s;const o=await update(n.appConfig,c=>{if(!isEntryRegistered(c))throw ERROR_FACTORY$1.create("not-registered");const f=c.authToken;if(!e&&isAuthTokenValid(f))return c;if(f.requestStatus===1)return s=waitUntilAuthTokenRequest(n,e),c;{if(!navigator.onLine)throw ERROR_FACTORY$1.create("app-offline");const h=makeAuthTokenRequestInProgressEntry(c);return s=fetchAuthTokenFromServer(n,h),h}});return s?await s:o.authToken}async function waitUntilAuthTokenRequest(n,e){let s=await updateAuthTokenRequest(n.appConfig);for(;s.authToken.requestStatus===1;)await sleep(100),s=await updateAuthTokenRequest(n.appConfig);const o=s.authToken;return o.requestStatus===0?refreshAuthToken(n,e):o}function updateAuthTokenRequest(n){return update(n,e=>{if(!isEntryRegistered(e))throw ERROR_FACTORY$1.create("not-registered");const s=e.authToken;return hasAuthTokenRequestTimedOut(s)?{...e,authToken:{requestStatus:0}}:e})}async function fetchAuthTokenFromServer(n,e){try{const s=await generateAuthTokenRequest(n,e),o={...e,authToken:s};return await set(n.appConfig,o),s}catch(s){if(isServerError(s)&&(s.customData.serverCode===401||s.customData.serverCode===404))await remove(n.appConfig);else{const o={...e,authToken:{requestStatus:0}};await set(n.appConfig,o)}throw s}}function isEntryRegistered(n){return n!==void 0&&n.registrationStatus===2}function isAuthTokenValid(n){return n.requestStatus===2&&!isAuthTokenExpired(n)}function isAuthTokenExpired(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+TOKEN_EXPIRATION_BUFFER}function makeAuthTokenRequestInProgressEntry(n){const e={requestStatus:1,requestTime:Date.now()};return{...n,authToken:e}}function hasAuthTokenRequestTimedOut(n){return n.requestStatus===1&&n.requestTime+PENDING_TIMEOUT_MS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getId(n){const e=n,{installationEntry:s,registrationPromise:o}=await getInstallationEntry(e);return o?o.catch(console.error):refreshAuthToken(e).catch(console.error),s.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken$2(n,e=!1){const s=n;return await completeInstallationRegistration(s),(await refreshAuthToken(s,e)).token}async function completeInstallationRegistration(n){const{registrationPromise:e}=await getInstallationEntry(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig$1(n){if(!n||!n.options)throw getMissingValueError$1("App Configuration");if(!n.name)throw getMissingValueError$1("App Name");const e=["projectId","apiKey","appId"];for(const s of e)if(!n.options[s])throw getMissingValueError$1(s);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function getMissingValueError$1(n){return ERROR_FACTORY$1.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INSTALLATIONS_NAME="installations",INSTALLATIONS_NAME_INTERNAL="installations-internal",publicFactory=n=>{const e=n.getProvider("app").getImmediate(),s=extractAppConfig$1(e),o=_getProvider(e,"heartbeat");return{app:e,appConfig:s,heartbeatServiceProvider:o,_delete:()=>Promise.resolve()}},internalFactory=n=>{const e=n.getProvider("app").getImmediate(),s=_getProvider(e,INSTALLATIONS_NAME).getImmediate();return{getId:()=>getId(s),getToken:a=>getToken$2(s,a)}};function registerInstallations(){_registerComponent(new Component$1(INSTALLATIONS_NAME,publicFactory,"PUBLIC")),_registerComponent(new Component$1(INSTALLATIONS_NAME_INTERNAL,internalFactory,"PRIVATE"))}registerInstallations();registerVersion(name$2,version$2);registerVersion(name$2,version$2,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_SW_PATH="/firebase-messaging-sw.js",DEFAULT_SW_SCOPE="/firebase-cloud-messaging-push-scope",DEFAULT_VAPID_KEY="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ENDPOINT="https://fcmregistrations.googleapis.com/v1",CONSOLE_CAMPAIGN_ID="google.c.a.c_id",CONSOLE_CAMPAIGN_NAME="google.c.a.c_l",CONSOLE_CAMPAIGN_TIME="google.c.a.ts",CONSOLE_CAMPAIGN_ANALYTICS_ENABLED="google.c.a.e",DEFAULT_REGISTRATION_TIMEOUT=1e4;var MessageType$1;(function(n){n[n.DATA_MESSAGE=1]="DATA_MESSAGE",n[n.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(MessageType$1||(MessageType$1={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var MessageType;(function(n){n.PUSH_RECEIVED="push-received",n.NOTIFICATION_CLICKED="notification-clicked"})(MessageType||(MessageType={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function arrayToBase64(n){const e=new Uint8Array(n);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function base64ToArray(n){const e="=".repeat((4-n.length%4)%4),s=(n+e).replace(/\-/g,"+").replace(/_/g,"/"),o=atob(s),a=new Uint8Array(o.length);for(let c=0;c<o.length;++c)a[c]=o.charCodeAt(c);return a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OLD_DB_NAME="fcm_token_details_db",OLD_DB_VERSION=5,OLD_OBJECT_STORE_NAME="fcm_token_object_Store";async function migrateOldDatabase(n){if("databases"in indexedDB&&!(await indexedDB.databases()).map(c=>c.name).includes(OLD_DB_NAME))return null;let e=null;return(await openDB(OLD_DB_NAME,OLD_DB_VERSION,{upgrade:async(o,a,c,f)=>{if(a<2||!o.objectStoreNames.contains(OLD_OBJECT_STORE_NAME))return;const h=f.objectStore(OLD_OBJECT_STORE_NAME),m=await h.index("fcmSenderId").get(n);if(await h.clear(),!!m){if(a===2){const g=m;if(!g.auth||!g.p256dh||!g.endpoint)return;e={token:g.fcmToken,createTime:g.createTime??Date.now(),subscriptionOptions:{auth:g.auth,p256dh:g.p256dh,endpoint:g.endpoint,swScope:g.swScope,vapidKey:typeof g.vapidKey=="string"?g.vapidKey:arrayToBase64(g.vapidKey)}}}else if(a===3){const g=m;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:arrayToBase64(g.auth),p256dh:arrayToBase64(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:arrayToBase64(g.vapidKey)}}}else if(a===4){const g=m;e={token:g.fcmToken,createTime:g.createTime,subscriptionOptions:{auth:arrayToBase64(g.auth),p256dh:arrayToBase64(g.p256dh),endpoint:g.endpoint,swScope:g.swScope,vapidKey:arrayToBase64(g.vapidKey)}}}}}})).close(),await deleteDB(OLD_DB_NAME),await deleteDB("fcm_vapid_details_db"),await deleteDB("undefined"),checkTokenDetails(e)?e:null}function checkTokenDetails(n){if(!n||!n.subscriptionOptions)return!1;const{subscriptionOptions:e}=n;return typeof n.createTime=="number"&&n.createTime>0&&typeof n.token=="string"&&n.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DATABASE_NAME="firebase-messaging-database",DATABASE_VERSION=1,OBJECT_STORE_NAME="firebase-messaging-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DATABASE_NAME,DATABASE_VERSION,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(OBJECT_STORE_NAME)}}})),dbPromise}async function dbGet(n){const e=getKey(n),o=await(await getDbPromise()).transaction(OBJECT_STORE_NAME).objectStore(OBJECT_STORE_NAME).get(e);if(o)return o;{const a=await migrateOldDatabase(n.appConfig.senderId);if(a)return await dbSet(n,a),a}}async function dbSet(n,e){const s=getKey(n),a=(await getDbPromise()).transaction(OBJECT_STORE_NAME,"readwrite");return await a.objectStore(OBJECT_STORE_NAME).put(e,s),await a.done,e}function getKey({appConfig:n}){return n.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_MAP={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ERROR_FACTORY=new ErrorFactory("messaging","Messaging",ERROR_MAP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestGetToken(n,e){const s=await getHeaders(n),o=getBody(e),a={method:"POST",headers:s,body:JSON.stringify(o)};let c;try{c=await(await fetch(getEndpoint(n.appConfig),a)).json()}catch(f){throw ERROR_FACTORY.create("token-subscribe-failed",{errorInfo:f?.toString()})}if(c.error){const f=c.error.message;throw ERROR_FACTORY.create("token-subscribe-failed",{errorInfo:f})}if(!c.token)throw ERROR_FACTORY.create("token-subscribe-no-token");return c.token}async function requestUpdateToken(n,e){const s=await getHeaders(n),o=getBody(e.subscriptionOptions),a={method:"PATCH",headers:s,body:JSON.stringify(o)};let c;try{c=await(await fetch(`${getEndpoint(n.appConfig)}/${e.token}`,a)).json()}catch(f){throw ERROR_FACTORY.create("token-update-failed",{errorInfo:f?.toString()})}if(c.error){const f=c.error.message;throw ERROR_FACTORY.create("token-update-failed",{errorInfo:f})}if(!c.token)throw ERROR_FACTORY.create("token-update-no-token");return c.token}async function requestDeleteToken(n,e){const o={method:"DELETE",headers:await getHeaders(n)};try{const c=await(await fetch(`${getEndpoint(n.appConfig)}/${e}`,o)).json();if(c.error){const f=c.error.message;throw ERROR_FACTORY.create("token-unsubscribe-failed",{errorInfo:f})}}catch(a){throw ERROR_FACTORY.create("token-unsubscribe-failed",{errorInfo:a?.toString()})}}function getEndpoint({projectId:n}){return`${ENDPOINT}/projects/${n}/registrations`}async function getHeaders({appConfig:n,installations:e}){const s=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":`FIS ${s}`})}function getBody({p256dh:n,auth:e,endpoint:s,vapidKey:o}){const a={web:{endpoint:s,auth:e,p256dh:n}};return o!==DEFAULT_VAPID_KEY&&(a.web.applicationPubKey=o),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TOKEN_EXPIRATION_MS=10080*60*1e3;async function getTokenInternal(n){const e=await getPushSubscription(n.swRegistration,n.vapidKey),s={vapidKey:n.vapidKey,swScope:n.swRegistration.scope,endpoint:e.endpoint,auth:arrayToBase64(e.getKey("auth")),p256dh:arrayToBase64(e.getKey("p256dh"))},o=await dbGet(n.firebaseDependencies);if(o){if(isTokenValid(o.subscriptionOptions,s))return Date.now()>=o.createTime+TOKEN_EXPIRATION_MS?updateToken(n,{token:o.token,createTime:Date.now(),subscriptionOptions:s}):o.token;try{await requestDeleteToken(n.firebaseDependencies,o.token)}catch(a){console.warn(a)}return getNewToken(n.firebaseDependencies,s)}else return getNewToken(n.firebaseDependencies,s)}async function updateToken(n,e){try{const s=await requestUpdateToken(n.firebaseDependencies,e),o={...e,token:s,createTime:Date.now()};return await dbSet(n.firebaseDependencies,o),s}catch(s){throw s}}async function getNewToken(n,e){const o={token:await requestGetToken(n,e),createTime:Date.now(),subscriptionOptions:e};return await dbSet(n,o),o.token}async function getPushSubscription(n,e){const s=await n.pushManager.getSubscription();return s||n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:base64ToArray(e)})}function isTokenValid(n,e){const s=e.vapidKey===n.vapidKey,o=e.endpoint===n.endpoint,a=e.auth===n.auth,c=e.p256dh===n.p256dh;return s&&o&&a&&c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function externalizePayload(n){const e={from:n.from,collapseKey:n.collapse_key,messageId:n.fcmMessageId};return propagateNotificationPayload(e,n),propagateDataPayload(e,n),propagateFcmOptions(e,n),e}function propagateNotificationPayload(n,e){if(!e.notification)return;n.notification={};const s=e.notification.title;s&&(n.notification.title=s);const o=e.notification.body;o&&(n.notification.body=o);const a=e.notification.image;a&&(n.notification.image=a);const c=e.notification.icon;c&&(n.notification.icon=c)}function propagateDataPayload(n,e){e.data&&(n.data=e.data)}function propagateFcmOptions(n,e){if(!e.fcmOptions&&!e.notification?.click_action)return;n.fcmOptions={};const s=e.fcmOptions?.link??e.notification?.click_action;s&&(n.fcmOptions.link=s);const o=e.fcmOptions?.analytics_label;o&&(n.fcmOptions.analyticsLabel=o)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isConsoleMessage(n){return typeof n=="object"&&!!n&&CONSOLE_CAMPAIGN_ID in n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function extractAppConfig(n){if(!n||!n.options)throw getMissingValueError("App Configuration Object");if(!n.name)throw getMissingValueError("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:s}=n;for(const o of e)if(!s[o])throw getMissingValueError(o);return{appName:n.name,projectId:s.projectId,apiKey:s.apiKey,appId:s.appId,senderId:s.messagingSenderId}}function getMissingValueError(n){return ERROR_FACTORY.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MessagingService{constructor(e,s,o){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const a=extractAppConfig(e);this.firebaseDependencies={app:e,appConfig:a,installations:s,analyticsProvider:o}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function registerDefaultSw(n){try{n.swRegistration=await navigator.serviceWorker.register(DEFAULT_SW_PATH,{scope:DEFAULT_SW_SCOPE}),n.swRegistration.update().catch(()=>{}),await waitForRegistrationActive(n.swRegistration)}catch(e){throw ERROR_FACTORY.create("failed-service-worker-registration",{browserErrorMessage:e?.message})}}async function waitForRegistrationActive(n){return new Promise((e,s)=>{const o=setTimeout(()=>s(new Error(`Service worker not registered after ${DEFAULT_REGISTRATION_TIMEOUT} ms`)),DEFAULT_REGISTRATION_TIMEOUT),a=n.installing||n.waiting;n.active?(clearTimeout(o),e()):a?a.onstatechange=c=>{c.target?.state==="activated"&&(a.onstatechange=null,clearTimeout(o),e())}:(clearTimeout(o),s(new Error("No incoming service worker found.")))})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateSwReg(n,e){if(!e&&!n.swRegistration&&await registerDefaultSw(n),!(!e&&n.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ERROR_FACTORY.create("invalid-sw-registration");n.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function updateVapidKey(n,e){e?n.vapidKey=e:n.vapidKey||(n.vapidKey=DEFAULT_VAPID_KEY)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function getToken$1(n,e){if(!navigator)throw ERROR_FACTORY.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ERROR_FACTORY.create("permission-blocked");return await updateVapidKey(n,e?.vapidKey),await updateSwReg(n,e?.serviceWorkerRegistration),getTokenInternal(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function logToScion(n,e,s){const o=getEventType(e);(await n.firebaseDependencies.analyticsProvider.get()).logEvent(o,{message_id:s[CONSOLE_CAMPAIGN_ID],message_name:s[CONSOLE_CAMPAIGN_NAME],message_time:s[CONSOLE_CAMPAIGN_TIME],message_device_time:Math.floor(Date.now()/1e3)})}function getEventType(n){switch(n){case MessageType.NOTIFICATION_CLICKED:return"notification_open";case MessageType.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function messageEventListener(n,e){const s=e.data;if(!s.isFirebaseMessaging)return;n.onMessageHandler&&s.messageType===MessageType.PUSH_RECEIVED&&(typeof n.onMessageHandler=="function"?n.onMessageHandler(externalizePayload(s)):n.onMessageHandler.next(externalizePayload(s)));const o=s.data;isConsoleMessage(o)&&o[CONSOLE_CAMPAIGN_ANALYTICS_ENABLED]==="1"&&await logToScion(n,s.messageType,o)}const name$1="@firebase/messaging",version$1="0.12.23";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WindowMessagingFactory=n=>{const e=new MessagingService(n.getProvider("app").getImmediate(),n.getProvider("installations-internal").getImmediate(),n.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",s=>messageEventListener(e,s)),e},WindowMessagingInternalFactory=n=>{const e=n.getProvider("messaging").getImmediate();return{getToken:o=>getToken$1(e,o)}};function registerMessagingInWindow(){_registerComponent(new Component$1("messaging",WindowMessagingFactory,"PUBLIC")),_registerComponent(new Component$1("messaging-internal",WindowMessagingInternalFactory,"PRIVATE")),registerVersion(name$1,version$1),registerVersion(name$1,version$1,"esm2020")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function isWindowSupported(){try{await validateIndexedDBOpenable()}catch{return!1}return typeof window<"u"&&isIndexedDBAvailable()&&areCookiesEnabled()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getMessagingInWindow(n=getApp()){return isWindowSupported().then(e=>{if(!e)throw ERROR_FACTORY.create("unsupported-browser")},e=>{throw ERROR_FACTORY.create("indexed-db-unsupported")}),_getProvider(getModularInstance$1(n),"messaging").getImmediate()}registerMessagingInWindow();/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(n){return n&&n._delegate?n._delegate:n}class Component{constructor(e,s,o){this.name=e,this.instanceFactory=s,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(n,e,...s)=>{if(e<n.logLevel)return;const o=new Date().toISOString(),a=ConsoleMethod[e];if(a)console[a](`[${o}]  ${n.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}var name="@firebase/vertexai",version="1.2.4";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VERTEX_TYPE="vertexAI",DEFAULT_LOCATION="us-central1";/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VertexAIService{constructor(e,s,o,a){var c;this.app=e,this.options=a;const f=o?.getImmediate({optional:!0}),h=s?.getImmediate({optional:!0});this.auth=h||null,this.appCheck=f||null,this.location=((c=this.options)===null||c===void 0?void 0:c.location)||DEFAULT_LOCATION}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */new Logger("@firebase/vertexai");/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Task;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.PREDICT="predict"})(Task||(Task={}));var HarmCategory;(function(n){n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(HarmCategory||(HarmCategory={}));var HarmBlockThreshold;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(HarmBlockThreshold||(HarmBlockThreshold={}));var HarmBlockMethod;(function(n){n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(HarmBlockMethod||(HarmBlockMethod={}));var HarmProbability;(function(n){n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(HarmProbability||(HarmProbability={}));var HarmSeverity;(function(n){n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(HarmSeverity||(HarmSeverity={}));var BlockReason;(function(n){n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(BlockReason||(BlockReason={}));var FinishReason;(function(n){n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL"})(FinishReason||(FinishReason={}));var FunctionCallingMode;(function(n){n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(FunctionCallingMode||(FunctionCallingMode={}));var Modality;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Modality||(Modality={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var SchemaType;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(SchemaType||(SchemaType={}));/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ImagenSafetyFilterLevel;(function(n){n.BLOCK_LOW_AND_ABOVE="block_low_and_above",n.BLOCK_MEDIUM_AND_ABOVE="block_medium_and_above",n.BLOCK_ONLY_HIGH="block_only_high",n.BLOCK_NONE="block_none"})(ImagenSafetyFilterLevel||(ImagenSafetyFilterLevel={}));var ImagenPersonFilterLevel;(function(n){n.BLOCK_ALL="dont_allow",n.ALLOW_ADULT="allow_adult",n.ALLOW_ALL="allow_all"})(ImagenPersonFilterLevel||(ImagenPersonFilterLevel={}));var ImagenAspectRatio;(function(n){n.SQUARE="1:1",n.LANDSCAPE_3x4="3:4",n.PORTRAIT_4x3="4:3",n.LANDSCAPE_16x9="16:9",n.PORTRAIT_9x16="9:16"})(ImagenAspectRatio||(ImagenAspectRatio={}));FinishReason.RECITATION,FinishReason.SAFETY;/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVertexAI(n=getApp(),e){return n=getModularInstance(n),_getProvider(n,VERTEX_TYPE).getImmediate({identifier:DEFAULT_LOCATION})}function registerVertex(){_registerComponent(new Component(VERTEX_TYPE,(n,{instanceIdentifier:e})=>{const s=n.getProvider("app").getImmediate(),o=n.getProvider("auth-internal"),a=n.getProvider("app-check-internal");return new VertexAIService(s,o,a,{location:e})},"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version),registerVersion(name,version,"esm2017")}registerVertex();const firebaseConfig={apiKey:"AIzaSyA4GL5Uc-Nod0OvshPE3EsZRLkLLfJ07-c",authDomain:"nosabo-30dcb.firebaseapp.com",projectId:"nosabo-30dcb",storageBucket:"nosabo-30dcb.firebasestorage.app",messagingSenderId:"323662475274",appId:"1:323662475274:web:570aa2eb1beaf87810aff3",measurementId:"G-FX7CB1K22B"},app=initializeApp(firebaseConfig);console.log("app",app);const database=getFirestore(app);getVertexAI(app);getVertexAI(app);let messaging=null;async function initMessaging(){await isWindowSupported()?(messaging=getMessagingInWindow(app),console.log("messaging...",messaging)):console.warn("Firebase Messaging is not supported in this environment.")}initMessaging();const PALETTES={ocean:{primary:"#22d3ee",secondary:"#60a5fa",accent:"#58f7a2",ringListening:"rgba(14,165,233,0.6)",ringSpeaking:"rgba(34,211,238,0.65)",ringThinking:"rgba(255,220,0,0.55)",neutral:"#a0b3ff",bg:"linear-gradient(180deg,#0b1220 0%,#162033 100%)",stroke:"#2b3a55"},sunset:{primary:"#f59e0b",secondary:"#fb7185",accent:"#facc15",ringListening:"rgba(251,113,133,0.5)",ringSpeaking:"rgba(250,204,21,0.6)",ringThinking:"rgba(245,158,11,0.6)",neutral:"#ffb3a7",bg:"linear-gradient(180deg,#1b1020 0%,#2a1a14 100%)",stroke:"#4b2a20"},candy:{primary:"#f472b6",secondary:"#a78bfa",accent:"#34d399",ringListening:"rgba(167,139,250,0.55)",ringSpeaking:"rgba(52,211,153,0.65)",ringThinking:"rgba(244,114,182,0.6)",neutral:"#ffc6f2",bg:"linear-gradient(180deg,#171226 0%,#271a2b 100%)",stroke:"#3a2d4a"},mint:{primary:"#5eead4",secondary:"#86efac",accent:"#2dd4bf",ringListening:"rgba(94,234,212,0.55)",ringSpeaking:"rgba(45,212,191,0.6)",ringThinking:"rgba(134,239,172,0.55)",neutral:"#b7ffe8",bg:"linear-gradient(180deg,#0f1a17 0%,#11211e 100%)",stroke:"#29443d"},violet:{primary:"#8b5cf6",secondary:"#22d3ee",accent:"#ec4899",ringListening:"rgba(139,92,246,0.55)",ringSpeaking:"rgba(34,211,238,0.6)",ringThinking:"rgba(236,72,153,0.55)",neutral:"#cdbaff",bg:"linear-gradient(180deg,#130f1c 0%,#1b1630 100%)",stroke:"#332a56"}};function RobotBuddyPro({state:n="idle",mood:e="neutral",loudness:s=0,speakLoudness:o,variant:a="abstract",palette:c="ocean",showBadges:f=!0,compact:h=!1,maxW:m=420}){const g=PALETTES[c]??PALETTES.ocean,_=useAmp({state:n,loudness:s,speakLoudness:o}),E=usePrefersReducedMotion(),T=n==="listening"?g.ringListening:n==="speaking"?g.ringSpeaking:n==="thinking"?g.ringThinking:"rgba(255,255,255,0.18)";return jsxRuntimeExports.jsxs(Box,{w:"100%",maxW:`${m}px`,mx:"auto",mt:2,px:2,position:"relative",children:[jsxRuntimeExports.jsx(Box,{position:"absolute",inset:"-10px",borderRadius:"28px",filter:"blur(14px)",pointerEvents:"none",_before:{content:'""',position:"absolute",inset:0,borderRadius:"28px",boxShadow:`0 0 46px 10px ${T}`,animation:!E&&n==="speaking"?"rbproPulse 1.2s ease-in-out infinite":"none"}}),jsxRuntimeExports.jsx("style",{children:CSS_BLOCK}),jsxRuntimeExports.jsxs(Box,{bgGradient:g.bg,border:`1px solid ${hexWithAlpha(g.stroke,.55)}`,rounded:"2xl",p:h?2:3,boxShadow:"0 8px 24px rgba(0,0,0,0.45)",children:[a==="character"?jsxRuntimeExports.jsx(CharacterAvatar,{amp:_,state:n,mood:e,colors:g,reduced:E}):a==="sigil"?jsxRuntimeExports.jsx(SigilAvatar,{amp:_,state:n,mood:e,colors:g,reduced:E}):jsxRuntimeExports.jsx(AbstractAvatar,{amp:_,state:n,mood:e,colors:g,reduced:E}),f&&jsxRuntimeExports.jsxs(HStack,{justify:"center",mt:h?1.5:2,spacing:2,children:[jsxRuntimeExports.jsx(Badge,{colorScheme:n==="listening"?"cyan":n==="speaking"?"green":n==="thinking"?"yellow":"purple",variant:"solid",fontSize:h?"xs":"sm",children:n.charAt(0).toUpperCase()+n.slice(1)}),e!=="neutral"&&jsxRuntimeExports.jsx(Badge,{variant:"subtle",colorScheme:"teal",fontSize:h?"xs":"sm",children:e})]})]})]})}function useAmp({state:n,loudness:e,speakLoudness:s}){const[o,a]=reactExports.useState(0),c=n==="speaking"?typeof s=="number"?s:.45:n==="listening"?e:.12,f=n==="speaking"&&typeof s!="number"?.12*(Math.sin(o/120)*Math.sin(o/274)):0,h=Math.max(0,Math.min(1,c+f)),[m,g]=reactExports.useState(h);return reactExports.useEffect(()=>{let _;const E=()=>{a(performance.now()),_=requestAnimationFrame(E)};return _=requestAnimationFrame(E),()=>cancelAnimationFrame(_)},[]),reactExports.useEffect(()=>{g(E=>E+.22*(h-E))},[h]),m}function usePrefersReducedMotion(){const[n,e]=reactExports.useState(!1);return reactExports.useEffect(()=>{if(typeof window>"u"||!window.matchMedia)return;const s=window.matchMedia("(prefers-reduced-motion: reduce)"),o=()=>e(!!s.matches);return o(),s.addEventListener?.("change",o),()=>{s.removeEventListener?.("change",o)}},[]),n}function useClock(n=!1){const[e,s]=reactExports.useState(0);return reactExports.useEffect(()=>{if(n)return;let o;const a=()=>{s(performance.now()),o=requestAnimationFrame(a)};return o=requestAnimationFrame(a),()=>cancelAnimationFrame(o)},[n]),e}function hexWithAlpha(n,e=1){const s=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(n);if(!s)return n;const o=parseInt(s[1],16),a=parseInt(s[2],16),c=parseInt(s[3],16);return`rgba(${o},${a},${c},${e})`}function buildInfiniteRibbonPath({t:n,amp:e,yBase:s=196,height:o=36,freq:a=1.6,speed:c=700}){const g=6+e*22,_=n/c;let E=`M -360 ${s}`;for(let T=1;T<=90;T++){const w=-360+1080*T/90,A=Math.sin(T*a*Math.PI*2/90+_),R=Math.sin(T*(a*.5)*Math.PI*2/90+_*1.7),V=s-(A*g+R*(g*.45));E+=` L ${w.toFixed(2)} ${V.toFixed(2)}`}return E+=` L 720 ${s+o} L -360 ${s+o} Z`,E}function AbstractAvatar({amp:n,state:e,mood:s,colors:o,reduced:a}){const c=useClock(a),f=s==="happy"?o.secondary:s==="encourage"?o.primary:o.neutral,h=e==="thinking"?o.ringThinking:e==="listening"?o.ringListening:e==="speaking"?o.ringSpeaking:hexWithAlpha(o.stroke,.8),m=reactExports.useMemo(()=>buildInfiniteRibbonPath({t:c,amp:a?.1:n,yBase:196,height:36,freq:1.7,speed:640}),[c,n,a]),g=(w,A=0,R=.85,V=1.25)=>{const te=Math.sin(c/w+A)*.5+.5;return R+(V-R)*te},_=Math.round(10+n*32),E=Math.round(8+n*28),T=Math.round(12+n*36);return jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 360 240",width:"100%",height:"100%",style:{display:"block"},children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("radialGradient",{id:"rbgrad",cx:"50%",cy:"45%",r:"65%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:o.primary,stopOpacity:"0.35"}),jsxRuntimeExports.jsx("stop",{offset:"60%",stopColor:o.secondary,stopOpacity:"0.18"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),jsxRuntimeExports.jsxs("mask",{id:"orbMask",children:[jsxRuntimeExports.jsx("rect",{width:"100%",height:"100%",fill:"black"}),jsxRuntimeExports.jsx("circle",{cx:"180",cy:"120",r:"88",fill:"white"})]}),jsxRuntimeExports.jsxs("filter",{id:"rbgoo",children:[jsxRuntimeExports.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),jsxRuntimeExports.jsx("feColorMatrix",{in:"blur",result:"goo",type:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8"}),jsxRuntimeExports.jsx("feBlend",{in:"SourceGraphic",in2:"goo"})]}),jsxRuntimeExports.jsxs("filter",{id:"gelDispA",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.012",numOctaves:"2",seed:"3",result:"n",children:!a&&jsxRuntimeExports.jsx("animate",{attributeName:"baseFrequency",dur:"7s",values:"0.01;0.02;0.01",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"n",scale:_,xChannelSelector:"R",yChannelSelector:"G"})]}),jsxRuntimeExports.jsxs("filter",{id:"gelDispB",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.011",numOctaves:"2",seed:"7",result:"n",children:!a&&jsxRuntimeExports.jsx("animate",{attributeName:"baseFrequency",dur:"8s",values:"0.009;0.018;0.009",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"n",scale:E,xChannelSelector:"G",yChannelSelector:"B"})]}),jsxRuntimeExports.jsxs("filter",{id:"gelDispC",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[jsxRuntimeExports.jsx("feTurbulence",{type:"fractalNoise",baseFrequency:"0.013",numOctaves:"2",seed:"11",result:"n",children:!a&&jsxRuntimeExports.jsx("animate",{attributeName:"baseFrequency",dur:"6s",values:"0.012;0.022;0.012",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("feDisplacementMap",{in:"SourceGraphic",in2:"n",scale:T,xChannelSelector:"R",yChannelSelector:"B"})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"ribbonGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:hexWithAlpha(o.primary,.9)}),jsxRuntimeExports.jsx("stop",{offset:"80%",stopColor:hexWithAlpha(o.accent,.35)}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"transparent"})]})]}),jsxRuntimeExports.jsx("circle",{cx:"180",cy:"120",r:80+n*22,fill:"url(#rbgrad)"}),jsxRuntimeExports.jsxs("g",{mask:"url(#orbMask)",filter:"url(#rbgoo)",style:{mixBlendMode:"screen"},children:[jsxRuntimeExports.jsx("g",{filter:"url(#gelDispA)",children:jsxRuntimeExports.jsx("circle",{cx:152-Math.sin(c/1100)*10,cy:126+Math.cos(c/1300)*8,r:(26+n*14)*g(1400,.3),fill:hexWithAlpha(o.accent,.98)})}),jsxRuntimeExports.jsx("g",{filter:"url(#gelDispB)",children:jsxRuntimeExports.jsx("circle",{cx:208+Math.sin(c/1e3)*9,cy:110+Math.cos(c/1400)*7,r:(24+n*12)*g(1200,.9),fill:hexWithAlpha(o.secondary,.96)})}),jsxRuntimeExports.jsx("g",{filter:"url(#gelDispC)",children:jsxRuntimeExports.jsx("circle",{cx:180+Math.sin(c/900)*7,cy:120+Math.cos(c/1100)*6,r:(18+n*11)*g(1e3,1.6),fill:hexWithAlpha(f,.98)})})]}),jsxRuntimeExports.jsx("g",{style:{transformOrigin:"180px 120px",animation:!a&&e!=="idle"?"rbproOrbit 8s linear infinite":"none"},children:jsxRuntimeExports.jsx("circle",{cx:"180",cy:"120",r:66+n*6,fill:"none",stroke:h,strokeOpacity:"0.7",strokeDasharray:"6 10",strokeWidth:"2",style:{animation:a?"none":"rbproDash 4s linear infinite"}})}),jsxRuntimeExports.jsx("path",{d:m,fill:"url(#ribbonGrad)",opacity:"0.95"}),jsxRuntimeExports.jsx("path",{d:m.replace(/Z$/,""),fill:"none",stroke:hexWithAlpha(o.primary,.85),strokeWidth:"1.25",strokeLinejoin:"round",strokeLinecap:"round",opacity:"0.9"})]})}function SigilAvatar({amp:n,state:e,mood:s,colors:o,reduced:a}){const c=useClock(a),f=reactExports.useMemo(()=>{const _=64+n*18,E=38+n*12,T=3,w=2,A=Math.PI/2.6,R=180,V=120,te=360,se=[];for(let re=0;re<=te;re++){const ye=re/te*Math.PI*2+c/5e3,D=R+_*Math.sin(T*ye+A),ae=V+E*Math.sin(w*ye);se.push(`${re===0?"M":"L"} ${D.toFixed(2)} ${ae.toFixed(2)}`)}return se.join(" ")},[n,c]),h=78+n*14,m=s==="happy"?o.secondary:s==="encourage"?o.accent:o.neutral,g=reactExports.useMemo(()=>buildInfiniteRibbonPath({t:c,amp:a?.1:n,yBase:196,height:32,freq:1.4,speed:680}),[c,n,a]);return jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 360 240",width:"100%",height:"100%",style:{display:"block"},children:[jsxRuntimeExports.jsxs("defs",{children:[jsxRuntimeExports.jsxs("radialGradient",{id:"sigHalo",cx:"50%",cy:"50%",r:"60%",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:o.secondary,stopOpacity:"0.25"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"transparent",stopOpacity:"0"})]}),jsxRuntimeExports.jsxs("linearGradient",{id:"sigRibbonGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:hexWithAlpha(o.secondary,.9)}),jsxRuntimeExports.jsx("stop",{offset:"90%",stopColor:hexWithAlpha(o.accent,.25)}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"transparent"})]})]}),jsxRuntimeExports.jsx("circle",{cx:"180",cy:"120",r:h,fill:"url(#sigHalo)"}),jsxRuntimeExports.jsx("path",{d:f,fill:"none",stroke:m,strokeWidth:"2.2",strokeLinecap:"round",strokeLinejoin:"round",style:{filter:"drop-shadow(0 0 12px rgba(255,255,255,0.18))"}}),[0,1,2,3,4,5].map(_=>{const E=(performance.now()/2e3+_/6)%1*Math.PI*2,T=50+n*18,w=180+T*Math.cos(E),A=120+T*Math.sin(E)*.7;return jsxRuntimeExports.jsx("circle",{cx:w,cy:A,r:3+(_%3+1)*.6,fill:_%2?o.primary:o.accent,opacity:"0.9"},_)}),jsxRuntimeExports.jsx("path",{d:g,fill:"url(#sigRibbonGrad)",opacity:"0.95"}),jsxRuntimeExports.jsx("path",{d:g.replace(/Z$/,""),fill:"none",stroke:hexWithAlpha(o.secondary,.85),strokeWidth:"1.25",strokeLinejoin:"round",strokeLinecap:"round"})]})}function CharacterAvatar({amp:n,state:e,mood:s,colors:o,reduced:a}){const[c,f]=reactExports.useState({x:0,y:0});reactExports.useEffect(()=>{if(typeof window>"u")return;const _=E=>{const{clientX:T,clientY:w}=E.touches?.[0]||E,A=window.innerWidth,R=window.innerHeight,V=T/A*2-1,te=w/R*2-1;f({x:Math.max(-1,Math.min(1,V)),y:Math.max(-1,Math.min(1,te))})};return window.addEventListener("pointermove",_,{passive:!0}),window.addEventListener("touchstart",_,{passive:!0}),()=>{window.removeEventListener("pointermove",_),window.removeEventListener("touchstart",_)}},[]);const h=c.x*6,m=c.y*4,g=s==="happy"?o.secondary:s==="encourage"?o.accent:o.neutral;return jsxRuntimeExports.jsxs("svg",{viewBox:"0 0 360 240",width:"100%",height:"100%",style:{display:"block"},children:[jsxRuntimeExports.jsx("defs",{children:jsxRuntimeExports.jsxs("linearGradient",{id:"headGrad",x1:"0",y1:"0",x2:"0",y2:"1",children:[jsxRuntimeExports.jsx("stop",{offset:"0%",stopColor:"#0f172a"}),jsxRuntimeExports.jsx("stop",{offset:"100%",stopColor:"#1f2937"})]})}),jsxRuntimeExports.jsxs("g",{style:{transformOrigin:"180px 120px",animation:a?"none":"rbproDriftY 6.5s ease-in-out infinite"},children:[jsxRuntimeExports.jsx("rect",{x:"40",y:"28",width:"280",height:"170",rx:"26",fill:"url(#headGrad)",stroke:o.stroke,strokeWidth:"2"}),jsxRuntimeExports.jsx("rect",{x:"66",y:"50",width:"228",height:"48",rx:"12",fill:"#0b1220"}),jsxRuntimeExports.jsx("g",{stroke:g,strokeWidth:"3",strokeLinecap:"round",opacity:"0.8",children:s==="encourage"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("line",{x1:"108",y1:"72",x2:"138",y2:"68"}),jsxRuntimeExports.jsx("line",{x1:"222",y1:"68",x2:"252",y2:"72"})]}):s==="happy"?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("line",{x1:"108",y1:"70",x2:"138",y2:"70"}),jsxRuntimeExports.jsx("line",{x1:"222",y1:"70",x2:"252",y2:"70"})]}):jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("line",{x1:"108",y1:"74",x2:"138",y2:"72"}),jsxRuntimeExports.jsx("line",{x1:"222",y1:"72",x2:"252",y2:"74"})]})}),jsxRuntimeExports.jsxs("g",{transform:`translate(${h}, ${m})`,children:[jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("ellipse",{cx:"128",cy:"92",rx:"18",ry:"12",fill:"#e2e8f0",style:{transformOrigin:"128px 92px",animation:a?"none":"rbproBlink 5.2s ease-in-out infinite"}}),jsxRuntimeExports.jsx("circle",{cx:"128",cy:"92",r:"6",fill:"#334155"})]}),jsxRuntimeExports.jsxs("g",{children:[jsxRuntimeExports.jsx("ellipse",{cx:"232",cy:"92",rx:"18",ry:"12",fill:"#e2e8f0",style:{transformOrigin:"232px 92px",animation:a?"none":"rbproBlink 6.1s ease-in-out infinite"}}),jsxRuntimeExports.jsx("circle",{cx:"232",cy:"92",r:"6",fill:"#334155"})]})]}),jsxRuntimeExports.jsx("circle",{cx:"112",cy:"122",r:8+n*3,fill:g,opacity:.25}),jsxRuntimeExports.jsx("circle",{cx:"248",cy:"122",r:8+n*3,fill:g,opacity:.25}),jsxRuntimeExports.jsxs("g",{transform:"translate(180, 138)",children:[jsxRuntimeExports.jsx("rect",{x:-30,y:-5-n*9,width:60,height:10+n*20,rx:12,fill:g,opacity:.9}),e==="speaking"&&jsxRuntimeExports.jsx("rect",{x:-44,y:-2-n*6,width:88,height:4+n*12,rx:8,fill:"#94a3b8",opacity:.28})]}),jsxRuntimeExports.jsx("line",{x1:"180",y1:"20",x2:"180",y2:"42",stroke:g,strokeWidth:"4"}),jsxRuntimeExports.jsx("circle",{cx:"180",cy:"16",r:"8",fill:g,children:!a&&jsxRuntimeExports.jsx("animate",{attributeName:"r",dur:"2s",values:"8;11;8",repeatCount:"indefinite"})}),jsxRuntimeExports.jsx("g",{transform:"translate(90, 190)",children:Array.from({length:14}).map((_,E)=>{const T=6+n*24*(.6+E%5*.08);return jsxRuntimeExports.jsx("rect",{x:E*14,y:-T,width:"8",height:T,rx:"2",fill:g,opacity:.9},E)})})]})]})}const CSS_BLOCK=`
@keyframes rbproPulse { 0%{ transform: scale(.985) } 50%{ transform: scale(1.025) } 100%{ transform: scale(.985) } }
@keyframes rbproDriftY { 0%{ transform: translateY(-6px) } 50%{ transform: translateY(6px) } 100%{ transform: translateY(-6px) } }
@keyframes rbproOrbit { 0%{ transform: rotate(0deg) } 100%{ transform: rotate(360deg) } }
@keyframes rbproBlink { 0%,92%,100% { transform: scaleY(1) } 96% { transform: scaleY(0.08) } }
@keyframes rbproDash { to { stroke-dashoffset: -200 } }
`,TALKTURN_URL="https://talkturn-hftgya63qa-uc.a.run.app",TTS_URL="https://tts-hftgya63qa-uc.a.run.app";function b64ToUint8(n){const e=atob(n),s=new Uint8Array(e.length);for(let o=0;o<e.length;o++)s[o]=e.charCodeAt(o);return s}function pcm16ToWav(n,e=24e3,s=1){const o=s*2,a=e*o,c=n.byteLength,f=new ArrayBuffer(44+c),h=new DataView(f),m=(g,_)=>{for(let E=0;E<_.length;E++)h.setUint8(g+E,_.charCodeAt(E))};return m(0,"RIFF"),h.setUint32(4,36+c,!0),m(8,"WAVE"),m(12,"fmt "),h.setUint32(16,16,!0),h.setUint16(20,1,!0),h.setUint16(22,s,!0),h.setUint32(24,e,!0),h.setUint32(28,a,!0),h.setUint16(32,o,!0),h.setUint16(34,16,!0),m(36,"data"),h.setUint32(40,c,!0),new Uint8Array(f,44).set(n),new Blob([f],{type:"audio/wav"})}function blobToBase64(n){return new Promise((e,s)=>{const o=new FileReader;o.onloadend=()=>e(String(o.result).split(",")[1]),o.onerror=s,o.readAsDataURL(n)})}async function blobToWavBase64Universal(n,e=24e3){const s=await n.arrayBuffer(),o=window.AudioContext||window.webkitAudioContext,a=new o,c=await new Promise((se,re)=>{a.decodeAudioData(s.slice(0),se,re)}),f=1,h=Math.ceil(c.duration*e),m=new OfflineAudioContext(f,h,e),g=m.createBuffer(1,c.length,c.sampleRate),_=g.getChannelData(0);for(let se=0;se<c.numberOfChannels;se++){const re=c.getChannelData(se);for(let ye=0;ye<_.length;ye++)_[ye]+=re[ye]/c.numberOfChannels}const E=m.createBufferSource();E.buffer=g,E.connect(m.destination),E.start(0);const T=await m.startRendering(),w=T.getChannelData(0),A=new Int16Array(w.length);for(let se=0;se<w.length;se++){const re=Math.max(-1,Math.min(1,w[se]));A[se]=re<0?re*32768:re*32767}const R=new Uint8Array(A.buffer),V=pcm16ToWav(R,T.sampleRate,1);try{await a.close()}catch{}return{b64:await blobToBase64(V),mime:"audio/wav",wavBlob:V}}async function safeTranscodeToWavOrPassThrough(n){try{return await blobToWavBase64Universal(n)}catch{const e=await blobToBase64(n),s=(n.type||"application/octet-stream").split(";")[0];return{b64:e,mime:s,wavBlob:null}}}function pickRecorderMime(){const n=window.MediaRecorder;if(!n)return"";const e=["audio/webm;codecs=opus","audio/webm","audio/ogg;codecs=opus","audio/mp4;codecs=mp4a.40.2","audio/mp4","audio/3gpp"];for(const s of e)try{if(n.isTypeSupported?.(s))return s}catch{}return""}const CLIP_DB="NoSaboAudioDB",CLIP_STORE="clips",memClips=new Map;function openClipDB(){return new Promise(n=>{if(!("indexedDB"in window))return n(null);const e=indexedDB.open(CLIP_DB,1);e.onupgradeneeded=s=>{const o=s.target.result;o.objectStoreNames.contains(CLIP_STORE)||o.createObjectStore(CLIP_STORE)},e.onsuccess=()=>n(e.result),e.onerror=()=>n(null)})}async function saveClipBlob(n,e){if(!n||!e)return;const s=await openClipDB();if(!s){memClips.set(n,e);return}await new Promise(o=>{const a=s.transaction(CLIP_STORE,"readwrite");a.objectStore(CLIP_STORE).put(e,n),a.oncomplete=()=>{s.close(),o()},a.onerror=()=>{s.close(),memClips.set(n,e),o()}})}async function loadClipBlob(n){if(!n)return null;const e=await openClipDB();return e?await new Promise(s=>{const a=e.transaction(CLIP_STORE,"readonly").objectStore(CLIP_STORE).get(n);a.onsuccess=()=>{const c=a.result||null;e.close(),s(c)},a.onerror=()=>{e.close(),s(memClips.get(n)||null)}}):memClips.get(n)||null}async function sha256Hex(n){try{if(crypto?.subtle){const s=new TextEncoder().encode(n||""),o=await crypto.subtle.digest("SHA-256",s);return Array.from(new Uint8Array(o)).map(a=>a.toString(16).padStart(2,"0")).join("")}}catch{}let e=5381;for(let s=0;s<(n||"").length;s++)e=e*33^n.charCodeAt(s);return(e>>>0).toString(16).padStart(8,"0")}const MOBILE_TEXT_SX={whiteSpace:"pre-wrap",wordBreak:"break-word",overflowWrap:"break-word",hyphens:"auto"},COLORS=["#91E0FF","#A0EBAF","#FFD48A","#C6B7FF","#FF9FB1","#B0F0FF"],colorFor=n=>COLORS[n%COLORS.length];function wrapFirst(n,e,s){if(!n||!e)return[n];const o=n.toLowerCase().indexOf(String(e).toLowerCase());if(o<0)return[n];const a=n.slice(0,o),c=n.slice(o,o+e.length),f=n.slice(o+e.length);return[a,jsxRuntimeExports.jsx("span",{"data-token":s,style:{display:"inline",borderBottom:0,boxShadow:"inset 0 -2px transparent"},children:c},`${s}-${o}`),...wrapFirst(f,e,s+"_cont")]}function buildAlignedNodes(n,e,s){if(!e?.length||!n)return[n];const o=[...e].sort((c,f)=>(f?.[s]?.length||0)-(c?.[s]?.length||0));let a=[n];return o.forEach((c,f)=>{const h=c?.[s];if(!h)return;const m=`tok_${f}`,g=[];a.forEach(_=>{typeof _=="string"?g.push(...wrapFirst(_,h,m)):g.push(_)}),a=g}),a}function AlignedBubble({primaryLabel:n,secondaryLabel:e,primaryText:s,secondaryText:o,pairs:a,showSecondary:c,onReplay:f,canReplay:h}){const[m,g]=reactExports.useState(null);function _(w){return React.Children.map(w,A=>{if(typeof A=="string"||!A?.props?.["data-token"])return A;const R=A.props["data-token"].split("_")[0],V=parseInt(R.replace("tok_",""))||0,te=m===R,se={boxShadow:te?`inset 0 -2px ${colorFor(V)}`:"inset 0 -2px transparent"};return React.cloneElement(A,{onMouseEnter:()=>g(R),onMouseLeave:()=>g(null),onClick:()=>g(te?null:R),style:{...A.props.style||{},...se}})})}const E=_(buildAlignedNodes(s,a,"lhs")),T=_(buildAlignedNodes(o,a,"rhs"));return jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,borderRadius:"lg",maxW:"100%",w:"100%",minW:0,overflow:"hidden",children:[jsxRuntimeExports.jsx(Stack,{direction:["column","column","row"],spacing:2,mb:1,justify:"flex-end",align:["flex-start","flex-start","center"],flexWrap:"wrap",children:jsxRuntimeExports.jsxs(Button,{size:"xs",variant:"ghost",onClick:f,isDisabled:!h,color:"white",alignSelf:["flex-start","flex-start","auto"],children:[jsxRuntimeExports.jsx(CiRepeat,{})," Repeat"]})}),jsxRuntimeExports.jsx(Box,{as:"p",fontSize:"md",lineHeight:"1.6",sx:MOBILE_TEXT_SX,children:E}),c&&o&&jsxRuntimeExports.jsx(Box,{as:"p",opacity:.9,fontSize:"sm",mt:1,lineHeight:"1.55",sx:MOBILE_TEXT_SX,children:T}),!!a?.length&&c&&jsxRuntimeExports.jsx(Wrap,{spacing:2,mt:2,shouldWrapChildren:!0,children:a.slice(0,6).map((w,A)=>jsxRuntimeExports.jsx(Tag,{size:"sm",style:{borderColor:colorFor(A),borderWidth:2,background:"transparent",color:"white"},maxW:"100%",whiteSpace:"normal",children:jsxRuntimeExports.jsxs(Text,{as:"span",fontSize:"xs",sx:MOBILE_TEXT_SX,children:[w.lhs," ⇄ ",w.rhs]})},A))})]})}function newToLegacyTurn(n){if(!n)return null;if(n.lang==="es")return{es:n.text||"",en:n.trans_en||"",align:Array.isArray(n.pairs)?n.pairs.map(o=>({es:o?.lhs||"",en:o?.rhs||""})):[]};const e=n.trans_es||"",s=n.trans_en||"";return!e&&!s?null:{es:e||"",en:s||"",align:[]}}function buildLegacyFromNew(n){const e=[];return(n||[]).forEach(s=>{const o=newToLegacyTurn(s);o&&e.push(o)}),e}const isoNow=()=>{try{return new Date().toISOString()}catch{return String(Date.now())}};function VoiceChat({auth:n,onSwitchedAccount:e,activeNpub:s="",activeNsec:o=""}){const a=useToast(),c=useDisclosure(),f=useDisclosure(),h=useDisclosure(),m={es:"Pide algo con cortesía.",en:"Make a polite request."},g="Like a rude, sarcastic, mean-spirited toxica.",[_,E]=reactExports.useState(!1),[T,w]=reactExports.useState("idle"),[A,R]=reactExports.useState("neutral"),[V,te]=reactExports.useState(0),[se,re]=reactExports.useState(2e3),[ye,D]=reactExports.useState("beginner"),[ae,z]=reactExports.useState("en"),[H,X]=reactExports.useState("Leda"),[le,Z]=reactExports.useState(g),[ne,W]=reactExports.useState("nah"),[xe,de]=reactExports.useState([]),[oe,_e]=reactExports.useState(null),[Re,Ie]=reactExports.useState(0),[he,be]=reactExports.useState(0),[Se,Ae]=reactExports.useState(m),[Be,Ue]=reactExports.useState(!0),[qe,Xe]=reactExports.useState(s||""),[Ke,Ze]=reactExports.useState(o||""),[it,wn]=reactExports.useState(""),[yn,Mt]=reactExports.useState(!1),Ge=reactExports.useRef(null),ln=reactExports.useRef([]),kt=reactExports.useRef(null),Ft=reactExports.useRef(null),lr=reactExports.useRef(null),Fn=reactExports.useRef(null),Hn=reactExports.useRef(null),Qn=reactExports.useRef("");reactExports.useEffect(()=>{Xe(s||"")},[s]),reactExports.useEffect(()=>{Ze(o||"")},[o]),reactExports.useEffect(()=>{},[]),reactExports.useEffect(()=>{const Fe=(qe||"").trim();if(!Fe)return;const dt=collection(database,"users",Fe,"turns"),wt=query(dt,orderBy("createdAtClient","asc"),limit(50)),dn=onSnapshot(wt,jt=>{const Je=jt.docs.map(bn=>{const Gt=bn.data()||{};return{id:bn.id,lang:Gt.lang||"es",text:Gt.text||"",trans_en:Gt.trans_en||"",trans_es:Gt.trans_es||"",pairs:Array.isArray(Gt.pairs)?Gt.pairs:[],audioKey:Gt.audioKey||null,createdAtClient:Gt.createdAtClient||0}});de(Je)},jt=>{console.error("turns snapshot error:",jt?.message||jt)});return()=>dn()},[qe]),reactExports.useEffect(()=>{_&&Nn({})},[ye,ae,H,le,Be,ne,_]),reactExports.useEffect(()=>{const Fe=(qe||"").trim();if(!Fe)return;E(!1);let dt=!1;return(async()=>{try{const wt=doc(database,"users",Fe);let dn=await getDoc(wt);if(!dn.exists())try{dn=await getDocFromCache(wt)}catch{}const jt=dn.exists()?dn.data():null,Je=jt?.progress||{};if(dt)return;D(Je.level||"beginner"),z(Je.supportLang==="bilingual"||Je.supportLang==="es"?Je.supportLang:"en"),X(Je.voice||"Leda"),Z(Je.voicePersona||g),W(Je.targetLang==="nah"?"nah":"es"),Ie(Number.isFinite(jt?.xp)?jt.xp:Number.isFinite(Je.xp)?Je.xp:0),be(Number.isFinite(jt?.streak)?jt.streak:Number.isFinite(Je.streak)?Je.streak:0),Ae(Je.challenge?.es&&Je.challenge?.en?Je.challenge:{...m}),Ue(typeof Je.showTranslations=="boolean"?Je.showTranslations:!0)}catch(wt){console.error("load profile failed:",wt)}finally{dt||E(!0)}})(),()=>{dt=!0}},[qe]);async function Nn(Fe={}){const dt=(qe||"").trim()||(typeof window<"u"?localStorage.getItem("local_npub"):"");if(dt)try{await setDoc(doc(database,"users",dt),{local_npub:dt,updatedAt:isoNow(),xp:Fe.xp??Re,streak:Fe.streak??he,lastGoal:(Fe.challenge??Se)?.en||null,progress:{level:Fe.level??ye,supportLang:Fe.supportLang??ae,voice:Fe.voice??H,voicePersona:Fe.voicePersona??le,targetLang:Fe.targetLang??ne,xp:Fe.xp??Re,streak:Fe.streak??he,challenge:Fe.challenge??Se,showTranslations:Fe.showTranslations??Be}},{merge:!0})}catch(wt){console.error("save profile failed:",wt)}}reactExports.useEffect(()=>()=>{try{Fn.current&&clearTimeout(Fn.current),Ft.current&&Ft.current.state!=="closed"&&Ft.current.close().catch(()=>{}),Ft.current=null,kt.current?.pause?.(),Gn()}catch{}},[]);function Gn(){const Fe=Ge.current?.stream;Fe&&Fe.getTracks().forEach(dt=>dt.stop())}async function Vr(Fe,dt="Copied"){try{await navigator.clipboard.writeText(Fe||""),a({title:dt,status:"success",duration:1400})}catch(wt){a({title:"Copy failed",description:String(wt?.message||wt),status:"error"})}}async function ir(){const Fe=(it||"").trim();if(!Fe){a({title:"Paste your nsec first",status:"warning"});return}if(!Fe.startsWith("nsec")){a({title:"Invalid key",description:"Must start with nsec…",status:"error"});return}Mt(!0);try{if(typeof n!="function")throw new Error("auth(nsec) is not available.");const wt=(await n(Fe))?.user?.npub||localStorage.getItem("local_npub");if(!wt?.startsWith("npub"))throw new Error("Could not derive npub from the secret key.");await setDoc(doc(database,"users",wt),{local_npub:wt,createdAt:isoNow()},{merge:!0}),localStorage.setItem("local_npub",wt),localStorage.setItem("local_nsec",Fe),Xe(wt),Ze(Fe),wn(""),h.onClose?.(),a({title:"Switched account",status:"success"}),typeof e=="function"&&await Promise.resolve(e(wt))}catch(dt){console.error("switchAccount error:",dt),a({title:"Switch failed",description:dt?.message||String(dt),status:"error"})}finally{Mt(!1)}}async function Vn(){try{let Fe=function(){bn.getByteTimeDomainData(Gt);let jn=0;for(let Rn=0;Rn<Gt.length;Rn++){const En=(Gt[Rn]-128)/128;jn+=En*En}const Un=Math.sqrt(jn/Gt.length);te(Un);const fn=performance.now();if(Un<Lt){if(Hn.current==null)Hn.current=fn;else if(fn-Hn.current>=se){try{Ge.current?.stop()}catch{}return}}else Hn.current=null;Fn.current=setTimeout(Fe,1e3/cr)};if(!navigator.mediaDevices?.getUserMedia){a({title:"Mic not available",description:"getUserMedia not supported.",status:"error"});return}try{kt.current?.pause?.(),kt.current=null}catch{}const dt=await navigator.mediaDevices.getUserMedia({audio:!0}),wt=pickRecorderMime();if(!wt){a({title:"Recording not supported",description:"No compatible audio format.",status:"error"});return}const dn=new MediaRecorder(dt,{mimeType:wt});ln.current=[],dn.ondataavailable=jn=>jn.data&&jn.data.size>0&&ln.current.push(jn.data),dn.onstop=P,dn.start(),Ge.current=dn;const jt=new(window.AudioContext||window.webkitAudioContext),Je=jt.createMediaStreamSource(dt),bn=jt.createAnalyser();bn.fftSize=2048,Je.connect(bn),Ft.current=jt,lr.current=bn,Hn.current=null,w("listening"),R("encourage");const Gt=new Uint8Array(bn.fftSize),Lt=.02,cr=60;Fe()}catch(Fe){console.error(Fe),a({title:"Microphone error",description:String(Fe),status:"error"})}}function ie(){try{Ge.current?.stop()}catch{}}function C(Fe,dt){const wt=(dt?.pronunciation??0)+(dt?.grammar??0)+(dt?.vocab??0)+(dt?.fluency??0),dn=wt<=4,jt=wt<=8,Je=[{es:"Preséntate y di de dónde eres.",en:"Introduce yourself and say where you’re from."},{es:"Haz una petición cortés con 'me gustaría'.",en:"Make a polite request using 'me gustaría'."},{es:"Añade cantidad y cortesía.",en:"Add quantity plus courtesy."},{es:"Pregunta por detalles (tamaño/sabor).",en:"Ask for details (size/flavor)."},{es:"Propón una hora para quedar.",en:"Propose a time to meet."},{es:"Cuenta lo que hiciste ayer (pretérito).",en:"Say what you did yesterday (preterite)."}];return dn?Je[0]:jt?Je[2]:Je[Math.floor(Math.random()*Je.length)]}async function P(){try{w("thinking"),R("neutral");try{Fn.current&&(clearTimeout(Fn.current),Fn.current=null),Ft.current&&Ft.current.state!=="closed"&&await Ft.current.close().catch(()=>{}),Ft.current=null}catch{}Gn();const Fe=ln.current.length>1?new Blob(ln.current,{type:Ge.current?.mimeType||"audio/webm"}):ln.current[0];if(!Fe){a({title:"No audio captured",status:"warning"}),w("idle");return}const{b64:dt,mime:wt}=await safeTranscodeToWavOrPassThrough(Fe),dn=buildLegacyFromNew(xe).slice(-3),jt=await fetch(TALKTURN_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({audioBase64:dt,mime:wt,history:dn,level:ye,supportLang:ae,challenge:Se,redo:Qn.current,voice:H,voicePersona:le,targetLang:ne})});if(!jt.ok){let pn="";try{pn=JSON.stringify(await jt.json())}catch{}throw new Error(`HTTP ${jt.status}${pn?" "+pn:""}`)}const Je=await jt.json(),bn=Je?.assistant?.text??Je?.assistant_es??"",Gt=Je?.assistant?.lang??(Je?.assistant_es?"es":ne),Lt=Je?.coach||{},cr=Lt?.translation_en||"",jn=Lt?.translation_es||"";let Un=[];Gt==="nah"?ae==="es"?Un=(Lt?.alignment?.nah_es||[]).map(Wn=>({lhs:Wn?.t||"",rhs:Wn?.es||""})):Un=(Lt?.alignment?.nah_en||[]).map(Wn=>({lhs:Wn?.t||"",rhs:Wn?.en||""})):Array.isArray(Lt?.alignment)?Un=Lt.alignment.map(pn=>({lhs:pn?.es||"",rhs:pn?.en||""})):Un=(Lt?.alignment?.es_en||[]).map(Wn=>({lhs:Wn?.es||"",rhs:Wn?.en||""}));const fn=Je?.audioBase64||null;let Rn=null;if(fn){const pn=b64ToUint8(fn),Wn=pcm16ToWav(pn,24e3,1);Rn=await sha256Hex(`${bn}||${H}||${Gt}`),await saveClipBlob(Rn,Wn);const gr=URL.createObjectURL(Wn);try{kt.current?.pause?.()}catch{}const sr=new Audio(gr);kt.current=sr,w("speaking"),R("happy"),sr.onended=()=>{URL.revokeObjectURL(gr),kt.current=null,w("idle"),R("neutral")},await sr.play().catch(()=>{const $r=()=>{sr.play().catch(()=>{}),window.removeEventListener("pointerdown",$r)};window.addEventListener("pointerdown",$r)})}else w("idle"),R("neutral");if(bn){const pn=(qe||"").trim()||localStorage.getItem("local_npub")||"";if(pn){const Wn=collection(database,"users",pn,"turns");await addDoc(Wn,{lang:Gt,text:bn,trans_en:cr,trans_es:jn,pairs:Un,audioKey:Rn||null,createdAt:serverTimestamp(),createdAtClient:Date.now()})}}let En=Se;if(Lt&&Object.keys(Lt).length){_e(Lt);let pn=Lt.next_goal;(!pn?.es||!pn?.en)&&(pn=C(Se,Lt.scores)),En=Lt.goal_completed?pn:{es:Lt[`redo_${ne}`]&&ne==="nah"?"Inténtalo otra vez, siguiendo la pista de la coach.":Lt.redo_es||"Inténtalo otra vez en español.",en:Lt.goal_completed?pn.en:"Try that again."},Ae(En);const gr=10+((Lt.scores?.pronunciation??0)+(Lt.scores?.grammar??0)+(Lt.scores?.vocab??0)+(Lt.scores?.fluency??0))+(Lt.goal_completed?5:0),sr=(Re??0)+gr,$r=(he??0)+1;Ie(sr),be($r),await Nn({xp:sr,streak:$r,challenge:En})}else _e(null),En=C(Se,null),Ae(En),await Nn({challenge:En});Qn.current=""}catch(Fe){console.error(Fe),w("idle"),R("neutral"),a({title:"Conversation failed",description:String(Fe?.message||Fe),status:"error"})}finally{ln.current=[],Ge.current=null}}async function ue(Fe){if(Fe){Qn.current=Fe;try{const dt=await fetch(TTS_URL,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:Fe,voice:H})});if(!dt.ok){let Gt="";try{Gt=JSON.stringify(await dt.json())}catch{}throw new Error(`HTTP ${dt.status}${Gt?" "+Gt:""}`)}const{audioBase64:wt}=await dt.json();if(!wt)return;const dn=b64ToUint8(wt),jt=pcm16ToWav(dn,24e3,1),Je=URL.createObjectURL(jt);try{kt.current?.pause?.()}catch{}const bn=new Audio(Je);kt.current=bn,w("speaking"),R("encourage"),bn.onended=()=>{URL.revokeObjectURL(Je),kt.current=null,w("idle"),R("neutral")},await bn.play().catch(()=>{const Gt=()=>{bn.play().catch(()=>{}),window.removeEventListener("pointerdown",Gt)};window.addEventListener("pointerdown",Gt)})}catch(dt){console.error(dt),a({title:"Redo failed",description:String(dt),status:"error"})}}}function Ee(Fe){!Fe?.es||!Fe?.en||(Ae(Fe),Nn({challenge:Fe}),f.onClose())}const ke=Math.min(100,Re%100),Le=ye==="beginner"?"Beginner":ye==="intermediate"?"Intermediate":"Advanced",tt=ye==="beginner"?"green":ye==="intermediate"?"orange":"purple",st=ne==="nah"?"No Sabo — Náhuatl Learning Coach":"No Sabo — Spanish Learning Coach",At=ae==="es"?"es":"en";function Wt({isOpen:Fe,onClose:dt,coach:wt,onRedo:dn,onAcceptNext:jt,targetLang:Je="es"}){wt||(wt={});const{correction_en:bn,tip_en:Gt,correction_es:Lt,tip_es:cr,translation_en:jn,translation_es:Un,scores:fn={},cefr:Rn,next_goal:En,goal_completed:pn}=wt,Wn=wt?.[`vocab_${Je}`]||(Je==="es"?wt?.vocab_es:[])||[],gr=wt?.[`redo_${Je}`]||(Je==="es"?wt?.redo_es:null),sr=((fn?.pronunciation??0)+(fn?.grammar??0)+(fn?.vocab??0)+(fn?.fluency??0))/12*100,$r=Je==="nah"?"Náhuatl":"Spanish";return jsxRuntimeExports.jsxs(Drawer,{isOpen:Fe,placement:"bottom",onClose:dt,children:[jsxRuntimeExports.jsx(ModalOverlay,{bg:"blackAlpha.600"}),jsxRuntimeExports.jsxs(DrawerContent,{bg:"gray.900",color:"gray.100",borderTopRadius:"24px",children:[jsxRuntimeExports.jsx(ModalHeader,{pb:2,children:jsxRuntimeExports.jsxs(HStack,{justify:"space-between",align:"start",children:[jsxRuntimeExports.jsx(Text,{fontWeight:"bold",children:"Coach"}),jsxRuntimeExports.jsxs(HStack,{children:[pn?jsxRuntimeExports.jsx(Badge,{colorScheme:"green",children:"Goal completed"}):jsxRuntimeExports.jsx(Badge,{colorScheme:"orange",children:"Keep going"}),Rn&&jsxRuntimeExports.jsx(Badge,{colorScheme:"purple",children:Rn})]})]})}),jsxRuntimeExports.jsxs(ModalBody,{pb:6,children:[(jn||bn||Gt)&&jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",opacity:.8,children:"English"}),jn&&jsxRuntimeExports.jsx(Text,{whiteSpace:"pre-wrap",children:jn}),bn&&jsxRuntimeExports.jsxs(Text,{mt:1,fontSize:"sm",children:[jsxRuntimeExports.jsx("b",{children:"Correction:"})," ",bn]}),Gt&&jsxRuntimeExports.jsxs(Text,{mt:1,fontSize:"sm",opacity:.9,children:["💡 ",Gt]})]}),(Un||Lt||cr)&&jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",opacity:.8,children:"Español"}),Un&&jsxRuntimeExports.jsx(Text,{whiteSpace:"pre-wrap",children:Un}),Lt&&jsxRuntimeExports.jsxs(Text,{mt:1,fontSize:"sm",children:[jsxRuntimeExports.jsx("b",{children:"Corrección:"})," ",Lt]}),cr&&jsxRuntimeExports.jsxs(Text,{mt:1,fontSize:"sm",opacity:.9,children:["💡 ",cr]})]}),!!Wn?.length&&jsxRuntimeExports.jsxs(Box,{mb:3,children:[jsxRuntimeExports.jsxs(Text,{fontSize:"sm",opacity:.8,children:["Useful ",$r]}),jsxRuntimeExports.jsx(Wrap,{spacing:2,children:Wn.slice(0,8).map((gi,ii)=>jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Tag,{colorScheme:"teal",variant:"subtle",maxW:"100%",children:gi})},ii))})]}),jsxRuntimeExports.jsxs(Box,{mb:4,children:[jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.8,children:"Pronunciation / Grammar / Vocab / Fluency"}),jsxRuntimeExports.jsx(Progress,{value:sr,size:"sm",colorScheme:"teal",rounded:"sm"})]}),jsxRuntimeExports.jsxs(Stack,{direction:["column","row"],spacing:2,children:[jsxRuntimeExports.jsxs(Button,{size:"md",onClick:()=>dn?.(gr),isDisabled:!gr,flex:"1",children:["Try again (",$r,")"]}),jsxRuntimeExports.jsx(Button,{size:"md",variant:"outline",onClick:()=>jt?.(En),isDisabled:!En,flex:"1",color:"white",children:"Next goal"})]})]})]})]})}return jsxRuntimeExports.jsxs(Box,{minH:"100vh",bg:"gray.900",color:"gray.100",position:"relative",pb:"120px",maxW:"100%",w:"100%",style:{overflowX:"hidden"},children:[jsxRuntimeExports.jsxs(Stack,{direction:["column","row"],px:4,pt:4,pb:2,spacing:[2,4],align:["stretch","center"],justify:"space-between",children:[jsxRuntimeExports.jsxs(Box,{minW:0,children:[jsxRuntimeExports.jsx(Text,{fontSize:"lg",fontWeight:"bold",noOfLines:1,children:st}),jsxRuntimeExports.jsxs(Wrap,{spacing:2,mt:1,children:[jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Badge,{colorScheme:tt,variant:"subtle",children:Le})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Badge,{colorScheme:"teal",variant:"subtle",children:["XP ",Re]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Badge,{colorScheme:"pink",variant:"subtle",children:[he,"🔥"]})})]})]}),jsxRuntimeExports.jsxs(HStack,{children:[jsxRuntimeExports.jsx(IconButton,{"aria-label":"Account",icon:jsxRuntimeExports.jsx(CiUser,{size:20}),size:"md",onClick:h.onOpen,mr:2}),jsxRuntimeExports.jsx(IconButton,{"aria-label":"Settings",icon:jsxRuntimeExports.jsx(SettingsIcon,{}),size:"md",onClick:c.onOpen})]})]}),jsxRuntimeExports.jsxs(VStack,{align:"stretch",spacing:3,px:4,children:[jsxRuntimeExports.jsx(RobotBuddyPro,{state:T,loudness:T==="listening"?V:0,mood:A,variant:"abstract"}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"lg",border:"1px solid rgba(255,255,255,0.06)",maxW:"100%",w:"100%",children:[jsxRuntimeExports.jsxs(Stack,{direction:["column","column","column","row"],spacing:2,justify:"flex-start",align:["stretch","stretch","stretch","center"],flexWrap:"wrap",children:[jsxRuntimeExports.jsx(Box,{flex:"1 1 auto",minW:0,children:jsxRuntimeExports.jsxs(Text,{fontWeight:"semibold",fontSize:"md",sx:MOBILE_TEXT_SX,children:["🎯 ",Se.en]})}),jsxRuntimeExports.jsxs(Badge,{colorScheme:"teal",whiteSpace:"normal",alignSelf:["flex-start","flex-start","flex-start","center"],maxW:"100%",children:["ES: ",Se.es]})]}),jsxRuntimeExports.jsxs(Wrap,{mt:2,spacing:2,children:[jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"outline",onClick:f.onOpen,colorScheme:"whiteAlpha.600",children:"Coach"})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"ghost",onClick:()=>Ue(Fe=>!Fe),colorScheme:"whiteAlpha.600",children:Be?At==="es"?"Hide Spanish":"Hide English":At==="es"?"Show Spanish":"Show English"})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Button,{size:"sm",variant:"ghost",onClick:()=>{const Fe=C(Se,oe?.scores);Ae(Fe),Nn({challenge:Fe})},children:"New goal"})}),(()=>{const Fe=oe?.[`redo_${ne}`]||oe?.redo_es||null;return Fe&&jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsx(Button,{size:"sm",onClick:()=>ue(Fe),children:"Redo tip"})})})()]})]})]}),jsxRuntimeExports.jsx(VStack,{align:"stretch",spacing:3,px:4,mt:3,children:xe.map(Fe=>{const dt=Fe.text||"",dn=(Fe.lang||"es")==="nah"?"Náhuatl":"Spanish",jt=(At==="es"?Fe.trans_es:Fe.trans_en)||"",Je=At==="es"?"Español":"English",bn=Array.isArray(Fe.pairs)?Fe.pairs:[],Gt=!!Fe.audioKey;return jsxRuntimeExports.jsx(AlignedBubble,{primaryLabel:dn,secondaryLabel:Je,primaryText:dt,secondaryText:jt,pairs:bn,showSecondary:Be,canReplay:Gt,onReplay:async()=>{if(!Fe.audioKey){a({title:"No audio cached",description:"This turn doesn’t have saved audio.",status:"info",duration:2e3});return}const Lt=await loadClipBlob(Fe.audioKey);if(!Lt){a({title:"Audio not found",description:"Say something again to re-cache this line.",status:"info",duration:2e3});return}try{kt.current?.pause?.()}catch{}const cr=URL.createObjectURL(Lt),jn=new Audio(cr);kt.current=jn,w("speaking"),R("happy"),jn.onended=()=>{URL.revokeObjectURL(cr),kt.current=null,w("idle"),R("neutral")},await jn.play().catch(()=>{})}},Fe.id)})}),jsxRuntimeExports.jsx(Center,{position:"fixed",bottom:"22px",left:"0",right:"0",zIndex:30,px:4,children:jsxRuntimeExports.jsxs(HStack,{spacing:3,w:"100%",maxW:"560px",justify:"center",children:[jsxRuntimeExports.jsx(Box,{bg:"gray.800",px:3,py:2,rounded:"lg",border:"1px solid rgba(255,255,255,0.06)",display:["none","flex"],children:jsxRuntimeExports.jsxs(Stat,{minW:"120px",children:[jsxRuntimeExports.jsx(StatLabel,{fontSize:"xs",children:"Progress"}),jsxRuntimeExports.jsxs(StatNumber,{fontSize:"md",children:[100-ke," XP to level"]}),jsxRuntimeExports.jsx(Progress,{mt:1,value:ke,size:"xs",colorScheme:"teal",rounded:"sm"})]})}),T!=="listening"?jsxRuntimeExports.jsx(Button,{onClick:Vn,size:"lg",height:"64px",px:"8",rounded:"full",colorScheme:"teal",boxShadow:"0 10px 30px rgba(0,0,0,0.35)",children:"🎤 Talk"}):jsxRuntimeExports.jsx(Button,{onClick:ie,size:"lg",height:"64px",px:"8",rounded:"full",colorScheme:"red",boxShadow:"0 10px 30px rgba(0,0,0,0.35)",children:"⏹️ Stop"})]})}),jsxRuntimeExports.jsxs(Drawer,{isOpen:c.isOpen,placement:"bottom",onClose:c.onClose,children:[jsxRuntimeExports.jsx(ModalOverlay,{bg:"blackAlpha.600"}),jsxRuntimeExports.jsxs(DrawerContent,{bg:"gray.900",color:"gray.100",borderTopRadius:"24px",children:[jsxRuntimeExports.jsx(ModalHeader,{pb:2,children:"Settings"}),jsxRuntimeExports.jsx(ModalBody,{pb:6,children:jsxRuntimeExports.jsxs(VStack,{align:"stretch",spacing:3,children:[jsxRuntimeExports.jsxs(Wrap,{spacing:2,children:[jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:ye,onChange:Fe=>D(Fe.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"beginner",children:"Beginner"}),jsxRuntimeExports.jsx("option",{value:"intermediate",children:"Intermediate"}),jsxRuntimeExports.jsx("option",{value:"advanced",children:"Advanced"})]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:ae,onChange:Fe=>z(Fe.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"en",children:"Support: English"}),jsxRuntimeExports.jsx("option",{value:"bilingual",children:"Support: Bilingual"}),jsxRuntimeExports.jsx("option",{value:"es",children:"Support: Spanish"})]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:H,onChange:Fe=>X(Fe.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"Leda",children:"Leda"}),jsxRuntimeExports.jsx("option",{value:"Puck",children:"Puck"}),jsxRuntimeExports.jsx("option",{value:"Kore",children:"Kore"}),jsxRuntimeExports.jsx("option",{value:"Breeze",children:"Breeze"}),jsxRuntimeExports.jsx("option",{value:"Solemn",children:"Solemn"})]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:ne,onChange:Fe=>W(Fe.target.value),bg:"gray.800",size:"md",w:"auto",title:"Practice language",children:[jsxRuntimeExports.jsx("option",{value:"nah",children:"Practice: Náhuatl"}),jsxRuntimeExports.jsx("option",{value:"es",children:"Practice: Spanish"})]})})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsxs(HStack,{justify:"space-between",mb:2,children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",children:"Auto-stop after pause"}),jsxRuntimeExports.jsxs(Text,{fontSize:"sm",opacity:.8,children:[se," ms"]})]}),jsxRuntimeExports.jsxs(Slider,{"aria-label":"pause-slider",min:400,max:3e3,step:100,value:se,onChange:re,children:[jsxRuntimeExports.jsx(SliderTrack,{children:jsxRuntimeExports.jsx(SliderFilledTrack,{})}),jsxRuntimeExports.jsx(SliderThumb,{})]})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:2,children:"Voice personality"}),jsxRuntimeExports.jsx(Input,{value:le,onChange:Fe=>Z(Fe.target.value),bg:"gray.700",placeholder:`e.g., ${g}`}),jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.7,mt:1,children:"Styles the assistant reply (light sarcasm OK; no bullying)."})]}),jsxRuntimeExports.jsxs(HStack,{bg:"gray.800",p:3,rounded:"md",justify:"space-between",children:[jsxRuntimeExports.jsxs(Text,{fontSize:"sm",mr:2,children:["Show ",At==="es"?"Spanish":"English"," ","translation"]}),jsxRuntimeExports.jsx(Switch,{isChecked:Be,onChange:Fe=>Ue(Fe.target.checked)})]})]})})]})]}),jsxRuntimeExports.jsxs(Drawer,{isOpen:h.isOpen,placement:"bottom",onClose:h.onClose,children:[jsxRuntimeExports.jsx(ModalOverlay,{bg:"blackAlpha.600"}),jsxRuntimeExports.jsxs(DrawerContent,{bg:"gray.900",color:"gray.100",borderTopRadius:"24px",children:[jsxRuntimeExports.jsx(ModalHeader,{pb:2,children:"Account"}),jsxRuntimeExports.jsx(ModalBody,{pb:6,children:jsxRuntimeExports.jsxs(VStack,{align:"stretch",spacing:3,children:[jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:1,children:"Your ID (npub)"}),jsxRuntimeExports.jsxs(InputGroup,{children:[jsxRuntimeExports.jsx(Input,{value:qe||"",readOnly:!0,bg:"gray.700",placeholder:"Not set"}),jsxRuntimeExports.jsx(InputRightElement,{width:"4.5rem",children:jsxRuntimeExports.jsx(Button,{h:"1.75rem",size:"sm",onClick:()=>Vr(qe,"ID copied"),isDisabled:!qe,children:"Copy"})})]})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:1,children:"Secret key (nsec)"}),jsxRuntimeExports.jsxs(InputGroup,{children:[jsxRuntimeExports.jsx(Input,{type:"password",value:Ke?"••••••••••••••••••••••••••••":"",readOnly:!0,bg:"gray.700",placeholder:"Not stored"}),jsxRuntimeExports.jsx(InputRightElement,{width:"6rem",children:jsxRuntimeExports.jsx(Button,{h:"1.75rem",size:"sm",colorScheme:"orange",onClick:()=>Vr(Ke,"Secret copied"),isDisabled:!Ke,children:"Copy"})})]}),jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.75,mt:1,children:"We never display your secret—only copy from local storage."})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:2,children:"Switch account (paste nsec)"}),jsxRuntimeExports.jsx(Input,{value:it,onChange:Fe=>wn(Fe.target.value),bg:"gray.700",placeholder:"nsec1..."}),jsxRuntimeExports.jsx(HStack,{mt:2,justify:"flex-end",children:jsxRuntimeExports.jsx(Button,{isLoading:yn,loadingText:"Switching",onClick:ir,colorScheme:"teal",children:"Switch"})}),jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.75,mt:1,children:"If the account doesn’t exist, we’ll create it in your users collection."})]})]})})]})]}),jsxRuntimeExports.jsx(Wt,{isOpen:f.isOpen,onClose:f.onClose,coach:oe,onRedo:ue,onAcceptNext:Ee,targetLang:ne})]})}const DEFAULT_CHALLENGE$1={en:"Make a polite request.",es:"Pide algo con cortesía."},DEFAULT_PERSONA$1="Like a sarcastic, semi-friendly toxica.";function Onboarding({npub:n="",onComplete:e}){const[s,o]=reactExports.useState("beginner"),[a,c]=reactExports.useState("en"),[f,h]=reactExports.useState("Leda"),[m,g]=reactExports.useState("nah"),[_,E]=reactExports.useState(DEFAULT_PERSONA$1),[T,w]=reactExports.useState(!0),[A,R]=reactExports.useState(!1),V=a==="es"?"es":"en",te=reactExports.useMemo(()=>({level:s,supportLang:a,voice:f,voicePersona:_,targetLang:m,showTranslations:T,challenge:{...DEFAULT_CHALLENGE$1}}),[s,a,f,_,m,T]);async function se(){if(typeof e!="function"){console.error("Onboarding.onComplete is not provided.");return}R(!0);try{await Promise.resolve(e(te))}finally{R(!1)}}return jsxRuntimeExports.jsx(Box,{minH:"100vh",bg:"gray.900",color:"gray.100",children:jsxRuntimeExports.jsxs(Drawer,{isOpen:!0,placement:"bottom",onClose:()=>{},children:[jsxRuntimeExports.jsx(ModalOverlay,{bg:"blackAlpha.700"}),jsxRuntimeExports.jsxs(DrawerContent,{bg:"gray.900",color:"gray.100",borderTopRadius:"24px",children:[jsxRuntimeExports.jsx(ModalHeader,{pb:0,children:jsxRuntimeExports.jsxs(VStack,{align:"stretch",spacing:1,children:[jsxRuntimeExports.jsx(Text,{fontWeight:"bold",fontSize:"lg",children:"Welcome"}),jsxRuntimeExports.jsx(Text,{opacity:.85,fontSize:"sm",children:"Let’s set up your AI experience before you start."}),!!n&&jsxRuntimeExports.jsx(HStack,{pt:1,children:jsxRuntimeExports.jsxs(Badge,{colorScheme:"purple",variant:"subtle",maxW:"100%",children:["ID: ",n]})})]})}),jsxRuntimeExports.jsx(ModalBody,{pb:6,children:jsxRuntimeExports.jsxs(VStack,{align:"stretch",spacing:4,children:[jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:2,opacity:.85,children:"Difficulty & Language Support"}),jsxRuntimeExports.jsxs(Wrap,{spacing:2,children:[jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:s,onChange:re=>o(re.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"beginner",children:"Beginner"}),jsxRuntimeExports.jsx("option",{value:"intermediate",children:"Intermediate"}),jsxRuntimeExports.jsx("option",{value:"advanced",children:"Advanced"})]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:a,onChange:re=>c(re.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"en",children:"Support: English"}),jsxRuntimeExports.jsx("option",{value:"bilingual",children:"Support: Bilingual"}),jsxRuntimeExports.jsx("option",{value:"es",children:"Support: Spanish"})]})}),jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:m,onChange:re=>g(re.target.value),bg:"gray.800",size:"md",w:"auto",title:"Practice language",children:[jsxRuntimeExports.jsx("option",{value:"nah",children:"Practice: Náhuatl"}),jsxRuntimeExports.jsx("option",{value:"es",children:"Practice: Spanish"})]})})]})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",mb:2,opacity:.85,children:"Voice & Personality"}),jsxRuntimeExports.jsx(Wrap,{spacing:2,mb:2,children:jsxRuntimeExports.jsx(WrapItem,{children:jsxRuntimeExports.jsxs(Select,{value:f,onChange:re=>h(re.target.value),bg:"gray.800",size:"md",w:"auto",children:[jsxRuntimeExports.jsx("option",{value:"Leda",children:"Leda"}),jsxRuntimeExports.jsx("option",{value:"Puck",children:"Puck"}),jsxRuntimeExports.jsx("option",{value:"Kore",children:"Kore"}),jsxRuntimeExports.jsx("option",{value:"Breeze",children:"Breeze"}),jsxRuntimeExports.jsx("option",{value:"Solemn",children:"Solemn"})]})})}),jsxRuntimeExports.jsx(Input,{value:_,onChange:re=>E(re.target.value),bg:"gray.700",placeholder:`e.g., ${DEFAULT_PERSONA$1}`}),jsxRuntimeExports.jsx(Text,{fontSize:"xs",opacity:.7,mt:1,children:"This guides tone/style (keep it playful, not hurtful)."})]}),jsxRuntimeExports.jsxs(HStack,{bg:"gray.800",p:3,rounded:"md",justify:"space-between",children:[jsxRuntimeExports.jsxs(Text,{fontSize:"sm",mr:2,children:["Show ",V==="es"?"Spanish":"English"," ","translation"]}),jsxRuntimeExports.jsx(Switch,{isChecked:T,onChange:re=>w(re.target.checked)})]}),jsxRuntimeExports.jsxs(Box,{bg:"gray.800",p:3,rounded:"md",children:[jsxRuntimeExports.jsx(Text,{fontSize:"sm",opacity:.8,children:"First goal"}),jsxRuntimeExports.jsxs(Text,{mt:1,whiteSpace:"pre-wrap",children:["🎯 ",DEFAULT_CHALLENGE$1.en]}),jsxRuntimeExports.jsxs(Text,{mt:1,opacity:.9,children:["ES: ",DEFAULT_CHALLENGE$1.es]})]}),jsxRuntimeExports.jsx(Button,{size:"lg",colorScheme:"teal",onClick:se,isLoading:A,loadingText:"Saving",children:"Start my session"})]})})]})]})})}var buffer={},base64Js={},hasRequiredBase64Js;function requireBase64Js(){if(hasRequiredBase64Js)return base64Js;hasRequiredBase64Js=1,base64Js.byteLength=h,base64Js.toByteArray=g,base64Js.fromByteArray=T;for(var n=[],e=[],s=typeof Uint8Array<"u"?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,c=o.length;a<c;++a)n[a]=o[a],e[o.charCodeAt(a)]=a;e[45]=62,e[95]=63;function f(w){var A=w.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var R=w.indexOf("=");R===-1&&(R=A);var V=R===A?0:4-R%4;return[R,V]}function h(w){var A=f(w),R=A[0],V=A[1];return(R+V)*3/4-V}function m(w,A,R){return(A+R)*3/4-R}function g(w){var A,R=f(w),V=R[0],te=R[1],se=new s(m(w,V,te)),re=0,ye=te>0?V-4:V,D;for(D=0;D<ye;D+=4)A=e[w.charCodeAt(D)]<<18|e[w.charCodeAt(D+1)]<<12|e[w.charCodeAt(D+2)]<<6|e[w.charCodeAt(D+3)],se[re++]=A>>16&255,se[re++]=A>>8&255,se[re++]=A&255;return te===2&&(A=e[w.charCodeAt(D)]<<2|e[w.charCodeAt(D+1)]>>4,se[re++]=A&255),te===1&&(A=e[w.charCodeAt(D)]<<10|e[w.charCodeAt(D+1)]<<4|e[w.charCodeAt(D+2)]>>2,se[re++]=A>>8&255,se[re++]=A&255),se}function _(w){return n[w>>18&63]+n[w>>12&63]+n[w>>6&63]+n[w&63]}function E(w,A,R){for(var V,te=[],se=A;se<R;se+=3)V=(w[se]<<16&16711680)+(w[se+1]<<8&65280)+(w[se+2]&255),te.push(_(V));return te.join("")}function T(w){for(var A,R=w.length,V=R%3,te=[],se=16383,re=0,ye=R-V;re<ye;re+=se)te.push(E(w,re,re+se>ye?ye:re+se));return V===1?(A=w[R-1],te.push(n[A>>2]+n[A<<4&63]+"==")):V===2&&(A=(w[R-2]<<8)+w[R-1],te.push(n[A>>10]+n[A>>4&63]+n[A<<2&63]+"=")),te.join("")}return base64Js}var ieee754={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var hasRequiredIeee754;function requireIeee754(){return hasRequiredIeee754||(hasRequiredIeee754=1,ieee754.read=function(n,e,s,o,a){var c,f,h=a*8-o-1,m=(1<<h)-1,g=m>>1,_=-7,E=s?a-1:0,T=s?-1:1,w=n[e+E];for(E+=T,c=w&(1<<-_)-1,w>>=-_,_+=h;_>0;c=c*256+n[e+E],E+=T,_-=8);for(f=c&(1<<-_)-1,c>>=-_,_+=o;_>0;f=f*256+n[e+E],E+=T,_-=8);if(c===0)c=1-g;else{if(c===m)return f?NaN:(w?-1:1)*(1/0);f=f+Math.pow(2,o),c=c-g}return(w?-1:1)*f*Math.pow(2,c-o)},ieee754.write=function(n,e,s,o,a,c){var f,h,m,g=c*8-a-1,_=(1<<g)-1,E=_>>1,T=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,w=o?0:c-1,A=o?1:-1,R=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(h=isNaN(e)?1:0,f=_):(f=Math.floor(Math.log(e)/Math.LN2),e*(m=Math.pow(2,-f))<1&&(f--,m*=2),f+E>=1?e+=T/m:e+=T*Math.pow(2,1-E),e*m>=2&&(f++,m/=2),f+E>=_?(h=0,f=_):f+E>=1?(h=(e*m-1)*Math.pow(2,a),f=f+E):(h=e*Math.pow(2,E-1)*Math.pow(2,a),f=0));a>=8;n[s+w]=h&255,w+=A,h/=256,a-=8);for(f=f<<a|h,g+=a;g>0;n[s+w]=f&255,w+=A,f/=256,g-=8);n[s+w-A]|=R*128}),ieee754}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hasRequiredBuffer;function requireBuffer(){return hasRequiredBuffer||(hasRequiredBuffer=1,(function(n){const e=requireBase64Js(),s=requireIeee754(),o=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;n.Buffer=h,n.SlowBuffer=se,n.INSPECT_MAX_BYTES=50;const a=2147483647;n.kMaxLength=a,h.TYPED_ARRAY_SUPPORT=c(),!h.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function c(){try{const ie=new Uint8Array(1),C={foo:function(){return 42}};return Object.setPrototypeOf(C,Uint8Array.prototype),Object.setPrototypeOf(ie,C),ie.foo()===42}catch{return!1}}Object.defineProperty(h.prototype,"parent",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.buffer}}),Object.defineProperty(h.prototype,"offset",{enumerable:!0,get:function(){if(h.isBuffer(this))return this.byteOffset}});function f(ie){if(ie>a)throw new RangeError('The value "'+ie+'" is invalid for option "size"');const C=new Uint8Array(ie);return Object.setPrototypeOf(C,h.prototype),C}function h(ie,C,P){if(typeof ie=="number"){if(typeof C=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return E(ie)}return m(ie,C,P)}h.poolSize=8192;function m(ie,C,P){if(typeof ie=="string")return T(ie,C);if(ArrayBuffer.isView(ie))return A(ie);if(ie==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if(Nn(ie,ArrayBuffer)||ie&&Nn(ie.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Nn(ie,SharedArrayBuffer)||ie&&Nn(ie.buffer,SharedArrayBuffer)))return R(ie,C,P);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const ue=ie.valueOf&&ie.valueOf();if(ue!=null&&ue!==ie)return h.from(ue,C,P);const Ee=V(ie);if(Ee)return Ee;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return h.from(ie[Symbol.toPrimitive]("string"),C,P);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}h.from=function(ie,C,P){return m(ie,C,P)},Object.setPrototypeOf(h.prototype,Uint8Array.prototype),Object.setPrototypeOf(h,Uint8Array);function g(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function _(ie,C,P){return g(ie),ie<=0?f(ie):C!==void 0?typeof P=="string"?f(ie).fill(C,P):f(ie).fill(C):f(ie)}h.alloc=function(ie,C,P){return _(ie,C,P)};function E(ie){return g(ie),f(ie<0?0:te(ie)|0)}h.allocUnsafe=function(ie){return E(ie)},h.allocUnsafeSlow=function(ie){return E(ie)};function T(ie,C){if((typeof C!="string"||C==="")&&(C="utf8"),!h.isEncoding(C))throw new TypeError("Unknown encoding: "+C);const P=re(ie,C)|0;let ue=f(P);const Ee=ue.write(ie,C);return Ee!==P&&(ue=ue.slice(0,Ee)),ue}function w(ie){const C=ie.length<0?0:te(ie.length)|0,P=f(C);for(let ue=0;ue<C;ue+=1)P[ue]=ie[ue]&255;return P}function A(ie){if(Nn(ie,Uint8Array)){const C=new Uint8Array(ie);return R(C.buffer,C.byteOffset,C.byteLength)}return w(ie)}function R(ie,C,P){if(C<0||ie.byteLength<C)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<C+(P||0))throw new RangeError('"length" is outside of buffer bounds');let ue;return C===void 0&&P===void 0?ue=new Uint8Array(ie):P===void 0?ue=new Uint8Array(ie,C):ue=new Uint8Array(ie,C,P),Object.setPrototypeOf(ue,h.prototype),ue}function V(ie){if(h.isBuffer(ie)){const C=te(ie.length)|0,P=f(C);return P.length===0||ie.copy(P,0,0,C),P}if(ie.length!==void 0)return typeof ie.length!="number"||Gn(ie.length)?f(0):w(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return w(ie.data)}function te(ie){if(ie>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return ie|0}function se(ie){return+ie!=ie&&(ie=0),h.alloc(+ie)}h.isBuffer=function(C){return C!=null&&C._isBuffer===!0&&C!==h.prototype},h.compare=function(C,P){if(Nn(C,Uint8Array)&&(C=h.from(C,C.offset,C.byteLength)),Nn(P,Uint8Array)&&(P=h.from(P,P.offset,P.byteLength)),!h.isBuffer(C)||!h.isBuffer(P))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(C===P)return 0;let ue=C.length,Ee=P.length;for(let ke=0,Le=Math.min(ue,Ee);ke<Le;++ke)if(C[ke]!==P[ke]){ue=C[ke],Ee=P[ke];break}return ue<Ee?-1:Ee<ue?1:0},h.isEncoding=function(C){switch(String(C).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},h.concat=function(C,P){if(!Array.isArray(C))throw new TypeError('"list" argument must be an Array of Buffers');if(C.length===0)return h.alloc(0);let ue;if(P===void 0)for(P=0,ue=0;ue<C.length;++ue)P+=C[ue].length;const Ee=h.allocUnsafe(P);let ke=0;for(ue=0;ue<C.length;++ue){let Le=C[ue];if(Nn(Le,Uint8Array))ke+Le.length>Ee.length?(h.isBuffer(Le)||(Le=h.from(Le)),Le.copy(Ee,ke)):Uint8Array.prototype.set.call(Ee,Le,ke);else if(h.isBuffer(Le))Le.copy(Ee,ke);else throw new TypeError('"list" argument must be an Array of Buffers');ke+=Le.length}return Ee};function re(ie,C){if(h.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||Nn(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);const P=ie.length,ue=arguments.length>2&&arguments[2]===!0;if(!ue&&P===0)return 0;let Ee=!1;for(;;)switch(C){case"ascii":case"latin1":case"binary":return P;case"utf8":case"utf-8":return Ft(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P*2;case"hex":return P>>>1;case"base64":return Hn(ie).length;default:if(Ee)return ue?-1:Ft(ie).length;C=(""+C).toLowerCase(),Ee=!0}}h.byteLength=re;function ye(ie,C,P){let ue=!1;if((C===void 0||C<0)&&(C=0),C>this.length||((P===void 0||P>this.length)&&(P=this.length),P<=0)||(P>>>=0,C>>>=0,P<=C))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return Ie(this,C,P);case"utf8":case"utf-8":return xe(this,C,P);case"ascii":return _e(this,C,P);case"latin1":case"binary":return Re(this,C,P);case"base64":return W(this,C,P);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return he(this,C,P);default:if(ue)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),ue=!0}}h.prototype._isBuffer=!0;function D(ie,C,P){const ue=ie[C];ie[C]=ie[P],ie[P]=ue}h.prototype.swap16=function(){const C=this.length;if(C%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let P=0;P<C;P+=2)D(this,P,P+1);return this},h.prototype.swap32=function(){const C=this.length;if(C%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let P=0;P<C;P+=4)D(this,P,P+3),D(this,P+1,P+2);return this},h.prototype.swap64=function(){const C=this.length;if(C%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let P=0;P<C;P+=8)D(this,P,P+7),D(this,P+1,P+6),D(this,P+2,P+5),D(this,P+3,P+4);return this},h.prototype.toString=function(){const C=this.length;return C===0?"":arguments.length===0?xe(this,0,C):ye.apply(this,arguments)},h.prototype.toLocaleString=h.prototype.toString,h.prototype.equals=function(C){if(!h.isBuffer(C))throw new TypeError("Argument must be a Buffer");return this===C?!0:h.compare(this,C)===0},h.prototype.inspect=function(){let C="";const P=n.INSPECT_MAX_BYTES;return C=this.toString("hex",0,P).replace(/(.{2})/g,"$1 ").trim(),this.length>P&&(C+=" ... "),"<Buffer "+C+">"},o&&(h.prototype[o]=h.prototype.inspect),h.prototype.compare=function(C,P,ue,Ee,ke){if(Nn(C,Uint8Array)&&(C=h.from(C,C.offset,C.byteLength)),!h.isBuffer(C))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof C);if(P===void 0&&(P=0),ue===void 0&&(ue=C?C.length:0),Ee===void 0&&(Ee=0),ke===void 0&&(ke=this.length),P<0||ue>C.length||Ee<0||ke>this.length)throw new RangeError("out of range index");if(Ee>=ke&&P>=ue)return 0;if(Ee>=ke)return-1;if(P>=ue)return 1;if(P>>>=0,ue>>>=0,Ee>>>=0,ke>>>=0,this===C)return 0;let Le=ke-Ee,tt=ue-P;const st=Math.min(Le,tt),At=this.slice(Ee,ke),Wt=C.slice(P,ue);for(let Fe=0;Fe<st;++Fe)if(At[Fe]!==Wt[Fe]){Le=At[Fe],tt=Wt[Fe];break}return Le<tt?-1:tt<Le?1:0};function ae(ie,C,P,ue,Ee){if(ie.length===0)return-1;if(typeof P=="string"?(ue=P,P=0):P>2147483647?P=2147483647:P<-2147483648&&(P=-2147483648),P=+P,Gn(P)&&(P=Ee?0:ie.length-1),P<0&&(P=ie.length+P),P>=ie.length){if(Ee)return-1;P=ie.length-1}else if(P<0)if(Ee)P=0;else return-1;if(typeof C=="string"&&(C=h.from(C,ue)),h.isBuffer(C))return C.length===0?-1:z(ie,C,P,ue,Ee);if(typeof C=="number")return C=C&255,typeof Uint8Array.prototype.indexOf=="function"?Ee?Uint8Array.prototype.indexOf.call(ie,C,P):Uint8Array.prototype.lastIndexOf.call(ie,C,P):z(ie,[C],P,ue,Ee);throw new TypeError("val must be string, number or Buffer")}function z(ie,C,P,ue,Ee){let ke=1,Le=ie.length,tt=C.length;if(ue!==void 0&&(ue=String(ue).toLowerCase(),ue==="ucs2"||ue==="ucs-2"||ue==="utf16le"||ue==="utf-16le")){if(ie.length<2||C.length<2)return-1;ke=2,Le/=2,tt/=2,P/=2}function st(Wt,Fe){return ke===1?Wt[Fe]:Wt.readUInt16BE(Fe*ke)}let At;if(Ee){let Wt=-1;for(At=P;At<Le;At++)if(st(ie,At)===st(C,Wt===-1?0:At-Wt)){if(Wt===-1&&(Wt=At),At-Wt+1===tt)return Wt*ke}else Wt!==-1&&(At-=At-Wt),Wt=-1}else for(P+tt>Le&&(P=Le-tt),At=P;At>=0;At--){let Wt=!0;for(let Fe=0;Fe<tt;Fe++)if(st(ie,At+Fe)!==st(C,Fe)){Wt=!1;break}if(Wt)return At}return-1}h.prototype.includes=function(C,P,ue){return this.indexOf(C,P,ue)!==-1},h.prototype.indexOf=function(C,P,ue){return ae(this,C,P,ue,!0)},h.prototype.lastIndexOf=function(C,P,ue){return ae(this,C,P,ue,!1)};function H(ie,C,P,ue){P=Number(P)||0;const Ee=ie.length-P;ue?(ue=Number(ue),ue>Ee&&(ue=Ee)):ue=Ee;const ke=C.length;ue>ke/2&&(ue=ke/2);let Le;for(Le=0;Le<ue;++Le){const tt=parseInt(C.substr(Le*2,2),16);if(Gn(tt))return Le;ie[P+Le]=tt}return Le}function X(ie,C,P,ue){return Qn(Ft(C,ie.length-P),ie,P,ue)}function le(ie,C,P,ue){return Qn(lr(C),ie,P,ue)}function Z(ie,C,P,ue){return Qn(Hn(C),ie,P,ue)}function ne(ie,C,P,ue){return Qn(Fn(C,ie.length-P),ie,P,ue)}h.prototype.write=function(C,P,ue,Ee){if(P===void 0)Ee="utf8",ue=this.length,P=0;else if(ue===void 0&&typeof P=="string")Ee=P,ue=this.length,P=0;else if(isFinite(P))P=P>>>0,isFinite(ue)?(ue=ue>>>0,Ee===void 0&&(Ee="utf8")):(Ee=ue,ue=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ke=this.length-P;if((ue===void 0||ue>ke)&&(ue=ke),C.length>0&&(ue<0||P<0)||P>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ee||(Ee="utf8");let Le=!1;for(;;)switch(Ee){case"hex":return H(this,C,P,ue);case"utf8":case"utf-8":return X(this,C,P,ue);case"ascii":case"latin1":case"binary":return le(this,C,P,ue);case"base64":return Z(this,C,P,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ne(this,C,P,ue);default:if(Le)throw new TypeError("Unknown encoding: "+Ee);Ee=(""+Ee).toLowerCase(),Le=!0}},h.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function W(ie,C,P){return C===0&&P===ie.length?e.fromByteArray(ie):e.fromByteArray(ie.slice(C,P))}function xe(ie,C,P){P=Math.min(ie.length,P);const ue=[];let Ee=C;for(;Ee<P;){const ke=ie[Ee];let Le=null,tt=ke>239?4:ke>223?3:ke>191?2:1;if(Ee+tt<=P){let st,At,Wt,Fe;switch(tt){case 1:ke<128&&(Le=ke);break;case 2:st=ie[Ee+1],(st&192)===128&&(Fe=(ke&31)<<6|st&63,Fe>127&&(Le=Fe));break;case 3:st=ie[Ee+1],At=ie[Ee+2],(st&192)===128&&(At&192)===128&&(Fe=(ke&15)<<12|(st&63)<<6|At&63,Fe>2047&&(Fe<55296||Fe>57343)&&(Le=Fe));break;case 4:st=ie[Ee+1],At=ie[Ee+2],Wt=ie[Ee+3],(st&192)===128&&(At&192)===128&&(Wt&192)===128&&(Fe=(ke&15)<<18|(st&63)<<12|(At&63)<<6|Wt&63,Fe>65535&&Fe<1114112&&(Le=Fe))}}Le===null?(Le=65533,tt=1):Le>65535&&(Le-=65536,ue.push(Le>>>10&1023|55296),Le=56320|Le&1023),ue.push(Le),Ee+=tt}return oe(ue)}const de=4096;function oe(ie){const C=ie.length;if(C<=de)return String.fromCharCode.apply(String,ie);let P="",ue=0;for(;ue<C;)P+=String.fromCharCode.apply(String,ie.slice(ue,ue+=de));return P}function _e(ie,C,P){let ue="";P=Math.min(ie.length,P);for(let Ee=C;Ee<P;++Ee)ue+=String.fromCharCode(ie[Ee]&127);return ue}function Re(ie,C,P){let ue="";P=Math.min(ie.length,P);for(let Ee=C;Ee<P;++Ee)ue+=String.fromCharCode(ie[Ee]);return ue}function Ie(ie,C,P){const ue=ie.length;(!C||C<0)&&(C=0),(!P||P<0||P>ue)&&(P=ue);let Ee="";for(let ke=C;ke<P;++ke)Ee+=Vr[ie[ke]];return Ee}function he(ie,C,P){const ue=ie.slice(C,P);let Ee="";for(let ke=0;ke<ue.length-1;ke+=2)Ee+=String.fromCharCode(ue[ke]+ue[ke+1]*256);return Ee}h.prototype.slice=function(C,P){const ue=this.length;C=~~C,P=P===void 0?ue:~~P,C<0?(C+=ue,C<0&&(C=0)):C>ue&&(C=ue),P<0?(P+=ue,P<0&&(P=0)):P>ue&&(P=ue),P<C&&(P=C);const Ee=this.subarray(C,P);return Object.setPrototypeOf(Ee,h.prototype),Ee};function be(ie,C,P){if(ie%1!==0||ie<0)throw new RangeError("offset is not uint");if(ie+C>P)throw new RangeError("Trying to access beyond buffer length")}h.prototype.readUintLE=h.prototype.readUIntLE=function(C,P,ue){C=C>>>0,P=P>>>0,ue||be(C,P,this.length);let Ee=this[C],ke=1,Le=0;for(;++Le<P&&(ke*=256);)Ee+=this[C+Le]*ke;return Ee},h.prototype.readUintBE=h.prototype.readUIntBE=function(C,P,ue){C=C>>>0,P=P>>>0,ue||be(C,P,this.length);let Ee=this[C+--P],ke=1;for(;P>0&&(ke*=256);)Ee+=this[C+--P]*ke;return Ee},h.prototype.readUint8=h.prototype.readUInt8=function(C,P){return C=C>>>0,P||be(C,1,this.length),this[C]},h.prototype.readUint16LE=h.prototype.readUInt16LE=function(C,P){return C=C>>>0,P||be(C,2,this.length),this[C]|this[C+1]<<8},h.prototype.readUint16BE=h.prototype.readUInt16BE=function(C,P){return C=C>>>0,P||be(C,2,this.length),this[C]<<8|this[C+1]},h.prototype.readUint32LE=h.prototype.readUInt32LE=function(C,P){return C=C>>>0,P||be(C,4,this.length),(this[C]|this[C+1]<<8|this[C+2]<<16)+this[C+3]*16777216},h.prototype.readUint32BE=h.prototype.readUInt32BE=function(C,P){return C=C>>>0,P||be(C,4,this.length),this[C]*16777216+(this[C+1]<<16|this[C+2]<<8|this[C+3])},h.prototype.readBigUInt64LE=ir(function(C){C=C>>>0,Mt(C,"offset");const P=this[C],ue=this[C+7];(P===void 0||ue===void 0)&&Ge(C,this.length-8);const Ee=P+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24,ke=this[++C]+this[++C]*2**8+this[++C]*2**16+ue*2**24;return BigInt(Ee)+(BigInt(ke)<<BigInt(32))}),h.prototype.readBigUInt64BE=ir(function(C){C=C>>>0,Mt(C,"offset");const P=this[C],ue=this[C+7];(P===void 0||ue===void 0)&&Ge(C,this.length-8);const Ee=P*2**24+this[++C]*2**16+this[++C]*2**8+this[++C],ke=this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+ue;return(BigInt(Ee)<<BigInt(32))+BigInt(ke)}),h.prototype.readIntLE=function(C,P,ue){C=C>>>0,P=P>>>0,ue||be(C,P,this.length);let Ee=this[C],ke=1,Le=0;for(;++Le<P&&(ke*=256);)Ee+=this[C+Le]*ke;return ke*=128,Ee>=ke&&(Ee-=Math.pow(2,8*P)),Ee},h.prototype.readIntBE=function(C,P,ue){C=C>>>0,P=P>>>0,ue||be(C,P,this.length);let Ee=P,ke=1,Le=this[C+--Ee];for(;Ee>0&&(ke*=256);)Le+=this[C+--Ee]*ke;return ke*=128,Le>=ke&&(Le-=Math.pow(2,8*P)),Le},h.prototype.readInt8=function(C,P){return C=C>>>0,P||be(C,1,this.length),this[C]&128?(255-this[C]+1)*-1:this[C]},h.prototype.readInt16LE=function(C,P){C=C>>>0,P||be(C,2,this.length);const ue=this[C]|this[C+1]<<8;return ue&32768?ue|4294901760:ue},h.prototype.readInt16BE=function(C,P){C=C>>>0,P||be(C,2,this.length);const ue=this[C+1]|this[C]<<8;return ue&32768?ue|4294901760:ue},h.prototype.readInt32LE=function(C,P){return C=C>>>0,P||be(C,4,this.length),this[C]|this[C+1]<<8|this[C+2]<<16|this[C+3]<<24},h.prototype.readInt32BE=function(C,P){return C=C>>>0,P||be(C,4,this.length),this[C]<<24|this[C+1]<<16|this[C+2]<<8|this[C+3]},h.prototype.readBigInt64LE=ir(function(C){C=C>>>0,Mt(C,"offset");const P=this[C],ue=this[C+7];(P===void 0||ue===void 0)&&Ge(C,this.length-8);const Ee=this[C+4]+this[C+5]*2**8+this[C+6]*2**16+(ue<<24);return(BigInt(Ee)<<BigInt(32))+BigInt(P+this[++C]*2**8+this[++C]*2**16+this[++C]*2**24)}),h.prototype.readBigInt64BE=ir(function(C){C=C>>>0,Mt(C,"offset");const P=this[C],ue=this[C+7];(P===void 0||ue===void 0)&&Ge(C,this.length-8);const Ee=(P<<24)+this[++C]*2**16+this[++C]*2**8+this[++C];return(BigInt(Ee)<<BigInt(32))+BigInt(this[++C]*2**24+this[++C]*2**16+this[++C]*2**8+ue)}),h.prototype.readFloatLE=function(C,P){return C=C>>>0,P||be(C,4,this.length),s.read(this,C,!0,23,4)},h.prototype.readFloatBE=function(C,P){return C=C>>>0,P||be(C,4,this.length),s.read(this,C,!1,23,4)},h.prototype.readDoubleLE=function(C,P){return C=C>>>0,P||be(C,8,this.length),s.read(this,C,!0,52,8)},h.prototype.readDoubleBE=function(C,P){return C=C>>>0,P||be(C,8,this.length),s.read(this,C,!1,52,8)};function Se(ie,C,P,ue,Ee,ke){if(!h.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(C>Ee||C<ke)throw new RangeError('"value" argument is out of bounds');if(P+ue>ie.length)throw new RangeError("Index out of range")}h.prototype.writeUintLE=h.prototype.writeUIntLE=function(C,P,ue,Ee){if(C=+C,P=P>>>0,ue=ue>>>0,!Ee){const tt=Math.pow(2,8*ue)-1;Se(this,C,P,ue,tt,0)}let ke=1,Le=0;for(this[P]=C&255;++Le<ue&&(ke*=256);)this[P+Le]=C/ke&255;return P+ue},h.prototype.writeUintBE=h.prototype.writeUIntBE=function(C,P,ue,Ee){if(C=+C,P=P>>>0,ue=ue>>>0,!Ee){const tt=Math.pow(2,8*ue)-1;Se(this,C,P,ue,tt,0)}let ke=ue-1,Le=1;for(this[P+ke]=C&255;--ke>=0&&(Le*=256);)this[P+ke]=C/Le&255;return P+ue},h.prototype.writeUint8=h.prototype.writeUInt8=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,1,255,0),this[P]=C&255,P+1},h.prototype.writeUint16LE=h.prototype.writeUInt16LE=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,2,65535,0),this[P]=C&255,this[P+1]=C>>>8,P+2},h.prototype.writeUint16BE=h.prototype.writeUInt16BE=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,2,65535,0),this[P]=C>>>8,this[P+1]=C&255,P+2},h.prototype.writeUint32LE=h.prototype.writeUInt32LE=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,4,4294967295,0),this[P+3]=C>>>24,this[P+2]=C>>>16,this[P+1]=C>>>8,this[P]=C&255,P+4},h.prototype.writeUint32BE=h.prototype.writeUInt32BE=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,4,4294967295,0),this[P]=C>>>24,this[P+1]=C>>>16,this[P+2]=C>>>8,this[P+3]=C&255,P+4};function Ae(ie,C,P,ue,Ee){yn(C,ue,Ee,ie,P,7);let ke=Number(C&BigInt(4294967295));ie[P++]=ke,ke=ke>>8,ie[P++]=ke,ke=ke>>8,ie[P++]=ke,ke=ke>>8,ie[P++]=ke;let Le=Number(C>>BigInt(32)&BigInt(4294967295));return ie[P++]=Le,Le=Le>>8,ie[P++]=Le,Le=Le>>8,ie[P++]=Le,Le=Le>>8,ie[P++]=Le,P}function Be(ie,C,P,ue,Ee){yn(C,ue,Ee,ie,P,7);let ke=Number(C&BigInt(4294967295));ie[P+7]=ke,ke=ke>>8,ie[P+6]=ke,ke=ke>>8,ie[P+5]=ke,ke=ke>>8,ie[P+4]=ke;let Le=Number(C>>BigInt(32)&BigInt(4294967295));return ie[P+3]=Le,Le=Le>>8,ie[P+2]=Le,Le=Le>>8,ie[P+1]=Le,Le=Le>>8,ie[P]=Le,P+8}h.prototype.writeBigUInt64LE=ir(function(C,P=0){return Ae(this,C,P,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeBigUInt64BE=ir(function(C,P=0){return Be(this,C,P,BigInt(0),BigInt("0xffffffffffffffff"))}),h.prototype.writeIntLE=function(C,P,ue,Ee){if(C=+C,P=P>>>0,!Ee){const st=Math.pow(2,8*ue-1);Se(this,C,P,ue,st-1,-st)}let ke=0,Le=1,tt=0;for(this[P]=C&255;++ke<ue&&(Le*=256);)C<0&&tt===0&&this[P+ke-1]!==0&&(tt=1),this[P+ke]=(C/Le>>0)-tt&255;return P+ue},h.prototype.writeIntBE=function(C,P,ue,Ee){if(C=+C,P=P>>>0,!Ee){const st=Math.pow(2,8*ue-1);Se(this,C,P,ue,st-1,-st)}let ke=ue-1,Le=1,tt=0;for(this[P+ke]=C&255;--ke>=0&&(Le*=256);)C<0&&tt===0&&this[P+ke+1]!==0&&(tt=1),this[P+ke]=(C/Le>>0)-tt&255;return P+ue},h.prototype.writeInt8=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,1,127,-128),C<0&&(C=255+C+1),this[P]=C&255,P+1},h.prototype.writeInt16LE=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,2,32767,-32768),this[P]=C&255,this[P+1]=C>>>8,P+2},h.prototype.writeInt16BE=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,2,32767,-32768),this[P]=C>>>8,this[P+1]=C&255,P+2},h.prototype.writeInt32LE=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,4,2147483647,-2147483648),this[P]=C&255,this[P+1]=C>>>8,this[P+2]=C>>>16,this[P+3]=C>>>24,P+4},h.prototype.writeInt32BE=function(C,P,ue){return C=+C,P=P>>>0,ue||Se(this,C,P,4,2147483647,-2147483648),C<0&&(C=4294967295+C+1),this[P]=C>>>24,this[P+1]=C>>>16,this[P+2]=C>>>8,this[P+3]=C&255,P+4},h.prototype.writeBigInt64LE=ir(function(C,P=0){return Ae(this,C,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),h.prototype.writeBigInt64BE=ir(function(C,P=0){return Be(this,C,P,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ue(ie,C,P,ue,Ee,ke){if(P+ue>ie.length)throw new RangeError("Index out of range");if(P<0)throw new RangeError("Index out of range")}function qe(ie,C,P,ue,Ee){return C=+C,P=P>>>0,Ee||Ue(ie,C,P,4),s.write(ie,C,P,ue,23,4),P+4}h.prototype.writeFloatLE=function(C,P,ue){return qe(this,C,P,!0,ue)},h.prototype.writeFloatBE=function(C,P,ue){return qe(this,C,P,!1,ue)};function Xe(ie,C,P,ue,Ee){return C=+C,P=P>>>0,Ee||Ue(ie,C,P,8),s.write(ie,C,P,ue,52,8),P+8}h.prototype.writeDoubleLE=function(C,P,ue){return Xe(this,C,P,!0,ue)},h.prototype.writeDoubleBE=function(C,P,ue){return Xe(this,C,P,!1,ue)},h.prototype.copy=function(C,P,ue,Ee){if(!h.isBuffer(C))throw new TypeError("argument should be a Buffer");if(ue||(ue=0),!Ee&&Ee!==0&&(Ee=this.length),P>=C.length&&(P=C.length),P||(P=0),Ee>0&&Ee<ue&&(Ee=ue),Ee===ue||C.length===0||this.length===0)return 0;if(P<0)throw new RangeError("targetStart out of bounds");if(ue<0||ue>=this.length)throw new RangeError("Index out of range");if(Ee<0)throw new RangeError("sourceEnd out of bounds");Ee>this.length&&(Ee=this.length),C.length-P<Ee-ue&&(Ee=C.length-P+ue);const ke=Ee-ue;return this===C&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(P,ue,Ee):Uint8Array.prototype.set.call(C,this.subarray(ue,Ee),P),ke},h.prototype.fill=function(C,P,ue,Ee){if(typeof C=="string"){if(typeof P=="string"?(Ee=P,P=0,ue=this.length):typeof ue=="string"&&(Ee=ue,ue=this.length),Ee!==void 0&&typeof Ee!="string")throw new TypeError("encoding must be a string");if(typeof Ee=="string"&&!h.isEncoding(Ee))throw new TypeError("Unknown encoding: "+Ee);if(C.length===1){const Le=C.charCodeAt(0);(Ee==="utf8"&&Le<128||Ee==="latin1")&&(C=Le)}}else typeof C=="number"?C=C&255:typeof C=="boolean"&&(C=Number(C));if(P<0||this.length<P||this.length<ue)throw new RangeError("Out of range index");if(ue<=P)return this;P=P>>>0,ue=ue===void 0?this.length:ue>>>0,C||(C=0);let ke;if(typeof C=="number")for(ke=P;ke<ue;++ke)this[ke]=C;else{const Le=h.isBuffer(C)?C:h.from(C,Ee),tt=Le.length;if(tt===0)throw new TypeError('The value "'+C+'" is invalid for argument "value"');for(ke=0;ke<ue-P;++ke)this[ke+P]=Le[ke%tt]}return this};const Ke={};function Ze(ie,C,P){Ke[ie]=class extends P{constructor(){super(),Object.defineProperty(this,"message",{value:C.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${ie}]`,this.stack,delete this.name}get code(){return ie}set code(Ee){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Ee,writable:!0})}toString(){return`${this.name} [${ie}]: ${this.message}`}}}Ze("ERR_BUFFER_OUT_OF_BOUNDS",function(ie){return ie?`${ie} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ze("ERR_INVALID_ARG_TYPE",function(ie,C){return`The "${ie}" argument must be of type number. Received type ${typeof C}`},TypeError),Ze("ERR_OUT_OF_RANGE",function(ie,C,P){let ue=`The value of "${ie}" is out of range.`,Ee=P;return Number.isInteger(P)&&Math.abs(P)>2**32?Ee=it(String(P)):typeof P=="bigint"&&(Ee=String(P),(P>BigInt(2)**BigInt(32)||P<-(BigInt(2)**BigInt(32)))&&(Ee=it(Ee)),Ee+="n"),ue+=` It must be ${C}. Received ${Ee}`,ue},RangeError);function it(ie){let C="",P=ie.length;const ue=ie[0]==="-"?1:0;for(;P>=ue+4;P-=3)C=`_${ie.slice(P-3,P)}${C}`;return`${ie.slice(0,P)}${C}`}function wn(ie,C,P){Mt(C,"offset"),(ie[C]===void 0||ie[C+P]===void 0)&&Ge(C,ie.length-(P+1))}function yn(ie,C,P,ue,Ee,ke){if(ie>P||ie<C){const Le=typeof C=="bigint"?"n":"";let tt;throw C===0||C===BigInt(0)?tt=`>= 0${Le} and < 2${Le} ** ${(ke+1)*8}${Le}`:tt=`>= -(2${Le} ** ${(ke+1)*8-1}${Le}) and < 2 ** ${(ke+1)*8-1}${Le}`,new Ke.ERR_OUT_OF_RANGE("value",tt,ie)}wn(ue,Ee,ke)}function Mt(ie,C){if(typeof ie!="number")throw new Ke.ERR_INVALID_ARG_TYPE(C,"number",ie)}function Ge(ie,C,P){throw Math.floor(ie)!==ie?(Mt(ie,P),new Ke.ERR_OUT_OF_RANGE("offset","an integer",ie)):C<0?new Ke.ERR_BUFFER_OUT_OF_BOUNDS:new Ke.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${C}`,ie)}const ln=/[^+/0-9A-Za-z-_]/g;function kt(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(ln,""),ie.length<2)return"";for(;ie.length%4!==0;)ie=ie+"=";return ie}function Ft(ie,C){C=C||1/0;let P;const ue=ie.length;let Ee=null;const ke=[];for(let Le=0;Le<ue;++Le){if(P=ie.charCodeAt(Le),P>55295&&P<57344){if(!Ee){if(P>56319){(C-=3)>-1&&ke.push(239,191,189);continue}else if(Le+1===ue){(C-=3)>-1&&ke.push(239,191,189);continue}Ee=P;continue}if(P<56320){(C-=3)>-1&&ke.push(239,191,189),Ee=P;continue}P=(Ee-55296<<10|P-56320)+65536}else Ee&&(C-=3)>-1&&ke.push(239,191,189);if(Ee=null,P<128){if((C-=1)<0)break;ke.push(P)}else if(P<2048){if((C-=2)<0)break;ke.push(P>>6|192,P&63|128)}else if(P<65536){if((C-=3)<0)break;ke.push(P>>12|224,P>>6&63|128,P&63|128)}else if(P<1114112){if((C-=4)<0)break;ke.push(P>>18|240,P>>12&63|128,P>>6&63|128,P&63|128)}else throw new Error("Invalid code point")}return ke}function lr(ie){const C=[];for(let P=0;P<ie.length;++P)C.push(ie.charCodeAt(P)&255);return C}function Fn(ie,C){let P,ue,Ee;const ke=[];for(let Le=0;Le<ie.length&&!((C-=2)<0);++Le)P=ie.charCodeAt(Le),ue=P>>8,Ee=P%256,ke.push(Ee),ke.push(ue);return ke}function Hn(ie){return e.toByteArray(kt(ie))}function Qn(ie,C,P,ue){let Ee;for(Ee=0;Ee<ue&&!(Ee+P>=C.length||Ee>=ie.length);++Ee)C[Ee+P]=ie[Ee];return Ee}function Nn(ie,C){return ie instanceof C||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===C.name}function Gn(ie){return ie!==ie}const Vr=(function(){const ie="0123456789abcdef",C=new Array(256);for(let P=0;P<16;++P){const ue=P*16;for(let Ee=0;Ee<16;++Ee)C[ue+Ee]=ie[P]+ie[Ee]}return C})();function ir(ie){return typeof BigInt>"u"?Vn:ie}function Vn(){throw new Error("BigInt not supported")}})(buffer)),buffer}var bufferExports=requireBuffer(),dist$1={},hasRequiredDist$1;function requireDist$1(){if(hasRequiredDist$1)return dist$1;hasRequiredDist$1=1,Object.defineProperty(dist$1,"__esModule",{value:!0}),dist$1.bech32m=dist$1.bech32=void 0;const n="qpzry9x8gf2tvdw0s3jn54khce6mua7l",e={};for(let g=0;g<n.length;g++){const _=n.charAt(g);e[_]=g}function s(g){const _=g>>25;return(g&33554431)<<5^-(_>>0&1)&996825010^-(_>>1&1)&642813549^-(_>>2&1)&513874426^-(_>>3&1)&1027748829^-(_>>4&1)&705979059}function o(g){let _=1;for(let E=0;E<g.length;++E){const T=g.charCodeAt(E);if(T<33||T>126)return"Invalid prefix ("+g+")";_=s(_)^T>>5}_=s(_);for(let E=0;E<g.length;++E){const T=g.charCodeAt(E);_=s(_)^T&31}return _}function a(g,_,E,T){let w=0,A=0;const R=(1<<E)-1,V=[];for(let te=0;te<g.length;++te)for(w=w<<_|g[te],A+=_;A>=E;)A-=E,V.push(w>>A&R);if(T)A>0&&V.push(w<<E-A&R);else{if(A>=_)return"Excess padding";if(w<<E-A&R)return"Non-zero padding"}return V}function c(g){return a(g,8,5,!0)}function f(g){const _=a(g,5,8,!1);if(Array.isArray(_))return _}function h(g){const _=a(g,5,8,!1);if(Array.isArray(_))return _;throw new Error(_)}function m(g){let _;g==="bech32"?_=1:_=734539939;function E(R,V,te){if(te=te||90,R.length+7+V.length>te)throw new TypeError("Exceeds length limit");R=R.toLowerCase();let se=o(R);if(typeof se=="string")throw new Error(se);let re=R+"1";for(let ye=0;ye<V.length;++ye){const D=V[ye];if(D>>5!==0)throw new Error("Non 5-bit word");se=s(se)^D,re+=n.charAt(D)}for(let ye=0;ye<6;++ye)se=s(se);se^=_;for(let ye=0;ye<6;++ye){const D=se>>(5-ye)*5&31;re+=n.charAt(D)}return re}function T(R,V){if(V=V||90,R.length<8)return R+" too short";if(R.length>V)return"Exceeds length limit";const te=R.toLowerCase(),se=R.toUpperCase();if(R!==te&&R!==se)return"Mixed-case string "+R;R=te;const re=R.lastIndexOf("1");if(re===-1)return"No separator character for "+R;if(re===0)return"Missing prefix for "+R;const ye=R.slice(0,re),D=R.slice(re+1);if(D.length<6)return"Data too short";let ae=o(ye);if(typeof ae=="string")return ae;const z=[];for(let H=0;H<D.length;++H){const X=D.charAt(H),le=e[X];if(le===void 0)return"Unknown character "+X;ae=s(ae)^le,!(H+6>=D.length)&&z.push(le)}return ae!==_?"Invalid checksum for "+R:{prefix:ye,words:z}}function w(R,V){const te=T(R,V);if(typeof te=="object")return te}function A(R,V){const te=T(R,V);if(typeof te=="object")return te;throw new Error(te)}return{decodeUnsafe:w,decode:A,encode:E,toWords:c,fromWordsUnsafe:f,fromWords:h}}return dist$1.bech32=m("bech32"),dist$1.bech32m=m("bech32m"),dist$1}var distExports$1=requireDist$1(),lib$1={},types={},hasRequiredTypes;function requireTypes(){return hasRequiredTypes||(hasRequiredTypes=1,Object.defineProperty(types,"__esModule",{value:!0})),types}var ee={},taskCollection$1={},taskCollection={},utils$1={},hasRequiredUtils$1;function requireUtils$1(){if(hasRequiredUtils$1)return utils$1;hasRequiredUtils$1=1,Object.defineProperty(utils$1,"__esModule",{value:!0}),utils$1._fast_remove_single=void 0;function n(e,s){s!==-1&&(s===0?e.shift():s===e.length-1?e.length=e.length-1:e.splice(s,1))}return utils$1._fast_remove_single=n,utils$1}var bakeCollection={},hasRequiredBakeCollection;function requireBakeCollection(){return hasRequiredBakeCollection||(hasRequiredBakeCollection=1,(function(exports){Object.defineProperty(exports,"__esModule",{value:!0}),exports.bakeCollectionVariadic=exports.bakeCollectionAwait=exports.bakeCollection=exports.BAKED_EMPTY_FUNC=void 0,exports.BAKED_EMPTY_FUNC=(function(){});var FORLOOP_FALLBACK=1500;function generateArgsDefCode(n){var e="";if(n===0)return e;for(var s=0;s<n-1;++s)e+="arg"+String(s)+", ";return e+="arg"+String(n-1),e}function generateBodyPartsCode(n,e){for(var s="",o="",a=0;a<e;++a)s+="var f".concat(a," = collection[").concat(a,`];
`),o+="f".concat(a,"(").concat(n,`)
`);return{funcDefCode:s,funcCallCode:o}}function generateBodyPartsVariadicCode(n){for(var e="",s="",o=0;o<n;++o)e+="var f".concat(o," = collection[").concat(o,`];
`),s+="f".concat(o,`.apply(undefined, arguments)
`);return{funcDefCode:e,funcCallCode:s}}function bakeCollection(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                `).concat(funcCallCode,`
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);collection.length%10===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 10) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                        collection[i+4](`).concat(argsDefCode,`);
                        collection[i+5](`).concat(argsDefCode,`);
                        collection[i+6](`).concat(argsDefCode,`);
                        collection[i+7](`).concat(argsDefCode,`);
                        collection[i+8](`).concat(argsDefCode,`);
                        collection[i+9](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%4===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 4) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                        collection[i+3](`).concat(argsDefCode,`);
                    }
                });
            })`):collection.length%3===0?funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; i += 3) {
                        collection[i](`).concat(argsDefCode,`);
                        collection[i+1](`).concat(argsDefCode,`);
                        collection[i+2](`).concat(argsDefCode,`);
                    }
                });
            })`):funcFactoryCode=`(function(collection) {
                return (function(`.concat(argsDefCode,`) {
                    for (var i = 0; i < collection.length; ++i) {
                        collection[i](`).concat(argsDefCode,`);
                    }
                });
            })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollection=bakeCollection;function bakeCollectionAwait(collection,fixedArgsNum){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var argsDefCode=generateArgsDefCode(fixedArgsNum),_a=generateBodyPartsCode(argsDefCode,collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function(`).concat(argsDefCode,`) {
                return Promise.all([ `).concat(funcCallCode,` ]);
            });
        })`)}else{var argsDefCode=generateArgsDefCode(fixedArgsNum);funcFactoryCode=`(function(collection) {
            return (function(`.concat(argsDefCode,`) {
                var promises = Array(collection.length);
                for (var i = 0; i < collection.length; ++i) {
                    promises[i] = collection[i](`).concat(argsDefCode,`);
                }
                return Promise.all(promises);
            });
        })`)}{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionAwait=bakeCollectionAwait;function bakeCollectionVariadic(collection){if(collection.length===0)return exports.BAKED_EMPTY_FUNC;if(collection.length===1)return collection[0];var funcFactoryCode;if(collection.length<FORLOOP_FALLBACK){var _a=generateBodyPartsVariadicCode(collection.length),funcDefCode=_a.funcDefCode,funcCallCode=_a.funcCallCode;funcFactoryCode=`(function(collection) {
            `.concat(funcDefCode,`
            collection = undefined;
            return (function() {
                `).concat(funcCallCode,`
            });
        })`)}else funcFactoryCode=`(function(collection) {
            return (function() {
                for (var i = 0; i < collection.length; ++i) {
                    collection[i].apply(undefined, arguments);
                }
            });
        })`;{var funcFactory=eval(funcFactoryCode);return funcFactory(collection)}}exports.bakeCollectionVariadic=bakeCollectionVariadic})(bakeCollection)),bakeCollection}var hasRequiredTaskCollection$1;function requireTaskCollection$1(){if(hasRequiredTaskCollection$1)return taskCollection;hasRequiredTaskCollection$1=1;var n=taskCollection&&taskCollection.__spreadArray||function(re,ye,D){if(D||arguments.length===2)for(var ae=0,z=ye.length,H;ae<z;ae++)(H||!(ae in ye))&&(H||(H=Array.prototype.slice.call(ye,0,ae)),H[ae]=ye[ae]);return re.concat(H||Array.prototype.slice.call(ye))};Object.defineProperty(taskCollection,"__esModule",{value:!0}),taskCollection.TaskCollection=void 0;var e=requireUtils$1(),s=requireBakeCollection();function o(re,ye){var D=this.length;if(D>1)if(ye){var ae;(ae=this._tasks).push.apply(ae,arguments),this.length+=arguments.length}else this._tasks.push(re),this.length++;else if(ye){if(D===1){var z=Array(1+arguments.length);z.push(z),z.push.apply(z,arguments),this._tasks=z}else{var z=Array(arguments.length);z.push.apply(z,arguments),this._tasks=z}this.length+=arguments.length}else D===1?this._tasks=[this._tasks,re]:this._tasks=re,this.length++}function a(re,ye){var D=this.length;if(D>1)if(ye){var ae;(ae=this._tasks).push.apply(ae,arguments),this.length+=arguments.length}else this._tasks.push(re),this.length++;else if(ye){if(D===1){var z=Array(1+arguments.length);z.push(z),z.push.apply(z,arguments),this._tasks=z}else{var z=Array(arguments.length);z.push.apply(z,arguments),this._tasks=z}this.length+=arguments.length}else D===1?this._tasks=[this._tasks,re]:this._tasks=re,this.length++;this.firstEmitBuildStrategy?this.call=E:this.rebuild()}function c(re){this.length!==0&&(this.length===1?this._tasks===re&&(this.length=0):((0,e._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(re)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length))}function f(re){if(this.length!==0){if(this.length===1)if(this._tasks===re&&(this.length=0),this.firstEmitBuildStrategy){this.call=s.BAKED_EMPTY_FUNC;return}else{this.rebuild();return}else(0,e._fast_remove_single)(this._tasks,this._tasks.lastIndexOf(re)),this._tasks.length===1?(this._tasks=this._tasks[0],this.length=1):this.length=this._tasks.length;this.firstEmitBuildStrategy?this.call=E:this.rebuild()}}function h(re){for(var ye,D=[],ae=1;ae<arguments.length;ae++)D[ae-1]=arguments[ae];this.length===0?(this._tasks=D,this.length=1):this.length===1?(D.unshift(this._tasks),this._tasks=D,this.length=this._tasks.length):((ye=this._tasks).splice.apply(ye,n([re,0],D,!1)),this.length=this._tasks.length)}function m(re){for(var ye,D=[],ae=1;ae<arguments.length;ae++)D[ae-1]=arguments[ae];this.length===0?(this._tasks=D,this.length=1):this.length===1?(D.unshift(this._tasks),this._tasks=D,this.length=this._tasks.length):((ye=this._tasks).splice.apply(ye,n([re,0],D,!1)),this.length=this._tasks.length),this.firstEmitBuildStrategy?this.call=E:this.rebuild()}function g(){this.length===0?this.call=s.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,s.bakeCollection)(this._tasks,this.argsNum)}function _(){this.length===0?this.call=s.BAKED_EMPTY_FUNC:this.length===1?this.call=this._tasks:this.call=(0,s.bakeCollectionAwait)(this._tasks,this.argsNum)}function E(){this.rebuild(),this.call.apply(void 0,arguments)}var T=(function(){function re(ye,D,ae,z){D===void 0&&(D=!0),ae===void 0&&(ae=null),z===void 0&&(z=!1),this.awaitTasks=z,this.call=s.BAKED_EMPTY_FUNC,this.argsNum=ye,this.firstEmitBuildStrategy=!0,z?this.rebuild=_.bind(this):this.rebuild=g.bind(this),this.setAutoRebuild(D),ae?typeof ae=="function"?(this._tasks=ae,this.length=1):(this._tasks=ae,this.length=ae.length):(this._tasks=null,this.length=0),D&&this.rebuild()}return re})();taskCollection.TaskCollection=T;function w(){this._tasks=null,this.length=0,this.call=s.BAKED_EMPTY_FUNC}function A(){this._tasks=null,this.length=0,this.call=s.BAKED_EMPTY_FUNC}function R(re){this.argsNum<re&&(this.argsNum=re,this.firstEmitBuildStrategy?this.call=E:this.rebuild())}function V(re){re?(this.push=a.bind(this),this.insert=m.bind(this),this.removeLast=f.bind(this)):(this.push=o.bind(this),this.insert=h.bind(this),this.removeLast=c.bind(this))}function te(){return this.length===0?[]:this.length===1?[this._tasks]:this._tasks}function se(re){re.length===0?(this.length=0,this.call=s.BAKED_EMPTY_FUNC):re.length===1?(this.length=1,this.call=re[0],this._tasks=re[0]):(this.length=re.length,this._tasks=re,this.firstEmitBuildStrategy?this.call=E:this.rebuild())}return T.prototype.fastClear=w,T.prototype.clear=A,T.prototype.growArgsNum=R,T.prototype.setAutoRebuild=V,T.prototype.tasksAsArray=te,T.prototype.setTasks=se,taskCollection}var hasRequiredTaskCollection;function requireTaskCollection(){return hasRequiredTaskCollection||(hasRequiredTaskCollection=1,(function(n){var e=taskCollection$1&&taskCollection$1.__createBinding||(Object.create?(function(o,a,c,f){f===void 0&&(f=c);var h=Object.getOwnPropertyDescriptor(a,c);(!h||("get"in h?!a.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,f,h)}):(function(o,a,c,f){f===void 0&&(f=c),o[f]=a[c]})),s=taskCollection$1&&taskCollection$1.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Object.defineProperty(n,"__esModule",{value:!0}),s(requireTaskCollection$1(),n)})(taskCollection$1)),taskCollection$1}var utils={},hasRequiredUtils;function requireUtils(){if(hasRequiredUtils)return utils;hasRequiredUtils=1,Object.defineProperty(utils,"__esModule",{value:!0}),utils.nullObj=void 0;function n(){var e={};return e.__proto__=null,e}return utils.nullObj=n,utils}var hasRequiredEe;function requireEe(){if(hasRequiredEe)return ee;hasRequiredEe=1;var n=ee&&ee.__spreadArray||function(D,ae,z){if(z||arguments.length===2)for(var H=0,X=ae.length,le;H<X;H++)(le||!(H in ae))&&(le||(le=Array.prototype.slice.call(ae,0,H)),le[H]=ae[H]);return D.concat(le||Array.prototype.slice.call(ae))};Object.defineProperty(ee,"__esModule",{value:!0}),ee.EventEmitter=void 0;var e=requireTaskCollection(),s=requireUtils$1(),o=requireUtils();function a(D,ae,z,H,X,le){var Z=this.events[D];if(Z){if(Z.length===0)return!1;if(Z.argsNum<6)Z.call(ae,z,H,X,le);else{for(var ne=new Array(Z.argsNum),W=0,xe=ne.length;W<xe;++W)ne[W]=arguments[W+1];Z.call.apply(void 0,ne)}return!0}return!1}function c(D,ae,z,H,X,le){var Z=this.events[D],ne;if(Z!==void 0){if(Z.length===0)return!1;if(Z.argsNum<6)Z.call(ae,z,H,X,le);else{ne=new Array(Z.argsNum);for(var W=0,xe=ne.length;W<xe;++W)ne[W]=arguments[W+1];Z.call.apply(void 0,ne)}}var de=this.onceEvents[D];if(de){if(typeof de=="function")if(this.onceEvents[D]=void 0,arguments.length<6)de(ae,z,H,X,le);else{if(ne===void 0){ne=new Array(arguments.length-1);for(var W=0,xe=ne.length;W<xe;++W)ne[W]=arguments[W+1]}de.apply(void 0,ne)}else{var oe=de;if(this.onceEvents[D]=void 0,arguments.length<6)for(var W=0;W<oe.length;++W)oe[W](ae,z,H,X,le);else{if(ne===void 0){ne=new Array(arguments.length-1);for(var W=0,xe=ne.length;W<xe;++W)ne[W]=arguments[W+1]}for(var W=0;W<oe.length;++W)oe[W].apply(void 0,ne)}}return!0}return Z!==void 0}var f=(function(){function D(){this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set,this.maxListeners=1/0}return Object.defineProperty(D.prototype,"_eventsCount",{get:function(){return this.eventNames().length},enumerable:!1,configurable:!0}),D})();ee.EventEmitter=f;function h(D,ae){switch(this.emit===a&&(this.emit=c),typeof this.onceEvents[D]){case"undefined":this.onceEvents[D]=ae,typeof D=="symbol"&&this._symbolKeys.add(D);break;case"function":this.onceEvents[D]=[this.onceEvents[D],ae];break;case"object":this.onceEvents[D].push(ae)}return this}function m(D,ae,z){if(z===void 0&&(z=ae.length),typeof ae!="function")throw new TypeError("The listener must be a function");var H=this.events[D];return H?(H.push(ae),H.growArgsNum(z),this.maxListeners!==1/0&&this.maxListeners<=H.length&&console.warn('Maximum event listeners for "'.concat(String(D),'" event!'))):(this.events[D]=new e.TaskCollection(z,!0,ae,!1),typeof D=="symbol"&&this._symbolKeys.add(D)),this}function g(D,ae){var z=this.events[D];z&&z.removeLast(ae);var H=this.onceEvents[D];return H&&(typeof H=="function"?this.onceEvents[D]=void 0:typeof H=="object"&&(H.length===1&&H[0]===ae?this.onceEvents[D]=void 0:(0,s._fast_remove_single)(H,H.lastIndexOf(ae)))),this}function _(D,ae,z,H){z===void 0&&(z=this),H===void 0&&(H=ae.length),this.boundFuncs||(this.boundFuncs=new Map);var X=ae.bind(z);return this.boundFuncs.set(ae,X),this.addListener(D,X,H)}function E(D,ae){var z,H,X=(z=this.boundFuncs)===null||z===void 0?void 0:z.get(ae);return(H=this.boundFuncs)===null||H===void 0||H.delete(ae),this.removeListener(D,X)}function T(D){return this.events[D]&&!!this.events[D].length}function w(D,ae,z){if(z===void 0&&(z=ae.length),typeof ae!="function")throw new TypeError("The listener must be a function");var H=this.events[D];return!H||!(H instanceof e.TaskCollection)?(H=this.events[D]=new e.TaskCollection(z,!0,ae,!1),typeof D=="symbol"&&this._symbolKeys.add(D)):(H.insert(0,ae),H.growArgsNum(z),this.maxListeners!==1/0&&this.maxListeners<=H.length&&console.warn('Maximum event listeners for "'.concat(String(D),'" event!'))),this}function A(D,ae){this.emit===a&&(this.emit=c);var z=this.onceEvents[D];return z?typeof z!="object"?(this.onceEvents[D]=[ae,z],typeof D=="symbol"&&this._symbolKeys.add(D)):(z.unshift(ae),this.maxListeners!==1/0&&this.maxListeners<=z.length&&console.warn('Maximum event listeners for "'.concat(String(D),'" once event!'))):(this.onceEvents[D]=[ae],typeof D=="symbol"&&this._symbolKeys.add(D)),this}function R(D){return D===void 0?(this.events=(0,o.nullObj)(),this.onceEvents=(0,o.nullObj)(),this._symbolKeys=new Set):(this.events[D]=void 0,this.onceEvents[D]=void 0,typeof D=="symbol"&&this._symbolKeys.delete(D)),this}function V(D){return this.maxListeners=D,this}function te(){return this.maxListeners}function se(D){return this.emit===a?this.events[D]?this.events[D].tasksAsArray().slice():[]:this.events[D]&&this.onceEvents[D]?n(n([],this.events[D].tasksAsArray(),!0),typeof this.onceEvents[D]=="function"?[this.onceEvents[D]]:this.onceEvents[D],!0):this.events[D]?this.events[D].tasksAsArray():this.onceEvents[D]?typeof this.onceEvents[D]=="function"?[this.onceEvents[D]]:this.onceEvents[D]:[]}function re(){var D=this;if(this.emit===a){var ae=Object.keys(this.events);return n(n([],ae,!0),Array.from(this._symbolKeys),!0).filter(function(H){return H in D.events&&D.events[H]&&D.events[H].length})}else{var ae=Object.keys(this.events).filter(function(X){return D.events[X]&&D.events[X].length}),z=Object.keys(this.onceEvents).filter(function(X){return D.onceEvents[X]&&D.onceEvents[X].length});return n(n(n([],ae,!0),z,!0),Array.from(this._symbolKeys).filter(function(X){return X in D.events&&D.events[X]&&D.events[X].length||X in D.onceEvents&&D.onceEvents[X]&&D.onceEvents[X].length}),!0)}}function ye(D){return this.emit===a?this.events[D]&&this.events[D].length||0:(this.events[D]&&this.events[D].length||0)+(this.onceEvents[D]&&this.onceEvents[D].length||0)}return f.prototype.emit=a,f.prototype.on=m,f.prototype.once=h,f.prototype.addListener=m,f.prototype.removeListener=g,f.prototype.addListenerBound=_,f.prototype.removeListenerBound=E,f.prototype.hasListeners=T,f.prototype.prependListener=w,f.prototype.prependOnceListener=A,f.prototype.off=g,f.prototype.removeAllListeners=R,f.prototype.setMaxListeners=V,f.prototype.getMaxListeners=te,f.prototype.listeners=se,f.prototype.eventNames=re,f.prototype.listenerCount=ye,ee}var hasRequiredLib$1;function requireLib$1(){return hasRequiredLib$1||(hasRequiredLib$1=1,(function(n){var e=lib$1&&lib$1.__createBinding||(Object.create?(function(o,a,c,f){f===void 0&&(f=c);var h=Object.getOwnPropertyDescriptor(a,c);(!h||("get"in h?!a.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,f,h)}):(function(o,a,c,f){f===void 0&&(f=c),o[f]=a[c]})),s=lib$1&&lib$1.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Object.defineProperty(n,"__esModule",{value:!0}),s(requireTypes(),n),s(requireEe(),n)})(lib$1)),lib$1}var libExports=requireLib$1(),browser={exports:{}},ms,hasRequiredMs;function requireMs(){if(hasRequiredMs)return ms;hasRequiredMs=1;var n=1e3,e=n*60,s=e*60,o=s*24,a=o*7,c=o*365.25;ms=function(_,E){E=E||{};var T=typeof _;if(T==="string"&&_.length>0)return f(_);if(T==="number"&&isFinite(_))return E.long?m(_):h(_);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(_))};function f(_){if(_=String(_),!(_.length>100)){var E=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(_);if(E){var T=parseFloat(E[1]),w=(E[2]||"ms").toLowerCase();switch(w){case"years":case"year":case"yrs":case"yr":case"y":return T*c;case"weeks":case"week":case"w":return T*a;case"days":case"day":case"d":return T*o;case"hours":case"hour":case"hrs":case"hr":case"h":return T*s;case"minutes":case"minute":case"mins":case"min":case"m":return T*e;case"seconds":case"second":case"secs":case"sec":case"s":return T*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return T;default:return}}}}function h(_){var E=Math.abs(_);return E>=o?Math.round(_/o)+"d":E>=s?Math.round(_/s)+"h":E>=e?Math.round(_/e)+"m":E>=n?Math.round(_/n)+"s":_+"ms"}function m(_){var E=Math.abs(_);return E>=o?g(_,E,o,"day"):E>=s?g(_,E,s,"hour"):E>=e?g(_,E,e,"minute"):E>=n?g(_,E,n,"second"):_+" ms"}function g(_,E,T,w){var A=E>=T*1.5;return Math.round(_/T)+" "+w+(A?"s":"")}return ms}var common,hasRequiredCommon;function requireCommon(){if(hasRequiredCommon)return common;hasRequiredCommon=1;function n(e){o.debug=o,o.default=o,o.coerce=g,o.disable=h,o.enable=c,o.enabled=m,o.humanize=requireMs(),o.destroy=_,Object.keys(e).forEach(E=>{o[E]=e[E]}),o.names=[],o.skips=[],o.formatters={};function s(E){let T=0;for(let w=0;w<E.length;w++)T=(T<<5)-T+E.charCodeAt(w),T|=0;return o.colors[Math.abs(T)%o.colors.length]}o.selectColor=s;function o(E){let T,w=null,A,R;function V(...te){if(!V.enabled)return;const se=V,re=Number(new Date),ye=re-(T||re);se.diff=ye,se.prev=T,se.curr=re,T=re,te[0]=o.coerce(te[0]),typeof te[0]!="string"&&te.unshift("%O");let D=0;te[0]=te[0].replace(/%([a-zA-Z%])/g,(z,H)=>{if(z==="%%")return"%";D++;const X=o.formatters[H];if(typeof X=="function"){const le=te[D];z=X.call(se,le),te.splice(D,1),D--}return z}),o.formatArgs.call(se,te),(se.log||o.log).apply(se,te)}return V.namespace=E,V.useColors=o.useColors(),V.color=o.selectColor(E),V.extend=a,V.destroy=o.destroy,Object.defineProperty(V,"enabled",{enumerable:!0,configurable:!1,get:()=>w!==null?w:(A!==o.namespaces&&(A=o.namespaces,R=o.enabled(E)),R),set:te=>{w=te}}),typeof o.init=="function"&&o.init(V),V}function a(E,T){const w=o(this.namespace+(typeof T>"u"?":":T)+E);return w.log=this.log,w}function c(E){o.save(E),o.namespaces=E,o.names=[],o.skips=[];const T=(typeof E=="string"?E:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(const w of T)w[0]==="-"?o.skips.push(w.slice(1)):o.names.push(w)}function f(E,T){let w=0,A=0,R=-1,V=0;for(;w<E.length;)if(A<T.length&&(T[A]===E[w]||T[A]==="*"))T[A]==="*"?(R=A,V=w,A++):(w++,A++);else if(R!==-1)A=R+1,V++,w=V;else return!1;for(;A<T.length&&T[A]==="*";)A++;return A===T.length}function h(){const E=[...o.names,...o.skips.map(T=>"-"+T)].join(",");return o.enable(""),E}function m(E){for(const T of o.skips)if(f(E,T))return!1;for(const T of o.names)if(f(E,T))return!0;return!1}function g(E){return E instanceof Error?E.stack||E.message:E}function _(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o.enable(o.load()),o}return common=n,common}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,(function(n,e){var s={};e.formatArgs=a,e.save=c,e.load=f,e.useColors=o,e.storage=h(),e.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function o(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let g;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(g=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(g[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function a(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const _="color: "+this.color;g.splice(1,0,_,"color: inherit");let E=0,T=0;g[0].replace(/%[a-zA-Z%]/g,w=>{w!=="%%"&&(E++,w==="%c"&&(T=E))}),g.splice(T,0,_)}e.log=console.debug||console.log||(()=>{});function c(g){try{g?e.storage.setItem("debug",g):e.storage.removeItem("debug")}catch{}}function f(){let g;try{g=e.storage.getItem("debug")||e.storage.getItem("DEBUG")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g=s.DEBUG),g}function h(){try{return localStorage}catch{}}n.exports=requireCommon()(e);const{formatters:m}=n.exports;m.j=function(g){try{return JSON.stringify(g)}catch(_){return"[UnexpectedJSONParseError]: "+_.message}}})(browser,browser.exports)),browser.exports}var browserExports=requireBrowser();const createDebug5=getDefaultExportFromCjs(browserExports);function number$2(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function bytes$2(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function hash$1(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$2(n.outputLen),number$2(n.blockLen)}function exists$1(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function output$1(n,e){bytes$2(n);const s=e.outputLen;if(n.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const crypto$3=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a$2=n=>n instanceof Uint8Array,createView$2=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),rotr$2=(n,e)=>n<<32-e|n>>>e,isLE$2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$2)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes$3(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function toBytes$2(n){if(typeof n=="string"&&(n=utf8ToBytes$3(n)),!u8a$2(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function concatBytes$3(...n){const e=new Uint8Array(n.reduce((o,a)=>o+a.length,0));let s=0;return n.forEach(o=>{if(!u8a$2(o))throw new Error("Uint8Array expected");e.set(o,s),s+=o.length}),e}let Hash$2=class{clone(){return this._cloneInto()}};function wrapConstructor$1(n){const e=o=>n().update(toBytes$2(o)).digest(),s=n();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>n(),e}function randomBytes$2(n=32){if(crypto$3&&typeof crypto$3.getRandomValues=="function")return crypto$3.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64$2(n,e,s,o){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,s,o);const a=BigInt(32),c=BigInt(4294967295),f=Number(s>>a&c),h=Number(s&c),m=o?4:0,g=o?0:4;n.setUint32(e+m,f,o),n.setUint32(e+g,h,o)}let SHA2$1=class extends Hash$2{constructor(e,s,o,a){super(),this.blockLen=e,this.outputLen=s,this.padOffset=o,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$2(this.buffer)}update(e){exists$1(this);const{view:s,buffer:o,blockLen:a}=this;e=toBytes$2(e);const c=e.length;for(let f=0;f<c;){const h=Math.min(a-this.pos,c-f);if(h===a){const m=createView$2(e);for(;a<=c-f;f+=a)this.process(m,f);continue}o.set(e.subarray(f,f+h),this.pos),this.pos+=h,f+=h,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){exists$1(this),output$1(e,this),this.finished=!0;const{buffer:s,view:o,blockLen:a,isLE:c}=this;let{pos:f}=this;s[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>a-f&&(this.process(o,0),f=0);for(let E=f;E<a;E++)s[E]=0;setBigUint64$2(o,a-8,BigInt(this.length*8),c),this.process(o,0);const h=createView$2(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=m/4,_=this.get();if(g>_.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<g;E++)h.setUint32(4*E,_[E],c)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const o=e.slice(0,s);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:s,buffer:o,length:a,finished:c,destroyed:f,pos:h}=this;return e.length=a,e.pos=h,e.finished=c,e.destroyed=f,a%s&&e.buffer.set(o),e}};const Chi$2=(n,e,s)=>n&e^~n&s,Maj$2=(n,e,s)=>n&e^n&s^e&s,SHA256_K$2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV$1=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$2=new Uint32Array(64);let SHA256$2=class extends SHA2$1{constructor(){super(64,32,8,!1),this.A=IV$1[0]|0,this.B=IV$1[1]|0,this.C=IV$1[2]|0,this.D=IV$1[3]|0,this.E=IV$1[4]|0,this.F=IV$1[5]|0,this.G=IV$1[6]|0,this.H=IV$1[7]|0}get(){const{A:e,B:s,C:o,D:a,E:c,F:f,G:h,H:m}=this;return[e,s,o,a,c,f,h,m]}set(e,s,o,a,c,f,h,m){this.A=e|0,this.B=s|0,this.C=o|0,this.D=a|0,this.E=c|0,this.F=f|0,this.G=h|0,this.H=m|0}process(e,s){for(let E=0;E<16;E++,s+=4)SHA256_W$2[E]=e.getUint32(s,!1);for(let E=16;E<64;E++){const T=SHA256_W$2[E-15],w=SHA256_W$2[E-2],A=rotr$2(T,7)^rotr$2(T,18)^T>>>3,R=rotr$2(w,17)^rotr$2(w,19)^w>>>10;SHA256_W$2[E]=R+SHA256_W$2[E-7]+A+SHA256_W$2[E-16]|0}let{A:o,B:a,C:c,D:f,E:h,F:m,G:g,H:_}=this;for(let E=0;E<64;E++){const T=rotr$2(h,6)^rotr$2(h,11)^rotr$2(h,25),w=_+T+Chi$2(h,m,g)+SHA256_K$2[E]+SHA256_W$2[E]|0,R=(rotr$2(o,2)^rotr$2(o,13)^rotr$2(o,22))+Maj$2(o,a,c)|0;_=g,g=m,m=h,h=f+w|0,f=c,c=a,a=o,o=w+R|0}o=o+this.A|0,a=a+this.B|0,c=c+this.C|0,f=f+this.D|0,h=h+this.E|0,m=m+this.F|0,g=g+this.G|0,_=_+this.H|0,this.set(o,a,c,f,h,m,g,_)}roundClean(){SHA256_W$2.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};const sha256$3=wrapConstructor$1(()=>new SHA256$2);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$9=BigInt(0),_1n$9=BigInt(1),_2n$5=BigInt(2),u8a$1=n=>n instanceof Uint8Array,hexes$2=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$2(n){if(!u8a$1(n))throw new Error("Uint8Array expected");let e="";for(let s=0;s<n.length;s++)e+=hexes$2[n[s]];return e}function numberToHexUnpadded$1(n){const e=n.toString(16);return e.length&1?`0${e}`:e}function hexToNumber$1(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return BigInt(n===""?"0":`0x${n}`)}function hexToBytes$2(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(e/2);for(let o=0;o<s.length;o++){const a=o*2,c=n.slice(a,a+2),f=Number.parseInt(c,16);if(Number.isNaN(f)||f<0)throw new Error("Invalid byte sequence");s[o]=f}return s}function bytesToNumberBE$1(n){return hexToNumber$1(bytesToHex$2(n))}function bytesToNumberLE$1(n){if(!u8a$1(n))throw new Error("Uint8Array expected");return hexToNumber$1(bytesToHex$2(Uint8Array.from(n).reverse()))}function numberToBytesBE$1(n,e){return hexToBytes$2(n.toString(16).padStart(e*2,"0"))}function numberToBytesLE$1(n,e){return numberToBytesBE$1(n,e).reverse()}function numberToVarBytesBE(n){return hexToBytes$2(numberToHexUnpadded$1(n))}function ensureBytes$1(n,e,s){let o;if(typeof e=="string")try{o=hexToBytes$2(e)}catch(c){throw new Error(`${n} must be valid hex string, got "${e}". Cause: ${c}`)}else if(u8a$1(e))o=Uint8Array.from(e);else throw new Error(`${n} must be hex string or Uint8Array`);const a=o.length;if(typeof s=="number"&&a!==s)throw new Error(`${n} expected ${s} bytes, got ${a}`);return o}function concatBytes$2(...n){const e=new Uint8Array(n.reduce((o,a)=>o+a.length,0));let s=0;return n.forEach(o=>{if(!u8a$1(o))throw new Error("Uint8Array expected");e.set(o,s),s+=o.length}),e}function equalBytes$1(n,e){if(n.length!==e.length)return!1;for(let s=0;s<n.length;s++)if(n[s]!==e[s])return!1;return!0}function utf8ToBytes$2(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function bitLen$1(n){let e;for(e=0;n>_0n$9;n>>=_1n$9,e+=1);return e}function bitGet(n,e){return n>>BigInt(e)&_1n$9}const bitSet=(n,e,s)=>n|(s?_1n$9:_0n$9)<<BigInt(e),bitMask$1=n=>(_2n$5<<BigInt(n-1))-_1n$9,u8n=n=>new Uint8Array(n),u8fr=n=>Uint8Array.from(n);function createHmacDrbg$1(n,e,s){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof s!="function")throw new Error("hmacFn must be a function");let o=u8n(n),a=u8n(n),c=0;const f=()=>{o.fill(1),a.fill(0),c=0},h=(...E)=>s(a,o,...E),m=(E=u8n())=>{a=h(u8fr([0]),E),o=h(),E.length!==0&&(a=h(u8fr([1]),E),o=h())},g=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let E=0;const T=[];for(;E<e;){o=h();const w=o.slice();T.push(w),E+=o.length}return concatBytes$2(...T)};return(E,T)=>{f(),m(E);let w;for(;!(w=T(g()));)m();return f(),w}}const validatorFns={bigint:n=>typeof n=="bigint",function:n=>typeof n=="function",boolean:n=>typeof n=="boolean",string:n=>typeof n=="string",stringOrUint8Array:n=>typeof n=="string"||n instanceof Uint8Array,isSafeInteger:n=>Number.isSafeInteger(n),array:n=>Array.isArray(n),field:(n,e)=>e.Fp.isValid(n),hash:n=>typeof n=="function"&&Number.isSafeInteger(n.outputLen)};function validateObject(n,e,s={}){const o=(a,c,f)=>{const h=validatorFns[c];if(typeof h!="function")throw new Error(`Invalid validator "${c}", expected function`);const m=n[a];if(!(f&&m===void 0)&&!h(m,n))throw new Error(`Invalid param ${String(a)}=${m} (${typeof m}), expected ${c}`)};for(const[a,c]of Object.entries(e))o(a,c,!1);for(const[a,c]of Object.entries(s))o(a,c,!0);return n}const ut=Object.freeze(Object.defineProperty({__proto__:null,bitGet,bitLen:bitLen$1,bitMask:bitMask$1,bitSet,bytesToHex:bytesToHex$2,bytesToNumberBE:bytesToNumberBE$1,bytesToNumberLE:bytesToNumberLE$1,concatBytes:concatBytes$2,createHmacDrbg:createHmacDrbg$1,ensureBytes:ensureBytes$1,equalBytes:equalBytes$1,hexToBytes:hexToBytes$2,hexToNumber:hexToNumber$1,numberToBytesBE:numberToBytesBE$1,numberToBytesLE:numberToBytesLE$1,numberToHexUnpadded:numberToHexUnpadded$1,numberToVarBytesBE,utf8ToBytes:utf8ToBytes$2,validateObject},Symbol.toStringTag,{value:"Module"}));/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$8=BigInt(0),_1n$8=BigInt(1),_2n$4=BigInt(2),_3n$3=BigInt(3),_4n$2=BigInt(4),_5n$1=BigInt(5),_8n$1=BigInt(8);BigInt(9);BigInt(16);function mod$1(n,e){const s=n%e;return s>=_0n$8?s:e+s}function pow(n,e,s){if(s<=_0n$8||e<_0n$8)throw new Error("Expected power/modulo > 0");if(s===_1n$8)return _0n$8;let o=_1n$8;for(;e>_0n$8;)e&_1n$8&&(o=o*n%s),n=n*n%s,e>>=_1n$8;return o}function pow2$1(n,e,s){let o=n;for(;e-- >_0n$8;)o*=o,o%=s;return o}function invert$1(n,e){if(n===_0n$8||e<=_0n$8)throw new Error(`invert: expected positive integers, got n=${n} mod=${e}`);let s=mod$1(n,e),o=e,a=_0n$8,c=_1n$8;for(;s!==_0n$8;){const h=o/s,m=o%s,g=a-c*h;o=s,s=m,a=c,c=g}if(o!==_1n$8)throw new Error("invert: does not exist");return mod$1(a,e)}function tonelliShanks$1(n){const e=(n-_1n$8)/_2n$4;let s,o,a;for(s=n-_1n$8,o=0;s%_2n$4===_0n$8;s/=_2n$4,o++);for(a=_2n$4;a<n&&pow(a,e,n)!==n-_1n$8;a++);if(o===1){const f=(n+_1n$8)/_4n$2;return function(m,g){const _=m.pow(g,f);if(!m.eql(m.sqr(_),g))throw new Error("Cannot find square root");return _}}const c=(s+_1n$8)/_2n$4;return function(h,m){if(h.pow(m,e)===h.neg(h.ONE))throw new Error("Cannot find square root");let g=o,_=h.pow(h.mul(h.ONE,a),s),E=h.pow(m,c),T=h.pow(m,s);for(;!h.eql(T,h.ONE);){if(h.eql(T,h.ZERO))return h.ZERO;let w=1;for(let R=h.sqr(T);w<g&&!h.eql(R,h.ONE);w++)R=h.sqr(R);const A=h.pow(_,_1n$8<<BigInt(g-w-1));_=h.sqr(A),E=h.mul(E,A),T=h.mul(T,_),g=w}return E}}function FpSqrt$1(n){if(n%_4n$2===_3n$3){const e=(n+_1n$8)/_4n$2;return function(o,a){const c=o.pow(a,e);if(!o.eql(o.sqr(c),a))throw new Error("Cannot find square root");return c}}if(n%_8n$1===_5n$1){const e=(n-_5n$1)/_8n$1;return function(o,a){const c=o.mul(a,_2n$4),f=o.pow(c,e),h=o.mul(a,f),m=o.mul(o.mul(h,_2n$4),f),g=o.mul(h,o.sub(m,o.ONE));if(!o.eql(o.sqr(g),a))throw new Error("Cannot find square root");return g}}return tonelliShanks$1(n)}const FIELD_FIELDS$1=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField$1(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},s=FIELD_FIELDS$1.reduce((o,a)=>(o[a]="function",o),e);return validateObject(n,s)}function FpPow$1(n,e,s){if(s<_0n$8)throw new Error("Expected power > 0");if(s===_0n$8)return n.ONE;if(s===_1n$8)return e;let o=n.ONE,a=e;for(;s>_0n$8;)s&_1n$8&&(o=n.mul(o,a)),a=n.sqr(a),s>>=_1n$8;return o}function FpInvertBatch$1(n,e){const s=new Array(e.length),o=e.reduce((c,f,h)=>n.is0(f)?c:(s[h]=c,n.mul(c,f)),n.ONE),a=n.inv(o);return e.reduceRight((c,f,h)=>n.is0(f)?c:(s[h]=n.mul(c,s[h]),n.mul(c,f)),a),s}function nLength$1(n,e){const s=e!==void 0?e:n.toString(2).length,o=Math.ceil(s/8);return{nBitLength:s,nByteLength:o}}function Field$1(n,e,s=!1,o={}){if(n<=_0n$8)throw new Error(`Expected Field ORDER > 0, got ${n}`);const{nBitLength:a,nByteLength:c}=nLength$1(n,e);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const f=FpSqrt$1(n),h=Object.freeze({ORDER:n,BITS:a,BYTES:c,MASK:bitMask$1(a),ZERO:_0n$8,ONE:_1n$8,create:m=>mod$1(m,n),isValid:m=>{if(typeof m!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof m}`);return _0n$8<=m&&m<n},is0:m=>m===_0n$8,isOdd:m=>(m&_1n$8)===_1n$8,neg:m=>mod$1(-m,n),eql:(m,g)=>m===g,sqr:m=>mod$1(m*m,n),add:(m,g)=>mod$1(m+g,n),sub:(m,g)=>mod$1(m-g,n),mul:(m,g)=>mod$1(m*g,n),pow:(m,g)=>FpPow$1(h,m,g),div:(m,g)=>mod$1(m*invert$1(g,n),n),sqrN:m=>m*m,addN:(m,g)=>m+g,subN:(m,g)=>m-g,mulN:(m,g)=>m*g,inv:m=>invert$1(m,n),sqrt:o.sqrt||(m=>f(h,m)),invertBatch:m=>FpInvertBatch$1(h,m),cmov:(m,g,_)=>_?g:m,toBytes:m=>s?numberToBytesLE$1(m,c):numberToBytesBE$1(m,c),fromBytes:m=>{if(m.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${m.length}`);return s?bytesToNumberLE$1(m):bytesToNumberBE$1(m)}});return Object.freeze(h)}function getFieldBytesLength$1(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function getMinHashLength$1(n){const e=getFieldBytesLength$1(n);return e+Math.ceil(e/2)}function mapHashToField$1(n,e,s=!1){const o=n.length,a=getFieldBytesLength$1(e),c=getMinHashLength$1(e);if(o<16||o<c||o>1024)throw new Error(`expected ${c}-1024 bytes of input, got ${o}`);const f=s?bytesToNumberBE$1(n):bytesToNumberLE$1(n),h=mod$1(f,e-_1n$8)+_1n$8;return s?numberToBytesLE$1(h,a):numberToBytesBE$1(h,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$7=BigInt(0),_1n$7=BigInt(1);function wNAF$1(n,e){const s=(a,c)=>{const f=c.negate();return a?f:c},o=a=>{const c=Math.ceil(e/a)+1,f=2**(a-1);return{windows:c,windowSize:f}};return{constTimeNegate:s,unsafeLadder(a,c){let f=n.ZERO,h=a;for(;c>_0n$7;)c&_1n$7&&(f=f.add(h)),h=h.double(),c>>=_1n$7;return f},precomputeWindow(a,c){const{windows:f,windowSize:h}=o(c),m=[];let g=a,_=g;for(let E=0;E<f;E++){_=g,m.push(_);for(let T=1;T<h;T++)_=_.add(g),m.push(_);g=_.double()}return m},wNAF(a,c,f){const{windows:h,windowSize:m}=o(a);let g=n.ZERO,_=n.BASE;const E=BigInt(2**a-1),T=2**a,w=BigInt(a);for(let A=0;A<h;A++){const R=A*m;let V=Number(f&E);f>>=w,V>m&&(V-=T,f+=_1n$7);const te=R,se=R+Math.abs(V)-1,re=A%2!==0,ye=V<0;V===0?_=_.add(s(re,c[te])):g=g.add(s(ye,c[se]))}return{p:g,f:_}},wNAFCached(a,c,f,h){const m=a._WINDOW_SIZE||1;let g=c.get(a);return g||(g=this.precomputeWindow(a,m),m!==1&&c.set(a,h(g))),this.wNAF(m,g,f)}}}function validateBasic(n){return validateField$1(n.Fp),validateObject(n,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...nLength$1(n.n,n.nBitLength),...n,p:n.Fp.ORDER})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function validatePointOpts(n){const e=validateBasic(n);validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:s,Fp:o,a}=e;if(s){if(!o.eql(a,o.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof s!="object"||typeof s.beta!="bigint"||typeof s.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}const{bytesToNumberBE:b2n,hexToBytes:h2b}=ut,DER$1={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(n){const{Err:e}=DER$1;if(n.length<2||n[0]!==2)throw new e("Invalid signature integer tag");const s=n[1],o=n.subarray(2,s+2);if(!s||o.length!==s)throw new e("Invalid signature integer: wrong length");if(o[0]&128)throw new e("Invalid signature integer: negative");if(o[0]===0&&!(o[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:b2n(o),l:n.subarray(s+2)}},toSig(n){const{Err:e}=DER$1,s=typeof n=="string"?h2b(n):n;if(!(s instanceof Uint8Array))throw new Error("ui8a expected");let o=s.length;if(o<2||s[0]!=48)throw new e("Invalid signature tag");if(s[1]!==o-2)throw new e("Invalid signature: incorrect length");const{d:a,l:c}=DER$1._parseInt(s.subarray(2)),{d:f,l:h}=DER$1._parseInt(c);if(h.length)throw new e("Invalid signature: left bytes after parsing");return{r:a,s:f}},hexFromSig(n){const e=g=>Number.parseInt(g[0],16)&8?"00"+g:g,s=g=>{const _=g.toString(16);return _.length&1?`0${_}`:_},o=e(s(n.s)),a=e(s(n.r)),c=o.length/2,f=a.length/2,h=s(c),m=s(f);return`30${s(f+c+4)}02${m}${a}02${h}${o}`}},_0n$6=BigInt(0),_1n$6=BigInt(1);BigInt(2);const _3n$2=BigInt(3);BigInt(4);function weierstrassPoints(n){const e=validatePointOpts(n),{Fp:s}=e,o=e.toBytes||((A,R,V)=>{const te=R.toAffine();return concatBytes$2(Uint8Array.from([4]),s.toBytes(te.x),s.toBytes(te.y))}),a=e.fromBytes||(A=>{const R=A.subarray(1),V=s.fromBytes(R.subarray(0,s.BYTES)),te=s.fromBytes(R.subarray(s.BYTES,2*s.BYTES));return{x:V,y:te}});function c(A){const{a:R,b:V}=e,te=s.sqr(A),se=s.mul(te,A);return s.add(s.add(se,s.mul(A,R)),V)}if(!s.eql(s.sqr(e.Gy),c(e.Gx)))throw new Error("bad generator point: equation left != right");function f(A){return typeof A=="bigint"&&_0n$6<A&&A<e.n}function h(A){if(!f(A))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function m(A){const{allowedPrivateKeyLengths:R,nByteLength:V,wrapPrivateKey:te,n:se}=e;if(R&&typeof A!="bigint"){if(A instanceof Uint8Array&&(A=bytesToHex$2(A)),typeof A!="string"||!R.includes(A.length))throw new Error("Invalid key");A=A.padStart(V*2,"0")}let re;try{re=typeof A=="bigint"?A:bytesToNumberBE$1(ensureBytes$1("private key",A,V))}catch{throw new Error(`private key must be ${V} bytes, hex or bigint, not ${typeof A}`)}return te&&(re=mod$1(re,se)),h(re),re}const g=new Map;function _(A){if(!(A instanceof E))throw new Error("ProjectivePoint expected")}class E{constructor(R,V,te){if(this.px=R,this.py=V,this.pz=te,R==null||!s.isValid(R))throw new Error("x required");if(V==null||!s.isValid(V))throw new Error("y required");if(te==null||!s.isValid(te))throw new Error("z required")}static fromAffine(R){const{x:V,y:te}=R||{};if(!R||!s.isValid(V)||!s.isValid(te))throw new Error("invalid affine point");if(R instanceof E)throw new Error("projective point not allowed");const se=re=>s.eql(re,s.ZERO);return se(V)&&se(te)?E.ZERO:new E(V,te,s.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(R){const V=s.invertBatch(R.map(te=>te.pz));return R.map((te,se)=>te.toAffine(V[se])).map(E.fromAffine)}static fromHex(R){const V=E.fromAffine(a(ensureBytes$1("pointHex",R)));return V.assertValidity(),V}static fromPrivateKey(R){return E.BASE.multiply(m(R))}_setWindowSize(R){this._WINDOW_SIZE=R,g.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!s.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:R,y:V}=this.toAffine();if(!s.isValid(R)||!s.isValid(V))throw new Error("bad point: x or y not FE");const te=s.sqr(V),se=c(R);if(!s.eql(te,se))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:R}=this.toAffine();if(s.isOdd)return!s.isOdd(R);throw new Error("Field doesn't support isOdd")}equals(R){_(R);const{px:V,py:te,pz:se}=this,{px:re,py:ye,pz:D}=R,ae=s.eql(s.mul(V,D),s.mul(re,se)),z=s.eql(s.mul(te,D),s.mul(ye,se));return ae&&z}negate(){return new E(this.px,s.neg(this.py),this.pz)}double(){const{a:R,b:V}=e,te=s.mul(V,_3n$2),{px:se,py:re,pz:ye}=this;let D=s.ZERO,ae=s.ZERO,z=s.ZERO,H=s.mul(se,se),X=s.mul(re,re),le=s.mul(ye,ye),Z=s.mul(se,re);return Z=s.add(Z,Z),z=s.mul(se,ye),z=s.add(z,z),D=s.mul(R,z),ae=s.mul(te,le),ae=s.add(D,ae),D=s.sub(X,ae),ae=s.add(X,ae),ae=s.mul(D,ae),D=s.mul(Z,D),z=s.mul(te,z),le=s.mul(R,le),Z=s.sub(H,le),Z=s.mul(R,Z),Z=s.add(Z,z),z=s.add(H,H),H=s.add(z,H),H=s.add(H,le),H=s.mul(H,Z),ae=s.add(ae,H),le=s.mul(re,ye),le=s.add(le,le),H=s.mul(le,Z),D=s.sub(D,H),z=s.mul(le,X),z=s.add(z,z),z=s.add(z,z),new E(D,ae,z)}add(R){_(R);const{px:V,py:te,pz:se}=this,{px:re,py:ye,pz:D}=R;let ae=s.ZERO,z=s.ZERO,H=s.ZERO;const X=e.a,le=s.mul(e.b,_3n$2);let Z=s.mul(V,re),ne=s.mul(te,ye),W=s.mul(se,D),xe=s.add(V,te),de=s.add(re,ye);xe=s.mul(xe,de),de=s.add(Z,ne),xe=s.sub(xe,de),de=s.add(V,se);let oe=s.add(re,D);return de=s.mul(de,oe),oe=s.add(Z,W),de=s.sub(de,oe),oe=s.add(te,se),ae=s.add(ye,D),oe=s.mul(oe,ae),ae=s.add(ne,W),oe=s.sub(oe,ae),H=s.mul(X,de),ae=s.mul(le,W),H=s.add(ae,H),ae=s.sub(ne,H),H=s.add(ne,H),z=s.mul(ae,H),ne=s.add(Z,Z),ne=s.add(ne,Z),W=s.mul(X,W),de=s.mul(le,de),ne=s.add(ne,W),W=s.sub(Z,W),W=s.mul(X,W),de=s.add(de,W),Z=s.mul(ne,de),z=s.add(z,Z),Z=s.mul(oe,de),ae=s.mul(xe,ae),ae=s.sub(ae,Z),Z=s.mul(xe,ne),H=s.mul(oe,H),H=s.add(H,Z),new E(ae,z,H)}subtract(R){return this.add(R.negate())}is0(){return this.equals(E.ZERO)}wNAF(R){return w.wNAFCached(this,g,R,V=>{const te=s.invertBatch(V.map(se=>se.pz));return V.map((se,re)=>se.toAffine(te[re])).map(E.fromAffine)})}multiplyUnsafe(R){const V=E.ZERO;if(R===_0n$6)return V;if(h(R),R===_1n$6)return this;const{endo:te}=e;if(!te)return w.unsafeLadder(this,R);let{k1neg:se,k1:re,k2neg:ye,k2:D}=te.splitScalar(R),ae=V,z=V,H=this;for(;re>_0n$6||D>_0n$6;)re&_1n$6&&(ae=ae.add(H)),D&_1n$6&&(z=z.add(H)),H=H.double(),re>>=_1n$6,D>>=_1n$6;return se&&(ae=ae.negate()),ye&&(z=z.negate()),z=new E(s.mul(z.px,te.beta),z.py,z.pz),ae.add(z)}multiply(R){h(R);let V=R,te,se;const{endo:re}=e;if(re){const{k1neg:ye,k1:D,k2neg:ae,k2:z}=re.splitScalar(V);let{p:H,f:X}=this.wNAF(D),{p:le,f:Z}=this.wNAF(z);H=w.constTimeNegate(ye,H),le=w.constTimeNegate(ae,le),le=new E(s.mul(le.px,re.beta),le.py,le.pz),te=H.add(le),se=X.add(Z)}else{const{p:ye,f:D}=this.wNAF(V);te=ye,se=D}return E.normalizeZ([te,se])[0]}multiplyAndAddUnsafe(R,V,te){const se=E.BASE,re=(D,ae)=>ae===_0n$6||ae===_1n$6||!D.equals(se)?D.multiplyUnsafe(ae):D.multiply(ae),ye=re(this,V).add(re(R,te));return ye.is0()?void 0:ye}toAffine(R){const{px:V,py:te,pz:se}=this,re=this.is0();R==null&&(R=re?s.ONE:s.inv(se));const ye=s.mul(V,R),D=s.mul(te,R),ae=s.mul(se,R);if(re)return{x:s.ZERO,y:s.ZERO};if(!s.eql(ae,s.ONE))throw new Error("invZ was invalid");return{x:ye,y:D}}isTorsionFree(){const{h:R,isTorsionFree:V}=e;if(R===_1n$6)return!0;if(V)return V(E,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:R,clearCofactor:V}=e;return R===_1n$6?this:V?V(E,this):this.multiplyUnsafe(e.h)}toRawBytes(R=!0){return this.assertValidity(),o(E,this,R)}toHex(R=!0){return bytesToHex$2(this.toRawBytes(R))}}E.BASE=new E(e.Gx,e.Gy,s.ONE),E.ZERO=new E(s.ZERO,s.ONE,s.ZERO);const T=e.nBitLength,w=wNAF$1(E,e.endo?Math.ceil(T/2):T);return{CURVE:e,ProjectivePoint:E,normPrivateKeyToScalar:m,weierstrassEquation:c,isWithinCurveOrder:f}}function validateOpts(n){const e=validateBasic(n);return validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function weierstrass$1(n){const e=validateOpts(n),{Fp:s,n:o}=e,a=s.BYTES+1,c=2*s.BYTES+1;function f(de){return _0n$6<de&&de<s.ORDER}function h(de){return mod$1(de,o)}function m(de){return invert$1(de,o)}const{ProjectivePoint:g,normPrivateKeyToScalar:_,weierstrassEquation:E,isWithinCurveOrder:T}=weierstrassPoints({...e,toBytes(de,oe,_e){const Re=oe.toAffine(),Ie=s.toBytes(Re.x),he=concatBytes$2;return _e?he(Uint8Array.from([oe.hasEvenY()?2:3]),Ie):he(Uint8Array.from([4]),Ie,s.toBytes(Re.y))},fromBytes(de){const oe=de.length,_e=de[0],Re=de.subarray(1);if(oe===a&&(_e===2||_e===3)){const Ie=bytesToNumberBE$1(Re);if(!f(Ie))throw new Error("Point is not on curve");const he=E(Ie);let be=s.sqrt(he);const Se=(be&_1n$6)===_1n$6;return(_e&1)===1!==Se&&(be=s.neg(be)),{x:Ie,y:be}}else if(oe===c&&_e===4){const Ie=s.fromBytes(Re.subarray(0,s.BYTES)),he=s.fromBytes(Re.subarray(s.BYTES,2*s.BYTES));return{x:Ie,y:he}}else throw new Error(`Point of length ${oe} was invalid. Expected ${a} compressed bytes or ${c} uncompressed bytes`)}}),w=de=>bytesToHex$2(numberToBytesBE$1(de,e.nByteLength));function A(de){const oe=o>>_1n$6;return de>oe}function R(de){return A(de)?h(-de):de}const V=(de,oe,_e)=>bytesToNumberBE$1(de.slice(oe,_e));class te{constructor(oe,_e,Re){this.r=oe,this.s=_e,this.recovery=Re,this.assertValidity()}static fromCompact(oe){const _e=e.nByteLength;return oe=ensureBytes$1("compactSignature",oe,_e*2),new te(V(oe,0,_e),V(oe,_e,2*_e))}static fromDER(oe){const{r:_e,s:Re}=DER$1.toSig(ensureBytes$1("DER",oe));return new te(_e,Re)}assertValidity(){if(!T(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!T(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(oe){return new te(this.r,this.s,oe)}recoverPublicKey(oe){const{r:_e,s:Re,recovery:Ie}=this,he=z(ensureBytes$1("msgHash",oe));if(Ie==null||![0,1,2,3].includes(Ie))throw new Error("recovery id invalid");const be=Ie===2||Ie===3?_e+e.n:_e;if(be>=s.ORDER)throw new Error("recovery id 2 or 3 invalid");const Se=(Ie&1)===0?"02":"03",Ae=g.fromHex(Se+w(be)),Be=m(be),Ue=h(-he*Be),qe=h(Re*Be),Xe=g.BASE.multiplyAndAddUnsafe(Ae,Ue,qe);if(!Xe)throw new Error("point at infinify");return Xe.assertValidity(),Xe}hasHighS(){return A(this.s)}normalizeS(){return this.hasHighS()?new te(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return hexToBytes$2(this.toDERHex())}toDERHex(){return DER$1.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return hexToBytes$2(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}const se={isValidPrivateKey(de){try{return _(de),!0}catch{return!1}},normPrivateKeyToScalar:_,randomPrivateKey:()=>{const de=getMinHashLength$1(e.n);return mapHashToField$1(e.randomBytes(de),e.n)},precompute(de=8,oe=g.BASE){return oe._setWindowSize(de),oe.multiply(BigInt(3)),oe}};function re(de,oe=!0){return g.fromPrivateKey(de).toRawBytes(oe)}function ye(de){const oe=de instanceof Uint8Array,_e=typeof de=="string",Re=(oe||_e)&&de.length;return oe?Re===a||Re===c:_e?Re===2*a||Re===2*c:de instanceof g}function D(de,oe,_e=!0){if(ye(de))throw new Error("first arg must be private key");if(!ye(oe))throw new Error("second arg must be public key");return g.fromHex(oe).multiply(_(de)).toRawBytes(_e)}const ae=e.bits2int||function(de){const oe=bytesToNumberBE$1(de),_e=de.length*8-e.nBitLength;return _e>0?oe>>BigInt(_e):oe},z=e.bits2int_modN||function(de){return h(ae(de))},H=bitMask$1(e.nBitLength);function X(de){if(typeof de!="bigint")throw new Error("bigint expected");if(!(_0n$6<=de&&de<H))throw new Error(`bigint expected < 2^${e.nBitLength}`);return numberToBytesBE$1(de,e.nByteLength)}function le(de,oe,_e=Z){if(["recovered","canonical"].some(Ze=>Ze in _e))throw new Error("sign() legacy options not supported");const{hash:Re,randomBytes:Ie}=e;let{lowS:he,prehash:be,extraEntropy:Se}=_e;he==null&&(he=!0),de=ensureBytes$1("msgHash",de),be&&(de=ensureBytes$1("prehashed msgHash",Re(de)));const Ae=z(de),Be=_(oe),Ue=[X(Be),X(Ae)];if(Se!=null){const Ze=Se===!0?Ie(s.BYTES):Se;Ue.push(ensureBytes$1("extraEntropy",Ze))}const qe=concatBytes$2(...Ue),Xe=Ae;function Ke(Ze){const it=ae(Ze);if(!T(it))return;const wn=m(it),yn=g.BASE.multiply(it).toAffine(),Mt=h(yn.x);if(Mt===_0n$6)return;const Ge=h(wn*h(Xe+Mt*Be));if(Ge===_0n$6)return;let ln=(yn.x===Mt?0:2)|Number(yn.y&_1n$6),kt=Ge;return he&&A(Ge)&&(kt=R(Ge),ln^=1),new te(Mt,kt,ln)}return{seed:qe,k2sig:Ke}}const Z={lowS:e.lowS,prehash:!1},ne={lowS:e.lowS,prehash:!1};function W(de,oe,_e=Z){const{seed:Re,k2sig:Ie}=le(de,oe,_e),he=e;return createHmacDrbg$1(he.hash.outputLen,he.nByteLength,he.hmac)(Re,Ie)}g.BASE._setWindowSize(8);function xe(de,oe,_e,Re=ne){const Ie=de;if(oe=ensureBytes$1("msgHash",oe),_e=ensureBytes$1("publicKey",_e),"strict"in Re)throw new Error("options.strict was renamed to lowS");const{lowS:he,prehash:be}=Re;let Se,Ae;try{if(typeof Ie=="string"||Ie instanceof Uint8Array)try{Se=te.fromDER(Ie)}catch(yn){if(!(yn instanceof DER$1.Err))throw yn;Se=te.fromCompact(Ie)}else if(typeof Ie=="object"&&typeof Ie.r=="bigint"&&typeof Ie.s=="bigint"){const{r:yn,s:Mt}=Ie;Se=new te(yn,Mt)}else throw new Error("PARSE");Ae=g.fromHex(_e)}catch(yn){if(yn.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(he&&Se.hasHighS())return!1;be&&(oe=e.hash(oe));const{r:Be,s:Ue}=Se,qe=z(oe),Xe=m(Ue),Ke=h(qe*Xe),Ze=h(Be*Xe),it=g.BASE.multiplyAndAddUnsafe(Ae,Ke,Ze)?.toAffine();return it?h(it.x)===Be:!1}return{CURVE:e,getPublicKey:re,getSharedSecret:D,sign:W,verify:xe,ProjectivePoint:g,Signature:te,utils:se}}let HMAC$2=class extends Hash$2{constructor(e,s){super(),this.finished=!1,this.destroyed=!1,hash$1(e);const o=toBytes$2(s);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,c=new Uint8Array(a);c.set(o.length>a?e.create().update(o).digest():o);for(let f=0;f<c.length;f++)c[f]^=54;this.iHash.update(c),this.oHash=e.create();for(let f=0;f<c.length;f++)c[f]^=106;this.oHash.update(c),c.fill(0)}update(e){return exists$1(this),this.iHash.update(e),this}digestInto(e){exists$1(this),bytes$2(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:a,destroyed:c,blockLen:f,outputLen:h}=this;return e=e,e.finished=a,e.destroyed=c,e.blockLen=f,e.outputLen=h,e.oHash=s._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$2=(n,e,s)=>new HMAC$2(n,e).update(s).digest();hmac$2.create=(n,e)=>new HMAC$2(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function getHash(n){return{hash:n,hmac:(e,...s)=>hmac$2(n,e,concatBytes$3(...s)),randomBytes:randomBytes$2}}function createCurve$1(n,e){const s=o=>weierstrass$1({...n,...getHash(o)});return Object.freeze({...s(e),create:s})}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1P=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),secp256k1N=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),_1n$5=BigInt(1),_2n$3=BigInt(2),divNearest$1=(n,e)=>(n+e/_2n$3)/e;function sqrtMod$1(n){const e=secp256k1P,s=BigInt(3),o=BigInt(6),a=BigInt(11),c=BigInt(22),f=BigInt(23),h=BigInt(44),m=BigInt(88),g=n*n*n%e,_=g*g*n%e,E=pow2$1(_,s,e)*_%e,T=pow2$1(E,s,e)*_%e,w=pow2$1(T,_2n$3,e)*g%e,A=pow2$1(w,a,e)*w%e,R=pow2$1(A,c,e)*A%e,V=pow2$1(R,h,e)*R%e,te=pow2$1(V,m,e)*V%e,se=pow2$1(te,h,e)*R%e,re=pow2$1(se,s,e)*_%e,ye=pow2$1(re,f,e)*A%e,D=pow2$1(ye,o,e)*g%e,ae=pow2$1(D,_2n$3,e);if(!Fp.eql(Fp.sqr(ae),n))throw new Error("Cannot find square root");return ae}const Fp=Field$1(secp256k1P,void 0,void 0,{sqrt:sqrtMod$1}),secp256k1$1=createCurve$1({a:BigInt(0),b:BigInt(7),Fp,n:secp256k1N,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:n=>{const e=secp256k1N,s=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),o=-_1n$5*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),a=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),c=s,f=BigInt("0x100000000000000000000000000000000"),h=divNearest$1(c*n,e),m=divNearest$1(-o*n,e);let g=mod$1(n-h*s-m*a,e),_=mod$1(-h*o-m*c,e);const E=g>f,T=_>f;if(E&&(g=e-g),T&&(_=e-_),g>f||_>f)throw new Error("splitScalar: Endomorphism failed, k="+n);return{k1neg:E,k1:g,k2neg:T,k2:_}}}},sha256$3),_0n$5=BigInt(0),fe=n=>typeof n=="bigint"&&_0n$5<n&&n<secp256k1P,ge=n=>typeof n=="bigint"&&_0n$5<n&&n<secp256k1N,TAGGED_HASH_PREFIXES$1={};function taggedHash$1(n,...e){let s=TAGGED_HASH_PREFIXES$1[n];if(s===void 0){const o=sha256$3(Uint8Array.from(n,a=>a.charCodeAt(0)));s=concatBytes$2(o,o),TAGGED_HASH_PREFIXES$1[n]=s}return sha256$3(concatBytes$2(s,...e))}const pointToBytes$1=n=>n.toRawBytes(!0).slice(1),numTo32b=n=>numberToBytesBE$1(n,32),modP=n=>mod$1(n,secp256k1P),modN=n=>mod$1(n,secp256k1N),Point=secp256k1$1.ProjectivePoint,GmulAdd=(n,e,s)=>Point.BASE.multiplyAndAddUnsafe(n,e,s);function schnorrGetExtPubKey$1(n){let e=secp256k1$1.utils.normPrivateKeyToScalar(n),s=Point.fromPrivateKey(e);return{scalar:s.hasEvenY()?e:modN(-e),bytes:pointToBytes$1(s)}}function lift_x$1(n){if(!fe(n))throw new Error("bad x: need 0 < x < p");const e=modP(n*n),s=modP(e*n+BigInt(7));let o=sqrtMod$1(s);o%_2n$3!==_0n$5&&(o=modP(-o));const a=new Point(n,o,_1n$5);return a.assertValidity(),a}function challenge$1(...n){return modN(bytesToNumberBE$1(taggedHash$1("BIP0340/challenge",...n)))}function schnorrGetPublicKey$1(n){return schnorrGetExtPubKey$1(n).bytes}function schnorrSign$1(n,e,s=randomBytes$2(32)){const o=ensureBytes$1("message",n),{bytes:a,scalar:c}=schnorrGetExtPubKey$1(e),f=ensureBytes$1("auxRand",s,32),h=numTo32b(c^bytesToNumberBE$1(taggedHash$1("BIP0340/aux",f))),m=taggedHash$1("BIP0340/nonce",h,a,o),g=modN(bytesToNumberBE$1(m));if(g===_0n$5)throw new Error("sign failed: k is zero");const{bytes:_,scalar:E}=schnorrGetExtPubKey$1(g),T=challenge$1(_,a,o),w=new Uint8Array(64);if(w.set(_,0),w.set(numTo32b(modN(E+T*c)),32),!schnorrVerify$1(w,o,a))throw new Error("sign: Invalid signature produced");return w}function schnorrVerify$1(n,e,s){const o=ensureBytes$1("signature",n,64),a=ensureBytes$1("message",e),c=ensureBytes$1("publicKey",s,32);try{const f=lift_x$1(bytesToNumberBE$1(c)),h=bytesToNumberBE$1(o.subarray(0,32));if(!fe(h))return!1;const m=bytesToNumberBE$1(o.subarray(32,64));if(!ge(m))return!1;const g=challenge$1(numTo32b(h),pointToBytes$1(f),a),_=GmulAdd(f,m,modN(-g));return!(!_||!_.hasEvenY()||_.toAffine().x!==h)}catch{return!1}}const schnorr$1={getPublicKey:schnorrGetPublicKey$1,sign:schnorrSign$1,verify:schnorrVerify$1,utils:{randomPrivateKey:secp256k1$1.utils.randomPrivateKey,lift_x:lift_x$1,pointToBytes:pointToBytes$1,numberToBytesBE:numberToBytesBE$1,bytesToNumberBE:bytesToNumberBE$1,taggedHash:taggedHash$1,mod:mod$1}},crypto$2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const u8a=n=>n instanceof Uint8Array,createView$1=n=>new DataView(n.buffer,n.byteOffset,n.byteLength),rotr$1=(n,e)=>n<<32-e|n>>>e,isLE$1=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE$1)throw new Error("Non little-endian hardware is not supported");const hexes$1=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function bytesToHex$1(n){if(!u8a(n))throw new Error("Uint8Array expected");let e="";for(let s=0;s<n.length;s++)e+=hexes$1[n[s]];return e}function hexToBytes$1(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);const e=n.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);const s=new Uint8Array(e/2);for(let o=0;o<s.length;o++){const a=o*2,c=n.slice(a,a+2),f=Number.parseInt(c,16);if(Number.isNaN(f)||f<0)throw new Error("Invalid byte sequence");s[o]=f}return s}function utf8ToBytes$1(n){if(typeof n!="string")throw new Error(`utf8ToBytes expected string, got ${typeof n}`);return new Uint8Array(new TextEncoder().encode(n))}function toBytes$1(n){if(typeof n=="string"&&(n=utf8ToBytes$1(n)),!u8a(n))throw new Error(`expected Uint8Array, got ${typeof n}`);return n}function concatBytes$1(...n){const e=new Uint8Array(n.reduce((o,a)=>o+a.length,0));let s=0;return n.forEach(o=>{if(!u8a(o))throw new Error("Uint8Array expected");e.set(o,s),s+=o.length}),e}let Hash$1=class{clone(){return this._cloneInto()}};function wrapConstructor(n){const e=o=>n().update(toBytes$1(o)).digest(),s=n();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>n(),e}function randomBytes$1(n=32){if(crypto$2&&typeof crypto$2.getRandomValues=="function")return crypto$2.getRandomValues(new Uint8Array(n));throw new Error("crypto.getRandomValues must be defined")}function number$1(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`Wrong positive integer: ${n}`)}function bool$1(n){if(typeof n!="boolean")throw new Error(`Expected boolean, not ${n}`)}function bytes$1(n,...e){if(!(n instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(n.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${n.length}`)}function hash(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");number$1(n.outputLen),number$1(n.blockLen)}function exists(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function output(n,e){bytes$1(n);const s=e.outputLen;if(n.length<s)throw new Error(`digestInto() expects output buffer of length at least ${s}`)}const assert={number:number$1,bool:bool$1,bytes:bytes$1,hash,exists,output};function setBigUint64$1(n,e,s,o){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,s,o);const a=BigInt(32),c=BigInt(4294967295),f=Number(s>>a&c),h=Number(s&c),m=o?4:0,g=o?0:4;n.setUint32(e+m,f,o),n.setUint32(e+g,h,o)}class SHA2 extends Hash$1{constructor(e,s,o,a){super(),this.blockLen=e,this.outputLen=s,this.padOffset=o,this.isLE=a,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=createView$1(this.buffer)}update(e){assert.exists(this);const{view:s,buffer:o,blockLen:a}=this;e=toBytes$1(e);const c=e.length;for(let f=0;f<c;){const h=Math.min(a-this.pos,c-f);if(h===a){const m=createView$1(e);for(;a<=c-f;f+=a)this.process(m,f);continue}o.set(e.subarray(f,f+h),this.pos),this.pos+=h,f+=h,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){assert.exists(this),assert.output(e,this),this.finished=!0;const{buffer:s,view:o,blockLen:a,isLE:c}=this;let{pos:f}=this;s[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>a-f&&(this.process(o,0),f=0);for(let E=f;E<a;E++)s[E]=0;setBigUint64$1(o,a-8,BigInt(this.length*8),c),this.process(o,0);const h=createView$1(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=m/4,_=this.get();if(g>_.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<g;E++)h.setUint32(4*E,_[E],c)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const o=e.slice(0,s);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:s,buffer:o,length:a,finished:c,destroyed:f,pos:h}=this;return e.length=a,e.pos=h,e.finished=c,e.destroyed=f,a%s&&e.buffer.set(o),e}}const Chi$1=(n,e,s)=>n&e^~n&s,Maj$1=(n,e,s)=>n&e^n&s^e&s,SHA256_K$1=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W$1=new Uint32Array(64);let SHA256$1=class extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:e,B:s,C:o,D:a,E:c,F:f,G:h,H:m}=this;return[e,s,o,a,c,f,h,m]}set(e,s,o,a,c,f,h,m){this.A=e|0,this.B=s|0,this.C=o|0,this.D=a|0,this.E=c|0,this.F=f|0,this.G=h|0,this.H=m|0}process(e,s){for(let E=0;E<16;E++,s+=4)SHA256_W$1[E]=e.getUint32(s,!1);for(let E=16;E<64;E++){const T=SHA256_W$1[E-15],w=SHA256_W$1[E-2],A=rotr$1(T,7)^rotr$1(T,18)^T>>>3,R=rotr$1(w,17)^rotr$1(w,19)^w>>>10;SHA256_W$1[E]=R+SHA256_W$1[E-7]+A+SHA256_W$1[E-16]|0}let{A:o,B:a,C:c,D:f,E:h,F:m,G:g,H:_}=this;for(let E=0;E<64;E++){const T=rotr$1(h,6)^rotr$1(h,11)^rotr$1(h,25),w=_+T+Chi$1(h,m,g)+SHA256_K$1[E]+SHA256_W$1[E]|0,R=(rotr$1(o,2)^rotr$1(o,13)^rotr$1(o,22))+Maj$1(o,a,c)|0;_=g,g=m,m=h,h=f+w|0,f=c,c=a,a=o,o=w+R|0}o=o+this.A|0,a=a+this.B|0,c=c+this.C|0,f=f+this.D|0,h=h+this.E|0,m=m+this.F|0,g=g+this.G|0,_=_+this.H|0,this.set(o,a,c,f,h,m,g,_)}roundClean(){SHA256_W$1.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};class SHA224 extends SHA256$1{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}const sha256$2=wrapConstructor(()=>new SHA256$1);wrapConstructor(()=>new SHA224);/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function assertNumber(n){if(!Number.isSafeInteger(n))throw new Error(`Wrong integer: ${n}`)}function chain(...n){const e=(a,c)=>f=>a(c(f)),s=Array.from(n).reverse().reduce((a,c)=>a?e(a,c.encode):c.encode,void 0),o=n.reduce((a,c)=>a?e(a,c.decode):c.decode,void 0);return{encode:s,decode:o}}function alphabet(n){return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return e.map(s=>{if(assertNumber(s),s<0||s>=n.length)throw new Error(`Digit index outside alphabet: ${s} (alphabet: ${n.length})`);return n[s]})},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("alphabet.decode input should be array of strings");return e.map(s=>{if(typeof s!="string")throw new Error(`alphabet.decode: not string element=${s}`);const o=n.indexOf(s);if(o===-1)throw new Error(`Unknown letter: "${s}". Allowed: ${n}`);return o})}}}function join(n=""){if(typeof n!="string")throw new Error("join separator should be string");return{encode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="string")throw new Error("join.encode input should be array of strings");for(let s of e)if(typeof s!="string")throw new Error(`join.encode: non-string input=${s}`);return e.join(n)},decode:e=>{if(typeof e!="string")throw new Error("join.decode input should be string");return e.split(n)}}}function padding(n,e="="){if(assertNumber(n),typeof e!="string")throw new Error("padding chr should be string");return{encode(s){if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of s)if(typeof o!="string")throw new Error(`padding.encode: non-string input=${o}`);for(;s.length*n%8;)s.push(e);return s},decode(s){if(!Array.isArray(s)||s.length&&typeof s[0]!="string")throw new Error("padding.encode input should be array of strings");for(let a of s)if(typeof a!="string")throw new Error(`padding.decode: non-string input=${a}`);let o=s.length;if(o*n%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;o>0&&s[o-1]===e;o--)if(!((o-1)*n%8))throw new Error("Invalid padding: string has too much padding");return s.slice(0,o)}}}function normalize$1(n){if(typeof n!="function")throw new Error("normalize fn should be function");return{encode:e=>e,decode:e=>n(e)}}function convertRadix(n,e,s){if(e<2)throw new Error(`convertRadix: wrong from=${e}, base cannot be less than 2`);if(s<2)throw new Error(`convertRadix: wrong to=${s}, base cannot be less than 2`);if(!Array.isArray(n))throw new Error("convertRadix: data should be array");if(!n.length)return[];let o=0;const a=[],c=Array.from(n);for(c.forEach(f=>{if(assertNumber(f),f<0||f>=e)throw new Error(`Wrong integer: ${f}`)});;){let f=0,h=!0;for(let m=o;m<c.length;m++){const g=c[m],_=e*f+g;if(!Number.isSafeInteger(_)||e*f/e!==f||_-g!==e*f)throw new Error("convertRadix: carry overflow");if(f=_%s,c[m]=Math.floor(_/s),!Number.isSafeInteger(c[m])||c[m]*s+f!==_)throw new Error("convertRadix: carry overflow");if(h)c[m]?h=!1:o=m;else continue}if(a.push(f),h)break}for(let f=0;f<n.length-1&&n[f]===0;f++)a.push(0);return a.reverse()}const gcd=(n,e)=>e?gcd(e,n%e):n,radix2carry=(n,e)=>n+(e-gcd(n,e));function convertRadix2(n,e,s,o){if(!Array.isArray(n))throw new Error("convertRadix2: data should be array");if(e<=0||e>32)throw new Error(`convertRadix2: wrong from=${e}`);if(s<=0||s>32)throw new Error(`convertRadix2: wrong to=${s}`);if(radix2carry(e,s)>32)throw new Error(`convertRadix2: carry overflow from=${e} to=${s} carryBits=${radix2carry(e,s)}`);let a=0,c=0;const f=2**s-1,h=[];for(const m of n){if(assertNumber(m),m>=2**e)throw new Error(`convertRadix2: invalid data word=${m} from=${e}`);if(a=a<<e|m,c+e>32)throw new Error(`convertRadix2: carry overflow pos=${c} from=${e}`);for(c+=e;c>=s;c-=s)h.push((a>>c-s&f)>>>0);a&=2**c-1}if(a=a<<s-c&f,!o&&c>=e)throw new Error("Excess padding");if(!o&&a)throw new Error(`Non-zero padding: ${a}`);return o&&c>0&&h.push(a>>>0),h}function radix(n){return assertNumber(n),{encode:e=>{if(!(e instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return convertRadix(Array.from(e),2**8,n)},decode:e=>{if(!Array.isArray(e)||e.length&&typeof e[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(convertRadix(e,n,2**8))}}}function radix2(n,e=!1){if(assertNumber(n),n<=0||n>32)throw new Error("radix2: bits should be in (0..32]");if(radix2carry(8,n)>32||radix2carry(n,8)>32)throw new Error("radix2: carry overflow");return{encode:s=>{if(!(s instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return convertRadix2(Array.from(s),8,n,!e)},decode:s=>{if(!Array.isArray(s)||s.length&&typeof s[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(convertRadix2(s,n,8,e))}}}function unsafeWrapper(n){if(typeof n!="function")throw new Error("unsafeWrapper fn should be function");return function(...e){try{return n.apply(null,e)}catch{}}}const base16=chain(radix2(4),alphabet("0123456789ABCDEF"),join("")),base32=chain(radix2(5),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),padding(5),join(""));chain(radix2(5),alphabet("0123456789ABCDEFGHIJKLMNOPQRSTUV"),padding(5),join(""));chain(radix2(5),alphabet("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),join(""),normalize$1(n=>n.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));const base64=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),padding(6),join("")),base64url=chain(radix2(6),alphabet("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),padding(6),join("")),genBase58=n=>chain(radix(58),alphabet(n),join("")),base58=genBase58("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");genBase58("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");genBase58("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const XMR_BLOCK_LEN=[0,2,3,5,6,7,9,10,11],base58xmr={encode(n){let e="";for(let s=0;s<n.length;s+=8){const o=n.subarray(s,s+8);e+=base58.encode(o).padStart(XMR_BLOCK_LEN[o.length],"1")}return e},decode(n){let e=[];for(let s=0;s<n.length;s+=11){const o=n.slice(s,s+11),a=XMR_BLOCK_LEN.indexOf(o.length),c=base58.decode(o);for(let f=0;f<c.length-a;f++)if(c[f]!==0)throw new Error("base58xmr: wrong padding");e=e.concat(Array.from(c.slice(c.length-a)))}return Uint8Array.from(e)}},BECH_ALPHABET=chain(alphabet("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),join("")),POLYMOD_GENERATORS=[996825010,642813549,513874426,1027748829,705979059];function bech32Polymod(n){const e=n>>25;let s=(n&33554431)<<5;for(let o=0;o<POLYMOD_GENERATORS.length;o++)(e>>o&1)===1&&(s^=POLYMOD_GENERATORS[o]);return s}function bechChecksum(n,e,s=1){const o=n.length;let a=1;for(let c=0;c<o;c++){const f=n.charCodeAt(c);if(f<33||f>126)throw new Error(`Invalid prefix (${n})`);a=bech32Polymod(a)^f>>5}a=bech32Polymod(a);for(let c=0;c<o;c++)a=bech32Polymod(a)^n.charCodeAt(c)&31;for(let c of e)a=bech32Polymod(a)^c;for(let c=0;c<6;c++)a=bech32Polymod(a);return a^=s,BECH_ALPHABET.encode(convertRadix2([a%2**30],30,5,!1))}function genBech32(n){const e=n==="bech32"?1:734539939,s=radix2(5),o=s.decode,a=s.encode,c=unsafeWrapper(o);function f(_,E,T=90){if(typeof _!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof _}`);if(!Array.isArray(E)||E.length&&typeof E[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof E}`);const w=_.length+7+E.length;if(T!==!1&&w>T)throw new TypeError(`Length ${w} exceeds limit ${T}`);return _=_.toLowerCase(),`${_}1${BECH_ALPHABET.encode(E)}${bechChecksum(_,E,e)}`}function h(_,E=90){if(typeof _!="string")throw new Error(`bech32.decode input should be string, not ${typeof _}`);if(_.length<8||E!==!1&&_.length>E)throw new TypeError(`Wrong string length: ${_.length} (${_}). Expected (8..${E})`);const T=_.toLowerCase();if(_!==T&&_!==_.toUpperCase())throw new Error("String must be lowercase or uppercase");_=T;const w=_.lastIndexOf("1");if(w===0||w===-1)throw new Error('Letter "1" must be present between prefix and data only');const A=_.slice(0,w),R=_.slice(w+1);if(R.length<6)throw new Error("Data must be at least 6 characters long");const V=BECH_ALPHABET.decode(R).slice(0,-6),te=bechChecksum(A,V,e);if(!R.endsWith(te))throw new Error(`Invalid checksum in ${_}: expected "${te}"`);return{prefix:A,words:V}}const m=unsafeWrapper(h);function g(_){const{prefix:E,words:T}=h(_,!1);return{prefix:E,words:T,bytes:o(T)}}return{encode:f,decode:h,decodeToBytes:g,decodeUnsafe:m,fromWords:o,fromWordsUnsafe:c,toWords:a}}const bech32=genBech32("bech32");genBech32("bech32m");const utf8={encode:n=>new TextDecoder().decode(n),decode:n=>new TextEncoder().encode(n)},hex=chain(radix2(4),alphabet("0123456789abcdef"),join(""),normalize$1(n=>{if(typeof n!="string"||n.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof n} with length ${n.length}`);return n.toLowerCase()})),CODERS={utf8,hex,base16,base32,base64,base64url,base58,base58xmr};`${Object.keys(CODERS).join(", ")}`;function number(n){if(!Number.isSafeInteger(n)||n<0)throw new Error(`positive integer expected, not ${n}`)}function bool(n){if(typeof n!="boolean")throw new Error(`boolean expected, not ${n}`)}function isBytes$1(n){return n instanceof Uint8Array||n!=null&&typeof n=="object"&&n.constructor.name==="Uint8Array"}function bytes(n,...e){if(!isBytes$1(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${n.length}`)}/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */const u32=n=>new Uint32Array(n.buffer,n.byteOffset,Math.floor(n.byteLength/4)),isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function checkOpts(n,e){if(e==null||typeof e!="object")throw new Error("options must be defined");return Object.assign(n,e)}function equalBytes(n,e){if(n.length!==e.length)return!1;let s=0;for(let o=0;o<n.length;o++)s|=n[o]^e[o];return s===0}const wrapCipher=(n,e)=>(Object.assign(e,n),e),BLOCK_SIZE=16,POLY=283;function mul2(n){return n<<1^POLY&-(n>>7)}function mul(n,e){let s=0;for(;e>0;e>>=1)s^=n&-(e&1),n=mul2(n);return s}const sbox=(()=>{let n=new Uint8Array(256);for(let s=0,o=1;s<256;s++,o^=mul2(o))n[s]=o;const e=new Uint8Array(256);e[0]=99;for(let s=0;s<255;s++){let o=n[255-s];o|=o<<8,e[n[s]]=(o^o>>4^o>>5^o>>6^o>>7^99)&255}return e})(),invSbox=sbox.map((n,e)=>sbox.indexOf(e)),rotr32_8=n=>n<<24|n>>>8,rotl32_8=n=>n<<8|n>>>24;function genTtable(n,e){if(n.length!==256)throw new Error("Wrong sbox length");const s=new Uint32Array(256).map((g,_)=>e(n[_])),o=s.map(rotl32_8),a=o.map(rotl32_8),c=a.map(rotl32_8),f=new Uint32Array(256*256),h=new Uint32Array(256*256),m=new Uint16Array(256*256);for(let g=0;g<256;g++)for(let _=0;_<256;_++){const E=g*256+_;f[E]=s[g]^o[_],h[E]=a[g]^c[_],m[E]=n[g]<<8|n[_]}return{sbox:n,sbox2:m,T0:s,T1:o,T2:a,T3:c,T01:f,T23:h}}const tableEncoding=genTtable(sbox,n=>mul(n,3)<<24|n<<16|n<<8|mul(n,2)),tableDecoding=genTtable(invSbox,n=>mul(n,11)<<24|mul(n,13)<<16|mul(n,9)<<8|mul(n,14)),xPowers=(()=>{const n=new Uint8Array(16);for(let e=0,s=1;e<16;e++,s=mul2(s))n[e]=s;return n})();function expandKeyLE(n){bytes(n);const e=n.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);const{sbox2:s}=tableEncoding,o=u32(n),a=o.length,c=h=>applySbox(s,h,h,h,h),f=new Uint32Array(e+28);f.set(o);for(let h=a;h<f.length;h++){let m=f[h-1];h%a===0?m=c(rotr32_8(m))^xPowers[h/a-1]:a>6&&h%a===4&&(m=c(m)),f[h]=f[h-a]^m}return f}function expandKeyDecLE(n){const e=expandKeyLE(n),s=e.slice(),o=e.length,{sbox2:a}=tableEncoding,{T0:c,T1:f,T2:h,T3:m}=tableDecoding;for(let g=0;g<o;g+=4)for(let _=0;_<4;_++)s[g+_]=e[o-g-4+_];e.fill(0);for(let g=4;g<o-4;g++){const _=s[g],E=applySbox(a,_,_,_,_);s[g]=c[E&255]^f[E>>>8&255]^h[E>>>16&255]^m[E>>>24]}return s}function apply0123(n,e,s,o,a,c){return n[s<<8&65280|o>>>8&255]^e[a>>>8&65280|c>>>24&255]}function applySbox(n,e,s,o,a){return n[e&255|s&65280]|n[o>>>16&255|a>>>16&65280]<<16}function encrypt$2(n,e,s,o,a){const{sbox2:c,T01:f,T23:h}=tableEncoding;let m=0;e^=n[m++],s^=n[m++],o^=n[m++],a^=n[m++];const g=n.length/4-2;for(let A=0;A<g;A++){const R=n[m++]^apply0123(f,h,e,s,o,a),V=n[m++]^apply0123(f,h,s,o,a,e),te=n[m++]^apply0123(f,h,o,a,e,s),se=n[m++]^apply0123(f,h,a,e,s,o);e=R,s=V,o=te,a=se}const _=n[m++]^applySbox(c,e,s,o,a),E=n[m++]^applySbox(c,s,o,a,e),T=n[m++]^applySbox(c,o,a,e,s),w=n[m++]^applySbox(c,a,e,s,o);return{s0:_,s1:E,s2:T,s3:w}}function decrypt$2(n,e,s,o,a){const{sbox2:c,T01:f,T23:h}=tableDecoding;let m=0;e^=n[m++],s^=n[m++],o^=n[m++],a^=n[m++];const g=n.length/4-2;for(let A=0;A<g;A++){const R=n[m++]^apply0123(f,h,e,a,o,s),V=n[m++]^apply0123(f,h,s,e,a,o),te=n[m++]^apply0123(f,h,o,s,e,a),se=n[m++]^apply0123(f,h,a,o,s,e);e=R,s=V,o=te,a=se}const _=n[m++]^applySbox(c,e,a,o,s),E=n[m++]^applySbox(c,s,e,a,o),T=n[m++]^applySbox(c,o,s,e,a),w=n[m++]^applySbox(c,a,o,s,e);return{s0:_,s1:E,s2:T,s3:w}}function getDst(n,e){if(!e)return new Uint8Array(n);if(bytes(e),e.length<n)throw new Error(`aes: wrong destination length, expected at least ${n}, got: ${e.length}`);return e}function validateBlockDecrypt(n){if(bytes(n),n.length%BLOCK_SIZE!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${BLOCK_SIZE}`)}function validateBlockEncrypt(n,e,s){let o=n.length;const a=o%BLOCK_SIZE;if(!e&&a!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const c=u32(n);if(e){let m=BLOCK_SIZE-a;m||(m=BLOCK_SIZE),o=o+m}const f=getDst(o,s),h=u32(f);return{b:c,o:h,out:f}}function validatePCKS(n,e){if(!e)return n;const s=n.length;if(!s)throw new Error("aes/pcks5: empty ciphertext not allowed");const o=n[s-1];if(o<=0||o>16)throw new Error(`aes/pcks5: wrong padding byte: ${o}`);const a=n.subarray(0,-o);for(let c=0;c<o;c++)if(n[s-c-1]!==o)throw new Error("aes/pcks5: wrong padding");return a}function padPCKS(n){const e=new Uint8Array(16),s=u32(e);e.set(n);const o=BLOCK_SIZE-n.length;for(let a=BLOCK_SIZE-o;a<BLOCK_SIZE;a++)e[a]=o;return s}const cbc=wrapCipher({blockSize:16,nonceLength:16},function n(e,s,o={}){bytes(e),bytes(s,16);const a=!o.disablePadding;return{encrypt:(c,f)=>{const h=expandKeyLE(e),{b:m,o:g,out:_}=validateBlockEncrypt(c,a,f),E=u32(s);let T=E[0],w=E[1],A=E[2],R=E[3],V=0;for(;V+4<=m.length;)T^=m[V+0],w^=m[V+1],A^=m[V+2],R^=m[V+3],{s0:T,s1:w,s2:A,s3:R}=encrypt$2(h,T,w,A,R),g[V++]=T,g[V++]=w,g[V++]=A,g[V++]=R;if(a){const te=padPCKS(c.subarray(V*4));T^=te[0],w^=te[1],A^=te[2],R^=te[3],{s0:T,s1:w,s2:A,s3:R}=encrypt$2(h,T,w,A,R),g[V++]=T,g[V++]=w,g[V++]=A,g[V++]=R}return h.fill(0),_},decrypt:(c,f)=>{validateBlockDecrypt(c);const h=expandKeyDecLE(e),m=u32(s),g=getDst(c.length,f),_=u32(c),E=u32(g);let T=m[0],w=m[1],A=m[2],R=m[3];for(let V=0;V+4<=_.length;){const te=T,se=w,re=A,ye=R;T=_[V+0],w=_[V+1],A=_[V+2],R=_[V+3];const{s0:D,s1:ae,s2:z,s3:H}=decrypt$2(h,T,w,A,R);E[V++]=D^te,E[V++]=ae^se,E[V++]=z^re,E[V++]=H^ye}return h.fill(0),validatePCKS(g,a)}}}),_utf8ToBytes=n=>Uint8Array.from(n.split("").map(e=>e.charCodeAt(0))),sigma16=_utf8ToBytes("expand 16-byte k"),sigma32=_utf8ToBytes("expand 32-byte k"),sigma16_32=u32(sigma16),sigma32_32=u32(sigma32);sigma32_32.slice();function rotl(n,e){return n<<e|n>>>32-e}function isAligned32(n){return n.byteOffset%4===0}const BLOCK_LEN=64,BLOCK_LEN32=16,MAX_COUNTER=2**32-1,U32_EMPTY=new Uint32Array;function runCipher(n,e,s,o,a,c,f,h){const m=a.length,g=new Uint8Array(BLOCK_LEN),_=u32(g),E=isAligned32(a)&&isAligned32(c),T=E?u32(a):U32_EMPTY,w=E?u32(c):U32_EMPTY;for(let A=0;A<m;f++){if(n(e,s,o,_,f,h),f>=MAX_COUNTER)throw new Error("arx: counter overflow");const R=Math.min(BLOCK_LEN,m-A);if(E&&R===BLOCK_LEN){const V=A/4;if(A%4!==0)throw new Error("arx: invalid block position");for(let te=0,se;te<BLOCK_LEN32;te++)se=V+te,w[se]=T[se]^_[te];A+=BLOCK_LEN;continue}for(let V=0,te;V<R;V++)te=A+V,c[te]=a[te]^g[V];A+=R}}function createCipher(n,e){const{allowShortKeys:s,extendNonceFn:o,counterLength:a,counterRight:c,rounds:f}=checkOpts({allowShortKeys:!1,counterLength:8,counterRight:!1,rounds:20},e);if(typeof n!="function")throw new Error("core must be a function");return number(a),number(f),bool(c),bool(s),(h,m,g,_,E=0)=>{bytes(h),bytes(m),bytes(g);const T=g.length;if(_||(_=new Uint8Array(T)),bytes(_),number(E),E<0||E>=MAX_COUNTER)throw new Error("arx: counter overflow");if(_.length<T)throw new Error(`arx: output (${_.length}) is shorter than data (${T})`);const w=[];let A=h.length,R,V;if(A===32)R=h.slice(),w.push(R),V=sigma32_32;else if(A===16&&s)R=new Uint8Array(32),R.set(h),R.set(h,16),V=sigma16_32,w.push(R);else throw new Error(`arx: invalid 32-byte key, got length=${A}`);isAligned32(m)||(m=m.slice(),w.push(m));const te=u32(R);if(o){if(m.length!==24)throw new Error("arx: extended nonce must be 24 bytes");o(V,te,u32(m.subarray(0,16)),te),m=m.subarray(16)}const se=16-a;if(se!==m.length)throw new Error(`arx: nonce must be ${se} or 16 bytes`);if(se!==12){const ye=new Uint8Array(12);ye.set(m,c?0:12-m.length),m=ye,w.push(m)}const re=u32(m);for(runCipher(n,V,te,re,g,_,E,f);w.length>0;)w.pop().fill(0);return _}}function chachaCore(n,e,s,o,a,c=20){let f=n[0],h=n[1],m=n[2],g=n[3],_=e[0],E=e[1],T=e[2],w=e[3],A=e[4],R=e[5],V=e[6],te=e[7],se=a,re=s[0],ye=s[1],D=s[2],ae=f,z=h,H=m,X=g,le=_,Z=E,ne=T,W=w,xe=A,de=R,oe=V,_e=te,Re=se,Ie=re,he=ye,be=D;for(let Ae=0;Ae<c;Ae+=2)ae=ae+le|0,Re=rotl(Re^ae,16),xe=xe+Re|0,le=rotl(le^xe,12),ae=ae+le|0,Re=rotl(Re^ae,8),xe=xe+Re|0,le=rotl(le^xe,7),z=z+Z|0,Ie=rotl(Ie^z,16),de=de+Ie|0,Z=rotl(Z^de,12),z=z+Z|0,Ie=rotl(Ie^z,8),de=de+Ie|0,Z=rotl(Z^de,7),H=H+ne|0,he=rotl(he^H,16),oe=oe+he|0,ne=rotl(ne^oe,12),H=H+ne|0,he=rotl(he^H,8),oe=oe+he|0,ne=rotl(ne^oe,7),X=X+W|0,be=rotl(be^X,16),_e=_e+be|0,W=rotl(W^_e,12),X=X+W|0,be=rotl(be^X,8),_e=_e+be|0,W=rotl(W^_e,7),ae=ae+Z|0,be=rotl(be^ae,16),oe=oe+be|0,Z=rotl(Z^oe,12),ae=ae+Z|0,be=rotl(be^ae,8),oe=oe+be|0,Z=rotl(Z^oe,7),z=z+ne|0,Re=rotl(Re^z,16),_e=_e+Re|0,ne=rotl(ne^_e,12),z=z+ne|0,Re=rotl(Re^z,8),_e=_e+Re|0,ne=rotl(ne^_e,7),H=H+W|0,Ie=rotl(Ie^H,16),xe=xe+Ie|0,W=rotl(W^xe,12),H=H+W|0,Ie=rotl(Ie^H,8),xe=xe+Ie|0,W=rotl(W^xe,7),X=X+le|0,he=rotl(he^X,16),de=de+he|0,le=rotl(le^de,12),X=X+le|0,he=rotl(he^X,8),de=de+he|0,le=rotl(le^de,7);let Se=0;o[Se++]=f+ae|0,o[Se++]=h+z|0,o[Se++]=m+H|0,o[Se++]=g+X|0,o[Se++]=_+le|0,o[Se++]=E+Z|0,o[Se++]=T+ne|0,o[Se++]=w+W|0,o[Se++]=A+xe|0,o[Se++]=R+de|0,o[Se++]=V+oe|0,o[Se++]=te+_e|0,o[Se++]=se+Re|0,o[Se++]=re+Ie|0,o[Se++]=ye+he|0,o[Se++]=D+be|0}const chacha20=createCipher(chachaCore,{counterRight:!1,counterLength:4,allowShortKeys:!1});let HMAC$1=class extends Hash$1{constructor(e,s){super(),this.finished=!1,this.destroyed=!1,assert.hash(e);const o=toBytes$1(s);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,c=new Uint8Array(a);c.set(o.length>a?e.create().update(o).digest():o);for(let f=0;f<c.length;f++)c[f]^=54;this.iHash.update(c),this.oHash=e.create();for(let f=0;f<c.length;f++)c[f]^=106;this.oHash.update(c),c.fill(0)}update(e){return assert.exists(this),this.iHash.update(e),this}digestInto(e){assert.exists(this),assert.bytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:a,destroyed:c,blockLen:f,outputLen:h}=this;return e=e,e.finished=a,e.destroyed=c,e.blockLen=f,e.outputLen=h,e.oHash=s._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};const hmac$1=(n,e,s)=>new HMAC$1(n,e).update(s).digest();hmac$1.create=(n,e)=>new HMAC$1(n,e);function extract(n,e,s){return assert.hash(n),hmac$1(n,toBytes$1(s),toBytes$1(e))}const HKDF_COUNTER=new Uint8Array([0]),EMPTY_BUFFER=new Uint8Array;function expand(n,e,s,o=32){if(assert.hash(n),assert.number(o),o>255*n.outputLen)throw new Error("Length should be <= 255*HashLen");const a=Math.ceil(o/n.outputLen);s===void 0&&(s=EMPTY_BUFFER);const c=new Uint8Array(a*n.outputLen),f=hmac$1.create(n,e),h=f._cloneInto(),m=new Uint8Array(f.outputLen);for(let g=0;g<a;g++)HKDF_COUNTER[0]=g+1,h.update(g===0?EMPTY_BUFFER:m).update(s).update(HKDF_COUNTER).digestInto(m),c.set(m,n.outputLen*g),f._cloneInto(h);return f.destroy(),h.destroy(),m.fill(0),HKDF_COUNTER.fill(0),c.slice(0,o)}var __defProp=Object.defineProperty,__export=(n,e)=>{for(var s in e)__defProp(n,s,{get:e[s],enumerable:!0})},verifiedSymbol=Symbol("verified"),isRecord=n=>n instanceof Object;function validateEvent(n){if(!isRecord(n)||typeof n.kind!="number"||typeof n.content!="string"||typeof n.created_at!="number"||typeof n.pubkey!="string"||!n.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(n.tags))return!1;for(let e=0;e<n.tags.length;e++){let s=n.tags[e];if(!Array.isArray(s))return!1;for(let o=0;o<s.length;o++)if(typeof s[o]!="string")return!1}return!0}var utils_exports={};__export(utils_exports,{Queue:()=>Queue$1,QueueNode:()=>QueueNode,binarySearch:()=>binarySearch,bytesToHex:()=>bytesToHex$1,hexToBytes:()=>hexToBytes$1,insertEventIntoAscendingList:()=>insertEventIntoAscendingList,insertEventIntoDescendingList:()=>insertEventIntoDescendingList,normalizeURL:()=>normalizeURL,utf8Decoder:()=>utf8Decoder,utf8Encoder:()=>utf8Encoder});var utf8Decoder=new TextDecoder("utf-8"),utf8Encoder=new TextEncoder;function normalizeURL(n){try{n.indexOf("://")===-1&&(n="wss://"+n);let e=new URL(n);return e.pathname=e.pathname.replace(/\/+/g,"/"),e.pathname.endsWith("/")&&(e.pathname=e.pathname.slice(0,-1)),(e.port==="80"&&e.protocol==="ws:"||e.port==="443"&&e.protocol==="wss:")&&(e.port=""),e.searchParams.sort(),e.hash="",e.toString()}catch{throw new Error(`Invalid URL: ${n}`)}}function insertEventIntoDescendingList(n,e){const[s,o]=binarySearch(n,a=>e.id===a.id?0:e.created_at===a.created_at?-1:a.created_at-e.created_at);return o||n.splice(s,0,e),n}function insertEventIntoAscendingList(n,e){const[s,o]=binarySearch(n,a=>e.id===a.id?0:e.created_at===a.created_at?-1:e.created_at-a.created_at);return o||n.splice(s,0,e),n}function binarySearch(n,e){let s=0,o=n.length-1;for(;s<=o;){const a=Math.floor((s+o)/2),c=e(n[a]);if(c===0)return[a,!0];c<0?o=a-1:s=a+1}return[s,!1]}var QueueNode=class{value;next=null;prev=null;constructor(n){this.value=n}},Queue$1=class{first;last;constructor(){this.first=null,this.last=null}enqueue(e){const s=new QueueNode(e);return this.last?this.last===this.first?(this.last=s,this.last.prev=this.first,this.first.next=s):(s.prev=this.last,this.last.next=s,this.last=s):(this.first=s,this.last=s),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){const s=this.first;return this.first=null,this.last=null,s.value}const e=this.first;return this.first=e.next,this.first&&(this.first.prev=null),e.value}},JS=class{generateSecretKey(){return schnorr$1.utils.randomPrivateKey()}getPublicKey(n){return bytesToHex$1(schnorr$1.getPublicKey(n))}finalizeEvent(n,e){const s=n;return s.pubkey=bytesToHex$1(schnorr$1.getPublicKey(e)),s.id=getEventHash$1(s),s.sig=bytesToHex$1(schnorr$1.sign(getEventHash$1(s),e)),s[verifiedSymbol]=!0,s}verifyEvent(n){if(typeof n[verifiedSymbol]=="boolean")return n[verifiedSymbol];const e=getEventHash$1(n);if(e!==n.id)return n[verifiedSymbol]=!1,!1;try{const s=schnorr$1.verify(n.sig,e,n.pubkey);return n[verifiedSymbol]=s,s}catch{return n[verifiedSymbol]=!1,!1}}};function serializeEvent(n){if(!validateEvent(n))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content])}function getEventHash$1(n){let e=sha256$2(utf8Encoder.encode(serializeEvent(n)));return bytesToHex$1(e)}var i=new JS,generateSecretKey=i.generateSecretKey,getPublicKey=i.getPublicKey,finalizeEvent=i.finalizeEvent,verifyEvent=i.verifyEvent,kinds_exports={};__export(kinds_exports,{Application:()=>Application,BadgeAward:()=>BadgeAward,BadgeDefinition:()=>BadgeDefinition,BlockedRelaysList:()=>BlockedRelaysList,BookmarkList:()=>BookmarkList,Bookmarksets:()=>Bookmarksets,Calendar:()=>Calendar,CalendarEventRSVP:()=>CalendarEventRSVP,ChannelCreation:()=>ChannelCreation,ChannelHideMessage:()=>ChannelHideMessage,ChannelMessage:()=>ChannelMessage,ChannelMetadata:()=>ChannelMetadata,ChannelMuteUser:()=>ChannelMuteUser,ClassifiedListing:()=>ClassifiedListing,ClientAuth:()=>ClientAuth,CommunitiesList:()=>CommunitiesList,CommunityDefinition:()=>CommunityDefinition,CommunityPostApproval:()=>CommunityPostApproval,Contacts:()=>Contacts,CreateOrUpdateProduct:()=>CreateOrUpdateProduct,CreateOrUpdateStall:()=>CreateOrUpdateStall,Curationsets:()=>Curationsets,Date:()=>Date2,DirectMessageRelaysList:()=>DirectMessageRelaysList,DraftClassifiedListing:()=>DraftClassifiedListing,DraftLong:()=>DraftLong,Emojisets:()=>Emojisets,EncryptedDirectMessage:()=>EncryptedDirectMessage,EventDeletion:()=>EventDeletion,FileMetadata:()=>FileMetadata,FileServerPreference:()=>FileServerPreference,Followsets:()=>Followsets,GenericRepost:()=>GenericRepost,Genericlists:()=>Genericlists,GiftWrap:()=>GiftWrap,HTTPAuth:()=>HTTPAuth,Handlerinformation:()=>Handlerinformation,Handlerrecommendation:()=>Handlerrecommendation,Highlights:()=>Highlights,InterestsList:()=>InterestsList,Interestsets:()=>Interestsets,JobFeedback:()=>JobFeedback,JobRequest:()=>JobRequest,JobResult:()=>JobResult,Label:()=>Label,LightningPubRPC:()=>LightningPubRPC,LiveChatMessage:()=>LiveChatMessage,LiveEvent:()=>LiveEvent,LongFormArticle:()=>LongFormArticle,Metadata:()=>Metadata,Mutelist:()=>Mutelist,NWCWalletInfo:()=>NWCWalletInfo,NWCWalletRequest:()=>NWCWalletRequest,NWCWalletResponse:()=>NWCWalletResponse,NostrConnect:()=>NostrConnect,OpenTimestamps:()=>OpenTimestamps,Pinlist:()=>Pinlist,PrivateDirectMessage:()=>PrivateDirectMessage,ProblemTracker:()=>ProblemTracker,ProfileBadges:()=>ProfileBadges,PublicChatsList:()=>PublicChatsList,Reaction:()=>Reaction,RecommendRelay:()=>RecommendRelay,RelayList:()=>RelayList,Relaysets:()=>Relaysets,Report:()=>Report,Reporting:()=>Reporting,Repost:()=>Repost,Seal:()=>Seal,SearchRelaysList:()=>SearchRelaysList,ShortTextNote:()=>ShortTextNote,Time:()=>Time,UserEmojiList:()=>UserEmojiList,UserStatuses:()=>UserStatuses,Zap:()=>Zap,ZapGoal:()=>ZapGoal,ZapRequest:()=>ZapRequest,classifyKind:()=>classifyKind,isAddressableKind:()=>isAddressableKind,isEphemeralKind:()=>isEphemeralKind,isKind:()=>isKind,isRegularKind:()=>isRegularKind,isReplaceableKind:()=>isReplaceableKind});function isRegularKind(n){return 1e3<=n&&n<1e4||[1,2,4,5,6,7,8,16,40,41,42,43,44].includes(n)}function isReplaceableKind(n){return[0,3].includes(n)||1e4<=n&&n<2e4}function isEphemeralKind(n){return 2e4<=n&&n<3e4}function isAddressableKind(n){return 3e4<=n&&n<4e4}function classifyKind(n){return isRegularKind(n)?"regular":isReplaceableKind(n)?"replaceable":isEphemeralKind(n)?"ephemeral":isAddressableKind(n)?"parameterized":"unknown"}function isKind(n,e){const s=e instanceof Array?e:[e];return validateEvent(n)&&s.includes(n.kind)||!1}var Metadata=0,ShortTextNote=1,RecommendRelay=2,Contacts=3,EncryptedDirectMessage=4,EventDeletion=5,Repost=6,Reaction=7,BadgeAward=8,Seal=13,PrivateDirectMessage=14,GenericRepost=16,ChannelCreation=40,ChannelMetadata=41,ChannelMessage=42,ChannelHideMessage=43,ChannelMuteUser=44,OpenTimestamps=1040,GiftWrap=1059,FileMetadata=1063,LiveChatMessage=1311,ProblemTracker=1971,Report=1984,Reporting=1984,Label=1985,CommunityPostApproval=4550,JobRequest=5999,JobResult=6999,JobFeedback=7e3,ZapGoal=9041,ZapRequest=9734,Zap=9735,Highlights=9802,Mutelist=1e4,Pinlist=10001,RelayList=10002,BookmarkList=10003,CommunitiesList=10004,PublicChatsList=10005,BlockedRelaysList=10006,SearchRelaysList=10007,InterestsList=10015,UserEmojiList=10030,DirectMessageRelaysList=10050,FileServerPreference=10096,NWCWalletInfo=13194,LightningPubRPC=21e3,ClientAuth=22242,NWCWalletRequest=23194,NWCWalletResponse=23195,NostrConnect=24133,HTTPAuth=27235,Followsets=3e4,Genericlists=30001,Relaysets=30002,Bookmarksets=30003,Curationsets=30004,ProfileBadges=30008,BadgeDefinition=30009,Interestsets=30015,CreateOrUpdateStall=30017,CreateOrUpdateProduct=30018,LongFormArticle=30023,DraftLong=30024,Emojisets=30030,Application=30078,LiveEvent=30311,UserStatuses=30315,ClassifiedListing=30402,DraftClassifiedListing=30403,Date2=31922,Time=31923,Calendar=31924,CalendarEventRSVP=31925,Handlerrecommendation=31989,Handlerinformation=31990,CommunityDefinition=34550;function matchFilter(n,e){if(n.ids&&n.ids.indexOf(e.id)===-1||n.kinds&&n.kinds.indexOf(e.kind)===-1||n.authors&&n.authors.indexOf(e.pubkey)===-1)return!1;for(let s in n)if(s[0]==="#"){let o=s.slice(1),a=n[`#${o}`];if(a&&!e.tags.find(([c,f])=>c===s.slice(1)&&a.indexOf(f)!==-1))return!1}return!(n.since&&e.created_at<n.since||n.until&&e.created_at>n.until)}function matchFilters(n,e){for(let s=0;s<n.length;s++)if(matchFilter(n[s],e))return!0;return!1}var fakejson_exports={};__export(fakejson_exports,{getHex64:()=>getHex64,getInt:()=>getInt,getSubscriptionId:()=>getSubscriptionId,matchEventId:()=>matchEventId,matchEventKind:()=>matchEventKind,matchEventPubkey:()=>matchEventPubkey});function getHex64(n,e){let s=e.length+3,o=n.indexOf(`"${e}":`)+s,a=n.slice(o).indexOf('"')+o+1;return n.slice(a,a+64)}function getInt(n,e){let s=e.length,o=n.indexOf(`"${e}":`)+s+3,a=n.slice(o),c=Math.min(a.indexOf(","),a.indexOf("}"));return parseInt(a.slice(0,c),10)}function getSubscriptionId(n){let e=n.slice(0,22).indexOf('"EVENT"');if(e===-1)return null;let s=n.slice(e+7+1).indexOf('"');if(s===-1)return null;let o=e+7+1+s,a=n.slice(o+1,80).indexOf('"');if(a===-1)return null;let c=o+1+a;return n.slice(o+1,c)}function matchEventId(n,e){return e===getHex64(n,"id")}function matchEventPubkey(n,e){return e===getHex64(n,"pubkey")}function matchEventKind(n,e){return e===getInt(n,"kind")}var nip42_exports={};__export(nip42_exports,{makeAuthEvent:()=>makeAuthEvent});function makeAuthEvent(n,e){return{kind:ClientAuth,created_at:Math.floor(Date.now()/1e3),tags:[["relay",n],["challenge",e]],content:""}}var _WebSocket;try{_WebSocket=WebSocket}catch{}var _WebSocket2;try{_WebSocket2=WebSocket}catch{}var nip19_exports={};__export(nip19_exports,{BECH32_REGEX:()=>BECH32_REGEX$1,Bech32MaxSize:()=>Bech32MaxSize,NostrTypeGuard:()=>NostrTypeGuard,decode:()=>decode,decodeNostrURI:()=>decodeNostrURI,encodeBytes:()=>encodeBytes,naddrEncode:()=>naddrEncode,neventEncode:()=>neventEncode,noteEncode:()=>noteEncode,nprofileEncode:()=>nprofileEncode,npubEncode:()=>npubEncode,nsecEncode:()=>nsecEncode});var NostrTypeGuard={isNProfile:n=>/^nprofile1[a-z\d]+$/.test(n||""),isNEvent:n=>/^nevent1[a-z\d]+$/.test(n||""),isNAddr:n=>/^naddr1[a-z\d]+$/.test(n||""),isNSec:n=>/^nsec1[a-z\d]{58}$/.test(n||""),isNPub:n=>/^npub1[a-z\d]{58}$/.test(n||""),isNote:n=>/^note1[a-z\d]+$/.test(n||""),isNcryptsec:n=>/^ncryptsec1[a-z\d]+$/.test(n||"")},Bech32MaxSize=5e3,BECH32_REGEX$1=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function integerToUint8Array(n){const e=new Uint8Array(4);return e[0]=n>>24&255,e[1]=n>>16&255,e[2]=n>>8&255,e[3]=n&255,e}function decodeNostrURI(n){try{return n.startsWith("nostr:")&&(n=n.substring(6)),decode(n)}catch{return{type:"invalid",data:null}}}function decode(n){let{prefix:e,words:s}=bech32.decode(n,Bech32MaxSize),o=new Uint8Array(bech32.fromWords(s));switch(e){case"nprofile":{let a=parseTLV(o);if(!a[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(a[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:bytesToHex$1(a[0][0]),relays:a[1]?a[1].map(c=>utf8Decoder.decode(c)):[]}}}case"nevent":{let a=parseTLV(o);if(!a[0]?.[0])throw new Error("missing TLV 0 for nevent");if(a[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(a[2]&&a[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(a[3]&&a[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:bytesToHex$1(a[0][0]),relays:a[1]?a[1].map(c=>utf8Decoder.decode(c)):[],author:a[2]?.[0]?bytesToHex$1(a[2][0]):void 0,kind:a[3]?.[0]?parseInt(bytesToHex$1(a[3][0]),16):void 0}}}case"naddr":{let a=parseTLV(o);if(!a[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!a[2]?.[0])throw new Error("missing TLV 2 for naddr");if(a[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!a[3]?.[0])throw new Error("missing TLV 3 for naddr");if(a[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:utf8Decoder.decode(a[0][0]),pubkey:bytesToHex$1(a[2][0]),kind:parseInt(bytesToHex$1(a[3][0]),16),relays:a[1]?a[1].map(c=>utf8Decoder.decode(c)):[]}}}case"nsec":return{type:e,data:o};case"npub":case"note":return{type:e,data:bytesToHex$1(o)};default:throw new Error(`unknown prefix ${e}`)}}function parseTLV(n){let e={},s=n;for(;s.length>0;){let o=s[0],a=s[1],c=s.slice(2,2+a);if(s=s.slice(2+a),c.length<a)throw new Error(`not enough data to read on TLV ${o}`);e[o]=e[o]||[],e[o].push(c)}return e}function nsecEncode(n){return encodeBytes("nsec",n)}function npubEncode(n){return encodeBytes("npub",hexToBytes$1(n))}function noteEncode(n){return encodeBytes("note",hexToBytes$1(n))}function encodeBech32(n,e){let s=bech32.toWords(e);return bech32.encode(n,s,Bech32MaxSize)}function encodeBytes(n,e){return encodeBech32(n,e)}function nprofileEncode(n){let e=encodeTLV({0:[hexToBytes$1(n.pubkey)],1:(n.relays||[]).map(s=>utf8Encoder.encode(s))});return encodeBech32("nprofile",e)}function neventEncode(n){let e;n.kind!==void 0&&(e=integerToUint8Array(n.kind));let s=encodeTLV({0:[hexToBytes$1(n.id)],1:(n.relays||[]).map(o=>utf8Encoder.encode(o)),2:n.author?[hexToBytes$1(n.author)]:[],3:e?[new Uint8Array(e)]:[]});return encodeBech32("nevent",s)}function naddrEncode(n){let e=new ArrayBuffer(4);new DataView(e).setUint32(0,n.kind,!1);let s=encodeTLV({0:[utf8Encoder.encode(n.identifier)],1:(n.relays||[]).map(o=>utf8Encoder.encode(o)),2:[hexToBytes$1(n.pubkey)],3:[new Uint8Array(e)]});return encodeBech32("naddr",s)}function encodeTLV(n){let e=[];return Object.entries(n).reverse().forEach(([s,o])=>{o.forEach(a=>{let c=new Uint8Array(a.length+2);c.set([parseInt(s)],0),c.set([a.length],1),c.set(a,2),e.push(c)})}),concatBytes$1(...e)}var nip04_exports={};__export(nip04_exports,{decrypt:()=>decrypt$1,encrypt:()=>encrypt$1});function encrypt$1(n,e,s){const o=n instanceof Uint8Array?bytesToHex$1(n):n,a=secp256k1$1.getSharedSecret(o,"02"+e),c=getNormalizedX(a);let f=Uint8Array.from(randomBytes$1(16)),h=utf8Encoder.encode(s),m=cbc(c,f).encrypt(h),g=base64.encode(new Uint8Array(m)),_=base64.encode(new Uint8Array(f.buffer));return`${g}?iv=${_}`}function decrypt$1(n,e,s){const o=n instanceof Uint8Array?bytesToHex$1(n):n;let[a,c]=s.split("?iv="),f=secp256k1$1.getSharedSecret(o,"02"+e),h=getNormalizedX(f),m=base64.decode(c),g=base64.decode(a),_=cbc(h,m).decrypt(g);return utf8Decoder.decode(_)}function getNormalizedX(n){return n.slice(1,33)}var nip05_exports={};__export(nip05_exports,{NIP05_REGEX:()=>NIP05_REGEX$1,isNip05:()=>isNip05,isValid:()=>isValid,queryProfile:()=>queryProfile,searchDomain:()=>searchDomain,useFetchImplementation:()=>useFetchImplementation});var NIP05_REGEX$1=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,isNip05=n=>NIP05_REGEX$1.test(n||""),_fetch;try{_fetch=fetch}catch(n){}function useFetchImplementation(n){_fetch=n}async function searchDomain(n,e=""){try{const s=`https://${n}/.well-known/nostr.json?name=${e}`,o=await _fetch(s,{redirect:"manual"});if(o.status!==200)throw Error("Wrong response code");return(await o.json()).names}catch{return{}}}async function queryProfile(n){const e=n.match(NIP05_REGEX$1);if(!e)return null;const[,s="_",o]=e;try{const a=`https://${o}/.well-known/nostr.json?name=${s}`,c=await _fetch(a,{redirect:"manual"});if(c.status!==200)throw Error("Wrong response code");const f=await c.json(),h=f.names[s];return h?{pubkey:h,relays:f.relays?.[h]}:null}catch{return null}}async function isValid(n,e){const s=await queryProfile(e);return s?s.pubkey===n:!1}var nip10_exports={};__export(nip10_exports,{parse:()=>parse});function parse(n){const e={reply:void 0,root:void 0,mentions:[],profiles:[],quotes:[]};let s,o;for(let a=n.tags.length-1;a>=0;a--){const c=n.tags[a];if(c[0]==="e"&&c[1]){const[f,h,m,g,_]=c,E={id:h,relays:m?[m]:[],author:_};if(g==="root"){e.root=E;continue}if(g==="reply"){e.reply=E;continue}if(g==="mention"){e.mentions.push(E);continue}s?o=E:s=E,e.mentions.push(E);continue}if(c[0]==="q"&&c[1]){const[f,h,m]=c;e.quotes.push({id:h,relays:m?[m]:[]})}if(c[0]==="p"&&c[1]){e.profiles.push({pubkey:c[1],relays:c[2]?[c[2]]:[]});continue}}return e.root||(e.root=o||s||e.reply),e.reply||(e.reply=s||e.root),[e.reply,e.root].forEach(a=>{if(!a)return;let c=e.mentions.indexOf(a);if(c!==-1&&e.mentions.splice(c,1),a.author){let f=e.profiles.find(h=>h.pubkey===a.author);f&&f.relays&&(a.relays||(a.relays=[]),f.relays.forEach(h=>{a.relays?.indexOf(h)===-1&&a.relays.push(h)}),f.relays=a.relays)}}),e.mentions.forEach(a=>{if(a.author){let c=e.profiles.find(f=>f.pubkey===a.author);c&&c.relays&&(a.relays||(a.relays=[]),c.relays.forEach(f=>{a.relays.indexOf(f)===-1&&a.relays.push(f)}),c.relays=a.relays)}}),e}var nip11_exports={};__export(nip11_exports,{fetchRelayInformation:()=>fetchRelayInformation,useFetchImplementation:()=>useFetchImplementation2});var _fetch2;try{_fetch2=fetch}catch{}function useFetchImplementation2(n){_fetch2=n}async function fetchRelayInformation(n){return await(await fetch(n.replace("ws://","http://").replace("wss://","https://"),{headers:{Accept:"application/nostr+json"}})).json()}var nip13_exports={};__export(nip13_exports,{fastEventHash:()=>fastEventHash,getPow:()=>getPow,minePow:()=>minePow});function getPow(n){let e=0;for(let s=0;s<64;s+=8){const o=parseInt(n.substring(s,s+8),16);if(o===0)e+=32;else{e+=Math.clz32(o);break}}return e}function minePow(n,e){let s=0;const o=n,a=["nonce",s.toString(),e.toString()];for(o.tags.push(a);;){const c=Math.floor(new Date().getTime()/1e3);if(c!==o.created_at&&(s=0,o.created_at=c),a[1]=(++s).toString(),o.id=fastEventHash(o),getPow(o.id)>=e)break}return o}function fastEventHash(n){return bytesToHex$1(sha256$2(utf8Encoder.encode(JSON.stringify([0,n.pubkey,n.created_at,n.kind,n.tags,n.content]))))}var nip17_exports={};__export(nip17_exports,{unwrapEvent:()=>unwrapEvent2,unwrapManyEvents:()=>unwrapManyEvents2,wrapEvent:()=>wrapEvent2,wrapManyEvents:()=>wrapManyEvents2});var nip59_exports={};__export(nip59_exports,{createRumor:()=>createRumor,createSeal:()=>createSeal,createWrap:()=>createWrap,unwrapEvent:()=>unwrapEvent,unwrapManyEvents:()=>unwrapManyEvents,wrapEvent:()=>wrapEvent$1,wrapManyEvents:()=>wrapManyEvents});var nip44_exports={};__export(nip44_exports,{decrypt:()=>decrypt2,encrypt:()=>encrypt2,getConversationKey:()=>getConversationKey,v2:()=>v2});var minPlaintextSize=1,maxPlaintextSize=65535;function getConversationKey(n,e){const s=secp256k1$1.getSharedSecret(n,"02"+e).subarray(1,33);return extract(sha256$2,s,"nip44-v2")}function getMessageKeys(n,e){const s=expand(sha256$2,n,e,76);return{chacha_key:s.subarray(0,32),chacha_nonce:s.subarray(32,44),hmac_key:s.subarray(44,76)}}function calcPaddedLen(n){if(!Number.isSafeInteger(n)||n<1)throw new Error("expected positive integer");if(n<=32)return 32;const e=1<<Math.floor(Math.log2(n-1))+1,s=e<=256?32:e/8;return s*(Math.floor((n-1)/s)+1)}function writeU16BE(n){if(!Number.isSafeInteger(n)||n<minPlaintextSize||n>maxPlaintextSize)throw new Error("invalid plaintext size: must be between 1 and 65535 bytes");const e=new Uint8Array(2);return new DataView(e.buffer).setUint16(0,n,!1),e}function pad(n){const e=utf8Encoder.encode(n),s=e.length,o=writeU16BE(s),a=new Uint8Array(calcPaddedLen(s)-s);return concatBytes$1(o,e,a)}function unpad(n){const e=new DataView(n.buffer).getUint16(0),s=n.subarray(2,2+e);if(e<minPlaintextSize||e>maxPlaintextSize||s.length!==e||n.length!==2+calcPaddedLen(e))throw new Error("invalid padding");return utf8Decoder.decode(s)}function hmacAad(n,e,s){if(s.length!==32)throw new Error("AAD associated data must be 32 bytes");const o=concatBytes$1(s,e);return hmac$1(sha256$2,n,o)}function decodePayload(n){if(typeof n!="string")throw new Error("payload must be a valid string");const e=n.length;if(e<132||e>87472)throw new Error("invalid payload length: "+e);if(n[0]==="#")throw new Error("unknown encryption version");let s;try{s=base64.decode(n)}catch(c){throw new Error("invalid base64: "+c.message)}const o=s.length;if(o<99||o>65603)throw new Error("invalid data length: "+o);const a=s[0];if(a!==2)throw new Error("unknown encryption version "+a);return{nonce:s.subarray(1,33),ciphertext:s.subarray(33,-32),mac:s.subarray(-32)}}function encrypt2(n,e,s=randomBytes$1(32)){const{chacha_key:o,chacha_nonce:a,hmac_key:c}=getMessageKeys(e,s),f=pad(n),h=chacha20(o,a,f),m=hmacAad(c,h,s);return base64.encode(concatBytes$1(new Uint8Array([2]),s,h,m))}function decrypt2(n,e){const{nonce:s,ciphertext:o,mac:a}=decodePayload(n),{chacha_key:c,chacha_nonce:f,hmac_key:h}=getMessageKeys(e,s),m=hmacAad(h,o,s);if(!equalBytes(m,a))throw new Error("invalid MAC");const g=chacha20(c,f,o);return unpad(g)}var v2={utils:{getConversationKey,calcPaddedLen},encrypt:encrypt2,decrypt:decrypt2},TWO_DAYS=2880*60,now=()=>Math.round(Date.now()/1e3),randomNow=()=>Math.round(now()-Math.random()*TWO_DAYS),nip44ConversationKey=(n,e)=>getConversationKey(n,e),nip44Encrypt=(n,e,s)=>encrypt2(JSON.stringify(n),nip44ConversationKey(e,s)),nip44Decrypt=(n,e)=>JSON.parse(decrypt2(n.content,nip44ConversationKey(e,n.pubkey)));function createRumor(n,e){const s={created_at:now(),content:"",tags:[],...n,pubkey:getPublicKey(e)};return s.id=getEventHash$1(s),s}function createSeal(n,e,s){return finalizeEvent({kind:Seal,content:nip44Encrypt(n,e,s),created_at:randomNow(),tags:[]},e)}function createWrap(n,e){const s=generateSecretKey();return finalizeEvent({kind:GiftWrap,content:nip44Encrypt(n,s,e),created_at:randomNow(),tags:[["p",e]]},s)}function wrapEvent$1(n,e,s){const o=createRumor(n,e),a=createSeal(o,e,s);return createWrap(a,s)}function wrapManyEvents(n,e,s){if(!s||s.length===0)throw new Error("At least one recipient is required.");const o=getPublicKey(e),a=[wrapEvent$1(n,e,o)];return s.forEach(c=>{a.push(wrapEvent$1(n,e,c))}),a}function unwrapEvent(n,e){const s=nip44Decrypt(n,e);return nip44Decrypt(s,e)}function unwrapManyEvents(n,e){let s=[];return n.forEach(o=>{s.push(unwrapEvent(o,e))}),s.sort((o,a)=>o.created_at-a.created_at),s}function createEvent(n,e,s,o){const a={created_at:Math.ceil(Date.now()/1e3),kind:PrivateDirectMessage,tags:[],content:e};return(Array.isArray(n)?n:[n]).forEach(({publicKey:f,relayUrl:h})=>{a.tags.push(h?["p",f,h]:["p",f])}),o&&a.tags.push(["e",o.eventId,o.relayUrl||"","reply"]),s&&a.tags.push(["subject",s]),a}function wrapEvent2(n,e,s,o,a){const c=createEvent(e,s,o,a);return wrapEvent$1(c,n,e.publicKey)}function wrapManyEvents2(n,e,s,o,a){if(!e||e.length===0)throw new Error("At least one recipient is required.");return[{publicKey:getPublicKey(n)},...e].map(f=>wrapEvent2(n,f,s,o,a))}var unwrapEvent2=unwrapEvent,unwrapManyEvents2=unwrapManyEvents,nip18_exports={};__export(nip18_exports,{finishRepostEvent:()=>finishRepostEvent,getRepostedEvent:()=>getRepostedEvent,getRepostedEventPointer:()=>getRepostedEventPointer});function finishRepostEvent(n,e,s,o){let a;const c=[...n.tags??[],["e",e.id,s],["p",e.pubkey]];return e.kind===ShortTextNote?a=Repost:(a=GenericRepost,c.push(["k",String(e.kind)])),finalizeEvent({kind:a,tags:c,content:n.content===""||e.tags?.find(f=>f[0]==="-")?"":JSON.stringify(e),created_at:n.created_at},o)}function getRepostedEventPointer(n){if(![Repost,GenericRepost].includes(n.kind))return;let e,s;for(let o=n.tags.length-1;o>=0&&(e===void 0||s===void 0);o--){const a=n.tags[o];a.length>=2&&(a[0]==="e"&&e===void 0?e=a:a[0]==="p"&&s===void 0&&(s=a))}if(e!==void 0)return{id:e[1],relays:[e[2],s?.[2]].filter(o=>typeof o=="string"),author:s?.[1]}}function getRepostedEvent(n,{skipVerification:e}={}){const s=getRepostedEventPointer(n);if(s===void 0||n.content==="")return;let o;try{o=JSON.parse(n.content)}catch{return}if(o.id===s.id&&!(!e&&!verifyEvent(o)))return o}var nip21_exports={};__export(nip21_exports,{NOSTR_URI_REGEX:()=>NOSTR_URI_REGEX,parse:()=>parse2,test:()=>test});var NOSTR_URI_REGEX=new RegExp(`nostr:(${BECH32_REGEX$1.source})`);function test(n){return typeof n=="string"&&new RegExp(`^${NOSTR_URI_REGEX.source}$`).test(n)}function parse2(n){const e=n.match(new RegExp(`^${NOSTR_URI_REGEX.source}$`));if(!e)throw new Error(`Invalid Nostr URI: ${n}`);return{uri:e[0],value:e[1],decoded:decode(e[1])}}var nip25_exports={};__export(nip25_exports,{finishReactionEvent:()=>finishReactionEvent,getReactedEventPointer:()=>getReactedEventPointer});function finishReactionEvent(n,e,s){const o=e.tags.filter(a=>a.length>=2&&(a[0]==="e"||a[0]==="p"));return finalizeEvent({...n,kind:Reaction,tags:[...n.tags??[],...o,["e",e.id],["p",e.pubkey]],content:n.content??"+"},s)}function getReactedEventPointer(n){if(n.kind!==Reaction)return;let e,s;for(let o=n.tags.length-1;o>=0&&(e===void 0||s===void 0);o--){const a=n.tags[o];a.length>=2&&(a[0]==="e"&&e===void 0?e=a:a[0]==="p"&&s===void 0&&(s=a))}if(!(e===void 0||s===void 0))return{id:e[1],relays:[e[2],s[2]].filter(o=>o!==void 0),author:s[1]}}var nip27_exports={};__export(nip27_exports,{parse:()=>parse3});var noCharacter=/\W/m,noURLCharacter=/\W |\W$|$|,| /m;function*parse3(n){const e=n.length;let s=0,o=0;for(;o<e;){let a=n.indexOf(":",o);if(a===-1)break;if(n.substring(a-5,a)==="nostr"){const c=n.substring(a+60).match(noCharacter),f=c?a+60+c.index:e;try{let h,{data:m,type:g}=decode(n.substring(a+1,f));switch(g){case"npub":h={pubkey:m};break;case"nsec":case"note":o=f+1;continue;default:h=m}s!==a-5&&(yield{type:"text",text:n.substring(s,a-5)}),yield{type:"reference",pointer:h},o=f,s=o;continue}catch{o=a+1;continue}}else if(n.substring(a-5,a)==="https"||n.substring(a-4,a)==="http"){const c=n.substring(a+4).match(noURLCharacter),f=c?a+4+c.index:e,h=n[a-1]==="s"?5:4;try{let m=new URL(n.substring(a-h,f));if(m.hostname.indexOf(".")===-1)throw new Error("invalid url");if(s!==a-h&&(yield{type:"text",text:n.substring(s,a-h)}),m.pathname.endsWith(".png")||m.pathname.endsWith(".jpg")||m.pathname.endsWith(".jpeg")||m.pathname.endsWith(".gif")||m.pathname.endsWith(".webp")){yield{type:"image",url:m.toString()},o=f,s=o;continue}if(m.pathname.endsWith(".mp4")||m.pathname.endsWith(".avi")||m.pathname.endsWith(".webm")||m.pathname.endsWith(".mkv")){yield{type:"video",url:m.toString()},o=f,s=o;continue}if(m.pathname.endsWith(".mp3")||m.pathname.endsWith(".aac")||m.pathname.endsWith(".ogg")||m.pathname.endsWith(".opus")){yield{type:"audio",url:m.toString()},o=f,s=o;continue}yield{type:"url",url:m.toString()},o=f,s=o;continue}catch{o=f+1;continue}}else if(n.substring(a-3,a)==="wss"||n.substring(a-2,a)==="ws"){const c=n.substring(a+4).match(noURLCharacter),f=c?a+4+c.index:e,h=n[a-1]==="s"?3:2;try{let m=new URL(n.substring(a-h,f));if(m.hostname.indexOf(".")===-1)throw new Error("invalid ws url");s!==a-h&&(yield{type:"text",text:n.substring(s,a-h)}),yield{type:"relay",url:m.toString()},o=f,s=o;continue}catch{o=f+1;continue}}else{o=a+1;continue}}s!==e&&(yield{type:"text",text:n.substring(s)})}var nip28_exports={};__export(nip28_exports,{channelCreateEvent:()=>channelCreateEvent,channelHideMessageEvent:()=>channelHideMessageEvent,channelMessageEvent:()=>channelMessageEvent,channelMetadataEvent:()=>channelMetadataEvent,channelMuteUserEvent:()=>channelMuteUserEvent});var channelCreateEvent=(n,e)=>{let s;if(typeof n.content=="object")s=JSON.stringify(n.content);else if(typeof n.content=="string")s=n.content;else return;return finalizeEvent({kind:ChannelCreation,tags:[...n.tags??[]],content:s,created_at:n.created_at},e)},channelMetadataEvent=(n,e)=>{let s;if(typeof n.content=="object")s=JSON.stringify(n.content);else if(typeof n.content=="string")s=n.content;else return;return finalizeEvent({kind:ChannelMetadata,tags:[["e",n.channel_create_event_id],...n.tags??[]],content:s,created_at:n.created_at},e)},channelMessageEvent=(n,e)=>{const s=[["e",n.channel_create_event_id,n.relay_url,"root"]];return n.reply_to_channel_message_event_id&&s.push(["e",n.reply_to_channel_message_event_id,n.relay_url,"reply"]),finalizeEvent({kind:ChannelMessage,tags:[...s,...n.tags??[]],content:n.content,created_at:n.created_at},e)},channelHideMessageEvent=(n,e)=>{let s;if(typeof n.content=="object")s=JSON.stringify(n.content);else if(typeof n.content=="string")s=n.content;else return;return finalizeEvent({kind:ChannelHideMessage,tags:[["e",n.channel_message_event_id],...n.tags??[]],content:s,created_at:n.created_at},e)},channelMuteUserEvent=(n,e)=>{let s;if(typeof n.content=="object")s=JSON.stringify(n.content);else if(typeof n.content=="string")s=n.content;else return;return finalizeEvent({kind:ChannelMuteUser,tags:[["p",n.pubkey_to_mute],...n.tags??[]],content:s,created_at:n.created_at},e)},nip30_exports={};__export(nip30_exports,{EMOJI_SHORTCODE_REGEX:()=>EMOJI_SHORTCODE_REGEX,matchAll:()=>matchAll,regex:()=>regex,replaceAll:()=>replaceAll});var EMOJI_SHORTCODE_REGEX=/:(\w+):/,regex=()=>new RegExp(`\\B${EMOJI_SHORTCODE_REGEX.source}\\B`,"g");function*matchAll(n){const e=n.matchAll(regex());for(const s of e)try{const[o,a]=s;yield{shortcode:o,name:a,start:s.index,end:s.index+o.length}}catch{}}function replaceAll(n,e){return n.replaceAll(regex(),(s,o)=>e({shortcode:s,name:o}))}var nip39_exports={};__export(nip39_exports,{useFetchImplementation:()=>useFetchImplementation3,validateGithub:()=>validateGithub});var _fetch3;try{_fetch3=fetch}catch{}function useFetchImplementation3(n){_fetch3=n}async function validateGithub(n,e,s){try{return await(await _fetch3(`https://gist.github.com/${e}/${s}/raw`)).text()===`Verifying that I control the following Nostr public key: ${n}`}catch{return!1}}var nip47_exports={};__export(nip47_exports,{makeNwcRequestEvent:()=>makeNwcRequestEvent,parseConnectionString:()=>parseConnectionString});function parseConnectionString(n){const{host:e,pathname:s,searchParams:o}=new URL(n),a=s||e,c=o.get("relay"),f=o.get("secret");if(!a||!c||!f)throw new Error("invalid connection string");return{pubkey:a,relay:c,secret:f}}async function makeNwcRequestEvent(n,e,s){const a=encrypt$1(e,n,JSON.stringify({method:"pay_invoice",params:{invoice:s}})),c={kind:NWCWalletRequest,created_at:Math.round(Date.now()/1e3),content:a,tags:[["p",n]]};return finalizeEvent(c,e)}var nip54_exports={};__export(nip54_exports,{normalizeIdentifier:()=>normalizeIdentifier});function normalizeIdentifier(n){return n=n.trim().toLowerCase(),n=n.normalize("NFKC"),Array.from(n).map(e=>new RegExp("\\p{Letter}","u").test(e)||new RegExp("\\p{Number}","u").test(e)?e:"-").join("")}var nip57_exports={};__export(nip57_exports,{getSatoshisAmountFromBolt11:()=>getSatoshisAmountFromBolt11,getZapEndpoint:()=>getZapEndpoint,makeZapReceipt:()=>makeZapReceipt,makeZapRequest:()=>makeZapRequest,useFetchImplementation:()=>useFetchImplementation4,validateZapRequest:()=>validateZapRequest});var _fetch4;try{_fetch4=fetch}catch{}function useFetchImplementation4(n){_fetch4=n}async function getZapEndpoint(n){try{let e="",{lud06:s,lud16:o}=JSON.parse(n.content);if(s){let{words:f}=bech32.decode(s,1e3),h=bech32.fromWords(f);e=utf8Decoder.decode(h)}else if(o){let[f,h]=o.split("@");e=new URL(`/.well-known/lnurlp/${f}`,`https://${h}`).toString()}else return null;let c=await(await _fetch4(e)).json();if(c.allowsNostr&&c.nostrPubkey)return c.callback}catch{}return null}function makeZapRequest(n){let e={kind:9734,created_at:Math.round(Date.now()/1e3),content:n.comment||"",tags:[["p","pubkey"in n?n.pubkey:n.event.pubkey],["amount",n.amount.toString()],["relays",...n.relays]]};if("event"in n){if(e.tags.push(["e",n.event.id]),isReplaceableKind(n.event.kind)){const s=["a",`${n.event.kind}:${n.event.pubkey}:`];e.tags.push(s)}else if(isAddressableKind(n.event.kind)){let s=n.event.tags.find(([a,c])=>a==="d"&&c);if(!s)throw new Error("d tag not found or is empty");const o=["a",`${n.event.kind}:${n.event.pubkey}:${s[1]}`];e.tags.push(o)}e.tags.push(["k",n.event.kind.toString()])}return e}function validateZapRequest(n){let e;try{e=JSON.parse(n)}catch{return"Invalid zap request JSON."}if(!validateEvent(e))return"Zap request is not a valid Nostr event.";if(!verifyEvent(e))return"Invalid signature on zap request.";let s=e.tags.find(([c,f])=>c==="p"&&f);if(!s)return"Zap request doesn't have a 'p' tag.";if(!s[1].match(/^[a-f0-9]{64}$/))return"Zap request 'p' tag is not valid hex.";let o=e.tags.find(([c,f])=>c==="e"&&f);return o&&!o[1].match(/^[a-f0-9]{64}$/)?"Zap request 'e' tag is not valid hex.":e.tags.find(([c,f])=>c==="relays"&&f)?null:"Zap request doesn't have a 'relays' tag."}function makeZapReceipt({zapRequest:n,preimage:e,bolt11:s,paidAt:o}){let a=JSON.parse(n),c=a.tags.filter(([h])=>h==="e"||h==="p"||h==="a"),f={kind:9735,created_at:Math.round(o.getTime()/1e3),content:"",tags:[...c,["P",a.pubkey],["bolt11",s],["description",n]]};return e&&f.tags.push(["preimage",e]),f}function getSatoshisAmountFromBolt11(n){if(n.length<50)return 0;n=n.substring(0,50);const e=n.lastIndexOf("1");if(e===-1)return 0;const s=n.substring(0,e);if(!s.startsWith("lnbc"))return 0;const o=s.substring(4);if(o.length<1)return 0;const a=o[o.length-1],c=a.charCodeAt(0)-48,f=c>=0&&c<=9;let h=o.length-1;if(f&&h++,h<1)return 0;const m=parseInt(o.substring(0,h));switch(a){case"m":return m*1e5;case"u":return m*100;case"n":return m/10;case"p":return m/1e4;default:return m*1e8}}var nip98_exports={};__export(nip98_exports,{getToken:()=>getToken,hashPayload:()=>hashPayload,unpackEventFromToken:()=>unpackEventFromToken,validateEvent:()=>validateEvent2,validateEventKind:()=>validateEventKind,validateEventMethodTag:()=>validateEventMethodTag,validateEventPayloadTag:()=>validateEventPayloadTag,validateEventTimestamp:()=>validateEventTimestamp,validateEventUrlTag:()=>validateEventUrlTag,validateToken:()=>validateToken});var _authorizationScheme="Nostr ";async function getToken(n,e,s,o=!1,a){const c={kind:HTTPAuth,tags:[["u",n],["method",e]],created_at:Math.round(new Date().getTime()/1e3),content:""};a&&c.tags.push(["payload",hashPayload(a)]);const f=await s(c);return(o?_authorizationScheme:"")+base64.encode(utf8Encoder.encode(JSON.stringify(f)))}async function validateToken(n,e,s){const o=await unpackEventFromToken(n).catch(c=>{throw c});return await validateEvent2(o,e,s).catch(c=>{throw c})}async function unpackEventFromToken(n){if(!n)throw new Error("Missing token");n=n.replace(_authorizationScheme,"");const e=utf8Decoder.decode(base64.decode(n));if(!e||e.length===0||!e.startsWith("{"))throw new Error("Invalid token");return JSON.parse(e)}function validateEventTimestamp(n){return n.created_at?Math.round(new Date().getTime()/1e3)-n.created_at<60:!1}function validateEventKind(n){return n.kind===HTTPAuth}function validateEventUrlTag(n,e){const s=n.tags.find(o=>o[0]==="u");return s?s.length>0&&s[1]===e:!1}function validateEventMethodTag(n,e){const s=n.tags.find(o=>o[0]==="method");return s?s.length>0&&s[1].toLowerCase()===e.toLowerCase():!1}function hashPayload(n){const e=sha256$2(utf8Encoder.encode(JSON.stringify(n)));return bytesToHex$1(e)}function validateEventPayloadTag(n,e){const s=n.tags.find(a=>a[0]==="payload");if(!s)return!1;const o=hashPayload(e);return s.length>0&&s[1]===o}async function validateEvent2(n,e,s,o){if(!verifyEvent(n))throw new Error("Invalid nostr event, signature invalid");if(!validateEventKind(n))throw new Error("Invalid nostr event, kind invalid");if(!validateEventTimestamp(n))throw new Error("Invalid nostr event, created_at timestamp invalid");if(!validateEventUrlTag(n,e))throw new Error("Invalid nostr event, url tag invalid");if(!validateEventMethodTag(n,s))throw new Error("Invalid nostr event, method tag invalid");if(o&&typeof o=="object"&&Object.keys(o).length>0&&!validateEventPayloadTag(n,o))throw new Error("Invalid nostr event, payload tag does not match request body hash");return!0}const crypto$1=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function isBytes(n){return n instanceof Uint8Array||ArrayBuffer.isView(n)&&n.constructor.name==="Uint8Array"}function anumber(n){if(!Number.isSafeInteger(n)||n<0)throw new Error("positive integer expected, got "+n)}function abytes(n,...e){if(!isBytes(n))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(n.length))throw new Error("Uint8Array expected of length "+e+", got length="+n.length)}function ahash(n){if(typeof n!="function"||typeof n.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");anumber(n.outputLen),anumber(n.blockLen)}function aexists(n,e=!0){if(n.destroyed)throw new Error("Hash instance has been destroyed");if(e&&n.finished)throw new Error("Hash#digest() has already been called")}function aoutput(n,e){abytes(n);const s=e.outputLen;if(n.length<s)throw new Error("digestInto() expects output buffer of length at least "+s)}function clean(...n){for(let e=0;e<n.length;e++)n[e].fill(0)}function createView(n){return new DataView(n.buffer,n.byteOffset,n.byteLength)}function rotr(n,e){return n<<32-e|n>>>e}const hasHexBuiltin=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",hexes=Array.from({length:256},(n,e)=>e.toString(16).padStart(2,"0"));function bytesToHex(n){if(abytes(n),hasHexBuiltin)return n.toHex();let e="";for(let s=0;s<n.length;s++)e+=hexes[n[s]];return e}const asciis={_0:48,_9:57,A:65,F:70,a:97,f:102};function asciiToBase16(n){if(n>=asciis._0&&n<=asciis._9)return n-asciis._0;if(n>=asciis.A&&n<=asciis.F)return n-(asciis.A-10);if(n>=asciis.a&&n<=asciis.f)return n-(asciis.a-10)}function hexToBytes(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);if(hasHexBuiltin)return Uint8Array.fromHex(n);const e=n.length,s=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const o=new Uint8Array(s);for(let a=0,c=0;a<s;a++,c+=2){const f=asciiToBase16(n.charCodeAt(c)),h=asciiToBase16(n.charCodeAt(c+1));if(f===void 0||h===void 0){const m=n[c]+n[c+1];throw new Error('hex string expected, got non-hex character "'+m+'" at index '+c)}o[a]=f*16+h}return o}function utf8ToBytes(n){if(typeof n!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(n))}function toBytes(n){return typeof n=="string"&&(n=utf8ToBytes(n)),abytes(n),n}function concatBytes(...n){let e=0;for(let o=0;o<n.length;o++){const a=n[o];abytes(a),e+=a.length}const s=new Uint8Array(e);for(let o=0,a=0;o<n.length;o++){const c=n[o];s.set(c,a),a+=c.length}return s}class Hash{}function createHasher(n){const e=o=>n().update(toBytes(o)).digest(),s=n();return e.outputLen=s.outputLen,e.blockLen=s.blockLen,e.create=()=>n(),e}function randomBytes(n=32){if(crypto$1&&typeof crypto$1.getRandomValues=="function")return crypto$1.getRandomValues(new Uint8Array(n));if(crypto$1&&typeof crypto$1.randomBytes=="function")return Uint8Array.from(crypto$1.randomBytes(n));throw new Error("crypto.getRandomValues must be defined")}function setBigUint64(n,e,s,o){if(typeof n.setBigUint64=="function")return n.setBigUint64(e,s,o);const a=BigInt(32),c=BigInt(4294967295),f=Number(s>>a&c),h=Number(s&c),m=o?4:0,g=o?0:4;n.setUint32(e+m,f,o),n.setUint32(e+g,h,o)}function Chi(n,e,s){return n&e^~n&s}function Maj(n,e,s){return n&e^n&s^e&s}class HashMD extends Hash{constructor(e,s,o,a){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=s,this.padOffset=o,this.isLE=a,this.buffer=new Uint8Array(e),this.view=createView(this.buffer)}update(e){aexists(this),e=toBytes(e),abytes(e);const{view:s,buffer:o,blockLen:a}=this,c=e.length;for(let f=0;f<c;){const h=Math.min(a-this.pos,c-f);if(h===a){const m=createView(e);for(;a<=c-f;f+=a)this.process(m,f);continue}o.set(e.subarray(f,f+h),this.pos),this.pos+=h,f+=h,this.pos===a&&(this.process(s,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){aexists(this),aoutput(e,this),this.finished=!0;const{buffer:s,view:o,blockLen:a,isLE:c}=this;let{pos:f}=this;s[f++]=128,clean(this.buffer.subarray(f)),this.padOffset>a-f&&(this.process(o,0),f=0);for(let E=f;E<a;E++)s[E]=0;setBigUint64(o,a-8,BigInt(this.length*8),c),this.process(o,0);const h=createView(e),m=this.outputLen;if(m%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const g=m/4,_=this.get();if(g>_.length)throw new Error("_sha2: outputLen bigger than state");for(let E=0;E<g;E++)h.setUint32(4*E,_[E],c)}digest(){const{buffer:e,outputLen:s}=this;this.digestInto(e);const o=e.slice(0,s);return this.destroy(),o}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:s,buffer:o,length:a,finished:c,destroyed:f,pos:h}=this;return e.destroyed=f,e.finished=c,e.length=a,e.pos=h,a%s&&e.buffer.set(o),e}clone(){return this._cloneInto()}}const SHA256_IV=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_K=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),SHA256_W=new Uint32Array(64);class SHA256 extends HashMD{constructor(e=32){super(64,e,8,!1),this.A=SHA256_IV[0]|0,this.B=SHA256_IV[1]|0,this.C=SHA256_IV[2]|0,this.D=SHA256_IV[3]|0,this.E=SHA256_IV[4]|0,this.F=SHA256_IV[5]|0,this.G=SHA256_IV[6]|0,this.H=SHA256_IV[7]|0}get(){const{A:e,B:s,C:o,D:a,E:c,F:f,G:h,H:m}=this;return[e,s,o,a,c,f,h,m]}set(e,s,o,a,c,f,h,m){this.A=e|0,this.B=s|0,this.C=o|0,this.D=a|0,this.E=c|0,this.F=f|0,this.G=h|0,this.H=m|0}process(e,s){for(let E=0;E<16;E++,s+=4)SHA256_W[E]=e.getUint32(s,!1);for(let E=16;E<64;E++){const T=SHA256_W[E-15],w=SHA256_W[E-2],A=rotr(T,7)^rotr(T,18)^T>>>3,R=rotr(w,17)^rotr(w,19)^w>>>10;SHA256_W[E]=R+SHA256_W[E-7]+A+SHA256_W[E-16]|0}let{A:o,B:a,C:c,D:f,E:h,F:m,G:g,H:_}=this;for(let E=0;E<64;E++){const T=rotr(h,6)^rotr(h,11)^rotr(h,25),w=_+T+Chi(h,m,g)+SHA256_K[E]+SHA256_W[E]|0,R=(rotr(o,2)^rotr(o,13)^rotr(o,22))+Maj(o,a,c)|0;_=g,g=m,m=h,h=f+w|0,f=c,c=a,a=o,o=w+R|0}o=o+this.A|0,a=a+this.B|0,c=c+this.C|0,f=f+this.D|0,h=h+this.E|0,m=m+this.F|0,g=g+this.G|0,_=_+this.H|0,this.set(o,a,c,f,h,m,g,_)}roundClean(){clean(SHA256_W)}destroy(){this.set(0,0,0,0,0,0,0,0),clean(this.buffer)}}const sha256$1=createHasher(()=>new SHA256);class HMAC extends Hash{constructor(e,s){super(),this.finished=!1,this.destroyed=!1,ahash(e);const o=toBytes(s);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const a=this.blockLen,c=new Uint8Array(a);c.set(o.length>a?e.create().update(o).digest():o);for(let f=0;f<c.length;f++)c[f]^=54;this.iHash.update(c),this.oHash=e.create();for(let f=0;f<c.length;f++)c[f]^=106;this.oHash.update(c),clean(c)}update(e){return aexists(this),this.iHash.update(e),this}digestInto(e){aexists(this),abytes(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:s,iHash:o,finished:a,destroyed:c,blockLen:f,outputLen:h}=this;return e=e,e.finished=a,e.destroyed=c,e.blockLen=f,e.outputLen=h,e.oHash=s._cloneInto(e.oHash),e.iHash=o._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const hmac=(n,e,s)=>new HMAC(n,e).update(s).digest();hmac.create=(n,e)=>new HMAC(n,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$4=BigInt(0),_1n$4=BigInt(1);function _abool2(n,e=""){if(typeof n!="boolean"){const s=e&&`"${e}"`;throw new Error(s+"expected boolean, got type="+typeof n)}return n}function _abytes2(n,e,s=""){const o=isBytes(n),a=n?.length,c=e!==void 0;if(!o||c&&a!==e){const f=s&&`"${s}" `,h=c?` of length ${e}`:"",m=o?`length=${a}`:`type=${typeof n}`;throw new Error(f+"expected Uint8Array"+h+", got "+m)}return n}function numberToHexUnpadded(n){const e=n.toString(16);return e.length&1?"0"+e:e}function hexToNumber(n){if(typeof n!="string")throw new Error("hex string expected, got "+typeof n);return n===""?_0n$4:BigInt("0x"+n)}function bytesToNumberBE(n){return hexToNumber(bytesToHex(n))}function bytesToNumberLE(n){return abytes(n),hexToNumber(bytesToHex(Uint8Array.from(n).reverse()))}function numberToBytesBE(n,e){return hexToBytes(n.toString(16).padStart(e*2,"0"))}function numberToBytesLE(n,e){return numberToBytesBE(n,e).reverse()}function ensureBytes(n,e,s){let o;if(typeof e=="string")try{o=hexToBytes(e)}catch(c){throw new Error(n+" must be hex string or Uint8Array, cause: "+c)}else if(isBytes(e))o=Uint8Array.from(e);else throw new Error(n+" must be hex string or Uint8Array");const a=o.length;if(typeof s=="number"&&a!==s)throw new Error(n+" of length "+s+" expected, got "+a);return o}const isPosBig=n=>typeof n=="bigint"&&_0n$4<=n;function inRange(n,e,s){return isPosBig(n)&&isPosBig(e)&&isPosBig(s)&&e<=n&&n<s}function aInRange(n,e,s,o){if(!inRange(e,s,o))throw new Error("expected valid "+n+": "+s+" <= n < "+o+", got "+e)}function bitLen(n){let e;for(e=0;n>_0n$4;n>>=_1n$4,e+=1);return e}const bitMask=n=>(_1n$4<<BigInt(n))-_1n$4;function createHmacDrbg(n,e,s){if(typeof n!="number"||n<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof s!="function")throw new Error("hmacFn must be a function");const o=w=>new Uint8Array(w),a=w=>Uint8Array.of(w);let c=o(n),f=o(n),h=0;const m=()=>{c.fill(1),f.fill(0),h=0},g=(...w)=>s(f,c,...w),_=(w=o(0))=>{f=g(a(0),w),c=g(),w.length!==0&&(f=g(a(1),w),c=g())},E=()=>{if(h++>=1e3)throw new Error("drbg: tried 1000 values");let w=0;const A=[];for(;w<e;){c=g();const R=c.slice();A.push(R),w+=c.length}return concatBytes(...A)};return(w,A)=>{m(),_(w);let R;for(;!(R=A(E()));)_();return m(),R}}function _validateObject(n,e,s={}){if(!n||typeof n!="object")throw new Error("expected valid options object");function o(a,c,f){const h=n[a];if(f&&h===void 0)return;const m=typeof h;if(m!==c||h===null)throw new Error(`param "${a}" is invalid: expected ${c}, got ${m}`)}Object.entries(e).forEach(([a,c])=>o(a,c,!1)),Object.entries(s).forEach(([a,c])=>o(a,c,!0))}function memoized(n){const e=new WeakMap;return(s,...o)=>{const a=e.get(s);if(a!==void 0)return a;const c=n(s,...o);return e.set(s,c),c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$3=BigInt(0),_1n$3=BigInt(1),_2n$2=BigInt(2),_3n$1=BigInt(3),_4n$1=BigInt(4),_5n=BigInt(5),_7n=BigInt(7),_8n=BigInt(8),_9n=BigInt(9),_16n=BigInt(16);function mod(n,e){const s=n%e;return s>=_0n$3?s:e+s}function pow2(n,e,s){let o=n;for(;e-- >_0n$3;)o*=o,o%=s;return o}function invert(n,e){if(n===_0n$3)throw new Error("invert: expected non-zero number");if(e<=_0n$3)throw new Error("invert: expected positive modulus, got "+e);let s=mod(n,e),o=e,a=_0n$3,c=_1n$3;for(;s!==_0n$3;){const h=o/s,m=o%s,g=a-c*h;o=s,s=m,a=c,c=g}if(o!==_1n$3)throw new Error("invert: does not exist");return mod(a,e)}function assertIsSquare(n,e,s){if(!n.eql(n.sqr(e),s))throw new Error("Cannot find square root")}function sqrt3mod4(n,e){const s=(n.ORDER+_1n$3)/_4n$1,o=n.pow(e,s);return assertIsSquare(n,o,e),o}function sqrt5mod8(n,e){const s=(n.ORDER-_5n)/_8n,o=n.mul(e,_2n$2),a=n.pow(o,s),c=n.mul(e,a),f=n.mul(n.mul(c,_2n$2),a),h=n.mul(c,n.sub(f,n.ONE));return assertIsSquare(n,h,e),h}function sqrt9mod16(n){const e=Field(n),s=tonelliShanks(n),o=s(e,e.neg(e.ONE)),a=s(e,o),c=s(e,e.neg(o)),f=(n+_7n)/_16n;return(h,m)=>{let g=h.pow(m,f),_=h.mul(g,o);const E=h.mul(g,a),T=h.mul(g,c),w=h.eql(h.sqr(_),m),A=h.eql(h.sqr(E),m);g=h.cmov(g,_,w),_=h.cmov(T,E,A);const R=h.eql(h.sqr(_),m),V=h.cmov(g,_,R);return assertIsSquare(h,V,m),V}}function tonelliShanks(n){if(n<_3n$1)throw new Error("sqrt is not defined for small field");let e=n-_1n$3,s=0;for(;e%_2n$2===_0n$3;)e/=_2n$2,s++;let o=_2n$2;const a=Field(n);for(;FpLegendre(a,o)===1;)if(o++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(s===1)return sqrt3mod4;let c=a.pow(o,e);const f=(e+_1n$3)/_2n$2;return function(m,g){if(m.is0(g))return g;if(FpLegendre(m,g)!==1)throw new Error("Cannot find square root");let _=s,E=m.mul(m.ONE,c),T=m.pow(g,e),w=m.pow(g,f);for(;!m.eql(T,m.ONE);){if(m.is0(T))return m.ZERO;let A=1,R=m.sqr(T);for(;!m.eql(R,m.ONE);)if(A++,R=m.sqr(R),A===_)throw new Error("Cannot find square root");const V=_1n$3<<BigInt(_-A-1),te=m.pow(E,V);_=A,E=m.sqr(te),T=m.mul(T,E),w=m.mul(w,te)}return w}}function FpSqrt(n){return n%_4n$1===_3n$1?sqrt3mod4:n%_8n===_5n?sqrt5mod8:n%_16n===_9n?sqrt9mod16(n):tonelliShanks(n)}const FIELD_FIELDS=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function validateField(n){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},s=FIELD_FIELDS.reduce((o,a)=>(o[a]="function",o),e);return _validateObject(n,s),n}function FpPow(n,e,s){if(s<_0n$3)throw new Error("invalid exponent, negatives unsupported");if(s===_0n$3)return n.ONE;if(s===_1n$3)return e;let o=n.ONE,a=e;for(;s>_0n$3;)s&_1n$3&&(o=n.mul(o,a)),a=n.sqr(a),s>>=_1n$3;return o}function FpInvertBatch(n,e,s=!1){const o=new Array(e.length).fill(s?n.ZERO:void 0),a=e.reduce((f,h,m)=>n.is0(h)?f:(o[m]=f,n.mul(f,h)),n.ONE),c=n.inv(a);return e.reduceRight((f,h,m)=>n.is0(h)?f:(o[m]=n.mul(f,o[m]),n.mul(f,h)),c),o}function FpLegendre(n,e){const s=(n.ORDER-_1n$3)/_2n$2,o=n.pow(e,s),a=n.eql(o,n.ONE),c=n.eql(o,n.ZERO),f=n.eql(o,n.neg(n.ONE));if(!a&&!c&&!f)throw new Error("invalid Legendre symbol result");return a?1:c?0:-1}function nLength(n,e){e!==void 0&&anumber(e);const s=e!==void 0?e:n.toString(2).length,o=Math.ceil(s/8);return{nBitLength:s,nByteLength:o}}function Field(n,e,s=!1,o={}){if(n<=_0n$3)throw new Error("invalid field: expected ORDER > 0, got "+n);let a,c,f=!1,h;if(typeof e=="object"&&e!=null){if(o.sqrt||s)throw new Error("cannot specify opts in two arguments");const T=e;T.BITS&&(a=T.BITS),T.sqrt&&(c=T.sqrt),typeof T.isLE=="boolean"&&(s=T.isLE),typeof T.modFromBytes=="boolean"&&(f=T.modFromBytes),h=T.allowedLengths}else typeof e=="number"&&(a=e),o.sqrt&&(c=o.sqrt);const{nBitLength:m,nByteLength:g}=nLength(n,a);if(g>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let _;const E=Object.freeze({ORDER:n,isLE:s,BITS:m,BYTES:g,MASK:bitMask(m),ZERO:_0n$3,ONE:_1n$3,allowedLengths:h,create:T=>mod(T,n),isValid:T=>{if(typeof T!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof T);return _0n$3<=T&&T<n},is0:T=>T===_0n$3,isValidNot0:T=>!E.is0(T)&&E.isValid(T),isOdd:T=>(T&_1n$3)===_1n$3,neg:T=>mod(-T,n),eql:(T,w)=>T===w,sqr:T=>mod(T*T,n),add:(T,w)=>mod(T+w,n),sub:(T,w)=>mod(T-w,n),mul:(T,w)=>mod(T*w,n),pow:(T,w)=>FpPow(E,T,w),div:(T,w)=>mod(T*invert(w,n),n),sqrN:T=>T*T,addN:(T,w)=>T+w,subN:(T,w)=>T-w,mulN:(T,w)=>T*w,inv:T=>invert(T,n),sqrt:c||(T=>(_||(_=FpSqrt(n)),_(E,T))),toBytes:T=>s?numberToBytesLE(T,g):numberToBytesBE(T,g),fromBytes:(T,w=!0)=>{if(h){if(!h.includes(T.length)||T.length>g)throw new Error("Field.fromBytes: expected "+h+" bytes, got "+T.length);const R=new Uint8Array(g);R.set(T,s?0:R.length-T.length),T=R}if(T.length!==g)throw new Error("Field.fromBytes: expected "+g+" bytes, got "+T.length);let A=s?bytesToNumberLE(T):bytesToNumberBE(T);if(f&&(A=mod(A,n)),!w&&!E.isValid(A))throw new Error("invalid field element: outside of range 0..ORDER");return A},invertBatch:T=>FpInvertBatch(E,T),cmov:(T,w,A)=>A?w:T});return Object.freeze(E)}function getFieldBytesLength(n){if(typeof n!="bigint")throw new Error("field order must be bigint");const e=n.toString(2).length;return Math.ceil(e/8)}function getMinHashLength(n){const e=getFieldBytesLength(n);return e+Math.ceil(e/2)}function mapHashToField(n,e,s=!1){const o=n.length,a=getFieldBytesLength(e),c=getMinHashLength(e);if(o<16||o<c||o>1024)throw new Error("expected "+c+"-1024 bytes of input, got "+o);const f=s?bytesToNumberLE(n):bytesToNumberBE(n),h=mod(f,e-_1n$3)+_1n$3;return s?numberToBytesLE(h,a):numberToBytesBE(h,a)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const _0n$2=BigInt(0),_1n$2=BigInt(1);function negateCt(n,e){const s=e.negate();return n?s:e}function normalizeZ(n,e){const s=FpInvertBatch(n.Fp,e.map(o=>o.Z));return e.map((o,a)=>n.fromAffine(o.toAffine(s[a])))}function validateW(n,e){if(!Number.isSafeInteger(n)||n<=0||n>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+n)}function calcWOpts(n,e){validateW(n,e);const s=Math.ceil(e/n)+1,o=2**(n-1),a=2**n,c=bitMask(n),f=BigInt(n);return{windows:s,windowSize:o,mask:c,maxNumber:a,shiftBy:f}}function calcOffsets(n,e,s){const{windowSize:o,mask:a,maxNumber:c,shiftBy:f}=s;let h=Number(n&a),m=n>>f;h>o&&(h-=c,m+=_1n$2);const g=e*o,_=g+Math.abs(h)-1,E=h===0,T=h<0,w=e%2!==0;return{nextN:m,offset:_,isZero:E,isNeg:T,isNegF:w,offsetF:g}}function validateMSMPoints(n,e){if(!Array.isArray(n))throw new Error("array expected");n.forEach((s,o)=>{if(!(s instanceof e))throw new Error("invalid point at index "+o)})}function validateMSMScalars(n,e){if(!Array.isArray(n))throw new Error("array of scalars expected");n.forEach((s,o)=>{if(!e.isValid(s))throw new Error("invalid scalar at index "+o)})}const pointPrecomputes=new WeakMap,pointWindowSizes=new WeakMap;function getW(n){return pointWindowSizes.get(n)||1}function assert0(n){if(n!==_0n$2)throw new Error("invalid wNAF")}class wNAF{constructor(e,s){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=s}_unsafeLadder(e,s,o=this.ZERO){let a=e;for(;s>_0n$2;)s&_1n$2&&(o=o.add(a)),a=a.double(),s>>=_1n$2;return o}precomputeWindow(e,s){const{windows:o,windowSize:a}=calcWOpts(s,this.bits),c=[];let f=e,h=f;for(let m=0;m<o;m++){h=f,c.push(h);for(let g=1;g<a;g++)h=h.add(f),c.push(h);f=h.double()}return c}wNAF(e,s,o){if(!this.Fn.isValid(o))throw new Error("invalid scalar");let a=this.ZERO,c=this.BASE;const f=calcWOpts(e,this.bits);for(let h=0;h<f.windows;h++){const{nextN:m,offset:g,isZero:_,isNeg:E,isNegF:T,offsetF:w}=calcOffsets(o,h,f);o=m,_?c=c.add(negateCt(T,s[w])):a=a.add(negateCt(E,s[g]))}return assert0(o),{p:a,f:c}}wNAFUnsafe(e,s,o,a=this.ZERO){const c=calcWOpts(e,this.bits);for(let f=0;f<c.windows&&o!==_0n$2;f++){const{nextN:h,offset:m,isZero:g,isNeg:_}=calcOffsets(o,f,c);if(o=h,!g){const E=s[m];a=a.add(_?E.negate():E)}}return assert0(o),a}getPrecomputes(e,s,o){let a=pointPrecomputes.get(s);return a||(a=this.precomputeWindow(s,e),e!==1&&(typeof o=="function"&&(a=o(a)),pointPrecomputes.set(s,a))),a}cached(e,s,o){const a=getW(e);return this.wNAF(a,this.getPrecomputes(a,e,o),s)}unsafe(e,s,o,a){const c=getW(e);return c===1?this._unsafeLadder(e,s,a):this.wNAFUnsafe(c,this.getPrecomputes(c,e,o),s,a)}createCache(e,s){validateW(s,this.bits),pointWindowSizes.set(e,s),pointPrecomputes.delete(e)}hasCache(e){return getW(e)!==1}}function mulEndoUnsafe(n,e,s,o){let a=e,c=n.ZERO,f=n.ZERO;for(;s>_0n$2||o>_0n$2;)s&_1n$2&&(c=c.add(a)),o&_1n$2&&(f=f.add(a)),a=a.double(),s>>=_1n$2,o>>=_1n$2;return{p1:c,p2:f}}function pippenger(n,e,s,o){validateMSMPoints(s,n),validateMSMScalars(o,e);const a=s.length,c=o.length;if(a!==c)throw new Error("arrays of points and scalars must have equal length");const f=n.ZERO,h=bitLen(BigInt(a));let m=1;h>12?m=h-3:h>4?m=h-2:h>0&&(m=2);const g=bitMask(m),_=new Array(Number(g)+1).fill(f),E=Math.floor((e.BITS-1)/m)*m;let T=f;for(let w=E;w>=0;w-=m){_.fill(f);for(let R=0;R<c;R++){const V=o[R],te=Number(V>>BigInt(w)&g);_[te]=_[te].add(s[R])}let A=f;for(let R=_.length-1,V=f;R>0;R--)V=V.add(_[R]),A=A.add(V);if(T=T.add(A),w!==0)for(let R=0;R<m;R++)T=T.double()}return T}function createField(n,e,s){if(e){if(e.ORDER!==n)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return validateField(e),e}else return Field(n,{isLE:s})}function _createCurveFields(n,e,s={},o){if(o===void 0&&(o=n==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${n} CURVE object`);for(const m of["p","n","h"]){const g=e[m];if(!(typeof g=="bigint"&&g>_0n$2))throw new Error(`CURVE.${m} must be positive bigint`)}const a=createField(e.p,s.Fp,o),c=createField(e.n,s.Fn,o),h=["Gx","Gy","a","b"];for(const m of h)if(!a.isValid(e[m]))throw new Error(`CURVE.${m} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:a,Fn:c}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const divNearest=(n,e)=>(n+(n>=0?e:-e)/_2n$1)/e;function _splitEndoScalar(n,e,s){const[[o,a],[c,f]]=e,h=divNearest(f*n,s),m=divNearest(-a*n,s);let g=n-h*o-m*c,_=-h*a-m*f;const E=g<_0n$1,T=_<_0n$1;E&&(g=-g),T&&(_=-_);const w=bitMask(Math.ceil(bitLen(s)/2))+_1n$1;if(g<_0n$1||g>=w||_<_0n$1||_>=w)throw new Error("splitScalar (endomorphism): failed, k="+n);return{k1neg:E,k1:g,k2neg:T,k2:_}}function validateSigFormat(n){if(!["compact","recovered","der"].includes(n))throw new Error('Signature format must be "compact", "recovered", or "der"');return n}function validateSigOpts(n,e){const s={};for(let o of Object.keys(e))s[o]=n[o]===void 0?e[o]:n[o];return _abool2(s.lowS,"lowS"),_abool2(s.prehash,"prehash"),s.format!==void 0&&validateSigFormat(s.format),s}class DERErr extends Error{constructor(e=""){super(e)}}const DER={Err:DERErr,_tlv:{encode:(n,e)=>{const{Err:s}=DER;if(n<0||n>256)throw new s("tlv.encode: wrong tag");if(e.length&1)throw new s("tlv.encode: unpadded data");const o=e.length/2,a=numberToHexUnpadded(o);if(a.length/2&128)throw new s("tlv.encode: long form length too big");const c=o>127?numberToHexUnpadded(a.length/2|128):"";return numberToHexUnpadded(n)+c+a+e},decode(n,e){const{Err:s}=DER;let o=0;if(n<0||n>256)throw new s("tlv.encode: wrong tag");if(e.length<2||e[o++]!==n)throw new s("tlv.decode: wrong tlv");const a=e[o++],c=!!(a&128);let f=0;if(!c)f=a;else{const m=a&127;if(!m)throw new s("tlv.decode(long): indefinite length not supported");if(m>4)throw new s("tlv.decode(long): byte length is too big");const g=e.subarray(o,o+m);if(g.length!==m)throw new s("tlv.decode: length bytes not complete");if(g[0]===0)throw new s("tlv.decode(long): zero leftmost byte");for(const _ of g)f=f<<8|_;if(o+=m,f<128)throw new s("tlv.decode(long): not minimal encoding")}const h=e.subarray(o,o+f);if(h.length!==f)throw new s("tlv.decode: wrong value length");return{v:h,l:e.subarray(o+f)}}},_int:{encode(n){const{Err:e}=DER;if(n<_0n$1)throw new e("integer: negative integers are not allowed");let s=numberToHexUnpadded(n);if(Number.parseInt(s[0],16)&8&&(s="00"+s),s.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return s},decode(n){const{Err:e}=DER;if(n[0]&128)throw new e("invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return bytesToNumberBE(n)}},toSig(n){const{Err:e,_int:s,_tlv:o}=DER,a=ensureBytes("signature",n),{v:c,l:f}=o.decode(48,a);if(f.length)throw new e("invalid signature: left bytes after parsing");const{v:h,l:m}=o.decode(2,c),{v:g,l:_}=o.decode(2,m);if(_.length)throw new e("invalid signature: left bytes after parsing");return{r:s.decode(h),s:s.decode(g)}},hexFromSig(n){const{_tlv:e,_int:s}=DER,o=e.encode(2,s.encode(n.r)),a=e.encode(2,s.encode(n.s)),c=o+a;return e.encode(48,c)}},_0n$1=BigInt(0),_1n$1=BigInt(1),_2n$1=BigInt(2),_3n=BigInt(3),_4n=BigInt(4);function _normFnElement(n,e){const{BYTES:s}=n;let o;if(typeof e=="bigint")o=e;else{let a=ensureBytes("private key",e);try{o=n.fromBytes(a)}catch{throw new Error(`invalid private key: expected ui8a of size ${s}, got ${typeof e}`)}}if(!n.isValidNot0(o))throw new Error("invalid private key: out of range [1..N-1]");return o}function weierstrassN(n,e={}){const s=_createCurveFields("weierstrass",n,e),{Fp:o,Fn:a}=s;let c=s.CURVE;const{h:f,n:h}=c;_validateObject(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:m}=e;if(m&&(!o.is0(c.a)||typeof m.beta!="bigint"||!Array.isArray(m.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const g=getWLengths(o,a);function _(){if(!o.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function E(ne,W,xe){const{x:de,y:oe}=W.toAffine(),_e=o.toBytes(de);if(_abool2(xe,"isCompressed"),xe){_();const Re=!o.isOdd(oe);return concatBytes(pprefix(Re),_e)}else return concatBytes(Uint8Array.of(4),_e,o.toBytes(oe))}function T(ne){_abytes2(ne,void 0,"Point");const{publicKey:W,publicKeyUncompressed:xe}=g,de=ne.length,oe=ne[0],_e=ne.subarray(1);if(de===W&&(oe===2||oe===3)){const Re=o.fromBytes(_e);if(!o.isValid(Re))throw new Error("bad point: is not on curve, wrong x");const Ie=R(Re);let he;try{he=o.sqrt(Ie)}catch(Ae){const Be=Ae instanceof Error?": "+Ae.message:"";throw new Error("bad point: is not on curve, sqrt error"+Be)}_();const be=o.isOdd(he);return(oe&1)===1!==be&&(he=o.neg(he)),{x:Re,y:he}}else if(de===xe&&oe===4){const Re=o.BYTES,Ie=o.fromBytes(_e.subarray(0,Re)),he=o.fromBytes(_e.subarray(Re,Re*2));if(!V(Ie,he))throw new Error("bad point: is not on curve");return{x:Ie,y:he}}else throw new Error(`bad point: got length ${de}, expected compressed=${W} or uncompressed=${xe}`)}const w=e.toBytes||E,A=e.fromBytes||T;function R(ne){const W=o.sqr(ne),xe=o.mul(W,ne);return o.add(o.add(xe,o.mul(ne,c.a)),c.b)}function V(ne,W){const xe=o.sqr(W),de=R(ne);return o.eql(xe,de)}if(!V(c.Gx,c.Gy))throw new Error("bad curve params: generator point");const te=o.mul(o.pow(c.a,_3n),_4n),se=o.mul(o.sqr(c.b),BigInt(27));if(o.is0(o.add(te,se)))throw new Error("bad curve params: a or b");function re(ne,W,xe=!1){if(!o.isValid(W)||xe&&o.is0(W))throw new Error(`bad point coordinate ${ne}`);return W}function ye(ne){if(!(ne instanceof X))throw new Error("ProjectivePoint expected")}function D(ne){if(!m||!m.basises)throw new Error("no endo");return _splitEndoScalar(ne,m.basises,a.ORDER)}const ae=memoized((ne,W)=>{const{X:xe,Y:de,Z:oe}=ne;if(o.eql(oe,o.ONE))return{x:xe,y:de};const _e=ne.is0();W==null&&(W=_e?o.ONE:o.inv(oe));const Re=o.mul(xe,W),Ie=o.mul(de,W),he=o.mul(oe,W);if(_e)return{x:o.ZERO,y:o.ZERO};if(!o.eql(he,o.ONE))throw new Error("invZ was invalid");return{x:Re,y:Ie}}),z=memoized(ne=>{if(ne.is0()){if(e.allowInfinityPoint&&!o.is0(ne.Y))return;throw new Error("bad point: ZERO")}const{x:W,y:xe}=ne.toAffine();if(!o.isValid(W)||!o.isValid(xe))throw new Error("bad point: x or y not field elements");if(!V(W,xe))throw new Error("bad point: equation left != right");if(!ne.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function H(ne,W,xe,de,oe){return xe=new X(o.mul(xe.X,ne),xe.Y,xe.Z),W=negateCt(de,W),xe=negateCt(oe,xe),W.add(xe)}class X{constructor(W,xe,de){this.X=re("x",W),this.Y=re("y",xe,!0),this.Z=re("z",de),Object.freeze(this)}static CURVE(){return c}static fromAffine(W){const{x:xe,y:de}=W||{};if(!W||!o.isValid(xe)||!o.isValid(de))throw new Error("invalid affine point");if(W instanceof X)throw new Error("projective point not allowed");return o.is0(xe)&&o.is0(de)?X.ZERO:new X(xe,de,o.ONE)}static fromBytes(W){const xe=X.fromAffine(A(_abytes2(W,void 0,"point")));return xe.assertValidity(),xe}static fromHex(W){return X.fromBytes(ensureBytes("pointHex",W))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(W=8,xe=!0){return Z.createCache(this,W),xe||this.multiply(_3n),this}assertValidity(){z(this)}hasEvenY(){const{y:W}=this.toAffine();if(!o.isOdd)throw new Error("Field doesn't support isOdd");return!o.isOdd(W)}equals(W){ye(W);const{X:xe,Y:de,Z:oe}=this,{X:_e,Y:Re,Z:Ie}=W,he=o.eql(o.mul(xe,Ie),o.mul(_e,oe)),be=o.eql(o.mul(de,Ie),o.mul(Re,oe));return he&&be}negate(){return new X(this.X,o.neg(this.Y),this.Z)}double(){const{a:W,b:xe}=c,de=o.mul(xe,_3n),{X:oe,Y:_e,Z:Re}=this;let Ie=o.ZERO,he=o.ZERO,be=o.ZERO,Se=o.mul(oe,oe),Ae=o.mul(_e,_e),Be=o.mul(Re,Re),Ue=o.mul(oe,_e);return Ue=o.add(Ue,Ue),be=o.mul(oe,Re),be=o.add(be,be),Ie=o.mul(W,be),he=o.mul(de,Be),he=o.add(Ie,he),Ie=o.sub(Ae,he),he=o.add(Ae,he),he=o.mul(Ie,he),Ie=o.mul(Ue,Ie),be=o.mul(de,be),Be=o.mul(W,Be),Ue=o.sub(Se,Be),Ue=o.mul(W,Ue),Ue=o.add(Ue,be),be=o.add(Se,Se),Se=o.add(be,Se),Se=o.add(Se,Be),Se=o.mul(Se,Ue),he=o.add(he,Se),Be=o.mul(_e,Re),Be=o.add(Be,Be),Se=o.mul(Be,Ue),Ie=o.sub(Ie,Se),be=o.mul(Be,Ae),be=o.add(be,be),be=o.add(be,be),new X(Ie,he,be)}add(W){ye(W);const{X:xe,Y:de,Z:oe}=this,{X:_e,Y:Re,Z:Ie}=W;let he=o.ZERO,be=o.ZERO,Se=o.ZERO;const Ae=c.a,Be=o.mul(c.b,_3n);let Ue=o.mul(xe,_e),qe=o.mul(de,Re),Xe=o.mul(oe,Ie),Ke=o.add(xe,de),Ze=o.add(_e,Re);Ke=o.mul(Ke,Ze),Ze=o.add(Ue,qe),Ke=o.sub(Ke,Ze),Ze=o.add(xe,oe);let it=o.add(_e,Ie);return Ze=o.mul(Ze,it),it=o.add(Ue,Xe),Ze=o.sub(Ze,it),it=o.add(de,oe),he=o.add(Re,Ie),it=o.mul(it,he),he=o.add(qe,Xe),it=o.sub(it,he),Se=o.mul(Ae,Ze),he=o.mul(Be,Xe),Se=o.add(he,Se),he=o.sub(qe,Se),Se=o.add(qe,Se),be=o.mul(he,Se),qe=o.add(Ue,Ue),qe=o.add(qe,Ue),Xe=o.mul(Ae,Xe),Ze=o.mul(Be,Ze),qe=o.add(qe,Xe),Xe=o.sub(Ue,Xe),Xe=o.mul(Ae,Xe),Ze=o.add(Ze,Xe),Ue=o.mul(qe,Ze),be=o.add(be,Ue),Ue=o.mul(it,Ze),he=o.mul(Ke,he),he=o.sub(he,Ue),Ue=o.mul(Ke,qe),Se=o.mul(it,Se),Se=o.add(Se,Ue),new X(he,be,Se)}subtract(W){return this.add(W.negate())}is0(){return this.equals(X.ZERO)}multiply(W){const{endo:xe}=e;if(!a.isValidNot0(W))throw new Error("invalid scalar: out of range");let de,oe;const _e=Re=>Z.cached(this,Re,Ie=>normalizeZ(X,Ie));if(xe){const{k1neg:Re,k1:Ie,k2neg:he,k2:be}=D(W),{p:Se,f:Ae}=_e(Ie),{p:Be,f:Ue}=_e(be);oe=Ae.add(Ue),de=H(xe.beta,Se,Be,Re,he)}else{const{p:Re,f:Ie}=_e(W);de=Re,oe=Ie}return normalizeZ(X,[de,oe])[0]}multiplyUnsafe(W){const{endo:xe}=e,de=this;if(!a.isValid(W))throw new Error("invalid scalar: out of range");if(W===_0n$1||de.is0())return X.ZERO;if(W===_1n$1)return de;if(Z.hasCache(this))return this.multiply(W);if(xe){const{k1neg:oe,k1:_e,k2neg:Re,k2:Ie}=D(W),{p1:he,p2:be}=mulEndoUnsafe(X,de,_e,Ie);return H(xe.beta,he,be,oe,Re)}else return Z.unsafe(de,W)}multiplyAndAddUnsafe(W,xe,de){const oe=this.multiplyUnsafe(xe).add(W.multiplyUnsafe(de));return oe.is0()?void 0:oe}toAffine(W){return ae(this,W)}isTorsionFree(){const{isTorsionFree:W}=e;return f===_1n$1?!0:W?W(X,this):Z.unsafe(this,h).is0()}clearCofactor(){const{clearCofactor:W}=e;return f===_1n$1?this:W?W(X,this):this.multiplyUnsafe(f)}isSmallOrder(){return this.multiplyUnsafe(f).is0()}toBytes(W=!0){return _abool2(W,"isCompressed"),this.assertValidity(),w(X,this,W)}toHex(W=!0){return bytesToHex(this.toBytes(W))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(W=!0){return this.toBytes(W)}_setWindowSize(W){this.precompute(W)}static normalizeZ(W){return normalizeZ(X,W)}static msm(W,xe){return pippenger(X,a,W,xe)}static fromPrivateKey(W){return X.BASE.multiply(_normFnElement(a,W))}}X.BASE=new X(c.Gx,c.Gy,o.ONE),X.ZERO=new X(o.ZERO,o.ONE,o.ZERO),X.Fp=o,X.Fn=a;const le=a.BITS,Z=new wNAF(X,e.endo?Math.ceil(le/2):le);return X.BASE.precompute(8),X}function pprefix(n){return Uint8Array.of(n?2:3)}function getWLengths(n,e){return{secretKey:e.BYTES,publicKey:1+n.BYTES,publicKeyUncompressed:1+2*n.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function ecdh(n,e={}){const{Fn:s}=n,o=e.randomBytes||randomBytes,a=Object.assign(getWLengths(n.Fp,s),{seed:getMinHashLength(s.ORDER)});function c(w){try{return!!_normFnElement(s,w)}catch{return!1}}function f(w,A){const{publicKey:R,publicKeyUncompressed:V}=a;try{const te=w.length;return A===!0&&te!==R||A===!1&&te!==V?!1:!!n.fromBytes(w)}catch{return!1}}function h(w=o(a.seed)){return mapHashToField(_abytes2(w,a.seed,"seed"),s.ORDER)}function m(w,A=!0){return n.BASE.multiply(_normFnElement(s,w)).toBytes(A)}function g(w){const A=h(w);return{secretKey:A,publicKey:m(A)}}function _(w){if(typeof w=="bigint")return!1;if(w instanceof n)return!0;const{secretKey:A,publicKey:R,publicKeyUncompressed:V}=a;if(s.allowedLengths||A===R)return;const te=ensureBytes("key",w).length;return te===R||te===V}function E(w,A,R=!0){if(_(w)===!0)throw new Error("first arg must be private key");if(_(A)===!1)throw new Error("second arg must be public key");const V=_normFnElement(s,w);return n.fromHex(A).multiply(V).toBytes(R)}return Object.freeze({getPublicKey:m,getSharedSecret:E,keygen:g,Point:n,utils:{isValidSecretKey:c,isValidPublicKey:f,randomSecretKey:h,isValidPrivateKey:c,randomPrivateKey:h,normPrivateKeyToScalar:w=>_normFnElement(s,w),precompute(w=8,A=n.BASE){return A.precompute(w,!1)}},lengths:a})}function ecdsa(n,e,s={}){ahash(e),_validateObject(s,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const o=s.randomBytes||randomBytes,a=s.hmac||((xe,...de)=>hmac(e,xe,concatBytes(...de))),{Fp:c,Fn:f}=n,{ORDER:h,BITS:m}=f,{keygen:g,getPublicKey:_,getSharedSecret:E,utils:T,lengths:w}=ecdh(n,s),A={prehash:!1,lowS:typeof s.lowS=="boolean"?s.lowS:!1,format:void 0,extraEntropy:!1},R="compact";function V(xe){const de=h>>_1n$1;return xe>de}function te(xe,de){if(!f.isValidNot0(de))throw new Error(`invalid signature ${xe}: out of range 1..Point.Fn.ORDER`);return de}function se(xe,de){validateSigFormat(de);const oe=w.signature,_e=de==="compact"?oe:de==="recovered"?oe+1:void 0;return _abytes2(xe,_e,`${de} signature`)}class re{constructor(de,oe,_e){this.r=te("r",de),this.s=te("s",oe),_e!=null&&(this.recovery=_e),Object.freeze(this)}static fromBytes(de,oe=R){se(de,oe);let _e;if(oe==="der"){const{r:be,s:Se}=DER.toSig(_abytes2(de));return new re(be,Se)}oe==="recovered"&&(_e=de[0],oe="compact",de=de.subarray(1));const Re=f.BYTES,Ie=de.subarray(0,Re),he=de.subarray(Re,Re*2);return new re(f.fromBytes(Ie),f.fromBytes(he),_e)}static fromHex(de,oe){return this.fromBytes(hexToBytes(de),oe)}addRecoveryBit(de){return new re(this.r,this.s,de)}recoverPublicKey(de){const oe=c.ORDER,{r:_e,s:Re,recovery:Ie}=this;if(Ie==null||![0,1,2,3].includes(Ie))throw new Error("recovery id invalid");if(h*_2n$1<oe&&Ie>1)throw new Error("recovery id is ambiguous for h>1 curve");const be=Ie===2||Ie===3?_e+h:_e;if(!c.isValid(be))throw new Error("recovery id 2 or 3 invalid");const Se=c.toBytes(be),Ae=n.fromBytes(concatBytes(pprefix((Ie&1)===0),Se)),Be=f.inv(be),Ue=D(ensureBytes("msgHash",de)),qe=f.create(-Ue*Be),Xe=f.create(Re*Be),Ke=n.BASE.multiplyUnsafe(qe).add(Ae.multiplyUnsafe(Xe));if(Ke.is0())throw new Error("point at infinify");return Ke.assertValidity(),Ke}hasHighS(){return V(this.s)}toBytes(de=R){if(validateSigFormat(de),de==="der")return hexToBytes(DER.hexFromSig(this));const oe=f.toBytes(this.r),_e=f.toBytes(this.s);if(de==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return concatBytes(Uint8Array.of(this.recovery),oe,_e)}return concatBytes(oe,_e)}toHex(de){return bytesToHex(this.toBytes(de))}assertValidity(){}static fromCompact(de){return re.fromBytes(ensureBytes("sig",de),"compact")}static fromDER(de){return re.fromBytes(ensureBytes("sig",de),"der")}normalizeS(){return this.hasHighS()?new re(this.r,f.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return bytesToHex(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return bytesToHex(this.toBytes("compact"))}}const ye=s.bits2int||function(de){if(de.length>8192)throw new Error("input is too large");const oe=bytesToNumberBE(de),_e=de.length*8-m;return _e>0?oe>>BigInt(_e):oe},D=s.bits2int_modN||function(de){return f.create(ye(de))},ae=bitMask(m);function z(xe){return aInRange("num < 2^"+m,xe,_0n$1,ae),f.toBytes(xe)}function H(xe,de){return _abytes2(xe,void 0,"message"),de?_abytes2(e(xe),void 0,"prehashed message"):xe}function X(xe,de,oe){if(["recovered","canonical"].some(qe=>qe in oe))throw new Error("sign() legacy options not supported");const{lowS:_e,prehash:Re,extraEntropy:Ie}=validateSigOpts(oe,A);xe=H(xe,Re);const he=D(xe),be=_normFnElement(f,de),Se=[z(be),z(he)];if(Ie!=null&&Ie!==!1){const qe=Ie===!0?o(w.secretKey):Ie;Se.push(ensureBytes("extraEntropy",qe))}const Ae=concatBytes(...Se),Be=he;function Ue(qe){const Xe=ye(qe);if(!f.isValidNot0(Xe))return;const Ke=f.inv(Xe),Ze=n.BASE.multiply(Xe).toAffine(),it=f.create(Ze.x);if(it===_0n$1)return;const wn=f.create(Ke*f.create(Be+it*be));if(wn===_0n$1)return;let yn=(Ze.x===it?0:2)|Number(Ze.y&_1n$1),Mt=wn;return _e&&V(wn)&&(Mt=f.neg(wn),yn^=1),new re(it,Mt,yn)}return{seed:Ae,k2sig:Ue}}function le(xe,de,oe={}){xe=ensureBytes("message",xe);const{seed:_e,k2sig:Re}=X(xe,de,oe);return createHmacDrbg(e.outputLen,f.BYTES,a)(_e,Re)}function Z(xe){let de;const oe=typeof xe=="string"||isBytes(xe),_e=!oe&&xe!==null&&typeof xe=="object"&&typeof xe.r=="bigint"&&typeof xe.s=="bigint";if(!oe&&!_e)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(_e)de=new re(xe.r,xe.s);else if(oe){try{de=re.fromBytes(ensureBytes("sig",xe),"der")}catch(Re){if(!(Re instanceof DER.Err))throw Re}if(!de)try{de=re.fromBytes(ensureBytes("sig",xe),"compact")}catch{return!1}}return de||!1}function ne(xe,de,oe,_e={}){const{lowS:Re,prehash:Ie,format:he}=validateSigOpts(_e,A);if(oe=ensureBytes("publicKey",oe),de=H(ensureBytes("message",de),Ie),"strict"in _e)throw new Error("options.strict was renamed to lowS");const be=he===void 0?Z(xe):re.fromBytes(ensureBytes("sig",xe),he);if(be===!1)return!1;try{const Se=n.fromBytes(oe);if(Re&&be.hasHighS())return!1;const{r:Ae,s:Be}=be,Ue=D(de),qe=f.inv(Be),Xe=f.create(Ue*qe),Ke=f.create(Ae*qe),Ze=n.BASE.multiplyUnsafe(Xe).add(Se.multiplyUnsafe(Ke));return Ze.is0()?!1:f.create(Ze.x)===Ae}catch{return!1}}function W(xe,de,oe={}){const{prehash:_e}=validateSigOpts(oe,A);return de=H(de,_e),re.fromBytes(xe,"recovered").recoverPublicKey(de).toBytes()}return Object.freeze({keygen:g,getPublicKey:_,getSharedSecret:E,utils:T,lengths:w,Point:n,sign:le,verify:ne,recoverPublicKey:W,Signature:re,hash:e})}function _weierstrass_legacy_opts_to_new(n){const e={a:n.a,b:n.b,p:n.Fp.ORDER,n:n.n,h:n.h,Gx:n.Gx,Gy:n.Gy},s=n.Fp;let o=n.allowedPrivateKeyLengths?Array.from(new Set(n.allowedPrivateKeyLengths.map(f=>Math.ceil(f/2)))):void 0;const a=Field(e.n,{BITS:n.nBitLength,allowedLengths:o,modFromBytes:n.wrapPrivateKey}),c={Fp:s,Fn:a,allowInfinityPoint:n.allowInfinityPoint,endo:n.endo,isTorsionFree:n.isTorsionFree,clearCofactor:n.clearCofactor,fromBytes:n.fromBytes,toBytes:n.toBytes};return{CURVE:e,curveOpts:c}}function _ecdsa_legacy_opts_to_new(n){const{CURVE:e,curveOpts:s}=_weierstrass_legacy_opts_to_new(n),o={hmac:n.hmac,randomBytes:n.randomBytes,lowS:n.lowS,bits2int:n.bits2int,bits2int_modN:n.bits2int_modN};return{CURVE:e,curveOpts:s,hash:n.hash,ecdsaOpts:o}}function _ecdsa_new_output_to_legacy(n,e){const s=e.Point;return Object.assign({},e,{ProjectivePoint:s,CURVE:Object.assign({},n,nLength(s.Fn.ORDER,s.Fn.BITS))})}function weierstrass(n){const{CURVE:e,curveOpts:s,hash:o,ecdsaOpts:a}=_ecdsa_legacy_opts_to_new(n),c=weierstrassN(e,s),f=ecdsa(c,o,a);return _ecdsa_new_output_to_legacy(n,f)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function createCurve(n,e){const s=o=>weierstrass({...n,hash:o});return{...s(e),create:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const secp256k1_CURVE={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},secp256k1_ENDO={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},_0n=BigInt(0),_1n=BigInt(1),_2n=BigInt(2);function sqrtMod(n){const e=secp256k1_CURVE.p,s=BigInt(3),o=BigInt(6),a=BigInt(11),c=BigInt(22),f=BigInt(23),h=BigInt(44),m=BigInt(88),g=n*n*n%e,_=g*g*n%e,E=pow2(_,s,e)*_%e,T=pow2(E,s,e)*_%e,w=pow2(T,_2n,e)*g%e,A=pow2(w,a,e)*w%e,R=pow2(A,c,e)*A%e,V=pow2(R,h,e)*R%e,te=pow2(V,m,e)*V%e,se=pow2(te,h,e)*R%e,re=pow2(se,s,e)*_%e,ye=pow2(re,f,e)*A%e,D=pow2(ye,o,e)*g%e,ae=pow2(D,_2n,e);if(!Fpk1.eql(Fpk1.sqr(ae),n))throw new Error("Cannot find square root");return ae}const Fpk1=Field(secp256k1_CURVE.p,{sqrt:sqrtMod}),secp256k1=createCurve({...secp256k1_CURVE,Fp:Fpk1,lowS:!0,endo:secp256k1_ENDO},sha256$1),TAGGED_HASH_PREFIXES={};function taggedHash(n,...e){let s=TAGGED_HASH_PREFIXES[n];if(s===void 0){const o=sha256$1(utf8ToBytes(n));s=concatBytes(o,o),TAGGED_HASH_PREFIXES[n]=s}return sha256$1(concatBytes(s,...e))}const pointToBytes=n=>n.toBytes(!0).slice(1),Pointk1=secp256k1.Point,hasEven=n=>n%_2n===_0n;function schnorrGetExtPubKey(n){const{Fn:e,BASE:s}=Pointk1,o=_normFnElement(e,n),a=s.multiply(o);return{scalar:hasEven(a.y)?o:e.neg(o),bytes:pointToBytes(a)}}function lift_x(n){const e=Fpk1;if(!e.isValidNot0(n))throw new Error("invalid x: Fail if x ≥ p");const s=e.create(n*n),o=e.create(s*n+BigInt(7));let a=e.sqrt(o);hasEven(a)||(a=e.neg(a));const c=Pointk1.fromAffine({x:n,y:a});return c.assertValidity(),c}const num=bytesToNumberBE;function challenge(...n){return Pointk1.Fn.create(num(taggedHash("BIP0340/challenge",...n)))}function schnorrGetPublicKey(n){return schnorrGetExtPubKey(n).bytes}function schnorrSign(n,e,s=randomBytes(32)){const{Fn:o}=Pointk1,a=ensureBytes("message",n),{bytes:c,scalar:f}=schnorrGetExtPubKey(e),h=ensureBytes("auxRand",s,32),m=o.toBytes(f^num(taggedHash("BIP0340/aux",h))),g=taggedHash("BIP0340/nonce",m,c,a),{bytes:_,scalar:E}=schnorrGetExtPubKey(g),T=challenge(_,c,a),w=new Uint8Array(64);if(w.set(_,0),w.set(o.toBytes(o.create(E+T*f)),32),!schnorrVerify(w,a,c))throw new Error("sign: Invalid signature produced");return w}function schnorrVerify(n,e,s){const{Fn:o,BASE:a}=Pointk1,c=ensureBytes("signature",n,64),f=ensureBytes("message",e),h=ensureBytes("publicKey",s,32);try{const m=lift_x(num(h)),g=num(c.subarray(0,32));if(!inRange(g,_1n,secp256k1_CURVE.p))return!1;const _=num(c.subarray(32,64));if(!inRange(_,_1n,secp256k1_CURVE.n))return!1;const E=challenge(o.toBytes(g),pointToBytes(m),f),T=a.multiplyUnsafe(_).add(m.multiplyUnsafe(o.neg(E))),{x:w,y:A}=T.toAffine();return!(T.is0()||!hasEven(A)||w!==g)}catch{return!1}}const schnorr=(()=>{const s=(a=randomBytes(48))=>mapHashToField(a,secp256k1_CURVE.n);secp256k1.utils.randomSecretKey;function o(a){const c=s(a);return{secretKey:c,publicKey:schnorrGetPublicKey(c)}}return{keygen:o,getPublicKey:schnorrGetPublicKey,sign:schnorrSign,verify:schnorrVerify,Point:Pointk1,utils:{randomSecretKey:s,randomPrivateKey:s,taggedHash,lift_x,pointToBytes,numberToBytesBE,bytesToNumberBE,mod},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})(),sha256=sha256$1;var dist={},LRUCache={},LRUCacheNode={},hasRequiredLRUCacheNode;function requireLRUCacheNode(){if(hasRequiredLRUCacheNode)return LRUCacheNode;hasRequiredLRUCacheNode=1,Object.defineProperty(LRUCacheNode,"__esModule",{value:!0}),LRUCacheNode.LRUCacheNode=void 0;let n=class{constructor(s,o,a){const{entryExpirationTimeInMS:c=null,next:f=null,prev:h=null,onEntryEvicted:m,onEntryMarkedAsMostRecentlyUsed:g,clone:_,cloneFn:E}=a??{};if(typeof c=="number"&&(c<=0||Number.isNaN(c)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.clone=_??!1,this.cloneFn=E??this.defaultClone,this.key=s,this.internalValue=this.clone?this.cloneFn(o):o,this.created=Date.now(),this.entryExpirationTimeInMS=c,this.next=f,this.prev=h,this.onEntryEvicted=m,this.onEntryMarkedAsMostRecentlyUsed=g}get value(){return this.clone?this.cloneFn(this.internalValue):this.internalValue}get isExpired(){return typeof this.entryExpirationTimeInMS=="number"&&Date.now()-this.created>this.entryExpirationTimeInMS}invokeOnEvicted(){if(this.onEntryEvicted){const{key:s,value:o,isExpired:a}=this;this.onEntryEvicted({key:s,value:o,isExpired:a})}}invokeOnEntryMarkedAsMostRecentlyUsed(){if(this.onEntryMarkedAsMostRecentlyUsed){const{key:s,value:o}=this;this.onEntryMarkedAsMostRecentlyUsed({key:s,value:o})}}defaultClone(s){return typeof s=="boolean"||typeof s=="string"||typeof s=="number"?s:JSON.parse(JSON.stringify(s))}};return LRUCacheNode.LRUCacheNode=n,LRUCacheNode}var hasRequiredLRUCache;function requireLRUCache(){if(hasRequiredLRUCache)return LRUCache;hasRequiredLRUCache=1,Object.defineProperty(LRUCache,"__esModule",{value:!0}),LRUCache.LRUCache=void 0;const n=requireLRUCacheNode();let e=class{constructor(o){this.lookupTable=new Map,this.head=null,this.tail=null;const{maxSize:a=25,entryExpirationTimeInMS:c=null,onEntryEvicted:f,onEntryMarkedAsMostRecentlyUsed:h,cloneFn:m,clone:g}=o??{};if(Number.isNaN(a)||a<=0)throw new Error("maxSize must be greater than 0.");if(typeof c=="number"&&(c<=0||Number.isNaN(c)))throw new Error("entryExpirationTimeInMS must either be null (no expiry) or greater than 0");this.maxSizeInternal=a,this.entryExpirationTimeInMS=c,this.onEntryEvicted=f,this.onEntryMarkedAsMostRecentlyUsed=h,this.clone=g,this.cloneFn=m}get size(){return this.cleanCache(),this.lookupTable.size}get remainingSize(){return this.maxSizeInternal-this.size}get newest(){return this.head?this.head.isExpired?(this.removeNodeFromListAndLookupTable(this.head),this.newest):this.mapNodeToEntry(this.head):null}get oldest(){return this.tail?this.tail.isExpired?(this.removeNodeFromListAndLookupTable(this.tail),this.oldest):this.mapNodeToEntry(this.tail):null}get maxSize(){return this.maxSizeInternal}set maxSize(o){if(Number.isNaN(o)||o<=0)throw new Error("maxSize must be greater than 0.");this.maxSizeInternal=o,this.enforceSizeLimit()}set(o,a,c){const f=this.lookupTable.get(o);f&&this.removeNodeFromListAndLookupTable(f);const h=new n.LRUCacheNode(o,a,{entryExpirationTimeInMS:this.entryExpirationTimeInMS,onEntryEvicted:this.onEntryEvicted,onEntryMarkedAsMostRecentlyUsed:this.onEntryMarkedAsMostRecentlyUsed,clone:this.clone,cloneFn:this.cloneFn,...c});return this.setNodeAsHead(h),this.lookupTable.set(o,h),this.enforceSizeLimit(),this}get(o){const a=this.lookupTable.get(o);return a?a.isExpired?(this.removeNodeFromListAndLookupTable(a),null):(this.setNodeAsHead(a),a.value):null}peek(o){const a=this.lookupTable.get(o);return a?a.isExpired?(this.removeNodeFromListAndLookupTable(a),null):a.value:null}delete(o){const a=this.lookupTable.get(o);return a?this.removeNodeFromListAndLookupTable(a):!1}has(o){const a=this.lookupTable.get(o);return a?a.isExpired?(this.removeNodeFromListAndLookupTable(a),!1):!0:!1}clear(){this.head=null,this.tail=null,this.lookupTable.clear()}find(o){let a=this.head;for(;a;){if(a.isExpired){const f=a.next;this.removeNodeFromListAndLookupTable(a),a=f;continue}const c=this.mapNodeToEntry(a);if(o(c))return this.setNodeAsHead(a),c;a=a.next}return null}forEach(o){let a=this.head,c=0;for(;a;){if(a.isExpired){const f=a.next;this.removeNodeFromListAndLookupTable(a),a=f;continue}o(a.value,a.key,c),a=a.next,c++}}*values(){let o=this.head;for(;o;){if(o.isExpired){const a=o.next;this.removeNodeFromListAndLookupTable(o),o=a;continue}yield o.value,o=o.next}}*keys(){let o=this.head;for(;o;){if(o.isExpired){const a=o.next;this.removeNodeFromListAndLookupTable(o),o=a;continue}yield o.key,o=o.next}}*entries(){let o=this.head;for(;o;){if(o.isExpired){const a=o.next;this.removeNodeFromListAndLookupTable(o),o=a;continue}yield this.mapNodeToEntry(o),o=o.next}}*[Symbol.iterator](){let o=this.head;for(;o;){if(o.isExpired){const a=o.next;this.removeNodeFromListAndLookupTable(o),o=a;continue}yield this.mapNodeToEntry(o),o=o.next}}enforceSizeLimit(){let o=this.tail;for(;o!==null&&this.size>this.maxSizeInternal;){const a=o.prev;this.removeNodeFromListAndLookupTable(o),o=a}}mapNodeToEntry({key:o,value:a}){return{key:o,value:a}}setNodeAsHead(o){this.removeNodeFromList(o),this.head?(o.next=this.head,this.head.prev=o,this.head=o):(this.head=o,this.tail=o),o.invokeOnEntryMarkedAsMostRecentlyUsed()}removeNodeFromList(o){o.prev!==null&&(o.prev.next=o.next),o.next!==null&&(o.next.prev=o.prev),this.head===o&&(this.head=o.next),this.tail===o&&(this.tail=o.prev),o.next=null,o.prev=null}removeNodeFromListAndLookupTable(o){return o.invokeOnEvicted(),this.removeNodeFromList(o),this.lookupTable.delete(o.key)}cleanCache(){if(!this.entryExpirationTimeInMS)return;const o=[];for(const a of this.lookupTable.values())a.isExpired&&o.push(a);o.forEach(a=>this.removeNodeFromListAndLookupTable(a))}};return LRUCache.LRUCache=e,LRUCache}var hasRequiredDist;function requireDist(){return hasRequiredDist||(hasRequiredDist=1,(function(n){var e=dist&&dist.__createBinding||(Object.create?(function(o,a,c,f){f===void 0&&(f=c);var h=Object.getOwnPropertyDescriptor(a,c);(!h||("get"in h?!a.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return a[c]}}),Object.defineProperty(o,f,h)}):(function(o,a,c,f){f===void 0&&(f=c),o[f]=a[c]})),s=dist&&dist.__exportStar||function(o,a){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(a,c)&&e(a,o,c)};Object.defineProperty(n,"__esModule",{value:!0}),s(requireLRUCache(),n)})(dist)),dist}var distExports=requireDist(),lib={},hasRequiredLib;function requireLib(){return hasRequiredLib||(hasRequiredLib=1,(function(n){/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(n,"__esModule",{value:!0}),n.bytes=n.stringToBytes=n.str=n.bytesToString=n.hex=n.utf8=n.bech32m=n.bech32=n.base58check=n.base58xmr=n.base58xrp=n.base58flickr=n.base58=n.base64url=n.base64=n.base32crockford=n.base32hex=n.base32=n.base16=n.utils=n.assertNumber=void 0;function e(Z){if(!Number.isSafeInteger(Z))throw new Error(`Wrong integer: ${Z}`)}n.assertNumber=e;function s(...Z){const ne=(de,oe)=>_e=>de(oe(_e)),W=Array.from(Z).reverse().reduce((de,oe)=>de?ne(de,oe.encode):oe.encode,void 0),xe=Z.reduce((de,oe)=>de?ne(de,oe.decode):oe.decode,void 0);return{encode:W,decode:xe}}function o(Z){return{encode:ne=>{if(!Array.isArray(ne)||ne.length&&typeof ne[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return ne.map(W=>{if(e(W),W<0||W>=Z.length)throw new Error(`Digit index outside alphabet: ${W} (alphabet: ${Z.length})`);return Z[W]})},decode:ne=>{if(!Array.isArray(ne)||ne.length&&typeof ne[0]!="string")throw new Error("alphabet.decode input should be array of strings");return ne.map(W=>{if(typeof W!="string")throw new Error(`alphabet.decode: not string element=${W}`);const xe=Z.indexOf(W);if(xe===-1)throw new Error(`Unknown letter: "${W}". Allowed: ${Z}`);return xe})}}}function a(Z=""){if(typeof Z!="string")throw new Error("join separator should be string");return{encode:ne=>{if(!Array.isArray(ne)||ne.length&&typeof ne[0]!="string")throw new Error("join.encode input should be array of strings");for(let W of ne)if(typeof W!="string")throw new Error(`join.encode: non-string input=${W}`);return ne.join(Z)},decode:ne=>{if(typeof ne!="string")throw new Error("join.decode input should be string");return ne.split(Z)}}}function c(Z,ne="="){if(e(Z),typeof ne!="string")throw new Error("padding chr should be string");return{encode(W){if(!Array.isArray(W)||W.length&&typeof W[0]!="string")throw new Error("padding.encode input should be array of strings");for(let xe of W)if(typeof xe!="string")throw new Error(`padding.encode: non-string input=${xe}`);for(;W.length*Z%8;)W.push(ne);return W},decode(W){if(!Array.isArray(W)||W.length&&typeof W[0]!="string")throw new Error("padding.encode input should be array of strings");for(let de of W)if(typeof de!="string")throw new Error(`padding.decode: non-string input=${de}`);let xe=W.length;if(xe*Z%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;xe>0&&W[xe-1]===ne;xe--)if(!((xe-1)*Z%8))throw new Error("Invalid padding: string has too much padding");return W.slice(0,xe)}}}function f(Z){if(typeof Z!="function")throw new Error("normalize fn should be function");return{encode:ne=>ne,decode:ne=>Z(ne)}}function h(Z,ne,W){if(ne<2)throw new Error(`convertRadix: wrong from=${ne}, base cannot be less than 2`);if(W<2)throw new Error(`convertRadix: wrong to=${W}, base cannot be less than 2`);if(!Array.isArray(Z))throw new Error("convertRadix: data should be array");if(!Z.length)return[];let xe=0;const de=[],oe=Array.from(Z);for(oe.forEach(_e=>{if(e(_e),_e<0||_e>=ne)throw new Error(`Wrong integer: ${_e}`)});;){let _e=0,Re=!0;for(let Ie=xe;Ie<oe.length;Ie++){const he=oe[Ie],be=ne*_e+he;if(!Number.isSafeInteger(be)||ne*_e/ne!==_e||be-he!==ne*_e)throw new Error("convertRadix: carry overflow");if(_e=be%W,oe[Ie]=Math.floor(be/W),!Number.isSafeInteger(oe[Ie])||oe[Ie]*W+_e!==be)throw new Error("convertRadix: carry overflow");if(Re)oe[Ie]?Re=!1:xe=Ie;else continue}if(de.push(_e),Re)break}for(let _e=0;_e<Z.length-1&&Z[_e]===0;_e++)de.push(0);return de.reverse()}const m=(Z,ne)=>ne?m(ne,Z%ne):Z,g=(Z,ne)=>Z+(ne-m(Z,ne));function _(Z,ne,W,xe){if(!Array.isArray(Z))throw new Error("convertRadix2: data should be array");if(ne<=0||ne>32)throw new Error(`convertRadix2: wrong from=${ne}`);if(W<=0||W>32)throw new Error(`convertRadix2: wrong to=${W}`);if(g(ne,W)>32)throw new Error(`convertRadix2: carry overflow from=${ne} to=${W} carryBits=${g(ne,W)}`);let de=0,oe=0;const _e=2**W-1,Re=[];for(const Ie of Z){if(e(Ie),Ie>=2**ne)throw new Error(`convertRadix2: invalid data word=${Ie} from=${ne}`);if(de=de<<ne|Ie,oe+ne>32)throw new Error(`convertRadix2: carry overflow pos=${oe} from=${ne}`);for(oe+=ne;oe>=W;oe-=W)Re.push((de>>oe-W&_e)>>>0);de&=2**oe-1}if(de=de<<W-oe&_e,!xe&&oe>=ne)throw new Error("Excess padding");if(!xe&&de)throw new Error(`Non-zero padding: ${de}`);return xe&&oe>0&&Re.push(de>>>0),Re}function E(Z){return e(Z),{encode:ne=>{if(!(ne instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return h(Array.from(ne),2**8,Z)},decode:ne=>{if(!Array.isArray(ne)||ne.length&&typeof ne[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(h(ne,Z,2**8))}}}function T(Z,ne=!1){if(e(Z),Z<=0||Z>32)throw new Error("radix2: bits should be in (0..32]");if(g(8,Z)>32||g(Z,8)>32)throw new Error("radix2: carry overflow");return{encode:W=>{if(!(W instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return _(Array.from(W),8,Z,!ne)},decode:W=>{if(!Array.isArray(W)||W.length&&typeof W[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(_(W,Z,8,ne))}}}function w(Z){if(typeof Z!="function")throw new Error("unsafeWrapper fn should be function");return function(...ne){try{return Z.apply(null,ne)}catch{}}}function A(Z,ne){if(e(Z),typeof ne!="function")throw new Error("checksum fn should be function");return{encode(W){if(!(W instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");const xe=ne(W).slice(0,Z),de=new Uint8Array(W.length+Z);return de.set(W),de.set(xe,W.length),de},decode(W){if(!(W instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");const xe=W.slice(0,-Z),de=ne(xe).slice(0,Z),oe=W.slice(-Z);for(let _e=0;_e<Z;_e++)if(de[_e]!==oe[_e])throw new Error("Invalid checksum");return xe}}}n.utils={alphabet:o,chain:s,checksum:A,radix:E,radix2:T,join:a,padding:c},n.base16=s(T(4),o("0123456789ABCDEF"),a("")),n.base32=s(T(5),o("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),c(5),a("")),n.base32hex=s(T(5),o("0123456789ABCDEFGHIJKLMNOPQRSTUV"),c(5),a("")),n.base32crockford=s(T(5),o("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),a(""),f(Z=>Z.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),n.base64=s(T(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),c(6),a("")),n.base64url=s(T(6),o("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),c(6),a(""));const R=Z=>s(E(58),o(Z),a(""));n.base58=R("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),n.base58flickr=R("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),n.base58xrp=R("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const V=[0,2,3,5,6,7,9,10,11];n.base58xmr={encode(Z){let ne="";for(let W=0;W<Z.length;W+=8){const xe=Z.subarray(W,W+8);ne+=n.base58.encode(xe).padStart(V[xe.length],"1")}return ne},decode(Z){let ne=[];for(let W=0;W<Z.length;W+=11){const xe=Z.slice(W,W+11),de=V.indexOf(xe.length),oe=n.base58.decode(xe);for(let _e=0;_e<oe.length-de;_e++)if(oe[_e]!==0)throw new Error("base58xmr: wrong padding");ne=ne.concat(Array.from(oe.slice(oe.length-de)))}return Uint8Array.from(ne)}};const te=Z=>s(A(4,ne=>Z(Z(ne))),n.base58);n.base58check=te;const se=s(o("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),a("")),re=[996825010,642813549,513874426,1027748829,705979059];function ye(Z){const ne=Z>>25;let W=(Z&33554431)<<5;for(let xe=0;xe<re.length;xe++)(ne>>xe&1)===1&&(W^=re[xe]);return W}function D(Z,ne,W=1){const xe=Z.length;let de=1;for(let oe=0;oe<xe;oe++){const _e=Z.charCodeAt(oe);if(_e<33||_e>126)throw new Error(`Invalid prefix (${Z})`);de=ye(de)^_e>>5}de=ye(de);for(let oe=0;oe<xe;oe++)de=ye(de)^Z.charCodeAt(oe)&31;for(let oe of ne)de=ye(de)^oe;for(let oe=0;oe<6;oe++)de=ye(de);return de^=W,se.encode(_([de%2**30],30,5,!1))}function ae(Z){const ne=Z==="bech32"?1:734539939,W=T(5),xe=W.decode,de=W.encode,oe=w(xe);function _e(be,Se,Ae=90){if(typeof be!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof be}`);if(!Array.isArray(Se)||Se.length&&typeof Se[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof Se}`);const Be=be.length+7+Se.length;if(Ae!==!1&&Be>Ae)throw new TypeError(`Length ${Be} exceeds limit ${Ae}`);return be=be.toLowerCase(),`${be}1${se.encode(Se)}${D(be,Se,ne)}`}function Re(be,Se=90){if(typeof be!="string")throw new Error(`bech32.decode input should be string, not ${typeof be}`);if(be.length<8||Se!==!1&&be.length>Se)throw new TypeError(`Wrong string length: ${be.length} (${be}). Expected (8..${Se})`);const Ae=be.toLowerCase();if(be!==Ae&&be!==be.toUpperCase())throw new Error("String must be lowercase or uppercase");be=Ae;const Be=be.lastIndexOf("1");if(Be===0||Be===-1)throw new Error('Letter "1" must be present between prefix and data only');const Ue=be.slice(0,Be),qe=be.slice(Be+1);if(qe.length<6)throw new Error("Data must be at least 6 characters long");const Xe=se.decode(qe).slice(0,-6),Ke=D(Ue,Xe,ne);if(!qe.endsWith(Ke))throw new Error(`Invalid checksum in ${be}: expected "${Ke}"`);return{prefix:Ue,words:Xe}}const Ie=w(Re);function he(be){const{prefix:Se,words:Ae}=Re(be,!1);return{prefix:Se,words:Ae,bytes:xe(Ae)}}return{encode:_e,decode:Re,decodeToBytes:he,decodeUnsafe:Ie,fromWords:xe,fromWordsUnsafe:oe,toWords:de}}n.bech32=ae("bech32"),n.bech32m=ae("bech32m"),n.utf8={encode:Z=>new TextDecoder().decode(Z),decode:Z=>new TextEncoder().encode(Z)},n.hex=s(T(4),o("0123456789abcdef"),a(""),f(Z=>{if(typeof Z!="string"||Z.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof Z} with length ${Z.length}`);return Z.toLowerCase()}));const z={utf8:n.utf8,hex:n.hex,base16:n.base16,base32:n.base32,base64:n.base64,base64url:n.base64url,base58:n.base58,base58xmr:n.base58xmr},H=`Invalid encoding type. Available types: ${Object.keys(z).join(", ")}`,X=(Z,ne)=>{if(typeof Z!="string"||!z.hasOwnProperty(Z))throw new TypeError(H);if(!(ne instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return z[Z].encode(ne)};n.bytesToString=X,n.str=n.bytesToString;const le=(Z,ne)=>{if(!z.hasOwnProperty(Z))throw new TypeError(H);if(typeof ne!="string")throw new TypeError("stringToBytes() expects string");return z[Z].decode(ne)};n.stringToBytes=le,n.bytes=n.stringToBytes})(lib)),lib}var bolt11,hasRequiredBolt11;function requireBolt11(){if(hasRequiredBolt11)return bolt11;hasRequiredBolt11=1;const{bech32:n,hex:e,utf8:s}=requireLib(),o={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},a={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},c={bech32:"tbs",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},f={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},h={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},m=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],g={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},_=BigInt("2100000000000000000"),E=BigInt(1e11),T={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},w={};for(let D=0,ae=Object.keys(T);D<ae.length;D++){const z=ae[D],H=T[ae[D]].toString();w[H]=z}const A={1:D=>e.encode(n.fromWordsUnsafe(D)),16:D=>e.encode(n.fromWordsUnsafe(D)),13:D=>s.encode(n.fromWordsUnsafe(D)),19:D=>e.encode(n.fromWordsUnsafe(D)),23:D=>e.encode(n.fromWordsUnsafe(D)),27:D=>e.encode(n.fromWordsUnsafe(D)),6:V,24:V,3:te,5:se};function R(D){return ae=>({tagCode:parseInt(D),words:n.encode("unknown",ae,Number.MAX_SAFE_INTEGER)})}function V(D){return D.reverse().reduce((ae,z,H)=>ae+z*Math.pow(32,H),0)}function te(D){const ae=[];let z,H,X,le,Z,ne=n.fromWordsUnsafe(D);for(;ne.length>0;)z=e.encode(ne.slice(0,33)),H=e.encode(ne.slice(33,41)),X=parseInt(e.encode(ne.slice(41,45)),16),le=parseInt(e.encode(ne.slice(45,49)),16),Z=parseInt(e.encode(ne.slice(49,51)),16),ne=ne.slice(51),ae.push({pubkey:z,short_channel_id:H,fee_base_msat:X,fee_proportional_millionths:le,cltv_expiry_delta:Z});return ae}function se(D){const ae=D.slice().reverse().map(X=>[!!(X&1),!!(X&2),!!(X&4),!!(X&8),!!(X&16)]).reduce((X,le)=>X.concat(le),[]);for(;ae.length<m.length*2;)ae.push(!1);const z={};m.forEach((X,le)=>{let Z;ae[le*2]?Z="required":ae[le*2+1]?Z="supported":Z="unsupported",z[X]=Z});const H=ae.slice(m.length*2);return z.extra_bits={start_bit:m.length*2,bits:H,has_required:H.reduce((X,le,Z)=>Z%2!==0?X||!1:X||le,!1)},z}function re(D,ae){let z,H;if(D.slice(-1).match(/^[munp]$/))z=D.slice(-1),H=D.slice(0,-1);else{if(D.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");H=D}if(!H.match(/^\d+$/))throw new Error("Not a valid human readable amount");const X=BigInt(H),le=z?X*E/g[z]:X*E;if(z==="p"&&X%BigInt(10)!==BigInt(0)||le>_)throw new Error("Amount is outside of valid range");return ae?le.toString():le}function ye(D,ae){if(typeof D!="string")throw new Error("Lightning Payment Request must be string");if(D.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");const z=[],H=n.decode(D,Number.MAX_SAFE_INTEGER);D=D.toLowerCase();const X=H.prefix;let le=H.words,Z=D.slice(X.length+1),ne=le.slice(-104);le=le.slice(0,-104);let W=X.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(W&&!W[2]&&(W=X.match(/^ln(\S+)$/)),!W)throw new Error("Not a proper lightning payment request");z.push({name:"lightning_network",letters:"ln"});const xe=W[1];let de;if(ae){if(ae.bech32===void 0||ae.pubKeyHash===void 0||ae.scriptHash===void 0||!Array.isArray(ae.validWitnessVersions))throw new Error("Invalid network");de=ae}else switch(xe){case o.bech32:de=o;break;case a.bech32:de=a;break;case c.bech32:de=c;break;case f.bech32:de=f;break;case h.bech32:de=h;break}if(!de||de.bech32!==xe)throw new Error("Unknown coin bech32 prefix");z.push({name:"coin_network",letters:xe,value:de});const oe=W[2];let _e;if(oe){const Ue=W[3];_e=re(oe+Ue,!0),z.push({name:"amount",letters:W[2]+W[3],value:_e})}else _e=null;z.push({name:"separator",letters:"1"});const Re=V(le.slice(0,7));le=le.slice(7),z.push({name:"timestamp",letters:Z.slice(0,7),value:Re}),Z=Z.slice(7);let Ie,he,be,Se;for(;le.length>0;){const Ue=le[0].toString();Ie=w[Ue]||"unknown_tag",he=A[Ue]||R(Ue),le=le.slice(1),be=V(le.slice(0,2)),le=le.slice(2),Se=le.slice(0,be),le=le.slice(be),z.push({name:Ie,tag:Z[0],letters:Z.slice(0,3+be),value:he(Se)}),Z=Z.slice(3+be)}z.push({name:"signature",letters:Z.slice(0,104),value:e.encode(n.fromWordsUnsafe(ne))}),Z=Z.slice(104),z.push({name:"checksum",letters:Z});let Ae={paymentRequest:D,sections:z,get expiry(){let Ue=z.find(qe=>qe.name==="expiry");if(Ue)return Be("timestamp")+Ue.value},get route_hints(){return z.filter(Ue=>Ue.name==="route_hint").map(Ue=>Ue.value)}};for(let Ue in T)Ue!=="route_hint"&&Object.defineProperty(Ae,Ue,{get(){return Be(Ue)}});return Ae;function Be(Ue){let qe=z.find(Xe=>Xe.name===Ue);return qe?qe.value:void 0}}return bolt11={decode:ye,hrpToMillisat:re},bolt11}requireBolt11();var NDKKind=(n=>(n[n.Metadata=0]="Metadata",n[n.Text=1]="Text",n[n.RecommendRelay=2]="RecommendRelay",n[n.Contacts=3]="Contacts",n[n.EncryptedDirectMessage=4]="EncryptedDirectMessage",n[n.EventDeletion=5]="EventDeletion",n[n.Repost=6]="Repost",n[n.Reaction=7]="Reaction",n[n.BadgeAward=8]="BadgeAward",n[n.GroupChat=9]="GroupChat",n[n.GroupNote=11]="GroupNote",n[n.GroupReply=12]="GroupReply",n[n.GiftWrapSeal=13]="GiftWrapSeal",n[n.PrivateDirectMessage=14]="PrivateDirectMessage",n[n.Image=20]="Image",n[n.Video=21]="Video",n[n.ShortVideo=22]="ShortVideo",n[n.Story=23]="Story",n[n.Vanish=62]="Vanish",n[n.CashuWalletBackup=375]="CashuWalletBackup",n[n.GiftWrap=1059]="GiftWrap",n[n.GenericRepost=16]="GenericRepost",n[n.ChannelCreation=40]="ChannelCreation",n[n.ChannelMetadata=41]="ChannelMetadata",n[n.ChannelMessage=42]="ChannelMessage",n[n.ChannelHideMessage=43]="ChannelHideMessage",n[n.ChannelMuteUser=44]="ChannelMuteUser",n[n.WikiMergeRequest=818]="WikiMergeRequest",n[n.GenericReply=1111]="GenericReply",n[n.Media=1063]="Media",n[n.Report=1984]="Report",n[n.Label=1985]="Label",n[n.DVMReqTextExtraction=5e3]="DVMReqTextExtraction",n[n.DVMReqTextSummarization=5001]="DVMReqTextSummarization",n[n.DVMReqTextTranslation=5002]="DVMReqTextTranslation",n[n.DVMReqTextGeneration=5050]="DVMReqTextGeneration",n[n.DVMReqImageGeneration=5100]="DVMReqImageGeneration",n[n.DVMReqTextToSpeech=5250]="DVMReqTextToSpeech",n[n.DVMReqDiscoveryNostrContent=5300]="DVMReqDiscoveryNostrContent",n[n.DVMReqDiscoveryNostrPeople=5301]="DVMReqDiscoveryNostrPeople",n[n.DVMReqTimestamping=5900]="DVMReqTimestamping",n[n.DVMEventSchedule=5905]="DVMEventSchedule",n[n.DVMJobFeedback=7e3]="DVMJobFeedback",n[n.Subscribe=7001]="Subscribe",n[n.Unsubscribe=7002]="Unsubscribe",n[n.SubscriptionReceipt=7003]="SubscriptionReceipt",n[n.CashuReserve=7373]="CashuReserve",n[n.CashuQuote=7374]="CashuQuote",n[n.CashuToken=7375]="CashuToken",n[n.CashuWalletTx=7376]="CashuWalletTx",n[n.GroupAdminAddUser=9e3]="GroupAdminAddUser",n[n.GroupAdminRemoveUser=9001]="GroupAdminRemoveUser",n[n.GroupAdminEditMetadata=9002]="GroupAdminEditMetadata",n[n.GroupAdminEditStatus=9006]="GroupAdminEditStatus",n[n.GroupAdminCreateGroup=9007]="GroupAdminCreateGroup",n[n.GroupAdminRequestJoin=9021]="GroupAdminRequestJoin",n[n.MuteList=1e4]="MuteList",n[n.PinList=10001]="PinList",n[n.RelayList=10002]="RelayList",n[n.BookmarkList=10003]="BookmarkList",n[n.CommunityList=10004]="CommunityList",n[n.PublicChatList=10005]="PublicChatList",n[n.BlockRelayList=10006]="BlockRelayList",n[n.SearchRelayList=10007]="SearchRelayList",n[n.SimpleGroupList=10009]="SimpleGroupList",n[n.InterestList=10015]="InterestList",n[n.CashuMintList=10019]="CashuMintList",n[n.EmojiList=10030]="EmojiList",n[n.DirectMessageReceiveRelayList=10050]="DirectMessageReceiveRelayList",n[n.BlossomList=10063]="BlossomList",n[n.NostrWaletConnectInfo=13194]="NostrWaletConnectInfo",n[n.TierList=17e3]="TierList",n[n.CashuWallet=17375]="CashuWallet",n[n.FollowSet=3e4]="FollowSet",n[n.CategorizedPeopleList=3e4]="CategorizedPeopleList",n[n.CategorizedBookmarkList=30001]="CategorizedBookmarkList",n[n.RelaySet=30002]="RelaySet",n[n.CategorizedRelayList=30002]="CategorizedRelayList",n[n.BookmarkSet=30003]="BookmarkSet",n[n.CurationSet=30004]="CurationSet",n[n.ArticleCurationSet=30004]="ArticleCurationSet",n[n.VideoCurationSet=30005]="VideoCurationSet",n[n.ImageCurationSet=30006]="ImageCurationSet",n[n.InterestSet=30015]="InterestSet",n[n.InterestsList=30015]="InterestsList",n[n.EmojiSet=30030]="EmojiSet",n[n.ModularArticle=30040]="ModularArticle",n[n.ModularArticleItem=30041]="ModularArticleItem",n[n.Wiki=30818]="Wiki",n[n.Draft=31234]="Draft",n[n.SubscriptionTier=37001]="SubscriptionTier",n[n.EcashMintRecommendation=38e3]="EcashMintRecommendation",n[n.HighlightSet=39802]="HighlightSet",n[n.CategorizedHighlightList=39802]="CategorizedHighlightList",n[n.Nutzap=9321]="Nutzap",n[n.ZapRequest=9734]="ZapRequest",n[n.Zap=9735]="Zap",n[n.Highlight=9802]="Highlight",n[n.ClientAuth=22242]="ClientAuth",n[n.NostrWalletConnectReq=23194]="NostrWalletConnectReq",n[n.NostrWalletConnectRes=23195]="NostrWalletConnectRes",n[n.NostrConnect=24133]="NostrConnect",n[n.BlossomUpload=24242]="BlossomUpload",n[n.HttpAuth=27235]="HttpAuth",n[n.ProfileBadge=30008]="ProfileBadge",n[n.BadgeDefinition=30009]="BadgeDefinition",n[n.MarketStall=30017]="MarketStall",n[n.MarketProduct=30018]="MarketProduct",n[n.Article=30023]="Article",n[n.AppSpecificData=30078]="AppSpecificData",n[n.Classified=30402]="Classified",n[n.HorizontalVideo=34235]="HorizontalVideo",n[n.VerticalVideo=34236]="VerticalVideo",n[n.LegacyCashuWallet=37375]="LegacyCashuWallet",n[n.GroupMetadata=39e3]="GroupMetadata",n[n.GroupAdmins=39001]="GroupAdmins",n[n.GroupMembers=39002]="GroupMembers",n[n.AppRecommendation=31989]="AppRecommendation",n[n.AppHandler=31990]="AppHandler",n))(NDKKind||{});function getRelaysForSync(n,e,s="write"){if(!n.outboxTracker)return;const o=n.outboxTracker.data.get(e);if(o)return s==="write"?o.writeRelays:o.readRelays}async function getWriteRelaysFor(n,e,s="write"){if(n.outboxTracker)return n.outboxTracker.data.has(e)||await n.outboxTracker.trackUsers([e]),getRelaysForSync(n,e,s)}function getTopRelaysForAuthors(n,e){const s=new Map;return e.forEach(a=>{const c=getRelaysForSync(n,a);c&&c.forEach(f=>{const h=s.get(f)||0;s.set(f,h+1)})}),Array.from(s.entries()).sort((a,c)=>c[1]-a[1]).map(a=>a[0])}function getAllRelaysForAllPubkeys(n,e,s="read"){const o=new Map,a=new Set;return e.forEach(c=>{const f=getRelaysForSync(n,c,s);f&&f.size>0?(f.forEach(h=>{(o.get(h)||new Set).add(c)}),o.set(c,f)):a.add(c)}),{pubkeysToRelays:o,authorsMissingRelays:a}}function chooseRelayCombinationForPubkeys(n,e,s,{count:o,preferredRelays:a}={}){o??=2,a??=new Set;const c=n.pool,f=c.connectedRelays();f.forEach(T=>{a?.add(T.url)});const h=new Map,{pubkeysToRelays:m,authorsMissingRelays:g}=getAllRelaysForAllPubkeys(n,e,s),_=getTopRelaysForAuthors(n,e),E=(T,w)=>{const A=h.get(w)||[];A.push(T),h.set(w,A)};for(const[T,w]of m.entries()){let A=o;for(const R of f)w.has(R.url)&&(E(T,R.url),A--);for(const R of w)h.has(R)&&(E(T,R),A--);if(!(A<=0))for(const R of _){if(A<=0)break;w.has(R)&&(E(T,R),A--)}}for(const T of g)c.permanentAndConnectedRelays().forEach(w=>{const A=h.get(w.url)||[];A.push(T),h.set(w.url,A)});return h}function getRelaysForFilterWithAuthors(n,e,s=2){return chooseRelayCombinationForPubkeys(n,e,"write",{count:s})}function tryNormalizeRelayUrl(n){try{return normalizeRelayUrl(n)}catch{return}}function normalizeRelayUrl(n){let e=normalizeUrl(n,{stripAuthentication:!1,stripWWW:!1,stripHash:!0});return e.endsWith("/")||(e+="/"),e}function normalize(n){const e=new Set;for(const s of n)try{e.add(normalizeRelayUrl(s))}catch{}return Array.from(e)}var DATA_URL_DEFAULT_MIME_TYPE="text/plain",DATA_URL_DEFAULT_CHARSET="us-ascii",testParameter=(n,e)=>e.some(s=>s instanceof RegExp?s.test(n):s===n),supportedProtocols=new Set(["https:","http:","file:"]),hasCustomProtocol=n=>{try{const{protocol:e}=new URL(n);return e.endsWith(":")&&!e.includes(".")&&!supportedProtocols.has(e)}catch{return!1}},normalizeDataURL=(n,{stripHash:e})=>{const s=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(n);if(!s)throw new Error(`Invalid URL: ${n}`);const o=s.groups?.type??"",a=s.groups?.data??"";let c=s.groups?.hash??"";const f=o.split(";");c=e?"":c;let h=!1;f[f.length-1]==="base64"&&(f.pop(),h=!0);const m=f.shift()?.toLowerCase()??"",_=[...f.map(E=>{let[T,w=""]=E.split("=").map(A=>A.trim());return T==="charset"&&(w=w.toLowerCase(),w===DATA_URL_DEFAULT_CHARSET)?"":`${T}${w?`=${w}`:""}`}).filter(Boolean)];return h&&_.push("base64"),(_.length>0||m&&m!==DATA_URL_DEFAULT_MIME_TYPE)&&_.unshift(m),`data:${_.join(";")},${h?a.trim():a}${c?`#${c}`:""}`};function normalizeUrl(n,e={}){if(e={defaultProtocol:"http",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,removeExplicitPort:!1,sortQueryParameters:!0,...e},typeof e.defaultProtocol=="string"&&!e.defaultProtocol.endsWith(":")&&(e.defaultProtocol=`${e.defaultProtocol}:`),n=n.trim(),/^data:/i.test(n))return normalizeDataURL(n,e);if(hasCustomProtocol(n))return n;const s=n.startsWith("//");!s&&/^\.*\//.test(n)||(n=n.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));const a=new URL(n);if(a.hostname=a.hostname.toLowerCase(),e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&a.protocol==="https:"&&(a.protocol="http:"),e.forceHttps&&a.protocol==="http:"&&(a.protocol="https:"),e.stripAuthentication&&(a.username="",a.password=""),e.stripHash?a.hash="":e.stripTextFragment&&(a.hash=a.hash.replace(/#?:~:text.*?$/i,"")),a.pathname){const f=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let h=0,m="";for(;;){const _=f.exec(a.pathname);if(!_)break;const E=_[0],T=_.index,w=a.pathname.slice(h,T);m+=w.replace(/\/{2,}/g,"/"),m+=E,h=T+E.length}const g=a.pathname.slice(h,a.pathname.length);m+=g.replace(/\/{2,}/g,"/"),a.pathname=m}if(a.pathname)try{a.pathname=decodeURI(a.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let f=a.pathname.split("/");const h=f[f.length-1];testParameter(h,e.removeDirectoryIndex)&&(f=f.slice(0,-1),a.pathname=`${f.slice(1).join("/")}/`)}if(a.hostname&&(a.hostname=a.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(a.hostname)&&(a.hostname=a.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(const f of[...a.searchParams.keys()])testParameter(f,e.removeQueryParameters)&&a.searchParams.delete(f);if(!Array.isArray(e.keepQueryParameters)&&e.removeQueryParameters===!0&&(a.search=""),Array.isArray(e.keepQueryParameters)&&e.keepQueryParameters.length>0)for(const f of[...a.searchParams.keys()])testParameter(f,e.keepQueryParameters)||a.searchParams.delete(f);if(e.sortQueryParameters){a.searchParams.sort();try{a.search=decodeURIComponent(a.search)}catch{}}e.removeTrailingSlash&&(a.pathname=a.pathname.replace(/\/$/,"")),e.removeExplicitPort&&a.port&&(a.port="");const c=n;return n=a.toString(),!e.removeSingleSlash&&a.pathname==="/"&&!c.endsWith("/")&&a.hash===""&&(n=n.replace(/\/$/,"")),(e.removeTrailingSlash||a.pathname==="/")&&a.hash===""&&e.removeSingleSlash&&(n=n.replace(/\/$/,"")),s&&!e.normalizeProtocol&&(n=n.replace(/^http:\/\//,"//")),e.stripProtocol&&(n=n.replace(/^(?:https?:)?\/\//,"")),n}var MAX_RECONNECT_ATTEMPTS=5,FLAPPING_THRESHOLD_MS=1e3,NDKRelayConnectivity=class{ndkRelay;ws;_status;timeoutMs;connectedAt;_connectionStats={attempts:0,success:0,durations:[]};debug;netDebug;connectTimeout;reconnectTimeout;ndk;openSubs=new Map;openCountRequests=new Map;openEventPublishes=new Map;serial=0;baseEoseTimeout=4400;constructor(n,e){this.ndkRelay=n,this._status=1;const s=Math.floor(Math.random()*1e3);this.debug=this.ndkRelay.debug.extend(`connectivity${s}`),this.ndk=e}async connect(n,e=!0){if(this._status!==2&&this._status!==1||this.reconnectTimeout){this.debug("Relay requested to be connected but was in state %s or it had a reconnect timeout",this._status);return}this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),n??=this.timeoutMs,!this.timeoutMs&&n&&(this.timeoutMs=n),this.timeoutMs&&(this.connectTimeout=setTimeout(()=>this.onConnectionError(e),this.timeoutMs));try{this.updateConnectionStats.attempt(),this._status===1?this._status=4:this._status=2,this.ws=new WebSocket(this.ndkRelay.url),this.ws.onopen=this.onConnect.bind(this),this.ws.onclose=this.onDisconnect.bind(this),this.ws.onmessage=this.onMessage.bind(this),this.ws.onerror=this.onError.bind(this)}catch(s){throw this.debug(`Failed to connect to ${this.ndkRelay.url}`,s),this._status=1,e?this.handleReconnection():this.ndkRelay.emit("delayed-connect",2880*60*1e3),s}}disconnect(){this._status=0;try{this.ws?.close()}catch(n){this.debug("Failed to disconnect",n),this._status=1}}onConnectionError(n){this.debug(`Error connecting to ${this.ndkRelay.url}`,this.timeoutMs),n&&!this.reconnectTimeout&&this.handleReconnection()}onConnect(){this.netDebug?.("connected",this.ndkRelay),this.reconnectTimeout&&(clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=void 0),this.updateConnectionStats.connected(),this._status=5,this.ndkRelay.emit("connect"),this.ndkRelay.emit("ready")}onDisconnect(){this.netDebug?.("disconnected",this.ndkRelay),this.updateConnectionStats.disconnected(),this._status===5&&this.handleReconnection(),this._status=1,this.ndkRelay.emit("disconnect")}onMessage(n){this.netDebug?.(n.data,this.ndkRelay,"recv");try{const e=JSON.parse(n.data),[s,o,...a]=e;switch(s){case"EVENT":{const c=this.openSubs.get(o),f=e[2];if(!c){this.debug(`Received event for unknown subscription ${o}`);return}c.onevent(f);return}case"COUNT":{const c=e[2],f=this.openCountRequests.get(o);f&&(f.resolve(c.count),this.openCountRequests.delete(o));return}case"EOSE":{const c=this.openSubs.get(o);if(!c)return;c.oneose(o);return}case"OK":{const c=e[2],f=e[3],h=this.openEventPublishes.get(o),m=h?.pop();if(!h||!m){this.debug("Received OK for unknown event publish",o);return}c?m.resolve(f):m.reject(new Error(f)),h.length===0?this.openEventPublishes.delete(o):this.openEventPublishes.set(o,h);return}case"CLOSED":{const c=this.openSubs.get(o);if(!c)return;c.onclosed(e[2]);return}case"NOTICE":this.onNotice(e[1]);return;case"AUTH":{this.onAuthRequested(e[1]);return}}}catch(e){this.debug(`Error parsing message from ${this.ndkRelay.url}: ${e.message}`,e?.stack);return}}async onAuthRequested(n){const e=this.ndkRelay.authPolicy??this.ndk?.relayAuthDefaultPolicy;if(this.debug("Relay requested authentication",{havePolicy:!!e}),this._status===7){this.debug("Already authenticating, ignoring");return}if(this._status=6,e){if(this._status>=5){this._status=7;let s;try{s=await e(this.ndkRelay,n)}catch(o){this.debug("Authentication policy threw an error",o),s=!1}if(this.debug("Authentication policy returned",!!s),s instanceof NDKEvent||s===!0){s instanceof NDKEvent&&await this.auth(s);const o=async()=>{if(this._status>=5&&this._status<8){const a=new NDKEvent(this.ndk);a.kind=22242,a.tags=[["relay",this.ndkRelay.url],["challenge",n]],await a.sign(),this.auth(a).then(()=>{this._status=8,this.ndkRelay.emit("authed"),this.debug("Authentication successful")}).catch(c=>{this._status=6,this.ndkRelay.emit("auth:failed",c),this.debug("Authentication failed",c)})}else this.debug("Authentication failed, it changed status, status is %d",this._status)};s===!0&&(this.ndk?.signer?o().catch(a=>{console.error("Error authenticating",a)}):(this.debug("No signer available for authentication localhost"),this.ndk?.once("signer:ready",o))),this._status=5,this.ndkRelay.emit("authed")}}}else this.ndkRelay.emit("auth",n)}onError(n){this.debug(`WebSocket error on ${this.ndkRelay.url}:`,n)}get status(){return this._status}isAvailable(){return this._status===5}isFlapping(){const n=this._connectionStats.durations;if(n.length%3!==0)return!1;const s=n.reduce((f,h)=>f+h,0)/n.length,o=n.map(f=>(f-s)**2).reduce((f,h)=>f+h,0)/n.length;return Math.sqrt(o)<FLAPPING_THRESHOLD_MS}async onNotice(n){this.ndkRelay.emit("notice",n)}handleReconnection(n=0){if(this.reconnectTimeout)return;if(this.isFlapping()){this.ndkRelay.emit("flapping",this._connectionStats),this._status=3;return}const e=this.connectedAt?Math.max(0,6e4-(Date.now()-this.connectedAt)):5e3*(this._connectionStats.attempts+1);this.reconnectTimeout=setTimeout(()=>{this.reconnectTimeout=void 0,this._status=2,this.connect().catch(s=>{n<MAX_RECONNECT_ATTEMPTS?setTimeout(()=>{this.handleReconnection(n+1)},1e3*(n+1)^4):this.debug("Reconnect failed")})},e),this.ndkRelay.emit("delayed-connect",e),this.debug("Reconnecting in",e),this._connectionStats.nextReconnectAt=Date.now()+e}async send(n){this._status>=5&&this.ws?.readyState===WebSocket.OPEN?(this.ws?.send(n),this.netDebug?.(n,this.ndkRelay,"send")):this.debug(`Not connected to ${this.ndkRelay.url} (%d), not sending message ${n}`,this._status)}async auth(n){const e=new Promise((s,o)=>{const a=this.openEventPublishes.get(n.id)??[];a.push({resolve:s,reject:o}),this.openEventPublishes.set(n.id,a)});return this.send(`["AUTH",${JSON.stringify(n.rawEvent())}]`),e}async publish(n){const e=new Promise((s,o)=>{const a=this.openEventPublishes.get(n.id)??[];a.length>0&&console.warn(`Duplicate event publishing detected, you are publishing event ${n.id} twice`),a.push({resolve:s,reject:o}),this.openEventPublishes.set(n.id,a)});return this.send(`["EVENT",${JSON.stringify(n)}]`),e}async count(n,e){this.serial++;const s=e?.id||`count:${this.serial}`,o=new Promise((a,c)=>{this.openCountRequests.set(s,{resolve:a,reject:c})});return this.send(`["COUNT","${s}",${JSON.stringify(n).substring(1)}`),o}close(n,e){this.send(`["CLOSE","${n}"]`);const s=this.openSubs.get(n);this.openSubs.delete(n),s&&s.onclose(e)}req(n){`${this.send(`["REQ","${n.subId}",${JSON.stringify(n.executeFilters).substring(1)}`)}`,this.openSubs.set(n.subId,n)}updateConnectionStats={connected:()=>{this._connectionStats.success++,this._connectionStats.connectedAt=Date.now()},disconnected:()=>{this._connectionStats.connectedAt&&(this._connectionStats.durations.push(Date.now()-this._connectionStats.connectedAt),this._connectionStats.durations.length>100&&this._connectionStats.durations.shift()),this._connectionStats.connectedAt=void 0},attempt:()=>{this._connectionStats.attempts++,this._connectionStats.connectedAt=Date.now()}};get connectionStats(){return this._connectionStats}get url(){return this.ndkRelay.url}get connected(){return this._status>=5&&this.ws?.readyState===WebSocket.OPEN}},NDKRelayPublisher=class{ndkRelay;debug;constructor(n){this.ndkRelay=n,this.debug=n.debug.extend("publisher")}async publish(n,e=2500){let s;const o=()=>new Promise((_,E)=>{try{this.publishEvent(n).then(T=>{this.ndkRelay.emit("published",n),n.emit("relay:published",this.ndkRelay),_(!0)}).catch(E)}catch(T){E(T)}}),a=new Promise((_,E)=>{s=setTimeout(()=>{s=void 0,E(new Error(`Timeout: ${e}ms`))},e)}),c=()=>{o().then(_=>f(_)).catch(_=>h(_))};let f,h;const m=_=>{throw this.ndkRelay.debug("Publish failed",_,n.id),this.ndkRelay.emit("publish:failed",n,_),n.emit("relay:publish:failed",this.ndkRelay,_),_},g=()=>{s&&clearTimeout(s),this.ndkRelay.removeListener("connect",c)};return this.ndkRelay.status>=5?Promise.race([o(),a]).catch(m).finally(g):(this.ndkRelay.status<=1?(console.warn("Relay is disconnected, trying to connect to publish an event",this.ndkRelay.url),this.ndkRelay.connect()):console.warn("Relay not connected, waiting for connection to publish an event",this.ndkRelay.url),Promise.race([new Promise((_,E)=>{f=_,h=E,this.ndkRelay.on("connect",c)}),a]).catch(m).finally(g))}async publishEvent(n){return this.ndkRelay.connectivity.publish(n.rawEvent())}};function filterFingerprint(n,e){const s=[];for(const a of n){const c=Object.entries(a||{}).map(([f,h])=>["since","until"].includes(f)?`${f}:${h}`:f).sort().join("-");s.push(c)}let o=e?"+":"";return o+=s.join("|"),o}function mergeFilters(n){const e=[],s={};return n.filter(o=>!!o.limit).forEach(o=>e.push(o)),n=n.filter(o=>!o.limit),n.length===0?e:(n.forEach(o=>{Object.entries(o).forEach(([a,c])=>{Array.isArray(c)?s[a]===void 0?s[a]=[...c]:s[a]=Array.from(new Set([...s[a],...c])):s[a]=c})}),[...e,s])}var NDKRelaySubscription=class{fingerprint;items=new Map;topSubManager;debug;status=0;onClose;relay;eosed=!1;executionTimer;fireTime;delayType;executeFilters;id=Math.random().toString(36).substring(7);constructor(n,e,s){this.relay=n,this.topSubManager=s,this.debug=n.debug.extend(`sub[${this.id}]`),this.fingerprint=e||Math.random().toString(36).substring(7)}_subId;get subId(){return this._subId?this._subId:(this._subId=this.fingerprint.slice(0,15),this._subId)}subIdParts=new Set;addSubIdPart(n){this.subIdParts.add(n)}addItem(n,e){if(this.debug("Adding item",{filters:e,internalId:n.internalId,status:this.status,fingerprint:this.fingerprint,id:this.subId,items:this.items,itemsSize:this.items.size}),!this.items.has(n.internalId))switch(n.on("close",this.removeItem.bind(this,n)),this.items.set(n.internalId,{subscription:n,filters:e}),this.status!==3&&n.subId&&(!this._subId||this._subId.length<48)&&(this.status===0||this.status===1)&&this.addSubIdPart(n.subId),this.status){case 0:this.evaluateExecutionPlan(n);break;case 3:break;case 1:this.evaluateExecutionPlan(n);break;case 4:throw this.debug("Subscription is closed, cannot add new items %o (%o)",n,e),new Error("Cannot add new items to a closed subscription")}}removeItem(n){if(this.items.delete(n.internalId),this.items.size===0){if(!this.eosed)return;this.close(),this.cleanup()}}close(){if(this.status===4)return;const n=this.status;if(this.status=4,n===3)try{this.relay.close(this.subId)}catch(e){this.debug("Error closing subscription",e,this)}else this.debug("Subscription wanted to close but it wasn't running, this is probably ok",{subId:this.subId,prevStatus:n,sub:this});this.cleanup()}cleanup(){this.executionTimer&&clearTimeout(this.executionTimer),this.relay.off("ready",this.executeOnRelayReady),this.relay.off("authed",this.reExecuteAfterAuth),this.onClose&&this.onClose(this)}evaluateExecutionPlan(n){if(!n.isGroupable()){this.status=1,this.execute();return}if(n.filters.find(o=>!!o.limit)&&(this.executeFilters=this.compileFilters(),this.executeFilters.length>=10)){this.status=1,this.execute();return}const e=n.groupableDelay,s=n.groupableDelayType;if(!e)throw new Error("Cannot group a subscription without a delay");if(this.status===0)this.schedule(e,s);else{const o=this.delayType,a=this.fireTime-Date.now();if(o==="at-least"&&s==="at-least")a<e&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(e,s));else if(o==="at-least"&&s==="at-most")a>e&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(e,s));else if(o==="at-most"&&s==="at-most")a>e&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(e,s));else if(o==="at-most"&&s==="at-least")a>e&&(this.executionTimer&&clearTimeout(this.executionTimer),this.schedule(e,s));else throw new Error(`Unknown delay type combination ${o} ${s}`)}}schedule(n,e){this.status=1;const s=Date.now();this.fireTime=s+n,this.delayType=e;const o=setTimeout(this.execute.bind(this),n);e==="at-least"&&(this.executionTimer=o)}executeOnRelayReady=()=>{if(this.status===2){if(this.items.size===0){this.debug("No items to execute; this relay was probably too slow to respond and the caller gave up",{status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size,id:this.id,subId:this.subId}),this.cleanup();return}this.debug("Executing on relay ready",{status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.status=1,this.execute()}};finalizeSubId(){this.subIdParts.size>0?this._subId=Array.from(this.subIdParts).join("-"):this._subId=this.fingerprint.slice(0,15),this._subId+=`-${Math.random().toString(36).substring(2,7)}`}reExecuteAfterAuth=(()=>{const n=this.subId;this.debug("Re-executing after auth",this.items.size),this.eosed?this.relay.close(this.subId):this.debug("We are abandoning an opened subscription, once it EOSE's, the handler will close it",{oldSubId:n}),this._subId=void 0,this.status=1,this.execute(),this.debug("Re-executed after auth %s 👉 %s",n,this.subId)}).bind(this);execute(){if(this.status===1){if(!this.relay.connected){this.status=2,this.debug("Waiting for relay to be ready",{status:this.status,id:this.subId,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.relay.once("ready",this.executeOnRelayReady);return}this.relay.status<8&&this.relay.once("authed",this.reExecuteAfterAuth),this.status=3,this.finalizeSubId(),this.executeFilters=this.compileFilters(),this.relay.req(this)}}onstart(){}onevent(n){this.topSubManager.dispatchEvent(n,this.relay)}oneose(n){if(this.eosed=!0,n!==this.subId){this.debug("Received EOSE for an abandoned subscription",n,this.subId),this.relay.close(n);return}this.items.size===0&&this.close();for(const{subscription:e}of this.items.values())e.eoseReceived(this.relay),e.closeOnEose&&(this.debug("Removing item because of EOSE",{filters:e.filters,internalId:e.internalId,status:this.status,fingerprint:this.fingerprint,items:this.items,itemsSize:this.items.size}),this.removeItem(e))}onclose(n){this.status=4}onclosed(n){if(n)for(const{subscription:e}of this.items.values())e.closedReceived(this.relay,n)}compileFilters(){const n=[],e=Array.from(this.items.values()).map(o=>o.filters);if(!e[0])return this.debug("👀 No filters to merge",this.items),console.error("BUG: No filters to merge!",this.items),[];const s=e[0].length;for(let o=0;o<s;o++){const a=e.map(c=>c[o]);n.push(...mergeFilters(a))}return n}},NDKRelaySubscriptionManager=class{relay;subscriptions;generalSubManager;constructor(n,e){this.relay=n,this.subscriptions=new Map,this.generalSubManager=e}addSubscription(n,e){let s;if(!n.isGroupable())s=this.createSubscription(n,e);else{const o=filterFingerprint(e,n.closeOnEose);o&&(s=(this.subscriptions.get(o)||[]).find(c=>c.status<3)),s??=this.createSubscription(n,e,o)}s.addItem(n,e)}createSubscription(n,e,s){const o=new NDKRelaySubscription(this.relay,s||null,this.generalSubManager);o.onClose=this.onRelaySubscriptionClose.bind(this);const a=this.subscriptions.get(o.fingerprint)??[];return this.subscriptions.set(o.fingerprint,[...a,o]),o}onRelaySubscriptionClose(n){let e=this.subscriptions.get(n.fingerprint)??[];e?e.length===1?this.subscriptions.delete(n.fingerprint):(e=e.filter(s=>s.id!==n.id),this.subscriptions.set(n.fingerprint,e)):console.warn("Unexpectedly did not find a subscription with fingerprint",n.fingerprint)}},NDKRelay=class np extends libExports.EventEmitter{url;scores;connectivity;subs;publisher;authPolicy;lowestValidationRatio;targetValidationRatio;validationRatioFn;validatedEventCount=0;nonValidatedEventCount=0;trusted=!1;complaining=!1;debug;static defaultValidationRatioUpdateFn=(e,s,o)=>{if(e.lowestValidationRatio===void 0||e.targetValidationRatio===void 0)return 1;let a=e.validationRatio;if(e.validationRatio>e.targetValidationRatio){const c=s/100;a=Math.max(e.lowestValidationRatio,e.validationRatio-c)}return a<e.validationRatio?a:e.validationRatio};constructor(e,s,o){super(),this.url=normalizeRelayUrl(e),this.scores=new Map,this.debug=createDebug5(`ndk:relay:${e}`),this.connectivity=new NDKRelayConnectivity(this,o),this.connectivity.netDebug=o?.netDebug,this.req=this.connectivity.req.bind(this.connectivity),this.close=this.connectivity.close.bind(this.connectivity),this.subs=new NDKRelaySubscriptionManager(this,o.subManager),this.publisher=new NDKRelayPublisher(this),this.authPolicy=s,this.targetValidationRatio=o?.initialValidationRatio,this.lowestValidationRatio=o?.lowestValidationRatio,this.validationRatioFn=(o?.validationRatioFn??np.defaultValidationRatioUpdateFn).bind(this),this.updateValidationRatio(),o||console.trace("relay created without ndk")}updateValidationRatio(){if(this.validationRatioFn&&this.validatedEventCount>0){const e=this.validationRatioFn(this,this.validatedEventCount,this.nonValidatedEventCount);this.targetValidationRatio=e}setTimeout(()=>{this.updateValidationRatio()},3e4)}get status(){return this.connectivity.status}get connectionStats(){return this.connectivity.connectionStats}async connect(e,s=!0){return this.connectivity.connect(e,s)}disconnect(){this.status!==1&&this.connectivity.disconnect()}subscribe(e,s){this.subs.addSubscription(e,s)}async publish(e,s=2500){return this.publisher.publish(e,s)}referenceTags(){return[["r",this.url]]}addValidatedEvent(){this.validatedEventCount++}addNonValidatedEvent(){this.nonValidatedEventCount++}get validationRatio(){return this.nonValidatedEventCount===0?1:this.validatedEventCount/(this.validatedEventCount+this.nonValidatedEventCount)}shouldValidateEvent(){return this.trusted?!1:this.targetValidationRatio===void 0||this.targetValidationRatio>=1?!0:Math.random()<this.targetValidationRatio}get connected(){return this.connectivity.connected}req;close},NDKPublishError=class extends Error{errors;publishedToRelays;intendedRelaySet;constructor(n,e,s,o){super(n),this.errors=e,this.publishedToRelays=s,this.intendedRelaySet=o}get relayErrors(){const n=[];for(const[e,s]of this.errors)n.push(`${e.url}: ${s}`);return n.join(`
`)}},NDKRelaySet=class rp{relays;debug;ndk;pool;constructor(e,s,o){this.relays=e,this.ndk=s,this.pool=o??s.pool,this.debug=s.debug.extend("relayset")}addRelay(e){this.relays.add(e)}get relayUrls(){return Array.from(this.relays).map(e=>e.url)}static fromRelayUrls(e,s,o=!0,a){if(a=a??s.pool,!a)throw new Error("No pool provided");const c=new Set;for(const f of e){const h=a.relays.get(normalizeRelayUrl(f));if(h)h.status<5&&o&&h.connect(),c.add(h);else{const m=new NDKRelay(normalizeRelayUrl(f),s?.relayAuthDefaultPolicy,s);a.useTemporaryRelay(m,void 0,`requested from fromRelayUrls ${e}`),c.add(m)}}return new rp(new Set(c),s,a)}async publish(e,s,o=1){const a=new Set,c=new Map,f=e.isEphemeral();e.publishStatus="pending";const h=m=>{a.add(m)};e.on("relay:published",h);try{const m=Array.from(this.relays).map(g=>new Promise(_=>{const E=s?setTimeout(()=>{a.has(g)||(c.set(g,new Error(`Publish timeout after ${s}ms`)),_(!1))},s):null;g.publish(e,s).then(T=>{E&&clearTimeout(E),T?(a.add(g),_(!0)):_(!1)}).catch(T=>{E&&clearTimeout(E),f||c.set(g,T),_(!1)})}));if(await Promise.all(m),a.size<o){if(!f){const g=new NDKPublishError("Not enough relays received the event ("+a.size+" published, "+o+" required)",c,a,this);throw e.publishStatus="error",e.publishError=g,this.ndk?.emit("event:publish-failed",e,g,this.relayUrls),g}}else e.publishStatus="success",e.emit("published",{relaySet:this,publishedToRelays:a});return a}finally{e.off("relay:published",h)}}get size(){return this.relays.size}},d=createDebug5("ndk:outbox:calculate");async function calculateRelaySetFromEvent(n,e,s){const o=new Set,a=await getWriteRelaysFor(n,e.pubkey);a&&a.forEach(h=>{const m=n.pool?.getRelay(h);m&&o.add(m)});let c=e.tags.filter(h=>["a","e"].includes(h[0])).map(h=>h[2]).filter(h=>h?.startsWith("wss://")).filter(h=>{try{return new URL(h),!0}catch{return!1}}).map(h=>normalizeRelayUrl(h));c=Array.from(new Set(c)).slice(0,5),c.forEach(h=>{const m=n.pool?.getRelay(h,!0,!0);m&&(d("Adding relay hint %s",h),o.add(m))});const f=e.getMatchingTags("p").map(h=>h[1]);return f.length<5?Array.from(chooseRelayCombinationForPubkeys(n,f,"read",{preferredRelays:new Set(a)}).keys()).forEach(m=>{const g=n.pool?.getRelay(m,!1,!0);g&&(d("Adding p-tagged relay %s",m),o.add(g))}):d("Too many p-tags to consider %d",f.length),n.pool?.permanentAndConnectedRelays().forEach(h=>o.add(h)),s&&o.size<s&&n.explicitRelayUrls?.filter(m=>!Array.from(o).some(g=>g.url===m)).slice(0,s-o.size)?.forEach(m=>{const g=n.pool?.getRelay(m,!1,!0);g&&(d("Adding explicit relay %s",m),o.add(g))}),new NDKRelaySet(o,n)}function calculateRelaySetsFromFilter(n,e,s){const o=new Map,a=new Set;if(e.forEach(c=>{c.authors&&c.authors.forEach(f=>a.add(f))}),a.size>0){const c=getRelaysForFilterWithAuthors(n,Array.from(a));for(const f of c.keys())o.set(f,[]);for(const f of e)if(f.authors)for(const[h,m]of c.entries()){const g=f.authors.filter(_=>m.includes(_));o.set(h,[...o.get(h),{...f,authors:g}])}else for(const h of c.keys())o.set(h,[...o.get(h),f])}else n.explicitRelayUrls&&n.explicitRelayUrls.forEach(c=>{o.set(c,e)});return o.size===0&&s.permanentAndConnectedRelays().slice(0,5).forEach(c=>{o.set(c.url,e)}),o}function calculateRelaySetsFromFilters(n,e,s){return calculateRelaySetsFromFilter(n,e,s)}function mergeTags(n,e){const s=new Map,o=f=>f.join(","),a=(f,h)=>f.every((m,g)=>m===h[g]),c=f=>{for(const[h,m]of s)if(a(m,f)||a(f,m)){f.length>=m.length&&s.set(h,f);return}s.set(o(f),f)};return n.concat(e).forEach(c),Array.from(s.values())}var hashtagRegex=new RegExp(`(?<=\\s|^)(#[^\\s!@#$%^&*()=+./,[{\\]};:'"?><]+)`,"g");function generateHashtags(n){const e=n.match(hashtagRegex),s=new Set,o=new Set;if(e)for(const a of e)s.has(a.slice(1))||(o.add(a.slice(1)),s.add(a.slice(1)));return Array.from(o)}async function generateContentTags(n,e=[]){const s=/(@|nostr:)(npub|nprofile|note|nevent|naddr)[a-zA-Z0-9]+/g,o=[],a=f=>{e.find(h=>["q",f[0]].includes(h[0])&&h[1]===f[1])||e.push(f)};n=n.replace(s,f=>{try{const h=f.split(/(@|nostr:)/)[2],{type:m,data:g}=nip19_exports.decode(h);let _;switch(m){case"npub":_=["p",g];break;case"nprofile":_=["p",g.pubkey];break;case"note":o.push(new Promise(async E=>{a(["q",g,await maybeGetEventRelayUrl(h)]),E()}));break;case"nevent":o.push(new Promise(async E=>{const{id:T,author:w}=g;let{relays:A}=g;(!A||A.length===0)&&(A=[await maybeGetEventRelayUrl(h)]),a(["q",T,A[0]]),w&&a(["p",w]),E()}));break;case"naddr":o.push(new Promise(async E=>{const T=[g.kind,g.pubkey,g.identifier].join(":");let w=g.relays??[];w.length===0&&(w=[await maybeGetEventRelayUrl(h)]),a(["q",T,w[0]]),a(["p",g.pubkey]),E()}));break;default:return f}return _&&a(_),`nostr:${h}`}catch{return f}}),await Promise.all(o);const c=generateHashtags(n).map(f=>["t",f]);return e=mergeTags(e,c),{content:n,tags:e}}async function maybeGetEventRelayUrl(n){return""}async function encrypt(n,e,s="nip44"){let o;if(!this.ndk)throw new Error("No NDK instance found!");let a=e;if(a||(this.ndk.assertSigner(),a=this.ndk.signer),!a)throw new Error("no NDK signer");const c=n||(()=>{const f=this.getMatchingTags("p");if(f.length!==1)throw new Error("No recipient could be determined and no explicit recipient was provided");return this.ndk.getUser({pubkey:f[0][1]})})();if(s==="nip44"&&await isEncryptionEnabled(a,"nip44")&&(o=await a.encrypt(c,this.content,"nip44")),(!o||s==="nip04")&&await isEncryptionEnabled(a,"nip04")&&(o=await a.encrypt(c,this.content,"nip04")),!o)throw new Error("Failed to encrypt event.");this.content=o}async function decrypt(n,e,s){if(this.ndk?.cacheAdapter?.getDecryptedEvent){let h=null;if(typeof this.ndk.cacheAdapter.getDecryptedEvent=="function"&&(h=this.ndk.cacheAdapter.getDecryptedEvent(this.id)),h){this.content=h.content;return}}let o;if(!this.ndk)throw new Error("No NDK instance found!");let a=e;if(a||(this.ndk.assertSigner(),a=this.ndk.signer),!a)throw new Error("no NDK signer");const c=n||this.author;if(!c)throw new Error("No sender provided and no author available");const f=s||(this.content.match(/\\?iv=/)?"nip04":"nip44");if((f==="nip04"||this.kind===4)&&await isEncryptionEnabled(a,"nip04")&&this.content.search("\\?iv=")&&(o=await a.decrypt(c,this.content,"nip04")),!o&&f==="nip44"&&await isEncryptionEnabled(a,"nip44")&&(o=await a.decrypt(c,this.content,"nip44")),!o)throw new Error("Failed to decrypt event.");this.content=o,this.ndk?.cacheAdapter?.addDecryptedEvent&&this.ndk.cacheAdapter.addDecryptedEvent(this)}async function isEncryptionEnabled(n,e){return n.encryptionEnabled?e?!!await n.encryptionEnabled(e):!0:!1}function eventHasETagMarkers(n){for(const e of n.tags)if(e[0]==="e"&&(e[3]??"").length>0)return!0;return!1}function getRootTag(n,e){e??=n.tagType();const s=n.tags.find(isTagRootTag);if(!s){if(eventHasETagMarkers(n))return;const o=n.getMatchingTags(e);if(o.length<3)return o[0]}return s}var nip22RootTags=new Set(["A","E","I"]),nip22ReplyTags=new Set(["a","e","i"]);function getReplyTag(n,e){if(n.kind===1111){let a;for(const c of n.tags)if(nip22RootTags.has(c[0]))a=c;else if(nip22ReplyTags.has(c[0])){a=c;break}return a}e??=n.tagType();let s=!1,o;for(const a of n.tags)if(a[0]===e){if((a[3]??"").length>0&&(s=!0),s&&a[3]==="reply")return a;s&&a[3]==="root"&&(o=a),s||(o=a)}return o}function isTagRootTag(n){return n[0]==="E"||n[3]==="root"}async function fetchTaggedEvent(n,e){if(!this.ndk)throw new Error("NDK instance not found");const s=this.getMatchingTags(n,e);if(s.length===0)return;const[o,a,c]=s[0];let f=c!==""?this.ndk.pool.getRelay(c):void 0;return await this.ndk.fetchEvent(a,{},f)}async function fetchRootEvent(n){if(!this.ndk)throw new Error("NDK instance not found");const e=getRootTag(this);if(e)return this.ndk.fetchEventFromTag(e,this,n)}async function fetchReplyEvent(n){if(!this.ndk)throw new Error("NDK instance not found");const e=getReplyTag(this);if(e)return this.ndk.fetchEventFromTag(e,this,n)}function isReplaceable(){if(this.kind===void 0)throw new Error("Kind not set");return[0,3].includes(this.kind)||this.kind>=1e4&&this.kind<2e4||this.kind>=3e4&&this.kind<4e4}function isEphemeral(){if(this.kind===void 0)throw new Error("Kind not set");return this.kind>=2e4&&this.kind<3e4}function isParamReplaceable(){if(this.kind===void 0)throw new Error("Kind not set");return this.kind>=3e4&&this.kind<4e4}var DEFAULT_RELAY_COUNT=2;function encode(n=DEFAULT_RELAY_COUNT){let e=[];return this.onRelays.length>0?e=this.onRelays.map(s=>s.url):this.relay&&(e=[this.relay.url]),e.length>n&&(e=e.slice(0,n)),this.isParamReplaceable()?nip19_exports.naddrEncode({kind:this.kind,pubkey:this.pubkey,identifier:this.replaceableDTag(),relays:e}):e.length>0?nip19_exports.neventEncode({id:this.tagId(),relays:e,author:this.pubkey}):nip19_exports.noteEncode(this.tagId())}async function repost(n=!0,e){if(!e&&n){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),e=this.ndk.signer}const s=new NDKEvent(this.ndk,{kind:getKind(this)});return this.isProtected||(s.content=JSON.stringify(this.rawEvent())),s.tag(this),this.kind!==1&&s.tags.push(["k",`${this.kind}`]),e&&await s.sign(e),n&&await s.publish(),s}function getKind(n){return n.kind===1?6:16}function serialize(n=!1,e=!1){const s=[0,this.pubkey,this.created_at,this.kind,this.tags,this.content];return n&&s.push(this.sig),e&&s.push(this.id),JSON.stringify(s)}function deserialize(n){const e=JSON.parse(n),s={pubkey:e[1],created_at:e[2],kind:e[3],tags:e[4],content:e[5]};if(e.length>=7){const o=e[6],a=e[7];o&&o.length===128?(s.sig=o,a&&a.length===64&&(s.id=a)):o&&o.length===64&&(s.id=o,a&&a.length===128&&(s.sig=a))}return s}var worker,processingQueue={};function signatureVerificationInit(n){worker=n,worker.onmessage=e=>{const[s,o]=e.data,a=processingQueue[s];if(!a){console.error("No record found for event",s);return}delete processingQueue[s];for(const c of a.resolves)c(o)}}async function verifySignatureAsync(n,e,s){const o=n.ndk,a=Date.now();let c;return o.signatureVerificationFunction?(console.log("[NDK-CORE] Using custom signature verification function async"),c=await o.signatureVerificationFunction(n),console.log("Custom signature verification result",n.id,{result:c})):(console.log("Using worker-based signature verification async"),c=await new Promise(f=>{const h=n.serialize();let m=!1;processingQueue[n.id]||(processingQueue[n.id]={event:n,resolves:[],relay:s},m=!0),processingQueue[n.id].resolves.push(f),m&&worker?.postMessage({serialized:h,id:n.id,sig:n.sig,pubkey:n.pubkey})})),o.signatureVerificationTimeMs+=Date.now()-a,c}var PUBKEY_REGEX=/^[a-f0-9]{64}$/;function validate(){if(typeof this.kind!="number"||typeof this.content!="string"||typeof this.created_at!="number"||typeof this.pubkey!="string"||!this.pubkey.match(PUBKEY_REGEX)||!Array.isArray(this.tags))return!1;for(let n=0;n<this.tags.length;n++){const e=this.tags[n];if(!Array.isArray(e))return!1;for(let s=0;s<e.length;s++)if(typeof e[s]=="object")return!1}return!0}var verifiedSignatures=new distExports.LRUCache({maxSize:1e3,entryExpirationTimeInMS:6e4});function verifySignature(n){if(typeof this.signatureVerified=="boolean")return this.signatureVerified;const e=verifiedSignatures.get(this.id);if(e!==null)return this.signatureVerified=!!e,this.signatureVerified;try{if(this.ndk?.asyncSigVerification)verifySignatureAsync(this,n,this.relay).then(s=>{n&&(this.signatureVerified=s,s&&verifiedSignatures.set(this.id,this.sig)),s||(this.relay?this.ndk?.reportInvalidSignature(this,this.relay):this.ndk?.reportInvalidSignature(this),verifiedSignatures.set(this.id,!1))}).catch(s=>{console.error("signature verification error",this.id,s)});else{const s=sha256(new TextEncoder().encode(this.serialize())),o=schnorr.verify(this.sig,s,this.pubkey);return o?verifiedSignatures.set(this.id,this.sig):verifiedSignatures.set(this.id,!1),this.signatureVerified=o,o}}catch{return this.signatureVerified=!1,!1}}function getEventHash(){return getEventHashFromSerializedEvent(this.serialize())}function getEventHashFromSerializedEvent(n){const e=sha256(new TextEncoder().encode(n));return bytesToHex(e)}var skipClientTagOnKinds=new Set([0,4,1059,13,3,9734,5]),NDKEvent=class ao extends libExports.EventEmitter{ndk;created_at;content="";tags=[];kind;id="";sig;pubkey="";signatureVerified;_author=void 0;relay;get onRelays(){let e=[];return this.ndk?e=this.ndk.subManager.seenEvents.get(this.id)||[]:this.relay&&e.push(this.relay),e}publishStatus="success";publishError;constructor(e,s){super(),this.ndk=e,this.created_at=s?.created_at,this.content=s?.content||"",this.tags=s?.tags||[],this.id=s?.id||"",this.sig=s?.sig,this.pubkey=s?.pubkey||"",this.kind=s?.kind,s instanceof ao&&(this.relay&&(this.relay=s.relay,this.ndk?.subManager.seenEvent(s.id,this.relay)),this.publishStatus=s.publishStatus,this.publishError=s.publishError)}static deserialize(e,s){return new ao(e,deserialize(s))}rawEvent(){return{created_at:this.created_at,content:this.content,tags:this.tags,kind:this.kind,pubkey:this.pubkey,id:this.id,sig:this.sig}}set author(e){this.pubkey=e.pubkey,this._author=e,this._author.ndk??=this.ndk}get author(){if(this._author)return this._author;if(!this.ndk)throw new Error("No NDK instance found");const e=this.ndk.getUser({pubkey:this.pubkey});return this._author=e,e}tagExternal(e,s,o){const a=["i"],c=["k"];switch(s){case"url":{const f=new URL(e);f.hash="",a.push(f.toString()),c.push(`${f.protocol}//${f.host}`);break}case"hashtag":a.push(`#${e.toLowerCase()}`),c.push("#");break;case"geohash":a.push(`geo:${e.toLowerCase()}`),c.push("geo");break;case"isbn":a.push(`isbn:${e.replace(/-/g,"")}`),c.push("isbn");break;case"podcast:guid":a.push(`podcast:guid:${e}`),c.push("podcast:guid");break;case"podcast:item:guid":a.push(`podcast:item:guid:${e}`),c.push("podcast:item:guid");break;case"podcast:publisher:guid":a.push(`podcast:publisher:guid:${e}`),c.push("podcast:publisher:guid");break;case"isan":a.push(`isan:${e.split("-").slice(0,4).join("-")}`),c.push("isan");break;case"doi":a.push(`doi:${e.toLowerCase()}`),c.push("doi");break;default:throw new Error(`Unsupported NIP-73 entity type: ${s}`)}o&&a.push(o),this.tags.push(a),this.tags.push(c)}tag(e,s,o,a){let c=[];if(e.fetchProfile!==void 0){a??="p";const h=[a,e.pubkey];s&&h.push("",s),c.push(h)}else if(e instanceof ao){const h=e;o??=h?.pubkey===this.pubkey,c=h.referenceTags(s,o,a);for(const m of h.getMatchingTags("p"))m[1]!==this.pubkey&&(this.tags.find(g=>g[0]==="p"&&g[1]===m[1])||this.tags.push(["p",m[1]]))}else if(Array.isArray(e))c=[e];else throw new Error("Invalid argument",e);this.tags=mergeTags(this.tags,c)}async toNostrEvent(e){if(!e&&this.pubkey===""){const a=await this.ndk?.signer?.user();this.pubkey=a?.pubkey||""}this.created_at||(this.created_at=Math.floor(Date.now()/1e3));const{content:s,tags:o}=await this.generateTags();this.content=s||"",this.tags=o;try{this.id=this.getEventHash()}catch{}return this.rawEvent()}serialize=serialize.bind(this);getEventHash=getEventHash.bind(this);validate=validate.bind(this);verifySignature=verifySignature.bind(this);isReplaceable=isReplaceable.bind(this);isEphemeral=isEphemeral.bind(this);isDvm=()=>this.kind&&this.kind>=5e3&&this.kind<=7e3;isParamReplaceable=isParamReplaceable.bind(this);encode=encode.bind(this);encrypt=encrypt.bind(this);decrypt=decrypt.bind(this);getMatchingTags(e,s){const o=this.tags.filter(a=>a[0]===e);return s===void 0?o:o.filter(a=>a[3]===s)}hasTag(e,s){return this.tags.some(o=>o[0]===e&&(!s||o[3]===s))}tagValue(e,s){const o=this.getMatchingTags(e,s);if(o.length!==0)return o[0][1]}get alt(){return this.tagValue("alt")}set alt(e){this.removeTag("alt"),e&&this.tags.push(["alt",e])}get dTag(){return this.tagValue("d")}set dTag(e){this.removeTag("d"),e&&this.tags.push(["d",e])}removeTag(e,s){const o=Array.isArray(e)?e:[e];this.tags=this.tags.filter(a=>{const c=o.includes(a[0]),f=s?a[3]===s:!0;return!(c&&f)})}replaceTag(e){this.removeTag(e[0]),this.tags.push(e)}async sign(e){e?this.author=await e.user():(this.ndk?.assertSigner(),e=this.ndk?.signer);const s=await this.toNostrEvent();return this.sig=await e.sign(s),this.sig}async publishReplaceable(e,s,o){return this.id="",this.created_at=Math.floor(Date.now()/1e3),this.sig="",this.publish(e,s,o)}async publish(e,s,o){if(o||(o=1),this.sig||await this.sign(),!this.ndk)throw new Error("NDKEvent must be associated with an NDK instance to publish");if((!e||e.size===0)&&(e=this.ndk.devWriteRelaySet||await calculateRelaySetFromEvent(this.ndk,this,o)),this.kind===5&&this.ndk.cacheAdapter?.deleteEventIds){const f=this.getMatchingTags("e").map(h=>h[1]);this.ndk.cacheAdapter.deleteEventIds(f)}const a=this.rawEvent();if(this.ndk.cacheAdapter?.addUnpublishedEvent&&shouldTrackUnpublishedEvent(this))try{this.ndk.cacheAdapter.addUnpublishedEvent(this,e.relayUrls)}catch(f){console.error("Error adding unpublished event to cache",f)}this.kind===5&&this.ndk.cacheAdapter?.deleteEventIds&&this.ndk.cacheAdapter.deleteEventIds(this.getMatchingTags("e").map(f=>f[1])),this.ndk.subManager.dispatchEvent(a,void 0,!0);const c=await e.publish(this,s,o);return c.forEach(f=>this.ndk?.subManager.seenEvent(this.id,f)),c}async generateTags(){let e=[];const s=await generateContentTags(this.content,this.tags),o=s.content;if(e=s.tags,this.kind&&this.isParamReplaceable()&&!this.getMatchingTags("d")[0]){const c=this.tagValue("title");let h=[...Array(c?6:16)].map(()=>Math.random().toString(36)[2]).join("");c&&c.length>0&&(h=`${c.replace(/[^a-z0-9]+/gi,"-").replace(/^-|-$/g,"")}-${h}`),e.push(["d",h])}if(this.shouldAddClientTag){const a=["client",this.ndk?.clientName??""];this.ndk?.clientNip89&&a.push(this.ndk?.clientNip89),e.push(a)}else this.shouldStripClientTag&&(e=e.filter(a=>a[0]!=="client"));return{content:o||"",tags:e}}get shouldAddClientTag(){return!(!this.ndk?.clientName&&!this.ndk?.clientNip89||skipClientTagOnKinds.has(this.kind)||this.isEphemeral()||this.isReplaceable()&&!this.isParamReplaceable()||this.isDvm()||this.hasTag("client"))}get shouldStripClientTag(){return skipClientTagOnKinds.has(this.kind)}muted(){const e=this.ndk?.mutedIds.get(this.pubkey);if(e&&e==="p")return"author";const s=this.tagReference(),o=this.ndk?.mutedIds.get(s[1]);return o&&o===s[0]?"event":null}replaceableDTag(){if(this.kind&&this.kind>=3e4&&this.kind<=4e4){const e=this.getMatchingTags("d")[0];return e?e[1]:""}throw new Error("Event is not a parameterized replaceable event")}deduplicationKey(){return this.kind===0||this.kind===3||this.kind&&this.kind>=1e4&&this.kind<2e4?`${this.kind}:${this.pubkey}`:this.tagId()}tagId(){return this.isParamReplaceable()?this.tagAddress():this.id}tagAddress(){if(this.isParamReplaceable()){const e=this.dTag??"";return`${this.kind}:${this.pubkey}:${e}`}if(this.isReplaceable())return`${this.kind}:${this.pubkey}:`;throw new Error("Event is not a replaceable event")}tagType(){return this.isParamReplaceable()?"a":"e"}tagReference(e){let s;return this.isParamReplaceable()?s=["a",this.tagAddress()]:s=["e",this.tagId()],this.relay?s.push(this.relay.url):s.push(""),s.push(e??""),this.isParamReplaceable()||s.push(this.pubkey),s}referenceTags(e,s,o){let a=[];return this.isParamReplaceable()?a=[[o??"a",this.tagAddress()],[o??"e",this.id]]:a=[[o??"e",this.id]],a=a.map(c=>(c[0]==="e"||e?c.push(this.relay?.url??""):this.relay?.url&&c.push(this.relay?.url),c)),a.forEach(c=>{c[0]==="e"?(c.push(e??""),c.push(this.pubkey)):e&&c.push(e)}),a=[...a,...this.getMatchingTags("h")],s||a.push(...this.author.referenceTags()),a}filter(){return this.isParamReplaceable()?{"#a":[this.tagId()]}:{"#e":[this.tagId()]}}nip22Filter(){return this.isParamReplaceable()?{"#A":[this.tagId()]}:{"#E":[this.tagId()]}}async delete(e,s=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const o=new ao(this.ndk,{kind:5,content:e||""});return o.tag(this,void 0,!0),o.tags.push(["k",this.kind?.toString()]),s&&(this.emit("deleted"),await o.publish()),o}set isProtected(e){this.removeTag("-"),e&&this.tags.push(["-"])}get isProtected(){return this.hasTag("-")}fetchTaggedEvent=fetchTaggedEvent.bind(this);fetchRootEvent=fetchRootEvent.bind(this);fetchReplyEvent=fetchReplyEvent.bind(this);repost=repost.bind(this);async react(e,s=!0){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner();const o=new ao(this.ndk,{kind:7,content:e});return o.tag(this),s&&await o.publish(),o}get isValid(){return this.validate()}get inspect(){return JSON.stringify(this.rawEvent(),null,4)}dump(){console.debug(JSON.stringify(this.rawEvent(),null,4)),console.debug("Event on relays:",this.onRelays.map(e=>e.url).join(", "))}reply(){const e=new ao(this.ndk);if(this.kind===1)e.kind=1,this.hasTag("e")?e.tags=[...e.tags,...this.getMatchingTags("e"),...this.getMatchingTags("p"),...this.getMatchingTags("a"),...this.referenceTags("reply")]:e.tag(this,"root");else{e.kind=1111;const s=["A","E","I","P"],o=this.tags.filter(a=>s.includes(a[0]));if(o.length>0){const a=this.tagValue("K");e.tags.push(...o),a&&e.tags.push(["K",a]);const[c,f,h,...m]=this.tagReference(),g=[c,f,...m];e.tags.push(g)}else{const[a,c,f,h]=this.tagReference(),m=[a,c,h??""];a==="e"&&m.push(this.pubkey),e.tags.push(m);const g=[...m];g[0]=g[0].toUpperCase(),e.tags.push(g),e.tags.push(["K",this.kind?.toString()]),e.tags.push(["P",this.pubkey])}e.tags.push(["k",this.kind?.toString()]),e.tags.push(...this.getMatchingTags("p")),e.tags.push(["p",this.pubkey])}return e}},untrackedUnpublishedEvents=new Set([24133,13194,23194,23195]);function shouldTrackUnpublishedEvent(n){return!untrackedUnpublishedEvents.has(n.kind)}var NDKPool=class extends libExports.EventEmitter{_relays=new Map;status="idle";autoConnectRelays=new Set;poolBlacklistRelayUrls=new Set;debug;temporaryRelayTimers=new Map;flappingRelays=new Set;backoffTimes=new Map;ndk;get blacklistRelayUrls(){const n=new Set(this.ndk.blacklistRelayUrls);return this.poolBlacklistRelayUrls.forEach(e=>n.add(e)),n}constructor(n,e,s,{debug:o,name:a}={}){super(),this.debug=o??s.debug.extend("pool"),a&&(this._name=a),this.ndk=s,this.relayUrls=n,this.poolBlacklistRelayUrls=new Set(e),this.ndk.pools.push(this)}get relays(){return this._relays}set relayUrls(n){this._relays.clear();for(const e of n){const s=new NDKRelay(e,void 0,this.ndk);s.connectivity.netDebug=this.ndk.netDebug,this.addRelay(s)}}_name="unnamed";get name(){return this._name}set name(n){this._name=n,this.debug=this.debug.extend(n)}useTemporaryRelay(n,e=3e4,s){const o=this.relays.has(n.url);o||(this.addRelay(n),this.debug("Adding temporary relay %s for filters %o",n.url,s));const a=this.temporaryRelayTimers.get(n.url);if(a&&clearTimeout(a),!o||a){const c=setTimeout(()=>{this.ndk.explicitRelayUrls?.includes(n.url)||this.removeRelay(n.url)},e);this.temporaryRelayTimers.set(n.url,c)}}addRelay(n,e=!0){const s=this.relays.has(n.url),o=this.blacklistRelayUrls?.has(n.url),a=n.url.includes("/npub1");let c=!0;const f=n.url;if(s)return;if(o){this.debug(`Refusing to add relay ${f}: blacklisted`);return}if(a){this.debug(`Refusing to add relay ${f}: is a filter relay`);return}if(this.ndk.cacheAdapter?.getRelayStatus){const A=this.ndk.cacheAdapter.getRelayStatus(f);if(A?.dontConnectBefore){if(A.dontConnectBefore>Date.now()){const R=A.dontConnectBefore-Date.now();this.debug(`Refusing to add relay ${f}: delayed connect for ${R}ms`),setTimeout(()=>{this.addRelay(n,e)},R);return}c=!1}}const h=A=>this.emit("notice",n,A),m=()=>this.handleRelayConnect(f),g=()=>this.handleRelayReady(n),_=()=>this.emit("relay:disconnect",n),E=()=>this.handleFlapping(n),T=A=>this.emit("relay:auth",n,A),w=()=>this.emit("relay:authed",n);n.off("notice",h),n.off("connect",m),n.off("ready",g),n.off("disconnect",_),n.off("flapping",E),n.off("auth",T),n.off("authed",w),n.on("notice",h),n.on("connect",m),n.on("ready",g),n.on("disconnect",_),n.on("flapping",E),n.on("auth",T),n.on("authed",w),n.on("delayed-connect",A=>{this.ndk.cacheAdapter?.updateRelayStatus&&this.ndk.cacheAdapter.updateRelayStatus(n.url,{dontConnectBefore:Date.now()+A})}),this._relays.set(f,n),e&&this.autoConnectRelays.add(f),e&&this.status==="active"&&(this.emit("relay:connecting",n),n.connect(void 0,c).catch(A=>{this.debug(`Failed to connect to relay ${f}`,A)}))}removeRelay(n){const e=this.relays.get(n);if(e)return e.disconnect(),this.relays.delete(n),this.autoConnectRelays.delete(n),this.emit("relay:disconnect",e),!0;const s=this.temporaryRelayTimers.get(n);return s&&(clearTimeout(s),this.temporaryRelayTimers.delete(n)),!1}isRelayConnected(n){const e=normalizeRelayUrl(n),s=this.relays.get(e);return s?s.status===5:!1}getRelay(n,e=!0,s=!1,o){let a=this.relays.get(normalizeRelayUrl(n));return a||(a=new NDKRelay(n,void 0,this.ndk),a.connectivity.netDebug=this.ndk.netDebug,s?this.useTemporaryRelay(a,3e4,o):this.addRelay(a,e)),a}handleRelayConnect(n){const e=this.relays.get(n);if(!e){console.error("NDK BUG: relay not found in pool",{relayUrl:n});return}this.emit("relay:connect",e),this.stats().connected===this.relays.size&&this.emit("connect")}handleRelayReady(n){this.emit("relay:ready",n)}async connect(n){this.status="active",this.debug(`Connecting to ${this.relays.size} relays${n?`, timeout ${n}ms`:""}...`);const e=Array.from(this.autoConnectRelays.keys()).map(c=>this.relays.get(c)).filter(c=>!!c);for(const c of e)c.status!==5&&c.status!==4&&(this.emit("relay:connecting",c),c.connect().catch(f=>{this.debug(`Failed to connect to relay ${c.url}: ${f??"No reason specified"}`)}));const s=()=>e.every(c=>c.status===5),o=new Promise(c=>{if(s()){c();return}const f=[];for(const h of e){const m=()=>{if(s()){for(let g=0;g<e.length;g++)e[g].off("connect",f[g]);c()}};f.push(m),h.on("connect",m)}}),a=typeof n=="number"?new Promise(c=>setTimeout(c,n)):new Promise(()=>{});await Promise.race([o,a])}checkOnFlappingRelays(){const n=this.flappingRelays.size,e=this.relays.size;if(n/e>=.8)for(const s of this.flappingRelays)this.backoffTimes.set(s,0)}handleFlapping(n){this.debug(`Relay ${n.url} is flapping`);let e=this.backoffTimes.get(n.url)||5e3;e=e*2,this.backoffTimes.set(n.url,e),this.debug(`Backoff time for ${n.url} is ${e}ms`),setTimeout(()=>{this.debug(`Attempting to reconnect to ${n.url}`),this.emit("relay:connecting",n),n.connect(),this.checkOnFlappingRelays()},e),n.disconnect(),this.emit("flapping",n)}size(){return this.relays.size}stats(){const n={total:0,connected:0,disconnected:0,connecting:0};for(const e of this.relays.values())n.total++,e.status===5?n.connected++:e.status===1?n.disconnected++:e.status===4&&n.connecting++;return n}connectedRelays(){return Array.from(this.relays.values()).filter(n=>n.status>=5)}permanentAndConnectedRelays(){return Array.from(this.relays.values()).filter(n=>n.status>=5&&!this.temporaryRelayTimers.has(n.url))}urls(){return Array.from(this.relays.keys())}},NDKCashuMintList=class ip extends NDKEvent{static kind=10019;static kinds=[10019];_p2pk;constructor(e,s){super(e,s),this.kind??=10019}static from(e){return new ip(e.ndk,e)}set relays(e){this.tags=this.tags.filter(s=>s[0]!=="relay");for(const s of e)this.tags.push(["relay",s])}get relays(){const e=[];for(const s of this.tags)s[0]==="relay"&&e.push(s[1]);return e}set mints(e){this.tags=this.tags.filter(s=>s[0]!=="mint");for(const s of e)this.tags.push(["mint",s])}get mints(){const e=[];for(const s of this.tags)s[0]==="mint"&&e.push(s[1]);return Array.from(new Set(e))}get p2pk(){return this._p2pk?this._p2pk:(this._p2pk=this.tagValue("pubkey")??this.pubkey,this._p2pk)}set p2pk(e){this._p2pk=e,this.removeTag("pubkey"),e&&this.tags.push(["pubkey",e])}get relaySet(){return NDKRelaySet.fromRelayUrls(this.relays,this.ndk)}},NDKArticle=class sp extends NDKEvent{static kind=30023;static kinds=[30023];constructor(e,s){super(e,s),this.kind??=30023}static from(e){return new sp(e.ndk,e)}get title(){return this.tagValue("title")}set title(e){this.removeTag("title"),e&&this.tags.push(["title",e])}get image(){return this.tagValue("image")}set image(e){this.removeTag("image"),e&&this.tags.push(["image",e])}get summary(){return this.tagValue("summary")}set summary(e){this.removeTag("summary"),e&&this.tags.push(["summary",e])}get published_at(){const e=this.tagValue("published_at");if(e){let s=Number.parseInt(e);return s>1e12&&(s=Math.floor(s/1e3)),s}}set published_at(e){this.removeTag("published_at"),e!==void 0&&this.tags.push(["published_at",e.toString()])}async generateTags(){return super.generateTags(),this.published_at||(this.published_at=this.created_at),super.generateTags()}get url(){return this.tagValue("url")}set url(e){e?this.tags.push(["url",e]):this.removeTag("url")}};function proofsTotalBalance(n){return n.reduce((e,s)=>{if(s.amount<0)throw new Error("proof amount is negative");return e+s.amount},0)}var NDKCashuToken=class op extends NDKEvent{_proofs=[];_mint;static kind=7375;static kinds=[7375];_deletes=[];original;constructor(e,s){super(e,s),this.kind??=7375}static async from(e){const s=new op(e.ndk,e);s.original=e;try{await s.decrypt()}catch{s.content=s.original.content}try{const o=JSON.parse(s.content);if(s.proofs=o.proofs,s.mint=o.mint??s.tagValue("mint"),s.deletedTokens=o.del??[],!Array.isArray(s.proofs))return}catch{return}return s}get proofs(){return this._proofs}set proofs(e){const s=new Set;this._proofs=e.filter(o=>s.has(o.C)?(console.warn("Passed in proofs had duplicates, ignoring",o.C),!1):o.amount<0?(console.warn("Invalid proof with negative amount",o),!1):(s.add(o.C),!0)).map(this.cleanProof)}cleanProof(e){return{id:e.id,amount:e.amount,C:e.C,secret:e.secret}}async toNostrEvent(e){if(!this.ndk)throw new Error("no ndk");if(!this.ndk.signer)throw new Error("no signer");const s={proofs:this.proofs.map(this.cleanProof),mint:this.mint,del:this.deletedTokens??[]};this.content=JSON.stringify(s);const o=await this.ndk.signer.user();return await this.encrypt(o,void 0,"nip44"),super.toNostrEvent(e)}set mint(e){this._mint=e}get mint(){return this._mint}get deletedTokens(){return this._deletes}set deletedTokens(e){this._deletes=e}get amount(){return proofsTotalBalance(this.proofs)}async publish(e,s,o){return this.original?this.original.publish(e,s,o):super.publish(e,s,o)}},NDKHighlight=class ap extends NDKEvent{_article;static kind=9802;static kinds=[9802];constructor(e,s){super(e,s),this.kind??=9802}static from(e){return new ap(e.ndk,e)}get url(){return this.tagValue("r")}set context(e){e===void 0?this.tags=this.tags.filter(([s,o])=>s!=="context"):(this.tags=this.tags.filter(([s,o])=>s!=="context"),this.tags.push(["context",e]))}get context(){return this.tags.find(([e,s])=>e==="context")?.[1]??void 0}get article(){return this._article}set article(e){this._article=e,typeof e=="string"?this.tags.push(["r",e]):this.tag(e)}getArticleTag(){return this.getMatchingTags("a")[0]||this.getMatchingTags("e")[0]||this.getMatchingTags("r")[0]}async getArticle(){if(this._article!==void 0)return this._article;let e;const s=this.getArticleTag();if(s){switch(s[0]){case"a":{const[o,a,c]=s[1].split(":");e=nip19_exports.naddrEncode({kind:Number.parseInt(o),pubkey:a,identifier:c});break}case"e":e=nip19_exports.noteEncode(s[1]);break;case"r":this._article=s[1];break}if(e){let o=await this.ndk?.fetchEvent(e);o&&(o.kind===30023&&(o=NDKArticle.from(o)),this._article=o)}return this._article}}};function mapImetaTag(n){const e={};if(n.length===2){const o=n[1].split(" ");for(let a=0;a<o.length;a+=2){const c=o[a],f=o[a+1];c==="fallback"?(e.fallback||(e.fallback=[]),e.fallback.push(f)):e[c]=f}return e}const s=n.slice(1);for(const o of s){const a=o.split(" "),c=a[0],f=a.slice(1).join(" ");c==="fallback"?(e.fallback||(e.fallback=[]),e.fallback.push(f)):e[c]=f}return e}function imetaTagToTag(n){const e=["imeta"];for(const[s,o]of Object.entries(n))if(Array.isArray(o))for(const a of o)e.push(`${s} ${a}`);else o&&e.push(`${s} ${o}`);return e}var NDKImage=class lp extends NDKEvent{static kind=20;static kinds=[20];_imetas;constructor(e,s){super(e,s),this.kind??=20}static from(e){return new lp(e.ndk,e.rawEvent())}get isValid(){return this.imetas.length>0}get imetas(){return this._imetas?this._imetas:(this._imetas=this.tags.filter(e=>e[0]==="imeta").map(mapImetaTag).filter(e=>!!e.url),this._imetas)}set imetas(e){this._imetas=e,this.tags=this.tags.filter(s=>s[0]!=="imeta"),this.tags.push(...e.map(imetaTagToTag))}},NDKList=class cp extends NDKEvent{_encryptedTags;static kinds=[10063,30001,10004,10050,10030,10015,10001,10002,10007,10006,10003];encryptedTagsLength;constructor(e,s){super(e,s),this.kind??=30001}static from(e){return new cp(e.ndk,e)}get title(){const e=this.tagValue("title")||this.tagValue("name");return e||(this.kind===3?"Contacts":this.kind===1e4?"Mute":this.kind===10001?"Pinned Notes":this.kind===10002?"Relay Metadata":this.kind===10003?"Bookmarks":this.kind===10004?"Communities":this.kind===10005?"Public Chats":this.kind===10006?"Blocked Relays":this.kind===10007?"Search Relays":this.kind===10050?"Direct Message Receive Relays":this.kind===10015?"Interests":this.kind===10030?"Emojis":this.tagValue("d"))}set title(e){this.removeTag(["title","name"]),e&&this.tags.push(["title",e])}get name(){return this.title}set name(e){this.title=e}get description(){return this.tagValue("description")}set description(e){this.removeTag("description"),e&&this.tags.push(["description",e])}get image(){return this.tagValue("image")}set image(e){this.removeTag("image"),e&&this.tags.push(["image",e])}isEncryptedTagsCacheValid(){return!!(this._encryptedTags&&this.encryptedTagsLength===this.content.length)}async encryptedTags(e=!0){if(e&&this.isEncryptedTagsCacheValid())return this._encryptedTags;if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const s=await this.ndk.signer.user();try{if(this.content.length>0)try{const o=await this.ndk.signer.decrypt(s,this.content),a=JSON.parse(o);return a?.[0]?(this.encryptedTagsLength=this.content.length,this._encryptedTags=a):(this.encryptedTagsLength=this.content.length,this._encryptedTags=[])}catch{}}catch{}return[]}validateTag(e){return!0}getItems(e){return this.tags.filter(s=>s[0]===e)}get items(){return this.tags.filter(e=>!["d","L","l","title","name","description","published_at","summary","image","thumb","alt","expiration","subject","client"].includes(e[0]))}async addItem(e,s=void 0,o=!1,a="bottom"){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");let c;if(e instanceof NDKEvent)c=[e.tagReference(s)];else if(e instanceof NDKUser)c=e.referenceTags();else if(e instanceof NDKRelay)c=e.referenceTags();else if(Array.isArray(e))c=[e];else throw new Error("Invalid object type");if(s&&c[0].push(s),o){const f=await this.ndk.signer.user(),h=await this.encryptedTags();a==="top"?h.unshift(...c):h.push(...c),this._encryptedTags=h,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(h),await this.encrypt(f)}else a==="top"?this.tags.unshift(...c):this.tags.push(...c);this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItemByValue(e,s=!0){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");const o=this.tags.findIndex(h=>h[1]===e);o>=0&&this.tags.splice(o,1);const a=await this.ndk.signer.user(),c=await this.encryptedTags(),f=c.findIndex(h=>h[1]===e);if(f>=0&&(c.splice(f,1),this._encryptedTags=c,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(c),await this.encrypt(a)),s)return this.publishReplaceable();this.created_at=Math.floor(Date.now()/1e3),this.emit("change")}async removeItem(e,s){if(!this.ndk)throw new Error("NDK instance not set");if(!this.ndk.signer)throw new Error("NDK signer not set");if(s){const o=await this.ndk.signer.user(),a=await this.encryptedTags();a.splice(e,1),this._encryptedTags=a,this.encryptedTagsLength=this.content.length,this.content=JSON.stringify(a),await this.encrypt(o)}else this.tags.splice(e,1);return this.created_at=Math.floor(Date.now()/1e3),this.emit("change"),this}has(e){return this.items.some(s=>s[1]===e)}filterForItems(){const e=new Set,s=new Map,o=[];for(const a of this.items)if(a[0]==="e"&&a[1])e.add(a[1]);else if(a[0]==="a"&&a[1]){const[c,f,h]=a[1].split(":");if(!c||!f)continue;const m=`${c}:${f}`,g=s.get(m)||[];g.push(h||""),s.set(m,g)}if(e.size>0&&o.push({ids:Array.from(e)}),s.size>0)for(const[a,c]of s.entries()){const[f,h]=a.split(":");o.push({kinds:[Number.parseInt(f)],authors:[h],"#d":c})}return o}},lists_default=NDKList,NDKNutzap=class ju extends NDKEvent{debug;_proofs=[];static kind=9321;static kinds=[ju.kind];constructor(e,s){super(e,s),this.kind??=9321,this.debug=e?.debug.extend("nutzap")??createDebug5("ndk:nutzap"),this.alt||(this.alt="This is a nutzap");try{const o=this.getMatchingTags("proof");o.length?this._proofs=o.map(a=>JSON.parse(a[1])):this._proofs=JSON.parse(this.content)}catch{return}}static from(e){const s=new ju(e.ndk,e);if(!(!s._proofs||!s._proofs.length))return s}set comment(e){this.content=e??""}get comment(){const e=this.tagValue("comment");return e||this.content}set proofs(e){this._proofs=e,this.tags=this.tags.filter(s=>s[0]!=="proof");for(const s of e)this.tags.push(["proof",JSON.stringify(s)])}get proofs(){return this._proofs}get rawP2pk(){const e=this.proofs[0];try{const s=JSON.parse(e.secret);let o;if(typeof s=="string"?(o=JSON.parse(s),this.debug("stringified payload",e.secret)):typeof s=="object"&&(o=s),Array.isArray(o)&&o[0]==="P2PK"&&o.length>1&&typeof o[1]=="object"&&o[1]!==null||typeof o=="object"&&o!==null&&typeof o[1]?.data=="string")return o[1].data}catch(s){this.debug("error parsing p2pk pubkey",s,this.proofs[0])}}get p2pk(){const e=this.rawP2pk;if(e)return e.startsWith("02")?e.slice(2):e}get mint(){return this.tagValue("u")}set mint(e){this.replaceTag(["u",e])}get unit(){let e=this.tagValue("unit")??"sat";return e?.startsWith("msat")&&(e="sat"),e}set unit(e){if(this.removeTag("unit"),e?.startsWith("msat"))throw new Error("msat is not allowed, use sat denomination instead");e&&this.tag(["unit",e])}get amount(){return this.proofs.reduce((s,o)=>s+o.amount,0)}sender=this.author;set target(e){this.tags=this.tags.filter(s=>s[0]!=="p"),e instanceof NDKEvent&&this.tags.push(e.tagReference())}set recipientPubkey(e){this.removeTag("p"),this.tag(["p",e])}get recipientPubkey(){return this.tagValue("p")}get recipient(){const e=this.recipientPubkey;return this.ndk?this.ndk.getUser({pubkey:e}):new NDKUser({pubkey:e})}async toNostrEvent(){this.unit==="msat"&&(this.unit="sat"),this.removeTag("amount"),this.tags.push(["amount",this.amount.toString()]);const e=await super.toNostrEvent();return e.content=this.comment,e}get isValid(){let e=0,s=0,o=0;for(const a of this.tags)a[0]==="e"&&e++,a[0]==="p"&&s++,a[0]==="u"&&o++;return s===1&&o===1&&e<=1&&this.proofs.length>0}},NDKSimpleGroupMemberList=class up extends NDKEvent{relaySet;memberSet=new Set;static kind=39002;static kinds=[39002];constructor(e,s){super(e,s),this.kind??=39002,this.memberSet=new Set(this.members)}static from(e){return new up(e.ndk,e)}get members(){return this.getMatchingTags("p").map(e=>e[1])}hasMember(e){return this.memberSet.has(e)}async publish(e,s,o){return e??=this.relaySet,super.publishReplaceable(e,s,o)}},NDKSimpleGroupMetadata=class dp extends NDKEvent{static kind=39e3;static kinds=[39e3];constructor(e,s){super(e,s),this.kind??=39e3}static from(e){return new dp(e.ndk,e)}get name(){return this.tagValue("name")}get picture(){return this.tagValue("picture")}get about(){return this.tagValue("about")}get scope(){if(this.getMatchingTags("public").length>0)return"public";if(this.getMatchingTags("public").length>0)return"private"}set scope(e){this.removeTag("public"),this.removeTag("private"),e==="public"?this.tags.push(["public",""]):e==="private"&&this.tags.push(["private",""])}get access(){if(this.getMatchingTags("open").length>0)return"open";if(this.getMatchingTags("closed").length>0)return"closed"}set access(e){this.removeTag("open"),this.removeTag("closed"),e==="open"?this.tags.push(["open",""]):e==="closed"&&this.tags.push(["closed",""])}};function strToPosition(n){const[e,s]=n.split(",").map(Number);return{x:e,y:s}}function strToDimension(n){const[e,s]=n.split("x").map(Number);return{width:e,height:s}}var NDKStorySticker=class fp{static Text="text";static Pubkey="pubkey";static Event="event";static Prompt="prompt";static Countdown="countdown";type;value;position;dimension;properties;constructor(e){if(Array.isArray(e)){const s=e;if(s[0]!=="sticker"||s.length<5)throw new Error("Invalid sticker tag");this.type=s[1],this.value=s[2],this.position=strToPosition(s[3]),this.dimension=strToDimension(s[4]);const o={};for(let a=5;a<s.length;a++){const[c,...f]=s[a].split(" ");o[c]=f.join(" ")}Object.keys(o).length>0&&(this.properties=o)}else this.type=e,this.value=void 0,this.position={x:0,y:0},this.dimension={width:0,height:0}}static fromTag(e){try{return new fp(e)}catch{return null}}get style(){return this.properties?.style}set style(e){e?this.properties={...this.properties,style:e}:delete this.properties?.style}get rotation(){return this.properties?.rot?Number.parseFloat(this.properties.rot):void 0}set rotation(e){e!==void 0?this.properties={...this.properties,rot:e.toString()}:delete this.properties?.rot}get isValid(){return this.hasValidDimensions()&&this.hasValidPosition()}hasValidDimensions=()=>typeof this.dimension.width=="number"&&typeof this.dimension.height=="number"&&!Number.isNaN(this.dimension.width)&&!Number.isNaN(this.dimension.height);hasValidPosition=()=>typeof this.position.x=="number"&&typeof this.position.y=="number"&&!Number.isNaN(this.position.x)&&!Number.isNaN(this.position.y);toTag(){if(!this.isValid){const o=[this.hasValidDimensions()?void 0:"dimensions is invalid",this.hasValidPosition()?void 0:"position is invalid"].filter(Boolean);throw new Error(`Invalid sticker: ${o.join(", ")}`)}let e;switch(this.type){case"event":e=this.value.tagId();break;case"pubkey":e=this.value.pubkey;break;default:e=this.value}const s=["sticker",this.type,e,coordinates(this.position),dimension(this.dimension)];if(this.properties)for(const[o,a]of Object.entries(this.properties))s.push(`${o} ${a}`);return s}},NDKStory=class hp extends NDKEvent{static kind=23;static kinds=[23];_imeta;_dimensions;constructor(e,s){if(super(e,s),this.kind??=23,s)for(const o of s.tags)switch(o[0]){case"imeta":this._imeta=mapImetaTag(o);break;case"dim":this.dimensions=strToDimension(o[1]);break}}static from(e){return new hp(e.ndk,e)}get isValid(){return!!this.imeta}get imeta(){return this._imeta}set imeta(e){this._imeta=e,this.tags=this.tags.filter(s=>s[0]!=="imeta"),e&&this.tags.push(imetaTagToTag(e))}get dimensions(){const e=this.tagValue("dim");if(e)return strToDimension(e)}set dimensions(e){this.removeTag("dim"),e&&this.tags.push(["dim",`${e.width}x${e.height}`])}get duration(){const e=this.tagValue("dur");if(e)return Number.parseInt(e)}set duration(e){this.removeTag("dur"),e!==void 0&&this.tags.push(["dur",e.toString()])}get stickers(){const e=[];for(const s of this.tags){if(s[0]!=="sticker"||s.length<5)continue;const o=NDKStorySticker.fromTag(s);o&&e.push(o)}return e}addSticker(e){let s;if(e instanceof NDKStorySticker)s=e;else{const o=["sticker",e.type,typeof e.value=="string"?e.value:"",coordinates(e.position),dimension(e.dimension)];if(e.properties)for(const[a,c]of Object.entries(e.properties))o.push(`${a} ${c}`);s=new NDKStorySticker(o),s.value=e.value}s.type==="pubkey"?this.tag(s.value):s.type==="event"&&this.tag(s.value),this.tags.push(s.toTag())}removeSticker(e){const s=this.stickers;if(e<0||e>=s.length)return;let o=0;for(let a=0;a<this.tags.length;a++)if(this.tags[a][0]==="sticker"){if(o===e){this.tags.splice(a,1);break}o++}}},coordinates=n=>`${n.x},${n.y}`,dimension=n=>`${n.width}x${n.height}`,possibleIntervalFrequencies=["daily","weekly","monthly","quarterly","yearly"];function newAmount(n,e,s){return["amount",n.toString(),e,s]}function parseTagToSubscriptionAmount(n){const e=Number.parseInt(n[1]);if(Number.isNaN(e)||e===void 0||e===null||e<=0)return;const s=n[2];if(s===void 0||s==="")return;const o=n[3];if(o!==void 0&&possibleIntervalFrequencies.includes(o))return{amount:e,currency:s,term:o}}var NDKSubscriptionTier=class pp extends NDKArticle{static kind=37001;static kinds=[37001];constructor(e,s){const o=s?.kind??37001;super(e,s),this.kind=o}static from(e){return new pp(e.ndk,e)}get perks(){return this.getMatchingTags("perk").map(e=>e[1]).filter(e=>e!==void 0)}addPerk(e){this.tags.push(["perk",e])}get amounts(){return this.getMatchingTags("amount").map(e=>parseTagToSubscriptionAmount(e)).filter(e=>e!==void 0)}addAmount(e,s,o){this.tags.push(newAmount(e,s,o))}set relayUrl(e){this.tags.push(["r",e])}get relayUrls(){return this.getMatchingTags("r").map(e=>e[1]).filter(e=>e!==void 0)}get verifierPubkey(){return this.tagValue("p")}set verifierPubkey(e){this.removeTag("p"),e&&this.tags.push(["p",e])}get isValid(){return this.title!==void 0&&this.amounts.length>0}},NDKVideo=class mp extends NDKEvent{static kind=21;static kinds=[34235,34236,22,21];_imetas;static from(e){return new mp(e.ndk,e.rawEvent())}get title(){return this.tagValue("title")}set title(e){this.removeTag("title"),e&&this.tags.push(["title",e])}get thumbnail(){let e;return this.imetas&&this.imetas.length>0&&(e=this.imetas[0].image?.[0]),e??this.tagValue("thumb")}get imetas(){return this._imetas?this._imetas:(this._imetas=this.tags.filter(e=>e[0]==="imeta").map(mapImetaTag),this._imetas)}set imetas(e){this._imetas=e,this.tags=this.tags.filter(s=>s[0]!=="imeta"),this.tags.push(...e.map(imetaTagToTag))}get url(){return this.imetas&&this.imetas.length>0?this.imetas[0].url:this.tagValue("url")}get published_at(){const e=this.tagValue("published_at");if(e)return Number.parseInt(e)}async generateTags(){if(super.generateTags(),!this.kind&&this.imetas?.[0]?.dim){const[e,s]=this.imetas[0].dim.split("x"),o=e&&s&&Number.parseInt(e)<Number.parseInt(s);this.duration&&this.duration<120&&o?this.kind=22:this.kind=21}return super.generateTags()}get duration(){const e=this.tagValue("duration");if(e)return Number.parseInt(e)}set duration(e){this.removeTag("duration"),e!==void 0&&this.tags.push(["duration",Math.floor(e).toString()])}},NDKWiki=class gp extends NDKArticle{static kind=30818;static kinds=[30818];static from(e){return new gp(e.ndk,e.rawEvent())}get isDefered(){return this.hasTag("a","defer")}get deferedId(){return this.tagValue("a","defer")}set defer(e){this.removeTag("a","defer"),this.tag(e,"defer")}},NDKBlossomList=class yp extends NDKEvent{static kinds=[10063];constructor(e,s){super(e,s),this.kind??=10063}static from(e){return new yp(e.ndk,e.rawEvent())}get servers(){return this.tags.filter(e=>e[0]==="server").map(e=>e[1])}set servers(e){this.tags=this.tags.filter(s=>s[0]!=="server");for(const s of e)this.tags.push(["server",s])}get default(){const e=this.servers;return e.length>0?e[0]:void 0}set default(e){if(!e)return;const o=this.servers.filter(a=>a!==e);this.servers=[e,...o]}addServer(e){if(!e)return;const s=this.servers;s.includes(e)||(this.servers=[...s,e])}removeServer(e){if(!e)return;const s=this.servers;this.servers=s.filter(o=>o!==e)}};function wrapEvent(n){const e=new Map;for(const o of[NDKImage,NDKVideo,NDKCashuMintList,NDKArticle,NDKHighlight,NDKWiki,NDKNutzap,NDKSimpleGroupMemberList,NDKSimpleGroupMetadata,NDKSubscriptionTier,NDKCashuToken,NDKList,NDKStory,NDKBlossomList])for(const a of o.kinds)e.set(a,o);const s=e.get(n.kind);return s?s.from(n):n}function queryFullyFilled(n){return!!(filterIncludesIds(n.filter)&&resultHasAllRequestedIds(n))}function filterIncludesIds(n){return!!n.ids}function resultHasAllRequestedIds(n){const e=n.filter.ids;return!!e&&e.length===n.eventFirstSeen.size}function filterFromId(n){let e;if(n.match(NIP33_A_REGEX)){const[s,o,a]=n.split(":"),c={authors:[o],kinds:[Number.parseInt(s)]};return a&&(c["#d"]=[a]),c}if(n.match(BECH32_REGEX))try{switch(e=nip19_exports.decode(n),e.type){case"nevent":{const s={ids:[e.data.id]};return e.data.author&&(s.authors=[e.data.author]),e.data.kind&&(s.kinds=[e.data.kind]),s}case"note":return{ids:[e.data]};case"naddr":{const s={authors:[e.data.pubkey],kinds:[e.data.kind]};return e.data.identifier&&(s["#d"]=[e.data.identifier]),s}}}catch(s){console.error("Error decoding",n,s)}return{ids:[n]}}function isNip33AValue(n){return n.match(NIP33_A_REGEX)!==null}var NIP33_A_REGEX=/^(\d+):([0-9A-Fa-f]+)(?::(.*))?$/,BECH32_REGEX=/^n(event|ote|profile|pub|addr)1[\d\w]+$/;function relaysFromBech32(n,e){try{const s=nip19_exports.decode(n);if(["naddr","nevent"].includes(s?.type)){const o=s.data;if(o?.relays)return o.relays.map(a=>new NDKRelay(a,e.relayAuthDefaultPolicy,e))}}catch{}return[]}var defaultOpts={closeOnEose:!1,cacheUsage:"CACHE_FIRST",dontSaveToCache:!1,groupable:!0,groupableDelay:100,groupableDelayType:"at-most",cacheUnconstrainFilter:["limit","since","until"]},NDKSubscription=class extends libExports.EventEmitter{subId;filters;opts;pool;skipVerification=!1;skipValidation=!1;relayFilters;relaySet;ndk;debug;eventFirstSeen=new Map;eosesSeen=new Set;lastEventReceivedAt;mostRecentCacheEventTimestamp;internalId;closeOnEose;poolMonitor;skipOptimisticPublishEvent=!1;cacheUnconstrainFilter;constructor(n,e,s,o){super(),this.ndk=n,this.opts={...defaultOpts,...s||{}},this.pool=this.opts.pool||n.pool,this.filters=Array.isArray(e)?e:[e],this.subId=o||this.opts.subId,this.internalId=Math.random().toString(36).substring(7),this.debug=n.debug.extend(`subscription[${this.opts.subId??this.internalId}]`),this.opts.relaySet?this.relaySet=this.opts.relaySet:this.opts.relayUrls&&(this.relaySet=NDKRelaySet.fromRelayUrls(this.opts.relayUrls,this.ndk)),this.skipVerification=this.opts.skipVerification||!1,this.skipValidation=this.opts.skipValidation||!1,this.closeOnEose=this.opts.closeOnEose||!1,this.skipOptimisticPublishEvent=this.opts.skipOptimisticPublishEvent||!1,this.cacheUnconstrainFilter=this.opts.cacheUnconstrainFilter}relaysMissingEose(){return this.relayFilters?Array.from(this.relayFilters?.keys()).filter(e=>!this.eosesSeen.has(this.pool.getRelay(e,!1,!1))):[]}get filter(){return this.filters[0]}get groupableDelay(){if(this.isGroupable())return this.opts?.groupableDelay}get groupableDelayType(){return this.opts?.groupableDelayType||"at-most"}isGroupable(){return this.opts?.groupable||!1}shouldQueryCache(){return this.opts.addSinceFromCache?!0:this.opts?.cacheUsage==="ONLY_RELAY"?!1:(this.filters.some(e=>e.kinds?.some(s=>kindIsEphemeral(s))),!0)}shouldQueryRelays(){return this.opts?.cacheUsage!=="ONLY_CACHE"}shouldWaitForCache(){return this.opts.addSinceFromCache?!0:!!this.opts.closeOnEose&&!!this.ndk.cacheAdapter?.locking&&this.opts.cacheUsage!=="PARALLEL"}start(n=!0){let e;const s=a=>{if(n)for(const c of a)(!this.mostRecentCacheEventTimestamp||c.created_at>this.mostRecentCacheEventTimestamp)&&(this.mostRecentCacheEventTimestamp=c.created_at),this.eventReceived(c,void 0,!0,!1);else{e=[];for(const c of a){(!this.mostRecentCacheEventTimestamp||c.created_at>this.mostRecentCacheEventTimestamp)&&(this.mostRecentCacheEventTimestamp=c.created_at),c.ndk=this.ndk;const f=this.opts.wrap?wrapEvent(c):c;if(!f)break;if(f instanceof Promise){f.then(h=>{this.emitEvent(!1,h,void 0,!0,!1)});break}this.eventFirstSeen.set(f.id,Date.now()),e.push(f)}}},o=()=>{this.shouldQueryRelays()?(this.startWithRelays(),this.startPoolMonitor()):this.emit("eose",this)};return this.shouldQueryCache()?(e=this.startWithCache(),e instanceof Promise?this.shouldWaitForCache()?(e.then(a=>{if(s(a),queryFullyFilled(this)){this.emit("eose",this);return}o()}),null):(e.then(a=>{s(a)}),o(),null):(s(e),queryFullyFilled(this)?this.emit("eose",this):o(),e)):(o(),null)}startPoolMonitor(){this.debug.extend("pool-monitor"),this.poolMonitor=n=>{if(this.relayFilters?.has(n.url))return;calculateRelaySetsFromFilters(this.ndk,this.filters,this.pool).get(n.url)&&(this.relayFilters?.set(n.url,this.filters),n.subscribe(this,this.filters))},this.pool.on("relay:connect",this.poolMonitor)}onStopped;stop(){this.emit("close",this),this.poolMonitor&&this.pool.off("relay:connect",this.poolMonitor),this.onStopped?.()}hasAuthorsFilter(){return this.filters.some(n=>n.authors?.length)}startWithCache(){return this.ndk.cacheAdapter?.query?this.ndk.cacheAdapter.query(this):[]}startWithRelays(){let n=this.filters;if(this.opts.addSinceFromCache&&this.mostRecentCacheEventTimestamp){const e=this.mostRecentCacheEventTimestamp+1;n=n.map(s=>({...s,since:Math.max(s.since||0,e)}))}if(!this.relaySet||this.relaySet.relays.size===0)this.relayFilters=calculateRelaySetsFromFilters(this.ndk,n,this.pool);else{this.relayFilters=new Map;for(const e of this.relaySet.relays)this.relayFilters.set(e.url,n)}for(const[e,s]of this.relayFilters)this.pool.getRelay(e,!0,!0,s).subscribe(this,s)}eventReceived(n,e,s=!1,o=!1){const a=n.id,c=this.eventFirstSeen.has(a);let f;if(n instanceof NDKEvent&&(f=n),c){const h=Date.now()-(this.eventFirstSeen.get(a)||0);if(this.emit("event:dup",n,e,h,this,s,o),e){const m=verifiedSignatures.get(a);if(m&&typeof m=="string")if(n.sig===m)e.addValidatedEvent();else{const g=n instanceof NDKEvent?n:new NDKEvent(this.ndk,n);this.ndk.reportInvalidSignature(g,e)}}}else{if(f??=new NDKEvent(this.ndk,n),f.ndk=this.ndk,f.relay=e,!s&&!o){if(!this.skipValidation&&!f.isValid){this.debug("Event failed validation %s from relay %s",a,e?.url);return}if(e)if(e.shouldValidateEvent()&&!this.skipVerification){if(f.relay=e,!this.ndk.asyncSigVerification){if(!f.verifySignature(!0)){this.debug("Event failed signature validation",n),this.ndk.reportInvalidSignature(f,e);return}e.addValidatedEvent()}}else e.addNonValidatedEvent();this.ndk.cacheAdapter&&!this.opts.dontSaveToCache&&this.ndk.cacheAdapter.setEvent(f,this.filters,e)}(!o||this.skipOptimisticPublishEvent!==!0)&&(this.emitEvent(this.opts?.wrap??!1,f,e,s,o),this.eventFirstSeen.set(a,Date.now()))}this.lastEventReceivedAt=Date.now()}emitEvent(n,e,s,o,a){const c=n?wrapEvent(e):e;c instanceof Promise?c.then(f=>this.emitEvent(!1,f,s,o,a)):c&&this.emit("event",c,s,this,o,a)}closedReceived(n,e){this.emit("closed",n,e)}eoseTimeout;eosed=!1;eoseReceived(n){this.debug("EOSE received from %s",n.url),this.eosesSeen.add(n);let e=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0;const s=this.eosesSeen.size===this.relayFilters?.size,o=queryFullyFilled(this),a=c=>{this.debug("Performing EOSE: %s %d",c,this.eosed),!this.eosed&&(this.eoseTimeout&&clearTimeout(this.eoseTimeout),this.emit("eose",this),this.eosed=!0,this.opts?.closeOnEose&&this.stop())};if(o||s)a("query filled or seen all");else if(this.relayFilters){let c=1e3;const f=new Set(this.pool.connectedRelays().map(g=>g.url)),h=Array.from(this.relayFilters.keys()).filter(g=>f.has(g));if(h.length===0){this.debug("No connected relays, waiting for all relays to connect",Array.from(this.relayFilters.keys()).join(", "));return}const m=this.eosesSeen.size/h.length;if(this.debug("Percentage of relays that have sent EOSE",{subId:this.subId,percentageOfRelaysThatHaveSentEose:m,seen:this.eosesSeen.size,total:h.length}),this.eosesSeen.size>=2&&m>=.5){if(c=c*(1-m),c===0){a("time to wait was 0");return}this.eoseTimeout&&clearTimeout(this.eoseTimeout);const g=()=>{e=this.lastEventReceivedAt?Date.now()-this.lastEventReceivedAt:void 0,e!==void 0&&e<20?this.eoseTimeout=setTimeout(g,c):a(`send eose timeout: ${c}`)};this.eoseTimeout=setTimeout(g,c)}}}},kindIsEphemeral=n=>n>=2e4&&n<3e4;async function follows(n,e,s=3){if(!this.ndk)throw new Error("NDK not set");const o=await this.ndk.fetchEvent({kinds:[s],authors:[this.pubkey]},n||{groupable:!1});if(o){const a=new Set;return o.tags.forEach(c=>{c[0]==="p"&&a.add(c[1])}),e&&this.ndk?.outboxTracker?.trackUsers(Array.from(a)),[...a].reduce((c,f)=>{const h=new NDKUser({pubkey:f});return h.ndk=this.ndk,c.add(h),c},new Set)}return new Set}var NIP05_REGEX=/^(?:([\w.+-]+)@)?([\w.-]+)$/;async function getNip05For(n,e,s=fetch,o={}){return await n.queuesNip05.add({id:e,func:async()=>{if(n.cacheAdapter?.loadNip05){const m=await n.cacheAdapter.loadNip05(e);if(m!=="missing"){if(m){const g=new NDKUser({pubkey:m.pubkey,relayUrls:m.relays,nip46Urls:m.nip46});return g.ndk=n,g}if(o.cache!=="no-cache")return null}}const a=e.match(NIP05_REGEX);if(!a)return null;const[c,f="_",h]=a;try{const m=await s(`https://${h}/.well-known/nostr.json?name=${f}`,o),{names:g,relays:_,nip46:E}=parseNIP05Result(await m.json()),T=g[f.toLowerCase()];let w=null;return T&&(w={pubkey:T,relays:_?.[T],nip46:E?.[T]}),n?.cacheAdapter?.saveNip05&&n.cacheAdapter.saveNip05(e,w),w}catch(m){return n?.cacheAdapter?.saveNip05&&n?.cacheAdapter.saveNip05(e,null),console.error("Failed to fetch NIP05 for",e,m),null}}})}function parseNIP05Result(n){const e={names:{}};for(const[s,o]of Object.entries(n.names))typeof s=="string"&&typeof o=="string"&&(e.names[s.toLowerCase()]=o);if(n.relays){e.relays={};for(const[s,o]of Object.entries(n.relays))typeof s=="string"&&Array.isArray(o)&&(e.relays[s]=o.filter(a=>typeof a=="string"))}if(n.nip46){e.nip46={};for(const[s,o]of Object.entries(n.nip46))typeof s=="string"&&Array.isArray(o)&&(e.nip46[s]=o.filter(a=>typeof a=="string"))}return e}function profileFromEvent(n){const e={};let s;try{s=JSON.parse(n.content)}catch(o){throw new Error(`Failed to parse profile event: ${o}`)}e.profileEvent=JSON.stringify(n.rawEvent());for(const o of Object.keys(s))switch(o){case"name":e.name=s.name;break;case"display_name":e.displayName=s.display_name;break;case"image":case"picture":e.picture=s.picture||s.image,e.image=e.picture;break;case"banner":e.banner=s.banner;break;case"bio":e.bio=s.bio;break;case"nip05":e.nip05=s.nip05;break;case"lud06":e.lud06=s.lud06;break;case"lud16":e.lud16=s.lud16;break;case"about":e.about=s.about;break;case"website":e.website=s.website;break;default:e[o]=s[o];break}return e.created_at=n.created_at,e}function serializeProfile(n){const e={};for(const[s,o]of Object.entries(n))switch(s){case"username":case"name":e.name=o;break;case"displayName":e.display_name=o;break;case"image":case"picture":e.picture=o;break;case"bio":case"about":e.about=o;break;default:e[s]=o;break}return JSON.stringify(e)}var NDKUser=class _p{ndk;profile;profileEvent;_npub;_pubkey;relayUrls=[];nip46Urls=[];constructor(e){if(e.npub&&(this._npub=e.npub),e.hexpubkey&&(this._pubkey=e.hexpubkey),e.pubkey&&(this._pubkey=e.pubkey),e.relayUrls&&(this.relayUrls=e.relayUrls),e.nip46Urls&&(this.nip46Urls=e.nip46Urls),e.nprofile)try{const s=nip19_exports.decode(e.nprofile);s.type==="nprofile"&&(this._pubkey=s.data.pubkey,s.data.relays&&s.data.relays.length>0&&this.relayUrls.push(...s.data.relays))}catch(s){console.error("Failed to decode nprofile",s)}}get npub(){if(!this._npub){if(!this._pubkey)throw new Error("pubkey not set");this._npub=nip19_exports.npubEncode(this.pubkey)}return this._npub}get nprofile(){const e=this.profileEvent?.onRelays?.map(s=>s.url);return nip19_exports.nprofileEncode({pubkey:this.pubkey,relays:e})}set npub(e){this._npub=e}get pubkey(){if(!this._pubkey){if(!this._npub)throw new Error("npub not set");this._pubkey=nip19_exports.decode(this.npub).data}return this._pubkey}set pubkey(e){this._pubkey=e}filter(){return{"#p":[this.pubkey]}}async getZapInfo(e){if(!this.ndk)throw new Error("No NDK instance found");const s=async f=>{if(!e)return f;let h;const m=new Promise((g,_)=>{h=setTimeout(()=>_(new Error("Timeout")),e)});try{const g=await Promise.race([f,m]);return h&&clearTimeout(h),g}catch(g){if(g instanceof Error&&g.message==="Timeout")try{return await f}catch{return}return}},[o,a]=await Promise.all([s(this.fetchProfile()),s(this.ndk.fetchEvent({kinds:[10019],authors:[this.pubkey]}))]),c=new Map;if(a){const f=NDKCashuMintList.from(a);f.mints.length>0&&c.set("nip61",{mints:f.mints,relays:f.relays,p2pk:f.p2pk})}if(o){const{lud06:f,lud16:h}=o;c.set("nip57",{lud06:f,lud16:h})}return c}static async fromNip05(e,s,o=!1){if(!s)throw new Error("No NDK instance found");const a={};o&&(a.cache="no-cache");const c=await getNip05For(s,e,s?.httpFetch,a);if(c){const f=new _p({pubkey:c.pubkey,relayUrls:c.relays,nip46Urls:c.nip46});return f.ndk=s,f}}async fetchProfile(e,s=!1){if(!this.ndk)throw new Error("NDK not set");let o=null;if(this.ndk.cacheAdapter&&(this.ndk.cacheAdapter.fetchProfile||this.ndk.cacheAdapter.fetchProfileSync)&&e?.cacheUsage!=="ONLY_RELAY"){let a=null;if(this.ndk.cacheAdapter.fetchProfileSync?a=this.ndk.cacheAdapter.fetchProfileSync(this.pubkey):this.ndk.cacheAdapter.fetchProfile&&(a=await this.ndk.cacheAdapter.fetchProfile(this.pubkey)),a)return this.profile=a,a}return e??={},e.cacheUsage??="ONLY_RELAY",e.closeOnEose??=!0,e.groupable??=!0,e.groupableDelay??=250,o||(o=await this.ndk.fetchEvent({kinds:[0],authors:[this.pubkey]},e)),o?(this.profile=profileFromEvent(o),s&&this.profile&&this.ndk.cacheAdapter&&this.ndk.cacheAdapter.saveProfile&&this.ndk.cacheAdapter.saveProfile(this.pubkey,this.profile),this.profile):null}follows=follows.bind(this);async followSet(e,s,o=3){const a=await this.follows(e,s,o);return new Set(Array.from(a).map(c=>c.pubkey))}tagReference(){return["p",this.pubkey]}referenceTags(e){const s=[["p",this.pubkey]];return e&&s[0].push("",e),s}async publish(){if(!this.ndk)throw new Error("No NDK instance found");if(!this.profile)throw new Error("No profile available");this.ndk.assertSigner(),await new NDKEvent(this.ndk,{kind:0,content:serializeProfile(this.profile)}).publish()}async follow(e,s,o=3){if(!this.ndk)throw new Error("No NDK instance found");if(this.ndk.assertSigner(),s||(s=await this.follows(void 0,void 0,o)),s.has(e))return!1;s.add(e);const a=new NDKEvent(this.ndk,{kind:o});for(const c of s)a.tag(c);return await a.publish(),!0}async unfollow(e,s,o=3){if(!this.ndk)throw new Error("No NDK instance found");this.ndk.assertSigner(),s||(s=await this.follows(void 0,void 0,o));const a=new Set;let c=!1;for(const h of s)h.pubkey!==e.pubkey?a.add(h):c=!0;if(!c)return!1;const f=new NDKEvent(this.ndk,{kind:o});for(const h of a)f.tag(h);return await f.publish()}async validateNip05(e){if(!this.ndk)throw new Error("No NDK instance found");const s=await getNip05For(this.ndk,e);return s===null?null:s.pubkey===this.pubkey}},READ_MARKER="read",WRITE_MARKER="write",NDKRelayList=class bp extends NDKEvent{constructor(e,s){super(e,s),this.kind??=10002}static from(e){return new bp(e.ndk,e.rawEvent())}get readRelayUrls(){return this.tags.filter(e=>e[0]==="r"||e[0]==="relay").filter(e=>!e[2]||e[2]&&e[2]===READ_MARKER).map(e=>tryNormalizeRelayUrl(e[1])).filter(e=>!!e)}set readRelayUrls(e){for(const s of e)this.tags.push(["r",s,READ_MARKER])}get writeRelayUrls(){return this.tags.filter(e=>e[0]==="r"||e[0]==="relay").filter(e=>!e[2]||e[2]&&e[2]===WRITE_MARKER).map(e=>tryNormalizeRelayUrl(e[1])).filter(e=>!!e)}set writeRelayUrls(e){for(const s of e)this.tags.push(["r",s,WRITE_MARKER])}get bothRelayUrls(){return this.tags.filter(e=>e[0]==="r"||e[0]==="relay").filter(e=>!e[2]).map(e=>e[1])}set bothRelayUrls(e){for(const s of e)this.tags.push(["r",s])}get relays(){return this.tags.filter(e=>e[0]==="r"||e[0]==="relay").map(e=>e[1])}get relaySet(){if(!this.ndk)throw new Error("NDKRelayList has no NDK instance");return new NDKRelaySet(new Set(this.relays.map(e=>this.ndk?.pool.getRelay(e)).filter(e=>!!e)),this.ndk)}};function relayListFromKind3(n,e){try{const s=JSON.parse(e.content),o=new NDKRelayList(n),a=new Set,c=new Set;for(let[f,h]of Object.entries(s)){try{f=normalizeRelayUrl(f)}catch{continue}if(!h)a.add(f),c.add(f);else{const m=h;m.write&&c.add(f),m.read&&a.add(f)}}return o.readRelayUrls=Array.from(a),o.writeRelayUrls=Array.from(c),o}catch{}}var signerRegistry=new Map;function registerSigner(n,e){signerRegistry.set(n,e)}var NDKPrivateKeySigner=class Uu{_user;_privateKey;_pubkey;constructor(e,s){if(typeof e=="string")if(e.startsWith("nsec1")){const{type:o,data:a}=nip19_exports.decode(e);if(o==="nsec")this._privateKey=a;else throw new Error("Invalid private key provided.")}else if(e.length===64)this._privateKey=hexToBytes(e);else throw new Error("Invalid private key provided.");else this._privateKey=e;this._pubkey=getPublicKey(this._privateKey),s&&(this._user=s.getUser({pubkey:this._pubkey})),this._user??=new NDKUser({pubkey:this._pubkey})}get privateKey(){if(!this._privateKey)throw new Error("Not ready");return bytesToHex(this._privateKey)}get pubkey(){if(!this._pubkey)throw new Error("Not ready");return this._pubkey}get nsec(){if(!this._privateKey)throw new Error("Not ready");return nip19_exports.nsecEncode(this._privateKey)}get npub(){if(!this._pubkey)throw new Error("Not ready");return nip19_exports.npubEncode(this._pubkey)}static generate(){const e=generateSecretKey();return new Uu(e)}async blockUntilReady(){return this._user}async user(){return this._user}get userSync(){return this._user}async sign(e){if(!this._privateKey)throw Error("Attempted to sign without a private key");return finalizeEvent(e,this._privateKey).sig}async encryptionEnabled(e){const s=[];return(!e||e==="nip04")&&s.push("nip04"),(!e||e==="nip44")&&s.push("nip44"),s}async encrypt(e,s,o){if(!this._privateKey||!this.privateKey)throw Error("Attempted to encrypt without a private key");const a=e.pubkey;if(o==="nip44"){const c=nip44_exports.v2.utils.getConversationKey(this._privateKey,a);return await nip44_exports.v2.encrypt(s,c)}return await nip04_exports.encrypt(this._privateKey,a,s)}async decrypt(e,s,o){if(!this._privateKey||!this.privateKey)throw Error("Attempted to decrypt without a private key");const a=e.pubkey;if(o==="nip44"){const c=nip44_exports.v2.utils.getConversationKey(this._privateKey,a);return await nip44_exports.v2.decrypt(s,c)}return await nip04_exports.decrypt(this._privateKey,a,s)}toPayload(){if(!this._privateKey)throw new Error("Private key not available");const e={type:"private-key",payload:this.privateKey};return JSON.stringify(e)}static async fromPayload(e,s){const o=JSON.parse(e);if(o.type!=="private-key")throw new Error(`Invalid payload type: expected 'private-key', got ${o.type}`);if(!o.payload||typeof o.payload!="string")throw new Error("Invalid payload content for private-key signer");return new Uu(o.payload,s)}};registerSigner("private-key",NDKPrivateKeySigner);function disconnect(n,e){return e??=createDebug5("ndk:relay:auth-policies:disconnect"),async s=>{e?.(`Relay ${s.url} requested authentication, disconnecting`),n.removeRelay(s.url)}}async function signAndAuth(n,e,s,o,a,c){try{await n.sign(s),a(n)}catch(f){o?.(`Failed to publish auth event to relay ${e.url}`,f),c(n)}}function signIn({ndk:n,signer:e,debug:s}={}){return s??=createDebug5("ndk:auth-policies:signIn"),async(o,a)=>{s?.(`Relay ${o.url} requested authentication, signing in`);const c=new NDKEvent(n);return c.kind=22242,c.tags=[["relay",o.url],["challenge",a]],e??=n?.signer,new Promise(async(f,h)=>{e?await signAndAuth(c,o,e,s,f,h):n?.once("signer:ready",async m=>{await signAndAuth(c,o,m,s,f,h)})})}}var NDKRelayAuthPolicies={disconnect,signIn},NDKNip07Signer=class Ep{_userPromise;encryptionQueue=[];encryptionProcessing=!1;debug;waitTimeout;_pubkey;ndk;_user;constructor(e=1e3,s){this.debug=createDebug5("ndk:nip07"),this.waitTimeout=e,this.ndk=s}get pubkey(){if(!this._pubkey)throw new Error("Not ready");return this._pubkey}async blockUntilReady(){await this.waitForExtension();const e=await window.nostr?.getPublicKey();if(!e)throw new Error("User rejected access");this._pubkey=e;let s;return this.ndk?s=this.ndk.getUser({pubkey:e}):s=new NDKUser({pubkey:e}),this._user=s,s}async user(){return this._userPromise||(this._userPromise=this.blockUntilReady()),this._userPromise}get userSync(){if(!this._user)throw new Error("User not ready");return this._user}async sign(e){await this.waitForExtension();const s=await window.nostr?.signEvent(e);if(!s)throw new Error("Failed to sign event");return s.sig}async relays(e){await this.waitForExtension();const s=await window.nostr?.getRelays?.()||{},o=[];for(const a of Object.keys(s))s[a].read&&s[a].write&&o.push(a);return o.map(a=>new NDKRelay(a,e?.relayAuthDefaultPolicy,e))}async encryptionEnabled(e){const s=[];return(!e||e==="nip04")&&window.nostr?.nip04&&s.push("nip04"),(!e||e==="nip44")&&window.nostr?.nip44&&s.push("nip44"),s}async encrypt(e,s,o="nip04"){if(!await this.encryptionEnabled(o))throw new Error(`${o}encryption is not available from your browser extension`);await this.waitForExtension();const a=e.pubkey;return this.queueEncryption(o,"encrypt",a,s)}async decrypt(e,s,o="nip04"){if(!await this.encryptionEnabled(o))throw new Error(`${o}encryption is not available from your browser extension`);await this.waitForExtension();const a=e.pubkey;return this.queueEncryption(o,"decrypt",a,s)}async queueEncryption(e,s,o,a){return new Promise((c,f)=>{this.encryptionQueue.push({scheme:e,method:s,counterpartyHexpubkey:o,value:a,resolve:c,reject:f}),this.encryptionProcessing||this.processEncryptionQueue()})}async processEncryptionQueue(e,s=0){if(!e&&this.encryptionQueue.length===0){this.encryptionProcessing=!1;return}this.encryptionProcessing=!0;const o=e||this.encryptionQueue.shift();if(!o){this.encryptionProcessing=!1;return}const{scheme:a,method:c,counterpartyHexpubkey:f,value:h,resolve:m,reject:g}=o;this.debug("Processing encryption queue item",{method:c,counterpartyHexpubkey:f,value:h});try{const _=await window.nostr?.[a]?.[c](f,h);if(!_)throw new Error("Failed to encrypt/decrypt");m(_)}catch(_){const E=_ instanceof Error?_.message:String(_);if(E.includes("call already executing")&&s<5){this.debug("Retrying encryption queue item",{method:c,counterpartyHexpubkey:f,value:h,retries:s}),setTimeout(()=>{this.processEncryptionQueue(o,s+1)},50*s);return}g(_ instanceof Error?_:new Error(E))}this.processEncryptionQueue()}waitForExtension(){return new Promise((e,s)=>{if(window.nostr){e();return}let o;const a=setInterval(()=>{window.nostr&&(clearTimeout(o),clearInterval(a),e())},100);o=setTimeout(()=>{clearInterval(a),s(new Error("NIP-07 extension not available"))},this.waitTimeout)})}toPayload(){return JSON.stringify({type:"nip07",payload:""})}static async fromPayload(e,s){const o=JSON.parse(e);if(o.type!=="nip07")throw new Error(`Invalid payload type: expected 'nip07', got ${o.type}`);return new Ep(void 0,s)}};registerSigner("nip07",NDKNip07Signer);var NDKNostrRpc=class extends libExports.EventEmitter{ndk;signer;relaySet;debug;encryptionType="nip04";pool;constructor(n,e,s,o){if(super(),this.ndk=n,this.signer=e,o){this.pool=new NDKPool(o,[],n,{debug:s.extend("rpc-pool"),name:"Nostr RPC"}),this.relaySet=new NDKRelaySet(new Set,n,this.pool);for(const a of o){const c=this.pool.getRelay(a,!1,!1);c.authPolicy=NDKRelayAuthPolicies.signIn({ndk:n,signer:e,debug:s}),this.relaySet.addRelay(c),c.connect()}}this.debug=s.extend("rpc")}subscribe(n){const e=this.ndk.subscribe(n,{closeOnEose:!1,groupable:!1,cacheUsage:"ONLY_RELAY",pool:this.pool,relaySet:this.relaySet},!1);return e.on("event",async s=>{console.log("Received event",s.rawEvent());try{const o=await this.parseEvent(s);o.method?(console.log("Received request",o),this.emit("request",o)):(console.log("Received response",o),this.emit(`response-${o.id}`,o),this.emit("response",o))}catch(o){this.debug("error parsing event",o,s.rawEvent())}}),new Promise(s=>{e.on("eose",()=>{this.debug("eosed"),s(e)}),e.start()})}async parseEvent(n){this.encryptionType==="nip44"&&n.content.includes("?iv=")?this.encryptionType="nip04":this.encryptionType==="nip04"&&!n.content.includes("?iv=")&&(this.encryptionType="nip44");const e=this.ndk.getUser({pubkey:n.pubkey});e.ndk=this.ndk;let s;try{s=await this.signer.decrypt(e,n.content,this.encryptionType)}catch{const _=this.encryptionType==="nip04"?"nip44":"nip04";s=await this.signer.decrypt(e,n.content,_),this.encryptionType=_}const o=JSON.parse(s),{id:a,method:c,params:f,result:h,error:m}=o;return c?{id:a,pubkey:n.pubkey,method:c,params:f,event:n}:{id:a,result:h,error:m,event:n}}async sendResponse(n,e,s,o=24133,a){const c={id:n,result:s};a&&(c.error=a);const f=await this.signer.user(),h=this.ndk.getUser({pubkey:e}),m=new NDKEvent(this.ndk,{kind:o,content:JSON.stringify(c),tags:[["p",e]],pubkey:f.pubkey});m.content=await this.signer.encrypt(h,m.content,this.encryptionType),await m.sign(this.signer),await m.publish(this.relaySet)}async sendRequest(n,e,s=[],o=24133,a){console.log("Sending request",e,s);const c=Math.random().toString(36).substring(7),f=await this.signer.user(),h=this.ndk.getUser({pubkey:n}),m={id:c,method:e,params:s},g=new Promise(()=>{const E=T=>{T.result==="auth_url"?(this.once(`response-${c}`,E),this.emit("authUrl",T.error)):a&&a(T)};this.once(`response-${c}`,E)});console.log("Sending request",m);const _=new NDKEvent(this.ndk,{kind:o,content:JSON.stringify(m),tags:[["p",n]],pubkey:f.pubkey});return _.content=await this.signer.encrypt(h,_.content,this.encryptionType),await _.sign(this.signer),await _.publish(this.relaySet),g}};async function ndkSignerFromPayload(n,e){let s;try{s=JSON.parse(n)}catch(a){console.error("Failed to parse signer payload string",n,a);return}if(!s||typeof s.type!="string"){console.error("Failed to parse signer payload string",n,new Error("Missing type field"));return}const o=signerRegistry.get(s.type);if(!o)throw new Error(`Unknown signer type: ${s.type}`);try{return await o.fromPayload(n,e)}catch(a){const c=a instanceof Error?a.message:String(a);throw new Error(`Failed to deserialize signer type ${s.type}: ${c}`)}}function nostrConnectGenerateSecret(){return Math.random().toString(36).substring(2,15)}function generateNostrConnectUri(n,e,s,o){const a={name:o?.name?encodeURIComponent(o.name):"",url:o?.url?encodeURIComponent(o.url):"",image:o?.image?encodeURIComponent(o.image):"",perms:o?.perms?encodeURIComponent(o.perms):""};let c=`nostrconnect://${n}?image=${a.image}&url=${a.url}&name=${a.name}&perms=${a.perms}&secret=${encodeURIComponent(e)}`;return s&&(c+=`&relay=${encodeURIComponent(s)}`),c}var NDKNip46Signer=class Yl extends libExports.EventEmitter{ndk;_user;bunkerPubkey;userPubkey;get pubkey(){if(!this.userPubkey)throw new Error("Not ready");return this.userPubkey}secret;localSigner;nip05;rpc;debug;relayUrls;subscription;nostrConnectUri;nostrConnectSecret;constructor(e,s,o,a,c){super(),this.ndk=e,this.debug=e.debug.extend("nip46:signer"),this.relayUrls=a,o?typeof o=="string"?this.localSigner=new NDKPrivateKeySigner(o):this.localSigner=o:this.localSigner=NDKPrivateKeySigner.generate(),s===!1||(s?s.startsWith("bunker://")?this.bunkerFlowInit(s):this.nip05Init(s):this.nostrconnectFlowInit(c)),this.rpc=new NDKNostrRpc(this.ndk,this.localSigner,this.debug,this.relayUrls)}static bunker(e,s,o){return new Yl(e,s,o)}static nostrconnect(e,s,o,a){return new Yl(e,void 0,o,[s],a)}nostrconnectFlowInit(e){this.nostrConnectSecret=nostrConnectGenerateSecret();const s=this.localSigner.pubkey;this.nostrConnectUri=generateNostrConnectUri(s,this.nostrConnectSecret,this.relayUrls?.[0],e)}bunkerFlowInit(e){const s=new URL(e),o=s.hostname||s.pathname.replace(/^\/\//,""),a=s.searchParams.get("pubkey"),c=s.searchParams.getAll("relay"),f=s.searchParams.get("secret");this.bunkerPubkey=o,this.userPubkey=a,this.relayUrls=c,this.secret=f}nip05Init(e){this.nip05=e}async startListening(){if(this.subscription)return;const e=await this.localSigner.user();if(!e)throw new Error("Local signer not ready");this.subscription=await this.rpc.subscribe({kinds:[24133],"#p":[e.pubkey]})}async user(){return this._user?this._user:this.blockUntilReady()}get userSync(){if(!this._user)throw new Error("Remote user not ready synchronously");return this._user}async blockUntilReadyNostrConnect(){return new Promise((e,s)=>{const o=a=>{a.result===this.nostrConnectSecret&&(this._user=a.event.author,this.userPubkey=a.event.pubkey,this.bunkerPubkey=a.event.pubkey,this.rpc.off("response",o),e(this._user))};this.startListening(),this.rpc.on("response",o)})}async blockUntilReady(){if(!this.bunkerPubkey&&!this.nostrConnectSecret&&!this.nip05)throw new Error("Bunker pubkey not set");if(this.nostrConnectSecret)return this.blockUntilReadyNostrConnect();if(this.nip05&&!this.userPubkey){const e=await NDKUser.fromNip05(this.nip05,this.ndk);e&&(this._user=e,this.userPubkey=e.pubkey,this.relayUrls=e.nip46Urls,this.rpc=new NDKNostrRpc(this.ndk,this.localSigner,this.debug,this.relayUrls))}if(!this.bunkerPubkey&&this.userPubkey)this.bunkerPubkey=this.userPubkey;else if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");return await this.startListening(),this.rpc.on("authUrl",(...e)=>{this.emit("authUrl",...e)}),new Promise((e,s)=>{const o=[this.userPubkey??""];if(this.secret&&o.push(this.secret),!this.bunkerPubkey)throw new Error("Bunker pubkey not set");console.log("sending connect"),this.rpc.sendRequest(this.bunkerPubkey,"connect",o,24133,a=>{a.result==="ack"?this.getPublicKey().then(c=>{this.userPubkey=c,this._user=this.ndk.getUser({pubkey:c}),e(this._user)}):s(a.error)})})}stop(){this.subscription?.stop(),this.subscription=void 0}async getPublicKey(){return this.userPubkey?this.userPubkey:new Promise((e,s)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"get_public_key",[],24133,o=>{e(o.result)})})}async encryptionEnabled(e){return e?[e]:Promise.resolve(["nip04","nip44"])}async encrypt(e,s,o="nip04"){return this.encryption(e,s,o,"encrypt")}async decrypt(e,s,o="nip04"){return this.encryption(e,s,o,"decrypt")}async encryption(e,s,o,a){return new Promise((f,h)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,`${o}_${a}`,[e.pubkey,s],24133,m=>{m.error?h(m.error):f(m.result)})})}async sign(e){return new Promise((o,a)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"sign_event",[JSON.stringify(e)],24133,c=>{if(c.error)a(c.error);else{const f=JSON.parse(c.result);o(f.sig)}})})}async createAccount(e,s,o){await this.startListening();const a=[];return e&&a.push(e),s&&a.push(s),o&&a.push(o),new Promise((c,f)=>{if(!this.bunkerPubkey)throw new Error("Bunker pubkey not set");this.rpc.sendRequest(this.bunkerPubkey,"create_account",a,24133,h=>{if(h.error)f(h.error);else{const m=h.result;c(m)}})})}toPayload(){if(!this.bunkerPubkey||!this.userPubkey)throw new Error("NIP-46 signer is not fully initialized for serialization");const e={type:"nip46",payload:{bunkerPubkey:this.bunkerPubkey,userPubkey:this.userPubkey,relayUrls:this.relayUrls,secret:this.secret,localSignerPayload:this.localSigner.toPayload(),nip05:this.nip05||null}};return JSON.stringify(e)}static async fromPayload(e,s){if(console.log("from payload",e),!s)throw new Error("NDK instance is required to deserialize NIP-46 signer");const o=JSON.parse(e);if(o.type!=="nip46")throw new Error(`Invalid payload type: expected 'nip46', got ${o.type}`);const a=o.payload;if(!a||typeof a!="object"||!a.localSignerPayload)throw new Error("Invalid payload content for nip46 signer");const c=await ndkSignerFromPayload(a.localSignerPayload,s);if(!c)throw new Error("Failed to deserialize local signer for NIP-46");if(!(c instanceof NDKPrivateKeySigner))throw new Error("Local signer must be an instance of NDKPrivateKeySigner");let f;return console.log("restore payload",a),f=new Yl(s,!1,c,a.relayUrls),f.userPubkey=a.userPubkey,f.bunkerPubkey=a.bunkerPubkey,f.relayUrls=a.relayUrls,f.secret=a.secret,a.userPubkey&&(f._user=new NDKUser({pubkey:a.userPubkey}),f._user&&(f._user.ndk=s)),f}};registerSigner("nip46",NDKNip46Signer);function dedup(n,e){return n.created_at>e.created_at?n:e}async function getRelayListForUser(n,e){return(await getRelayListForUsers([n],e)).get(n)}async function getRelayListForUsers(n,e,s=!1,o=1e3){const a=e.outboxPool||e.pool,c=new Set;for(const E of a.relays.values())c.add(E);const f=new Map,h=new Map,m=new NDKRelaySet(c,e);if(e.cacheAdapter?.locking&&!s){const E=await e.fetchEvents({kinds:[3,10002],authors:Array.from(new Set(n))},{cacheUsage:"ONLY_CACHE",subId:"ndk-relay-list-fetch"});for(const T of E)T.kind===10002&&f.set(T.pubkey,NDKRelayList.from(T));for(const T of E)if(T.kind===3){if(f.has(T.pubkey))continue;const w=relayListFromKind3(e,T);w&&h.set(T.pubkey,w)}n=n.filter(T=>!f.has(T)&&!h.has(T))}if(n.length===0)return f;const g=new Map,_=new Map;return new Promise(E=>{(async()=>{const w={closeOnEose:!0,pool:a,groupable:!0,subId:"ndk-relay-list-fetch",addSinceFromCache:!0,relaySet:m};m&&(w.relaySet=m),e.subscribe({kinds:[3,10002],authors:n},w,{onEvent:A=>{if(A.kind===10002){const R=g.get(A.pubkey);if(R&&R.created_at>A.created_at)return;g.set(A.pubkey,A)}else if(A.kind===3){const R=_.get(A.pubkey);if(R&&R.created_at>A.created_at)return;_.set(A.pubkey,A)}},onEose:()=>{for(const A of g.values())f.set(A.pubkey,NDKRelayList.from(A));for(const A of n){if(f.has(A))continue;const R=_.get(A);if(!R)continue;const V=relayListFromKind3(e,R);V&&f.set(A,V)}E(f)}}),setTimeout(()=>{E(f)},o)})()})}var OutboxItem=class{type;relayUrlScores;readRelays;writeRelays;constructor(n){this.type=n,this.relayUrlScores=new Map,this.readRelays=new Set,this.writeRelays=new Set}},OutboxTracker=class extends libExports.EventEmitter{data;ndk;debug;constructor(n){super(),this.ndk=n,this.debug=n.debug.extend("outbox-tracker"),this.data=new distExports.LRUCache({maxSize:1e5,entryExpirationTimeInMS:120*1e3})}async trackUsers(n,e=!1){const s=[];for(let o=0;o<n.length;o+=400){const c=n.slice(o,o+400).map(f=>getKeyFromItem(f)).filter(f=>!this.data.has(f));if(c.length!==0){for(const f of c)this.data.set(f,new OutboxItem("user"));s.push(new Promise(f=>{getRelayListForUsers(c,this.ndk,e).then(h=>{for(const[m,g]of h){let _=this.data.get(m);if(_??=new OutboxItem("user"),g){_.readRelays=new Set(normalize(g.readRelayUrls)),_.writeRelays=new Set(normalize(g.writeRelayUrls));for(const E of _.readRelays)this.ndk.pool.blacklistRelayUrls.has(E)&&_.readRelays.delete(E);for(const E of _.writeRelays)this.ndk.pool.blacklistRelayUrls.has(E)&&_.writeRelays.delete(E);this.data.set(m,_)}}}).finally(f)}))}}return Promise.all(s)}track(n,e,s=!0){const o=getKeyFromItem(n);e??=getTypeFromItem(n);let a=this.data.get(o);return a||(a=new OutboxItem(e),n instanceof NDKUser&&this.trackUsers([n])),a}};function getKeyFromItem(n){return n instanceof NDKUser?n.pubkey:n}function getTypeFromItem(n){return n instanceof NDKUser?"user":"kind"}function correctRelaySet(n,e){const s=e.connectedRelays();if(!Array.from(n.relays).some(a=>s.map(c=>c.url).includes(a.url)))for(const a of s)n.addRelay(a);if(s.length===0)for(const a of e.relays.values())n.addRelay(a);return n}var NDKSubscriptionManager=class{subscriptions;seenEvents=new Map;constructor(){this.subscriptions=new Map}add(n){this.subscriptions.set(n.internalId,n),n.onStopped,n.onStopped=()=>{this.subscriptions.delete(n.internalId)},n.on("close",()=>{this.subscriptions.delete(n.internalId)})}seenEvent(n,e){const s=this.seenEvents.get(n)||[];s.push(e),this.seenEvents.set(n,s)}dispatchEvent(n,e,s=!1){e&&this.seenEvent(n.id,e);const o=this.subscriptions.values(),a=[];for(const c of o)matchFilters(c.filters,n)&&a.push(c);for(const c of a)c.eventReceived(n,e,!1,s)}},debug7=createDebug5("ndk:active-user");async function getUserRelayList(n){if(!this.autoConnectUserRelays)return;const e=await getRelayListForUser(n.pubkey,this);if(e){for(const s of e.relays){let o=this.pool.relays.get(s);o||(o=new NDKRelay(s,this.relayAuthDefaultPolicy,this),this.pool.addRelay(o))}return e}}async function setActiveUser(n){const e=this.outboxPool||this.pool;e.connectedRelays.length>0?setActiveUserConnected.call(this,n):e.once("connect",()=>{setActiveUserConnected.call(this,n)})}async function setActiveUserConnected(n){const e=await getUserRelayList.call(this,n),s=[{kinds:[10006],authors:[n.pubkey]}];this.autoFetchUserMutelist&&s[0].kinds?.push(1e4);const o=new Map,a=e?e.relaySet:void 0;this.subscribe(s,{subId:"active-user-settings",closeOnEose:!0,relaySet:a},{onEvent:c=>{const f=o.get(c.kind);f&&f.created_at>=c.created_at||o.set(c.kind,c)},onEose:()=>{for(const c of o.values())processEvent.call(this,c)}})}async function processEvent(n){n.kind===10006?processBlockRelayList.call(this,n):n.kind===1e4&&processMuteList.call(this,n)}function processBlockRelayList(n){const e=lists_default.from(n);for(const s of e.items)this.pool.blacklistRelayUrls.add(s[0]);debug7("Added %d relays to relay blacklist",e.items.length)}function processMuteList(n){const e=lists_default.from(n);for(const s of e.items)this.mutedIds.set(s[1],s[0]);debug7("Added %d users to mute list",e.items.length)}function getEntity(n){try{const e=nip19_exports.decode(n);return e.type==="npub"?npub(this,e.data):e.type==="nprofile"?nprofile(this,e.data):e}catch{return null}}function npub(n,e){return n.getUser({pubkey:e})}function nprofile(n,e){const s=n.getUser({pubkey:e.pubkey});return e.relays&&(s.relayUrls=e.relays),s}function isValidHint(n){if(!n||n==="")return!1;try{return new URL(n),!0}catch{return!1}}async function fetchEventFromTag(n,e,s,o={type:"timeout"}){const a=this.debug.extend("fetch-event-from-tag"),[c,f,h]=n;s={},a("fetching event from tag",n,s,o);const m=getRelaysForSync(this,e.pubkey);if(m&&m.size>0){a("fetching event from author relays %o",Array.from(m));const R=NDKRelaySet.fromRelayUrls(Array.from(m),this),V=await this.fetchEvent(f,s,R);if(V)return V}else a("no author relays found for %s",e.pubkey,e);const g=calculateRelaySetsFromFilters(this,[{ids:[f]}],this.pool);a("fetching event without relay hint",g);const _=await this.fetchEvent(f,s);if(_)return _;if(h&&h!==""){const R=await this.fetchEvent(f,s,this.pool.getRelay(h,!0,!0,[{ids:[f]}]));if(R)return R}let E;const T=isValidHint(h)?this.pool.getRelay(h,!1,!0,[{ids:[f]}]):void 0,w=new Promise(R=>{this.fetchEvent(f,s,T).then(R)});if(!isValidHint(h)||o.type==="none")return w;const A=new Promise(async R=>{const V=o.relaySet,te=o.timeout??1500,se=new Promise(re=>setTimeout(re,te));if(o.type==="timeout"&&await se,E)R(E);else{a("fallback fetch triggered");const re=await this.fetchEvent(f,s,V);R(re)}});switch(o.type){case"timeout":return Promise.race([w,A]);case"eose":return E=await w,E||A}}var Queue=class{queue=[];maxConcurrency;processing=new Set;promises=new Map;constructor(n,e){this.maxConcurrency=e}add(n){if(this.promises.has(n.id))return this.promises.get(n.id);const e=new Promise((s,o)=>{this.queue.push({...n,func:()=>n.func().then(a=>(s(a),a),a=>{throw o(a),a})}),this.process()});return this.promises.set(n.id,e),e.finally(()=>{this.promises.delete(n.id),this.processing.delete(n.id),this.process()}),e}process(){if(this.processing.size>=this.maxConcurrency||this.queue.length===0)return;const n=this.queue.shift();!n||this.processing.has(n.id)||(this.processing.add(n.id),n.func())}clear(){this.queue=[]}clearProcessing(){this.processing.clear()}clearAll(){this.clear(),this.clearProcessing()}length(){return this.queue.length}},DEFAULT_OUTBOX_RELAYS=["wss://purplepag.es/","wss://nos.lol/"],DEFAULT_BLACKLISTED_RELAYS=["wss://brb.io/","wss://nostr.mutinywallet.com/"],NDK=class extends libExports.EventEmitter{_explicitRelayUrls;blacklistRelayUrls;pool;outboxPool;_signer;_activeUser;cacheAdapter;debug;devWriteRelaySet;outboxTracker;mutedIds;clientName;clientNip89;queuesZapConfig;queuesNip05;asyncSigVerification=!1;initialValidationRatio=1;lowestValidationRatio=.1;validationRatioFn;autoBlacklistInvalidRelays=!1;subManager;_signatureVerificationFunction;_signatureVerificationWorker;signatureVerificationTimeMs=0;publishingFailureHandled=!1;pools=[];relayAuthDefaultPolicy;httpFetch;netDebug;autoConnectUserRelays=!0;autoFetchUserMutelist=!0;walletConfig;constructor(n={}){super(),this.debug=n.debug||createDebug5("ndk"),this.netDebug=n.netDebug,this._explicitRelayUrls=n.explicitRelayUrls||[],this.blacklistRelayUrls=n.blacklistRelayUrls||DEFAULT_BLACKLISTED_RELAYS,this.subManager=new NDKSubscriptionManager,this.pool=new NDKPool(n.explicitRelayUrls||[],[],this),this.pool.name="Main",this.pool.on("relay:auth",async(e,s)=>{this.relayAuthDefaultPolicy&&await this.relayAuthDefaultPolicy(e,s)}),this.autoConnectUserRelays=n.autoConnectUserRelays??!0,this.autoFetchUserMutelist=n.autoFetchUserMutelist??!0,this.clientName=n.clientName,this.clientNip89=n.clientNip89,this.relayAuthDefaultPolicy=n.relayAuthDefaultPolicy,n.enableOutboxModel&&(this.outboxPool=new NDKPool(n.outboxRelayUrls||DEFAULT_OUTBOX_RELAYS,[],this,{debug:this.debug.extend("outbox-pool"),name:"Outbox Pool"}),this.outboxTracker=new OutboxTracker(this)),this.signer=n.signer,this.cacheAdapter=n.cacheAdapter,this.mutedIds=n.mutedIds||new Map,n.devWriteRelayUrls&&(this.devWriteRelaySet=NDKRelaySet.fromRelayUrls(n.devWriteRelayUrls,this)),this.queuesZapConfig=new Queue("zaps",3),this.queuesNip05=new Queue("nip05",10),n.signatureVerificationWorker&&(this.signatureVerificationWorker=n.signatureVerificationWorker),n.signatureVerificationFunction&&(this.signatureVerificationFunction=n.signatureVerificationFunction),this.initialValidationRatio=n.initialValidationRatio||1,this.lowestValidationRatio=n.lowestValidationRatio||.1,this.autoBlacklistInvalidRelays=n.autoBlacklistInvalidRelays||!1,this.validationRatioFn=n.validationRatioFn||this.defaultValidationRatioFn;try{this.httpFetch=fetch}catch{}}set explicitRelayUrls(n){this._explicitRelayUrls=n.map(normalizeRelayUrl),this.pool.relayUrls=n}get explicitRelayUrls(){return this._explicitRelayUrls||[]}set signatureVerificationWorker(n){this._signatureVerificationWorker=n,n?(signatureVerificationInit(n),this.asyncSigVerification=!0):this.asyncSigVerification=!1}set signatureVerificationFunction(n){this._signatureVerificationFunction=n,this.asyncSigVerification=!!n}get signatureVerificationFunction(){return this._signatureVerificationFunction}addExplicitRelay(n,e,s=!0){let o;return typeof n=="string"?o=new NDKRelay(n,e,this):o=n,this.pool.addRelay(o,s),this.explicitRelayUrls?.push(o.url),o}toJSON(){return{relayCount:this.pool.relays.size}.toString()}get activeUser(){return this._activeUser}set activeUser(n){const e=this._activeUser?.pubkey!==n?.pubkey;this._activeUser=n,n&&e?setActiveUser.call(this,n):n||(this.mutedIds=new Map)}get signer(){return this._signer}set signer(n){this._signer=n,n&&this.emit("signer:ready",n),n?.user().then(e=>{e.ndk=this,this.activeUser=e})}async connect(n){this._signer&&this.autoConnectUserRelays&&(this.debug("Attempting to connect to user relays specified by signer %o",await this._signer.relays?.(this)),this._signer.relays&&(await this._signer.relays(this)).forEach(o=>this.pool.addRelay(o)));const e=[this.pool.connect(n)];return this.outboxPool&&e.push(this.outboxPool.connect(n)),Promise.allSettled(e).then(()=>{})}reportInvalidSignature(n,e){this.debug(`Invalid signature detected for event ${n.id}${e?` from relay ${e.url}`:""}`),this.emit("event:invalid-sig",n,e),this.autoBlacklistInvalidRelays&&e&&this.blacklistRelay(e.url)}blacklistRelay(n){if(this.blacklistRelayUrls||(this.blacklistRelayUrls=[]),!this.blacklistRelayUrls.includes(n)){this.blacklistRelayUrls.push(n),this.debug(`Added relay to blacklist: ${n}`);const e=this.pool.getRelay(n,!1,!1);e&&(e.disconnect(),this.debug(`Disconnected from blacklisted relay: ${n}`))}}defaultValidationRatioFn(n,e,s){if(e<10)return this.initialValidationRatio;const o=Math.min(e/100,1),a=this.initialValidationRatio*(1-o)+this.lowestValidationRatio*o;return Math.max(a,this.lowestValidationRatio)}getUser(n){const e=new NDKUser(n);return e.ndk=this,e}async getUserFromNip05(n,e=!1){return NDKUser.fromNip05(n,this,e)}subscribe(n,e,s=!0,o=!0){let a=e?.relaySet,c=o;s instanceof NDKRelaySet?(console.warn("relaySet is deprecated, use opts.relaySet instead. This will be removed in version v2.14.0"),a=s,c=o):(typeof s=="boolean"||typeof s=="object")&&(c=s);const f=new NDKSubscription(this,n,{relaySet:a,...e});this.subManager.add(f);const h=f.pool;if(f.relaySet)for(const m of f.relaySet.relays)h.useTemporaryRelay(m,void 0,f.filters);if(this.outboxPool&&f.hasAuthorsFilter()){const m=f.filters.filter(g=>g.authors&&g.authors?.length>0).flatMap(g=>g.authors);this.outboxTracker?.trackUsers(m)}if(c){let m;typeof c=="object"&&(c.onEvent&&f.on("event",c.onEvent),c.onEose&&f.on("eose",c.onEose),c.onEvents&&(m=c.onEvents)),setTimeout(()=>{const g=f.start(!m);g&&g.length>0&&m&&m(g)},0)}return f}fetchEventFromTag=fetchEventFromTag.bind(this);fetchEventSync(n){if(!this.cacheAdapter)throw new Error("Cache adapter not set");let e;typeof n=="string"?e=[filterFromId(n)]:e=n;const s=new NDKSubscription(this,e),o=this.cacheAdapter.query(s);if(o instanceof Promise)throw new Error("Cache adapter is async");return o.map(a=>(a.ndk=this,a))}async fetchEvent(n,e,s){let o,a;if(s instanceof NDKRelay?a=new NDKRelaySet(new Set([s]),this):s instanceof NDKRelaySet&&(a=s),!s&&typeof n=="string"&&!isNip33AValue(n)){const c=relaysFromBech32(n,this);c.length>0&&(a=new NDKRelaySet(new Set(c),this),a=correctRelaySet(a,this.pool))}if(typeof n=="string"?o=[filterFromId(n)]:Array.isArray(n)?o=n:o=[n],o.length===0)throw new Error(`Invalid filter: ${JSON.stringify(n)}`);return new Promise(c=>{let f=null;const h={...e||{},closeOnEose:!0};a&&(h.relaySet=a);const m=this.subscribe(o,h,!1),g=setTimeout(()=>{m.stop(),c(f)},1e4);m.on("event",_=>{_.ndk=this,_.isReplaceable()?(!f||f.created_at<_.created_at)&&(f=_):(clearTimeout(g),c(_))}),m.on("eose",()=>{clearTimeout(g),c(f)}),m.start()})}async fetchEvents(n,e,s){return new Promise(o=>{const a=new Map,c={...e||{},closeOnEose:!0};s&&(c.relaySet=s);const f=this.subscribe(n,c,!1),h=m=>{let g;m instanceof NDKEvent?g=m:g=new NDKEvent(void 0,m);const _=g.deduplicationKey(),E=a.get(_);E&&(g=dedup(E,g)),g.ndk=this,a.set(_,g)};f.on("event",h),f.on("eose",()=>{o(new Set(a.values()))}),f.start()})}assertSigner(){if(!this.signer)throw this.emit("signer:required"),new Error("Signer required")}getEntity=getEntity.bind(this);set wallet(n){if(!n){this.walletConfig=void 0;return}this.walletConfig??={},this.walletConfig.lnPay=n?.lnPay?.bind(n),this.walletConfig.cashuPay=n?.cashuPay?.bind(n)}};createDebug5("ndk:zapper:ln");createDebug5("ndk:zapper");const ndk=new NDK({explicitRelayUrls:["wss://relay.damus.io","wss://relay.primal.net"]}),useDecentralizedIdentity=(n,e)=>{const[s,o]=reactExports.useState(!1),[a,c]=reactExports.useState(null),[f,h]=reactExports.useState(n||""),[m,g]=reactExports.useState(e||"");reactExports.useEffect(()=>{const ye=localStorage.getItem("local_npub"),D=localStorage.getItem("local_nsec");ye&&h(ye),D&&g(D),ndk.connect().then(()=>{o(!0)}).catch(ae=>{console.error("Error connecting to Nostr:",ae),c(ae.message)})},[]);const _=async(ye=null)=>{const D=NDKPrivateKeySigner.generate(),ae=D.privateKey,H=(await D.user()).npub,X=distExports$1.bech32.encode("nsec",distExports$1.bech32.toWords(bufferExports.Buffer.from(ae,"hex")));return g(X),h(H),localStorage.getItem("local_nsec")||(w(JSON.stringify({name:ye,about:"A student onboarded with Robots Building Education"}),0,H),w("gm nostr! I've joined #LearnWithNostr from Tiktok by creating an account with https://robotsbuildingeducation.com so I can learn how to code with AI.",1,H)),localStorage.setItem("local_nsec",X),localStorage.setItem("local_npub",H),localStorage.setItem("uniqueId",H),{npub:H,nsec:X}},E=async(ye=null,D=null)=>{const z="npub1mgt5c7qh6dm9rg57mrp89rqtzn64958nj5w9g2d2h9dng27hmp0sww7u2v",H=D||localStorage.getItem("local_nsec")||m||void 0,X=ye||localStorage.getItem("local_npub")||f||z;try{const{words:le}=distExports$1.bech32.decode(H),Z=bufferExports.Buffer.from(distExports$1.bech32.fromWords(le)).toString("hex"),{words:ne}=distExports$1.bech32.decode(X),W=bufferExports.Buffer.from(distExports$1.bech32.fromWords(ne)).toString("hex"),xe=new NDK({explicitRelayUrls:["wss://relay.damus.io","wss://relay.primal.net"]});return await xe.connect(),o(!0),{ndkInstance:xe,hexNpub:W,signer:new NDKPrivateKeySigner(Z)}}catch(le){return console.error("Error connecting to Nostr:",le),c(le.message),null}},T=async ye=>{try{const{words:D}=distExports$1.bech32.decode(ye),ae=bufferExports.Buffer.from(distExports$1.bech32.fromWords(D)).toString("hex"),z=new NDKPrivateKeySigner(ae);await z.blockUntilReady(),ndk.signer=z;const H=await z.user();return h(H.npub),g(ye),localStorage.setItem("local_npub",H.npub),localStorage.setItem("local_nsec",ye),c(null),{user:H,signer:z}}catch(D){return console.error("Error logging in with keys:",D),c(D.message),null}},w=async(ye,D=NDKKind.Text,ae=null)=>{try{if(ae&&!await T(ae))return;if(!ndk.signer){c("No signer available. Please login first.");return}const z=new NDKEvent(ndk,{kind:D,tags:[],content:ye,created_at:Math.floor(Date.now()/1e3)});await z.sign(ndk.signer);const H=await z.publish();H.size>0?console.log("Posted successfully to relays:",Array.from(H)):console.warn("No relay acknowledged the event.")}catch(z){console.error("Error posting content:",z),c(z.message)}},A=ye=>{const{words:D}=distExports$1.bech32.decode(ye);return bufferExports.Buffer.from(distExports$1.bech32.fromWords(D)).toString("hex")},R=async(ye,D=localStorage.getItem("local_npub"),ae=void 0)=>{if(!D){console.error("Awardee public key is required to award the badge.");return}if(!ae){console.error("Owner's private key is required to sign the badge award event.");return}const{words:z}=distExports$1.bech32.decode(ae),H=bufferExports.Buffer.from(distExports$1.bech32.fromWords(z)).toString("hex");let X=new NDKPrivateKeySigner(H);const le=new NDKEvent(ndk,{kind:NDKKind.BadgeAward,tags:[["a",`${NDKKind.BadgeDefinition}:${A("npub14vskcp90k6gwp6sxjs2jwwqpcmahg6wz3h5vzq0yn6crrsq0utts52axlt")}:${ye}`],["p",A(localStorage.getItem("local_npub"))]],created_at:Math.floor(Date.now()/1e3)});try{await le.sign(X)}catch(Z){console.error("Error signing badge event:",Z)}try{await le.publish()}catch(Z){console.error("Error publishing badge event:",Z)}},V=async ye=>{try{const D=await E();if(!D)return[];const{ndkInstance:ae}=D;let z=ye.split(":");const H={kinds:[NDKKind.BadgeDefinition],authors:[z[1]],"#d":[z[2]],limit:1},X=ae.subscribe(H,{closeOnEose:!0}),le=[];return X.on("event",Z=>{const ne={content:Z.content,createdAt:Z.created_at,tags:Z.tags,badgeAddress:ye};le.push(ne)}),await new Promise(Z=>X.on("eose",Z)),le}catch(D){return console.error("Error retrieving badges:",D),c(D.message),[]}};return{isConnected:s,errorMessage:a,nostrPubKey:f,nostrPrivKey:m,generateNostrKeys:_,postNostrContent:w,auth:T,assignExistingBadgeToNpub:R,getUserBadges:async(ye=localStorage.getItem("local_npub"))=>{try{const D=await E();if(!D)return[];const{ndkInstance:ae}=D,z=A(ye),H={kinds:[NDKKind.BadgeAward],"#p":[z],limit:100},X=ae.subscribe(H,{closeOnEose:!0}),le=[];X.on("event",de=>{const oe={content:de.content,createdAt:de.created_at,tags:de.tags};le.push(oe)}),await new Promise(de=>X.on("eose",de));let ne=[...new Set(le.flatMap(de=>de.tags.filter(oe=>oe[0]==="a"&&oe[1]).map(oe=>oe[1])))].map(de=>V(de)),W=await Promise.all(ne);const xe=[];return W.forEach(de=>{de.forEach(oe=>{let _e="",Re="";oe.tags.forEach(Ie=>{Ie[0]==="name"&&(_e=Ie[1]),Ie[0]==="image"&&(Re=Ie[1])}),_e&&Re&&xe.push({name:_e,image:Re,badgeAddress:oe.badgeAddress})})}),xe}catch(D){return console.error("Error retrieving badges:",D),[]}},getLastNotesByNpub:async(ye=localStorage.getItem("local_npub"))=>{try{const D=await E();if(!D)return[];const{ndkInstance:ae}=D,z=A(ye),H={kinds:[NDKKind.Text],authors:[z],limit:5},X=ae.subscribe(H,{closeOnEose:!0}),le=[];return X.on("event",Z=>{le.push({content:Z.content,createdAt:Z.created_at,tags:Z.tags,id:Z.id})}),await new Promise(Z=>X.on("eose",Z)),le}catch(D){return console.error("Error retrieving notes:",D),c(D.message),[]}},getGlobalNotesWithProfilesByHashtag:async(ye="LearnWithNostr")=>{try{const D=await E();if(!D)return[];const{ndkInstance:ae}=D,z={kinds:[NDKKind.Text],"#t":[ye],limit:50},H=ae.subscribe(z,{closeOnEose:!0}),X=[],le=new Set;H.on("event",de=>{X.push({content:de.content,createdAt:de.created_at,tags:de.tags,id:de.id,pubkey:de.pubkey,npub:distExports$1.bech32.encode("npub",distExports$1.bech32.toWords(bufferExports.Buffer.from(de.pubkey,"hex"))),profile:null}),le.add(de.pubkey)}),await new Promise(de=>H.on("eose",de));const Z={kinds:[NDKKind.Metadata],authors:Array.from(le)},ne=ae.subscribe(Z,{closeOnEose:!0}),W=new Map;return ne.on("event",de=>{const oe=JSON.parse(de.content);W.set(de.pubkey,{name:oe.name||"New Private User",about:oe.about||"",picture:oe.picture||""})}),await new Promise(de=>ne.on("eose",de)),X.map(de=>(de.profile=W.get(de.pubkey)||{name:"New Private User",about:"",picture:""},de))}catch(D){return console.error("Error fetching notes with profiles:",D),[]}}}},createStoreImpl=n=>{let e;const s=new Set,o=(g,_)=>{const E=typeof g=="function"?g(e):g;if(!Object.is(E,e)){const T=e;e=_??(typeof E!="object"||E===null)?E:Object.assign({},e,E),s.forEach(w=>w(e,T))}},a=()=>e,h={setState:o,getState:a,getInitialState:()=>m,subscribe:g=>(s.add(g),()=>s.delete(g))},m=e=n(o,a,h);return h},createStore=(n=>n?createStoreImpl(n):createStoreImpl),identity=n=>n;function useStore(n,e=identity){const s=React.useSyncExternalStore(n.subscribe,React.useCallback(()=>e(n.getState()),[n,e]),React.useCallback(()=>e(n.getInitialState()),[n,e]));return React.useDebugValue(s),s}const createImpl=n=>{const e=createStore(n),s=o=>useStore(e,o);return Object.assign(s,e),s},create=(n=>n?createImpl(n):createImpl),useUserStore=create((n,e)=>({user:null,setUser:s=>n({user:s}),patchUser:s=>n({user:{...e().user||{},...s}})})),DEFAULT_CHALLENGE={en:"Make a polite request.",es:"Pide algo con cortesía."},DEFAULT_PERSONA="Like a sarcastic, semi-friendly toxica.",isTrue=n=>n===!0||n==="true"||n===1||n==="1";async function ensureOnboardingField(n,e,s){const a=s?.onboarding&&typeof s.onboarding=="object"&&Object.prototype.hasOwnProperty.call(s.onboarding,"completed"),c=Object.prototype.hasOwnProperty.call(s||{},"onboardingCompleted");if(!a&&!c){await setDoc(doc(n,"users",e),{onboarding:{completed:!1}},{merge:!0});const f=await getDoc(doc(n,"users",e));return f.exists()?{id:f.id,...f.data()}:s}return s}async function loadUserObjectFromDB(n,e){if(!e)return null;try{const s=doc(n,"users",e),o=await getDoc(s);if(!o.exists())return null;let a={id:o.id,...o.data()};return a=await ensureOnboardingField(n,e,a),a}catch(s){return console.error("loadUserObjectFromDB failed:",s),null}}function App(){const[n,e]=reactExports.useState(!1),s=reactExports.useRef(!1),[o,a]=reactExports.useState(typeof window<"u"&&localStorage.getItem("local_npub")||""),[c,f]=reactExports.useState(typeof window<"u"&&localStorage.getItem("local_nsec")||""),h=useUserStore(R=>R.user),m=useUserStore(R=>R.setUser),{generateNostrKeys:g,auth:_}=useDecentralizedIdentity(localStorage.getItem("local_npub")??"",localStorage.getItem("local_nsec")??""),E=async()=>{e(!0);try{let R=(localStorage.getItem("local_npub")||"").trim(),V=null;if(R){if(V=await loadUserObjectFromDB(database,R),!V){const te={local_npub:R,createdAt:new Date().toISOString(),onboarding:{completed:!1}};await setDoc(doc(database,"users",R),te,{merge:!0}),V=await loadUserObjectFromDB(database,R)}}else{R=(await g()).npub;const se={local_npub:R,createdAt:new Date().toISOString(),onboarding:{completed:!1}};await setDoc(doc(database,"users",R),se,{merge:!0}),V=await loadUserObjectFromDB(database,R)}a(R),f(localStorage.getItem("local_nsec")||""),V&&m?.(V)}catch(R){console.error("connectDID error:",R)}finally{e(!1)}},T=async(R={})=>{try{const V=(localStorage.getItem("local_npub")||"").trim();if(!V)return;const te=(D,ae)=>D??ae,se={level:te(R.level,"beginner"),supportLang:["en","es","bilingual"].includes(R.supportLang)?R.supportLang:"en",voice:te(R.voice,"Leda"),voicePersona:te(R.voicePersona,DEFAULT_PERSONA),targetLang:R.targetLang==="nah"?"nah":"es",showTranslations:typeof R.showTranslations=="boolean"?R.showTranslations:!0,challenge:R?.challenge?.en&&R?.challenge?.es?R.challenge:{...DEFAULT_CHALLENGE},xp:0,streak:0},re=new Date().toISOString();await setDoc(doc(database,"users",V),{local_npub:V,updatedAt:re,onboarding:{completed:!0,completedAt:re},lastGoal:se.challenge.en,xp:0,streak:0,progress:{...se}},{merge:!0});const ye=await loadUserObjectFromDB(database,V);ye&&m?.(ye)}catch(V){console.error("Failed to complete onboarding:",V)}};reactExports.useEffect(()=>{s.current||(s.current=!0,E())},[]);const w=reactExports.useMemo(()=>{const R=h?.onboarding?.completed,V=h?.onboardingCompleted;return isTrue(R)||isTrue(V)},[h]),A=reactExports.useMemo(()=>!w,[w]);return n||!h?jsxRuntimeExports.jsx("div",{style:{padding:16,color:"#e2e8f0"},children:"Loading…"}):A?jsxRuntimeExports.jsx(Onboarding,{npub:o,onComplete:T}):jsxRuntimeExports.jsx(VoiceChat,{auth:_,activeNpub:o,activeNsec:c,onSwitchedAccount:async()=>{await E(),a(localStorage.getItem("local_npub")||""),f(localStorage.getItem("local_nsec")||"")}})}clientExports.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(ChakraProvider,{children:jsxRuntimeExports.jsx(App,{})}));
